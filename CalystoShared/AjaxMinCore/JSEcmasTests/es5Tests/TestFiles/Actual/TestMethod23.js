var __awaiter=this&&this.__awaiter||function(n,t,i,r){function u(f){return f instanceof i?f:new i(function(e){e(f)})}return new(i||(i=Promise))(function(o,s){function c(a){try{h(r.next(a))}catch(v){s(v)}}function l(y){try{h(r["throw"](y))}catch(p){s(p)}}function h(w){w.done?o(w.value):u(w.value).then(c,l)}h((r=r.apply(n,t||[])).next())})},__generator=this&&this.__generator||function(n,t){function o(h){return function(c){return s([h,c])}}function s(l){if(f)throw new TypeError("Generator is already executing.");while(r)try{if(f=1,u&&(i=l[0]&2?u["return"]:l[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,l[1])).done)return i;(u=0,i)&&(l=[l[0]&2,i.value]);switch(l[0]){case 0:case 1:i=l;break;case 4:r.label++;return{value:l[1],done:!1};case 5:r.label++;u=l[1],l=[0];continue;case 7:l=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){r.label=l[1];break}if(l[0]===6&&r.label<i[1]){r.label=i[1];i=l;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(l);break}i[2]&&r.ops.pop();r.trys.pop();continue}l=t.call(n,r)}catch(a){l=[6,a];u=0}finally{f=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},f,u,i,e;return e={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(e[Symbol.iterator]=function(){return this}),e},__values=this&&this.__values||function(n){var t=typeof Symbol=="function"&&Symbol.iterator,i=t&&n[t],r=0;if(i)return i.call(n);if(n&&typeof n.length=="number")return{next:function(){n&&r>=n.length&&(n=void 0);return{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.");},__extends=this&&this.__extends||function(){var n=function(t,i){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,u){r.__proto__=u}||function(f,e){for(var o in e)e.hasOwnProperty(o)&&(f[o]=e[o])};return n(t,i)};return function(s,h){function c(){this.constructor=s}n(s,h);s.prototype=h===null?Object.create(h):(c.prototype=h.prototype,new c)}}(),__assign=this&&this.__assign||function(){__assign=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n};return __assign.apply(this,arguments)},__read=this&&this.__read||function(n,t){var i=typeof Symbol=="function"&&n[Symbol.iterator],r,u,f,e;if(!i)return n;r=i.call(n);f=[];try{while((t===void 0||t-->0)&&!(u=r.next()).done)f.push(u.value)}catch(o){e={error:o}}finally{try{u&&!u.done&&(i=r["return"])&&i.call(r)}finally{if(e)throw e.error;}}return f},__spread=this&&this.__spread||function(){for(var n=[],t=0;t<arguments.length;t++)n=n.concat(__read(arguments[t]));return n},$$calysto,Calysto;(function(n){var t;(function(i){var r=function(){function u(f){var e=this;if(this.executor=f,this.executor)try{this.executor(function(s){return e.notifyResolved(s)},function(h){return e.notifyRejected(h)})}catch(o){this.notifyRejected(o)}}u.prototype.notifyResolved=function(c){this._isResolved=!0;this._resolveValue=c,this.notifyNext()};u.prototype.notifyRejected=function(l){this._isRejected=true,this._rejectValue=l,this.notifyNext()},u.prototype.notifyNext=function(){this._nextPromise&&!this._isNextNotified&&(this._isRejected&&this._nextPromise._onPreviousFailed?(this._isNextNotified=true,this._nextPromise._onPreviousFailed(this._rejectValue),this._nextPromise.notifyNext()):this._isResolved&&this._nextPromise._onPreviousSuccess&&(this._isNextNotified=true,this._nextPromise._onPreviousSuccess(this._resolveValue),this._nextPromise.notifyNext()))},u.prototype.then=function(a,v){var y=new u;y._onPreviousSuccess=function(p){var b,w,k;try{if(p&&p.then){b=p,b.then(function(g){return y._onPreviousSuccess(g)},function(nt){return y._onPreviousFailed(nt)});return}a||(a=function(tt){return tt}),w=a(p),w&&w.then?(k=w,k.then(function(it){y.notifyResolved(it)},function(rt){y.notifyRejected(rt)})):y.notifyResolved(w)}catch(d){y.notifyRejected(d)}},y._onPreviousFailed=function(ut){var ft,et;try{v||(v=function(st){throw st;}),ft=v(ut),ft&&ft.then?(et=ft,et.then(function(ht){y.notifyResolved(ht)},function(ct){y.notifyRejected(ct)})):y.notifyResolved(ft)}catch(ot){y.notifyRejected(ot)}},this._nextPromise=y,this.notifyNext();return y},u.prototype.catch=function(lt){return this.then(function(at){return at},lt||function(vt){return vt})},u.prototype.finally=function(yt){return this.then(yt?function(pt){yt();return pt}:function(wt){return wt},yt?function(bt){yt();throw bt;}:function(kt){return kt})},u.resolve=function(dt){return new u(function(gt){gt(dt)})},u.reject=function(ni){return new u(function(ti,ii){ii(ni)})};return u}();i.CPromise=r;window.Promise||(window.Promise=r)})(t=n.Tasks||(n.Tasks={}))})(Calysto||(Calysto={})),function(n){var t;(function(i){var r=function(){function u(){}Object.defineProperty(u.prototype,"IsCancelled",{get:function(){return this._isCancelled},enumerable:!1,configurable:!0});u.prototype.Watchdog=function(f){var e=this;this._timer=setTimeout(function(){e.Cancel(),e._onError&&e._onError("Timeout")},f)},u.prototype.Cancel=function(){clearTimeout(this._timer),this._isCancelled=true},u.prototype.OnError=function(o){this._onError=o},u.prototype.NotifyError=function(s){this.Cancel(),this._onError&&this._onError(s)},u.prototype.OnSuccess=function(h){this._onSuccess=h},u.prototype.NotifySuccess=function(c){this.Cancel(),this._onSuccess&&this._onSuccess(c)};return u}();i.TaskState=r})(t=n.Tasks||(n.Tasks={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){function f(o){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return[2,new Promise(function(s){setTimeout(function(){return s(!0)},o)})]})})}function e(h){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return[2,new Promise(function(c,l){var a=new i.TaskState;a.OnError(function(v){return l(v)});a.OnSuccess(function(y){return c(y)}),h(a)})]})})}u.SleepAsync=f;u.RunAsync=e})(r=i.TaskUtility||(i.TaskUtility={}))})(t=n.Tasks||(n.Tasks={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){u.Arrows_ArrowBlackDown="~/Images/Arrows/ArrowBlackDown.png";u.Arrows_ArrowBlackUp="~/Images/Arrows/ArrowBlackUp.png",u.Arrows_ArrowWhiteDown="~/Images/Arrows/ArrowWhiteDown.png",u.Arrows_ArrowWhiteUp="~/Images/Arrows/ArrowWhiteUp.png",u.Pictures_facebook_icon="~/Images/Pictures/facebook-icon.png",u.Pictures_Google_Plus_icon="~/Images/Pictures/Google-Plus-icon.png",u.Pictures_NoPhoto100="~/Images/Pictures/NoPhoto100.gif",u.Pictures_NoPhoto200="~/Images/Pictures/NoPhoto200.gif",u.Pictures_NoPhoto300="~/Images/Pictures/NoPhoto300.gif",u.Pictures_NoPhoto50="~/Images/Pictures/NoPhoto50.gif",u.WindowButtons_btnClose="~/Images/WindowButtons/btnClose.gif",u.WindowButtons_btnCloseHover="~/Images/WindowButtons/btnCloseHover.gif",u.WindowButtons_btnCloseInactive="~/Images/WindowButtons/btnCloseInactive.gif",u.WindowButtons_btnMaximized="~/Images/WindowButtons/btnMaximized.gif",u.WindowButtons_btnMaximizedHover="~/Images/WindowButtons/btnMaximizedHover.gif",u.WindowButtons_btnMaximizedInactive="~/Images/WindowButtons/btnMaximizedInactive.gif",u.WindowButtons_btnMinimize="~/Images/WindowButtons/btnMinimize.gif",u.WindowButtons_btnMinimizeHover="~/Images/WindowButtons/btnMinimizeHover.gif",u.WindowButtons_btnMinimizeInactive="~/Images/WindowButtons/btnMinimizeInactive.gif",u.WindowButtons_btnResize="~/Images/WindowButtons/btnResize.gif",u.WindowButtons_btnResizeHover="~/Images/WindowButtons/btnResizeHover.gif",u.WindowButtons_btnResizeInactive="~/Images/WindowButtons/btnResizeInactive.gif",u.WindowButtons_btnToolClose="~/Images/WindowButtons/btnToolClose.gif",u.WindowButtons_btnToolCloseHover="~/Images/WindowButtons/btnToolCloseHover.gif",u.Horoscope_Icons_aquarius_128="~/Images/Horoscope/Icons/aquarius_128.png",u.Horoscope_Icons_aries_128="~/Images/Horoscope/Icons/aries_128.png",u.Horoscope_Icons_cancer_128="~/Images/Horoscope/Icons/cancer_128.png",u.Horoscope_Icons_capricorn_128="~/Images/Horoscope/Icons/capricorn_128.png",u.Horoscope_Icons_gemini_128="~/Images/Horoscope/Icons/gemini_128.png",u.Horoscope_Icons_leo_128="~/Images/Horoscope/Icons/leo_128.png",u.Horoscope_Icons_libra_128="~/Images/Horoscope/Icons/libra_128.png",u.Horoscope_Icons_pisces_128="~/Images/Horoscope/Icons/pisces_128.png",u.Horoscope_Icons_sagittarius_128="~/Images/Horoscope/Icons/sagittarius_128.png",u.Horoscope_Icons_scorpio_128="~/Images/Horoscope/Icons/scorpio_128.png",u.Horoscope_Icons_taurus_128="~/Images/Horoscope/Icons/taurus_128.png",u.Horoscope_Icons_virgo_128="~/Images/Horoscope/Icons/virgo_128.png",u.Horoscope_Signs_aquarius_zodiac_sign="~/Images/Horoscope/Signs/aquarius_zodiac_sign.png",u.Horoscope_Signs_aries_zodiac_sign="~/Images/Horoscope/Signs/aries_zodiac_sign.png",u.Horoscope_Signs_cancer_zodiac_sign="~/Images/Horoscope/Signs/cancer_zodiac_sign.png",u.Horoscope_Signs_capricorn_zodiac_sign="~/Images/Horoscope/Signs/capricorn_zodiac_sign.png",u.Horoscope_Signs_gemini_zodiac_sign="~/Images/Horoscope/Signs/gemini_zodiac_sign.png",u.Horoscope_Signs_leo_zodiac_sign="~/Images/Horoscope/Signs/leo_zodiac_sign.png",u.Horoscope_Signs_libra_zodiac_sign="~/Images/Horoscope/Signs/libra_zodiac_sign.png",u.Horoscope_Signs_pisces_zodiac_sign="~/Images/Horoscope/Signs/pisces_zodiac_sign.png",u.Horoscope_Signs_sagittarius_zodiac_sign="~/Images/Horoscope/Signs/sagittarius_zodiac_sign.png",u.Horoscope_Signs_scorpio_zodiac_sign="~/Images/Horoscope/Signs/scorpio_zodiac_sign.png",u.Horoscope_Signs_taurus_zodiac_sign="~/Images/Horoscope/Signs/taurus_zodiac_sign.png",u.Horoscope_Signs_virgo_zodiac_sign="~/Images/Horoscope/Signs/virgo_zodiac_sign.png",u.Icons_Ajax2Preloader_Ajax12TrailBlack="~/Images/Icons/Ajax2Preloader/Ajax12TrailBlack.gif",u.Icons_Ajax2Preloader_Ajax14FlowerBlack="~/Images/Icons/Ajax2Preloader/Ajax14FlowerBlack.gif",u.Icons_Ajax2Preloader_Ajax14TrailBlack="~/Images/Icons/Ajax2Preloader/Ajax14TrailBlack.gif",u.Icons_Ajax2Preloader_Ajax16ArcBlack="~/Images/Icons/Ajax2Preloader/Ajax16ArcBlack.gif",u.Icons_Ajax2Preloader_Ajax16ArrowsBlack="~/Images/Icons/Ajax2Preloader/Ajax16ArrowsBlack.gif",u.Icons_Ajax2Preloader_Ajax16DotBlack="~/Images/Icons/Ajax2Preloader/Ajax16DotBlack.gif",u.Icons_Ajax2Preloader_Ajax24DotBlack="~/Images/Icons/Ajax2Preloader/Ajax24DotBlack.gif",u.Icons_Ajax2Preloader_Ajax24DotBlue="~/Images/Icons/Ajax2Preloader/Ajax24DotBlue.gif",u.Icons_Ajax2Preloader_Ajax24DotRed="~/Images/Icons/Ajax2Preloader/Ajax24DotRed.gif",u.Icons_Ajax2Preloader_Ajax32SandClock="~/Images/Icons/Ajax2Preloader/Ajax32SandClock.png",u.Icons_Ajax2Preloader_FB_black_small="~/Images/Icons/Ajax2Preloader/FB_black_small.gif",u.Icons_Ajax2Preloader_skype_black2white="~/Images/Icons/Ajax2Preloader/skype_black2white.GIF",u.Icons_Ajax2Preloader_skype_blue2white="~/Images/Icons/Ajax2Preloader/skype_blue2white.GIF",u.Icons_Ajax2Preloader_skype_green2white="~/Images/Icons/Ajax2Preloader/skype_green2white.GIF",u.Icons_Ajax2Preloader_skype_red2white="~/Images/Icons/Ajax2Preloader/skype_red2white.GIF",u.Icons_Ajax2Preloader_skype_white2black="~/Images/Icons/Ajax2Preloader/skype_white2black.GIF",u.Icons_Smiley_angry="~/Images/Icons/Smiley/angry.gif",u.Icons_Smiley_applause="~/Images/Icons/Smiley/applause.gif",u.Icons_Smiley_bigGrin="~/Images/Icons/Smiley/bigGrin.gif",u.Icons_Smiley_bigHug="~/Images/Icons/Smiley/bigHug.gif",u.Icons_Smiley_confused="~/Images/Icons/Smiley/confused.gif",u.Icons_Smiley_cool="~/Images/Icons/Smiley/cool.gif",u.Icons_Smiley_crying="~/Images/Icons/Smiley/crying.gif",u.Icons_Smiley_dancing="~/Images/Icons/Smiley/dancing.gif",u.Icons_Smiley_devil="~/Images/Icons/Smiley/devil.gif",u.Icons_Smiley_dontTellAnyone="~/Images/Icons/Smiley/dontTellAnyone.gif",u.Icons_Smiley_happy="~/Images/Icons/Smiley/happy.gif",u.Icons_Smiley_hurryUp="~/Images/Icons/Smiley/hurryUp.gif",u.Icons_Smiley_kiss="~/Images/Icons/Smiley/kiss.gif",u.Icons_Smiley_laughing="~/Images/Icons/Smiley/laughing.gif",u.Icons_Smiley_notWorthy="~/Images/Icons/Smiley/notWorthy.gif",u.Icons_Smiley_party="~/Images/Icons/Smiley/party.gif",u.Icons_Smiley_rockOn="~/Images/Icons/Smiley/rockOn.gif",u.Icons_Smiley_rollingOnTheFloor="~/Images/Icons/Smiley/rollingOnTheFloor.gif",u.Icons_Smiley_sad="~/Images/Icons/Smiley/sad.gif",u.Icons_Smiley_surprise="~/Images/Icons/Smiley/surprise.gif",u.Icons_Smiley_thinking="~/Images/Icons/Smiley/thinking.gif",u.Icons_Smiley_thumbsDown="~/Images/Icons/Smiley/thumbsDown.gif",u.Icons_Smiley_tongue="~/Images/Icons/Smiley/tongue.gif",u.Icons_Smiley_winking="~/Images/Icons/Smiley/winking.gif",u.WindowButtons_Original_PNG_btnClose="~/Images/WindowButtons/Original_PNG/btnClose.png",u.WindowButtons_Original_PNG_btnCloseHover="~/Images/WindowButtons/Original_PNG/btnCloseHover.png",u.WindowButtons_Original_PNG_btnCloseInactive="~/Images/WindowButtons/Original_PNG/btnCloseInactive.png",u.WindowButtons_Original_PNG_btnMaximized="~/Images/WindowButtons/Original_PNG/btnMaximized.png",u.WindowButtons_Original_PNG_btnMaximizedHover="~/Images/WindowButtons/Original_PNG/btnMaximizedHover.png",u.WindowButtons_Original_PNG_btnMaximizedInactive="~/Images/WindowButtons/Original_PNG/btnMaximizedInactive.png",u.WindowButtons_Original_PNG_btnMinimize="~/Images/WindowButtons/Original_PNG/btnMinimize.png",u.WindowButtons_Original_PNG_btnMinimizeHover="~/Images/WindowButtons/Original_PNG/btnMinimizeHover.png",u.WindowButtons_Original_PNG_btnMinimizeInactive="~/Images/WindowButtons/Original_PNG/btnMinimizeInactive.png",u.WindowButtons_Original_PNG_btnResize="~/Images/WindowButtons/Original_PNG/btnResize.png",u.WindowButtons_Original_PNG_btnResizeHover="~/Images/WindowButtons/Original_PNG/btnResizeHover.png",u.WindowButtons_Original_PNG_btnResizeInactive="~/Images/WindowButtons/Original_PNG/btnResizeInactive.png",u.WindowButtons_Original_PNG_btnToolClose="~/Images/WindowButtons/Original_PNG/btnToolClose.png",u.WindowButtons_Original_PNG_btnToolCloseHover="~/Images/WindowButtons/Original_PNG/btnToolCloseHover.png",u.Icons_s32_aha_Apply="~/Images/Icons/s32/aha/Apply.png",u.Icons_s32_aha_Back="~/Images/Icons/s32/aha/Back.png",u.Icons_s32_aha_Cancel="~/Images/Icons/s32/aha/Cancel.png",u.Icons_s32_aha_Close="~/Images/Icons/s32/aha/Close.png",u.Icons_s32_aha_Danger="~/Images/Icons/s32/aha/Danger.png",u.Icons_s32_aha_Delete="~/Images/Icons/s32/aha/Delete.png",u.Icons_s32_aha_EditPage="~/Images/Icons/s32/aha/EditPage.png",u.Icons_s32_aha_Error="~/Images/Icons/s32/aha/Error.png",u.Icons_s32_aha_Forward="~/Images/Icons/s32/aha/Forward.png",u.Icons_s32_aha_GoDown="~/Images/Icons/s32/aha/GoDown.png",u.Icons_s32_aha_GoUp="~/Images/Icons/s32/aha/GoUp.png",u.Icons_s32_aha_Help="~/Images/Icons/s32/aha/Help.png",u.Icons_s32_aha_Info="~/Images/Icons/s32/aha/Info.png",u.Icons_s32_aha_No="~/Images/Icons/s32/aha/No.png",u.Icons_s32_aha_Ok="~/Images/Icons/s32/aha/Ok.png",u.Icons_s32_aha_Pencil="~/Images/Icons/s32/aha/Pencil.png",u.Icons_s32_aha_Picture="~/Images/Icons/s32/aha/Picture.png",u.Icons_s32_aha_Play="~/Images/Icons/s32/aha/Play.png",u.Icons_s32_aha_Refresh="~/Images/Icons/s32/aha/Refresh.png",u.Icons_s32_aha_Settings="~/Images/Icons/s32/aha/Settings.png",u.Icons_s32_aha_Show="~/Images/Icons/s32/aha/Show.png",u.Icons_s32_aha_Stop="~/Images/Icons/s32/aha/Stop.png",u.Icons_s32_aha_StopPlaying="~/Images/Icons/s32/aha/StopPlaying.png",u.Icons_s32_aha_Warning="~/Images/Icons/s32/aha/Warning.png",u.Icons_s32_aha_Wrong="~/Images/Icons/s32/aha/Wrong.png",u.Icons_s32_fatcow_film="~/Images/Icons/s32/fatcow/film.png",u.Icons_s16_silk_icons_accept="~/Images/Icons/s16/silk/icons/accept.png",u.Icons_s16_silk_icons_add="~/Images/Icons/s16/silk/icons/add.png",u.Icons_s16_silk_icons_anchor="~/Images/Icons/s16/silk/icons/anchor.png",u.Icons_s16_silk_icons_application="~/Images/Icons/s16/silk/icons/application.png",u.Icons_s16_silk_icons_application_edit="~/Images/Icons/s16/silk/icons/application_edit.png",u.Icons_s16_silk_icons_brick_edit="~/Images/Icons/s16/silk/icons/brick_edit.png",u.Icons_s16_silk_icons_cancel="~/Images/Icons/s16/silk/icons/cancel.png",u.Icons_s16_silk_icons_cross="~/Images/Icons/s16/silk/icons/cross.png",u.Icons_s16_silk_icons_date="~/Images/Icons/s16/silk/icons/date.png",u.Icons_s16_silk_icons_delete="~/Images/Icons/s16/silk/icons/delete.png",u.Icons_s16_silk_icons_disconnect="~/Images/Icons/s16/silk/icons/disconnect.png",u.Icons_s16_silk_icons_disk="~/Images/Icons/s16/silk/icons/disk.png",u.Icons_s16_silk_icons_error="~/Images/Icons/s16/silk/icons/error.png",u.Icons_s16_silk_icons_exclamation="~/Images/Icons/s16/silk/icons/exclamation.png",u.Icons_s16_silk_icons_eye="~/Images/Icons/s16/silk/icons/eye.png",u.Icons_s16_silk_icons_feed="~/Images/Icons/s16/silk/icons/feed.png",u.Icons_s16_silk_icons_help="~/Images/Icons/s16/silk/icons/help.png",u.Icons_s16_silk_icons_hourglass="~/Images/Icons/s16/silk/icons/hourglass.png",u.Icons_s16_silk_icons_lock_break="~/Images/Icons/s16/silk/icons/lock_break.png",u.Icons_s16_silk_icons_magifier_zoom_out="~/Images/Icons/s16/silk/icons/magifier_zoom_out.png",u.Icons_s16_silk_icons_magnifier="~/Images/Icons/s16/silk/icons/magnifier.png",u.Icons_s16_silk_icons_magnifier_zoom_in="~/Images/Icons/s16/silk/icons/magnifier_zoom_in.png",u.Icons_s16_silk_icons_male="~/Images/Icons/s16/silk/icons/male.png",u.Icons_s16_silk_icons_map="~/Images/Icons/s16/silk/icons/map.png",u.Icons_s16_silk_icons_page_add="~/Images/Icons/s16/silk/icons/page_add.png",u.Icons_s16_silk_icons_page_edit="~/Images/Icons/s16/silk/icons/page_edit.png",u.Icons_s16_silk_icons_page_white="~/Images/Icons/s16/silk/icons/page_white.png",u.Icons_s16_silk_icons_picture="~/Images/Icons/s16/silk/icons/picture.png",u.Icons_s16_silk_icons_pictures="~/Images/Icons/s16/silk/icons/pictures.png",u.Icons_s16_silk_icons_picture_add="~/Images/Icons/s16/silk/icons/picture_add.png",u.Icons_s16_silk_icons_plugin="~/Images/Icons/s16/silk/icons/plugin.png",u.Icons_s16_silk_icons_plugin_edit="~/Images/Icons/s16/silk/icons/plugin_edit.png",u.Icons_s16_silk_icons_stop="~/Images/Icons/s16/silk/icons/stop.png",u.Icons_s16_silk_icons_thumb_down="~/Images/Icons/s16/silk/icons/thumb_down.png",u.Icons_s16_silk_icons_thumb_up="~/Images/Icons/s16/silk/icons/thumb_up.png",u.Icons_s16_silk_icons_tick="~/Images/Icons/s16/silk/icons/tick.png",u.Icons_s16_silk_icons_time="~/Images/Icons/s16/silk/icons/time.png",u.Icons_s16_silk_icons_user="~/Images/Icons/s16/silk/icons/user.png",u.Icons_s16_silk_icons_zoom="~/Images/Icons/s16/silk/icons/zoom.png",u.Icons_s16_silk_icons_zoom_in="~/Images/Icons/s16/silk/icons/zoom_in.png",u.Icons_s16_silk_icons_zoom_out="~/Images/Icons/s16/silk/icons/zoom_out.png"})(r=i.Images||(i.Images={}))})(t=n.Resources||(n.Resources={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){i.AppConstants={EmailRegexPattern:"^[\\w\\.\\+\\-_']+[@][\\w\\+\\-_']+?[\\.][\\w\\.\\+\\-_']+$",BroadcastMethodName:"$broadcast-message$"}})(t=n.Constants||(n.Constants={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){u.XAjaxHeaderKey="calysto-x-ajax";u.XAjaxHeaderValue="calysto-ajax",u.XExceptionHeaderValue="calysto-exception",u.XTypeHeaderKey="calysto-x-type",u.XTypeHeaderBinaryFrameValue="calysto-binary-frame",u.XCalystoAjaxFormKey="calysto-x-ajax-form",u.XCalystoAjaxFormValue="calysto-yes",u.XCalystoAjaxLoadKey="calysto-x-ajax-load",u.XCalystoAjaxLoadValue="calysto-yes",u.XCalystoResponseContainerKey="calysto-x-container",u.XCalystoResponseContainerValue="calysto-yes"})(r=i.WsjsHeaderConstants||(i.WsjsHeaderConstants={}))})(t=n.Constants||(n.Constants={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){i.PredefinedCultures={"en-US":{Name:"en-US",NativeName:"English (United States)",DisplayName:"English (United States)",EnglishName:"English (United States)",ThreeLetterISOLanguageName:"eng",ThreeLetterWindowsLanguageName:"ENU",TwoLetterISOLanguageName:"en",DateTimeFormat:{ShortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],AbbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],DayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],AbbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""],MonthNames:["January","February","March","April","May","June","July","August","September","October","November","December",""],FirstDayOfWeek:0,LongDatePattern:"dddd, MMMM d, yyyy",LongTimePattern:"h:mm:ss tt",MonthDayPattern:"MMMM d",ShortDatePattern:"M/d/yyyy",ShortTimePattern:"h:mm tt",GeneralLongTimePattern:"M/d/yyyy h:mm:ss tt",GeneralShortTimePattern:"M/d/yyyy h:mm tt"},NumberFormat:{CurrencySymbol:"$",NumberDecimalSeparator:".",NumberGroupSeparator:",",PerMilleSymbol:"‰",PercentSymbol:"%",CurrencyPositivePattern:0,CurrencyPositivePatternString:"{CurrencySymbol}{Value}"},Region:{CurrencyEnglishName:"US Dollar",CurrencyNativeName:"US Dollar",CurrencySymbol:"$",DisplayName:"United States",EnglishName:"United States",IsMetric:!1,ISOCurrencySymbol:"USD",Name:"US",NativeName:"United States",ThreeLetterISORegionName:"USA",ThreeLetterWindowsRegionName:"USA",TwoLetterISORegionName:"US"}},"hr-HR":{Name:"hr-HR",NativeName:"hrvatski (Hrvatska)",DisplayName:"Croatian (Croatia)",EnglishName:"Croatian (Croatia)",ThreeLetterISOLanguageName:"hrv",ThreeLetterWindowsLanguageName:"HRV",TwoLetterISOLanguageName:"hr",DateTimeFormat:{ShortestDayNames:["ne","po","ut","sr","če","pe","su"],AbbreviatedDayNames:["ned","pon","uto","sri","čet","pet","sub"],DayNames:["nedjelja","ponedjeljak","utorak","srijeda","četvrtak","petak","subota"],AbbreviatedMonthNames:["sij","vlj","ožu","tra","svi","lip","srp","kol","ruj","lis","stu","pro",""],MonthNames:["siječanj","veljača","ožujak","travanj","svibanj","lipanj","srpanj","kolovoz","rujan","listopad","studeni","prosinac",""],FirstDayOfWeek:1,LongDatePattern:"d. MMMM yyyy.",LongTimePattern:"H:mm:ss",MonthDayPattern:"d. MMMM",ShortDatePattern:"d.M.yyyy.",ShortTimePattern:"H:mm",GeneralLongTimePattern:"d.M.yyyy. H:mm:ss",GeneralShortTimePattern:"d.M.yyyy. H:mm"},NumberFormat:{CurrencySymbol:"kn",NumberDecimalSeparator:",",NumberGroupSeparator:".",PerMilleSymbol:"‰",PercentSymbol:"%",CurrencyPositivePattern:3,CurrencyPositivePatternString:"{Value} {CurrencySymbol}"},Region:{CurrencyEnglishName:"Croatian Kuna",CurrencyNativeName:"hrvatska kuna",CurrencySymbol:"kn",DisplayName:"Croatia",EnglishName:"Croatia",IsMetric:!0,ISOCurrencySymbol:"HRK",Name:"HR",NativeName:"Hrvatska",ThreeLetterISORegionName:"HRV",ThreeLetterWindowsRegionName:"HRV",TwoLetterISORegionName:"HR"}}}})(t=n.Constants||(n.Constants={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){u.CalystoId="calysto-id";u.CalystoValidatorMsgFor="calysto-validator-msg-for",u.CalystoSummaryMsgFor="calysto-summary-msg-for",u.CalystoErrorMsgFor="calysto-error-msg-for",u.CalystoType="calysto-type",u.CalystoGetter="calysto-getter",u.CalystoSetter="calysto-setter",u.CalystoFormat="calysto-format",u.CalystoValidationFn="calysto-validation-fn",u.CalystoBind="calysto-bind",u.CalystoBindEvents="calysto-bind-events",u.CalystoListen="calysto-listen",u.CalystoUid="calysto-uid",u.CalystoIsRepeater="calysto-isrepeater",u.CalystoIsGroup="calysto-isgroup",u.CalystoGetConvert="calysto-getconvert",u.CalystoSetConvert="calysto-setconvert",u.CalystoFormTarget="calysto-form-target",u.CalystoFormHandler="calysto-form-handler",u.CalystoFormMode="calysto-form-mode",u.CalystoFormDestination="calysto-form-dest",u.CalystoAppendVersion="calysto-append-version",u.CalystoSpinnerDelay="calysto-spinner-delay",u.CalystoTimeout="calysto-timeout",u.CalystoControllerAction="calysto-controller-action",u.CalystoScriptRun="calysto-script-run"})(r=i.CalystoDomAttributes||(i.CalystoDomAttributes={}))})(t=n.Constants||(n.Constants={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){u.HandlerPath="calysto-hndlaxd";u.ScriptResourceRequest="calysto-sclisx",u.ElmahRequest="calysto-exiaqn",u.TypeServiceRequest="calysto-tmoynd",u.AjaxGetParamName="calysto-ghqiu"})(r=i.CalystoAjaxHandlerConstants||(i.CalystoAjaxHandlerConstants={}))})(t=n.Constants||(n.Constants={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){u.RandomRFCTable64="csIYaqGWdtJZ6mCS2iyO7nDT0gwM-1hxNeuK_brHX9pFV3jzP8oEUfvL!5lBR4kAQ";u.StandardBase64RFC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u.JavaScriptRFCTable64="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_!-",u.Table36JavaScriptRFC="0123456789abcdefghijklmnopqrstuvwxyz"})(r=i.BaseXCharsTable||(i.BaseXCharsTable={}))})(t=n.Constants||(n.Constants={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r=function(){function u(){}Object.defineProperty(u.prototype,"DataRows",{get:function(){var f;return(f=this._dataRows)!==null&&f!==void 0?f:this._dataRows=this.Table.Rows.AsEnumerable().ToDictionary(function(e){return e[0]})},enumerable:!1,configurable:!0});u.prototype.GetDefaultSearchColumns=function(){return null},u.prototype.GetSearchColumns=function(o){var s,h;if(typeof o=="string")return[o];if(o)return o;if(this.GetDefaultSearchColumns&&(s=this.GetDefaultSearchColumns(),s))return s;h=n.Globalization.CultureInfo.CurrentCulture.Name,o=[this.Table.Columns[1]],this.Table.Columns.Contains(h)&&o.unshift(h);return o},u.FromJson=function(c){var l=new u;l.Table=c;return l},u.prototype.GetString=function(a,v){var w,nt,tt=this.DataRows.GetValueOrDefault(a),b=this.GetSearchColumns(v),p,y,k,d,g;if(tt&&b){try{for(p=__values(b),y=p.next();!y.done;y=p.next()){if(k=y.value,d=this.Table.Columns.indexOf(k),d<0)throw Error("Resx column "+k+" doesn't exist.");if(g=tt[d],!!g)return g}}catch(it){w={error:it}}finally{try{y&&!y.done&&(nt=p.return)&&nt.call(p)}finally{if(w)throw w.error;}}throw Error("Resx property "+a+" with cell "+b.join(" | ")+" not found.");}throw Error("Resx property "+a+" not found.");};return u}();i.ResxExcelProvider=r})(t=n.Globalization||(n.Globalization={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r={__calystotype:"Calysto_DataTable",TotalCount:null,TableName:"",Columns:["property","en-US","hr-HR"],Rows:[["Cancel","Cancel","Otkaži"],["Close","Close","Zatvori"],["Day","Day","Dan"],["Error","Error","Greška"],["Information","Information","Informacija"],["JavascriptEngineIsOutdatedInformation","Javascript engine is outdated.\r\nClick:\r\n    - Reload to reload page and new engine\r\n    - Cancel to keep the current page","Pronađena je novija verzija stranice.\nKliknite:\n    - Osvježi za osvježavanje i dohvat nove verzije\n    - Otkaži za zadržavanje na trenutnoj verziji"],["Message","Message","Poruka"],["Month","Month","Mjesec"],["NewVersionFoundPageIsReloading","New version found, page is reloading...","Pronađena je novija verzija, stranica se osvježava..."],["No","No","Ne"],["OK","OK","U redu"],["Open","Open","Otvori"],["PageIsReloadingPleaseWait","Please wait, page is reloading...","Molimo pričekajte, stranica se osvježava..."],["PleaseConfirm","Please confirm","Molimo potvrdite"],["Question","Question","Pitanje"],["Reload","Reload","Osvježi"],["Save","Save","Spremi"],["Success","Success","Uspješno"],["Today","Today","Danas"],["Warning","Warning","Upozorenje"],["Week","Week","Tjedan"],["Year","Year","Godina"],["Yes","Yes","Da"],["MethodInvocationFobidden","Invocation forbidden","Nemate dozvolu za ovu akciju"]]},u=function(){function f(){}Object.defineProperty(f,"Cancel",{get:function(){return f.ResourceProvider.GetString("Cancel")},enumerable:!1,configurable:!0});Object.defineProperty(f,"Close",{get:function(){return f.ResourceProvider.GetString("Close")},enumerable:false,configurable:true}),Object.defineProperty(f,"Day",{get:function(){return f.ResourceProvider.GetString("Day")},enumerable:false,configurable:true}),Object.defineProperty(f,"Error",{get:function(){return f.ResourceProvider.GetString("Error")},enumerable:false,configurable:true}),Object.defineProperty(f,"Information",{get:function(){return f.ResourceProvider.GetString("Information")},enumerable:false,configurable:true}),Object.defineProperty(f,"JavascriptEngineIsOutdatedInformation",{get:function(){return f.ResourceProvider.GetString("JavascriptEngineIsOutdatedInformation")},enumerable:false,configurable:true}),Object.defineProperty(f,"Message",{get:function(){return f.ResourceProvider.GetString("Message")},enumerable:false,configurable:true}),Object.defineProperty(f,"MethodInvocationFobidden",{get:function(){return f.ResourceProvider.GetString("MethodInvocationFobidden")},enumerable:false,configurable:true}),Object.defineProperty(f,"Month",{get:function(){return f.ResourceProvider.GetString("Month")},enumerable:false,configurable:true}),Object.defineProperty(f,"NewVersionFoundPageIsReloading",{get:function(){return f.ResourceProvider.GetString("NewVersionFoundPageIsReloading")},enumerable:false,configurable:true}),Object.defineProperty(f,"No",{get:function(){return f.ResourceProvider.GetString("No")},enumerable:false,configurable:true}),Object.defineProperty(f,"OK",{get:function(){return f.ResourceProvider.GetString("OK")},enumerable:false,configurable:true}),Object.defineProperty(f,"Open",{get:function(){return f.ResourceProvider.GetString("Open")},enumerable:false,configurable:true}),Object.defineProperty(f,"PageIsReloadingPleaseWait",{get:function(){return f.ResourceProvider.GetString("PageIsReloadingPleaseWait")},enumerable:false,configurable:true}),Object.defineProperty(f,"PleaseConfirm",{get:function(){return f.ResourceProvider.GetString("PleaseConfirm")},enumerable:false,configurable:true}),Object.defineProperty(f,"Question",{get:function(){return f.ResourceProvider.GetString("Question")},enumerable:false,configurable:true}),Object.defineProperty(f,"Reload",{get:function(){return f.ResourceProvider.GetString("Reload")},enumerable:false,configurable:true}),Object.defineProperty(f,"Save",{get:function(){return f.ResourceProvider.GetString("Save")},enumerable:false,configurable:true}),Object.defineProperty(f,"Success",{get:function(){return f.ResourceProvider.GetString("Success")},enumerable:false,configurable:true}),Object.defineProperty(f,"Today",{get:function(){return f.ResourceProvider.GetString("Today")},enumerable:false,configurable:true}),Object.defineProperty(f,"Warning",{get:function(){return f.ResourceProvider.GetString("Warning")},enumerable:false,configurable:true}),Object.defineProperty(f,"Week",{get:function(){return f.ResourceProvider.GetString("Week")},enumerable:false,configurable:true}),Object.defineProperty(f,"Year",{get:function(){return f.ResourceProvider.GetString("Year")},enumerable:false,configurable:true}),Object.defineProperty(f,"Yes",{get:function(){return f.ResourceProvider.GetString("Yes")},enumerable:false,configurable:true}),f.ResourceProvider=n.Globalization.ResxExcelProvider.FromJson(r);return f}();i.CalystoLang=u})(t=n.Resources||(n.Resources={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){function s(l){return(l||"").replace(o,"")}function f(a){return s(a+"").Split([".","[","]"])}function e(v,y,p){var k;if(!v||!p||arguments.length!=3)throw new Error("Calysto.DataBinder.TryGetValue() requires 3 arguments");for(var g=0,d=f(y),w=v,b;d.length>0&&(b=d.shift());){if(g++>u)throw new Error("Calysto.DataBinder.TryGetValue() recursion limit");if(k=!1,r.test(b)&&(b=parseInt(b,10),k=!0),w==null||w==undefined)return!1;try{if(k&&n.Collections.HasInnerArray(w))w=n.Collections.GetInnerArray(w)[b];else if(b in w)w=w[b];else return!1}catch(nt){return!1}}p.SetValue(w);return!0}function h(tt,it){if(arguments.length<2)throw new Error("Calysto.DataBinder.GetValue() requires 2 arguments");var rt=new n.BoxValue;e(tt,it,rt);return rt.GetValue()}function c(ut,ft,et){var ht;if(!ut||!ft||arguments.length<3)throw new Error("Calysto.DataBinder.SetValue() requires 3 arguments");for(var at=0,ct=f(ft),ot,st=ut,lt=st;ct.length>0&&(ot=ct.shift());){if(at++>u)throw new Error("Calysto.DataBinder.SetValue() recursion limit");ht=!1;r.test(ot)&&(ot=parseInt(ot,10),ht=true),ct.length>0?(lt=ht&&n.Collections.HasInnerArray(st)?n.Collections.GetInnerArray(st)[ot]:st[ot],st=lt?lt:st[ot]={}):ht&&n.Collections.HasInnerArray(st)?n.Collections.GetInnerArray(st)[ot]=et:st[ot]=et}}var r=new RegExp("^[\\d]+$"),o=new RegExp("^[\\@]+[\\.]*"),u=100;i.TryGetValue=e;i.GetValue=h,i.SetValue=c})(t=n.DataBinder||(n.DataBinder={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){function r(){return n.Constants.PredefinedCultures}var f=function(){function h(){this.ShortestDayNames=["Su","Mo","Tu","We","Th","Fr","Sa"];this.AbbreviatedDayNames=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],this.DayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],this.AbbreviatedMonthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""],this.MonthNames=["January","February","March","April","May","June","July","August","September","October","November","December",""],this.LongDatePattern="dddd, MMMM d, yyyy",this.LongTimePattern="h:mm:ss tt",this.MonthDayPattern="MMMM d",this.ShortDatePattern="M/d/yyyy",this.ShortTimePattern="h:mm tt",this.GeneralLongTimePattern="M/d/yyyy h:mm:ss tt",this.GeneralShortTimePattern="M/d/yyyy h:mm tt"}return h}(),e=function(){function c(){this.CurrencySymbol="$";this.NumberDecimalSeparator=".",this.NumberGroupSeparator=",",this.PerMilleSymbol="‰",this.PercentSymbol="%",this.CurrencyPositivePattern=0,this.CurrencyPositivePatternString="{CurrencySymbol}{Value}"}return c}(),o=function(){function l(){this.CurrencyEnglishName="US Dollar";this.CurrencyNativeName="US Dollar",this.CurrencySymbol="$",this.DisplayName="United States",this.EnglishName="United States",this.IsMetric=false,this.ISOCurrencySymbol="USD",this.Name="en-US",this.NativeName="United States",this.ThreeLetterISORegionName="USA",this.ThreeLetterWindowsRegionName="USA",this.TwoLetterISORegionName="US"}return l}(),u,s=function(){function a(){this.Name="en-US";this.NativeName="English (United States)",this.DisplayName="English (United States)",this.EnglishName="English (United States)",this.ThreeLetterISOLanguageName="eng",this.ThreeLetterWindowsLanguageName="ENU",this.TwoLetterISOLanguageName="en",this.DateTimeFormat=new f,this.NumberFormat=new e,this.Region=new o}Object.defineProperty(a,"Cultures",{get:function(){return r()},enumerable:!1,configurable:!0});Object.defineProperty(a,"USCulture",{get:function(){return r()["en-US"]},enumerable:false,configurable:true}),Object.defineProperty(a,"HRCulture",{get:function(){return r()["hr-HR"]},enumerable:false,configurable:true}),Object.defineProperty(a,"CurrentCulture",{get:function(){return u||n.Core.Constants.CurrentCulture||a.USCulture},set:function(v){if(v&&v.Name&&(a===null||a===void 0?void 0:a.Cultures[v.Name]))u=v;else throw Error("Invalid culture provided.");},enumerable:false,configurable:true});return a}();i.CultureInfo=s})(t=n.Globalization||(n.Globalization={}))}(Calysto||(Calysto={})),function(n){var t=function(){function i(){}Object.defineProperty(i,"Constants",{get:function(){return __calystoeueinhywsx||{}},enumerable:!1,configurable:!0});Object.defineProperty(i,"IsDebugDefined",{get:function(){return n.Core.Constants.IsDebugDefined},enumerable:false,configurable:true}),Object.defineProperty(i,"IsLocallyHosted",{get:function(){return n.Core.Constants.IsLocallyHosted},enumerable:false,configurable:true}),Object.defineProperty(i,"IsTddSpecific",{get:function(){return n.Core.Constants.IsTddSpecific},enumerable:false,configurable:true}),i.RegisterGlobalNs=function(r){n.DataBinder.SetValue(window,r,{})},i.ExportGlobal=function(u,f,e){if(!f&&typeof u=="function"&&(f=u.name,!f)){var s=u+"",o=s.match("function[\\s]+([^\\(\\)]+)");o&&(f=o[1])}if(!f)throw new Error("ExportGlobal error: path can not be empty.");if(!e&&n.DataBinder.GetValue(window,f))throw new Error('ExportGlobal error: path "'+f+'" aready exists in window.');else n.DataBinder.SetValue(window,f,u)};return i}();n.Core=t}(Calysto||(Calysto={})),function(n){n.AttrName=n.Constants.CalystoDomAttributes}(Calysto||(Calysto={})),function(n){var t=function(){function r(){}r.prototype.SetValue=function(u){this._value=u;this._hasValue=true};r.prototype.GetValue=function(){return this._value},r.prototype.GetValueOrDefault=function(f){return this.HasValue()?this.GetValue():f},r.prototype.HasValue=function(){return!!this._hasValue},r.prototype.RemoveValue=function(){this._value=undefined,this._hasValue=false};return r}(),i;n.BoxValue=t;i=function(e){function o(){var s=e.call(this)||this;s.OnSetValue=(new n.MulticastDelegate).OnAdd(function(h){s.HasValue()&&h(s.GetValue())}).AsFunc(s);return s}__extends(o,e),o.prototype.SetValue=function(c){this._value=c,this._hasValue=true,this.OnSetValue.Invoke(function(l){return l(c)})};return o}(t),n.BoxValueObservable=i}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){function f(p,w){var b,k;if(!(w>0))throw new Error("Invalid finalLength in Calysto.Utility.Generators.GetRndCharsFromTable(...)");if(b=p.length,!(b>0))throw new Error("Invalid tlen in Calysto.Utility.Generators.GetRndCharsFromTable(...)");for(k=[];b>0&&k.length<w;)k.push(p.charAt(Math.floor(Math.random()*b)));return k.join("")}function e(d,g,nt,tt,it,rt){g===void 0&&(g=!0);nt===void 0&&(nt=true),tt===void 0&&(tt=true),it===void 0&&(it=true),rt===void 0&&(rt=true);var ft=[],ut="";g&&ft.push(f(o+s,1));nt&&(ut+=o),tt&&(ut+=s),it&&(ut+=h),rt&&(ut+=c),ft.push(f(ut,d));return ft.join("")}function l(et){return e(et,!0,!0,!0,!0,!1)}function a(ot){return e(ot,!0,!0,!0,!0,!0)}function v(st){return f(h,st)}function y(ht){return e(ht,!0,!0,!0,!0,!1)}var o="abcdefghijklmnopqrstuvwxyz",s="ABCDEFGHIJKLMNOPQRSTUVWXYZ",h="0123456789",c="!@#$%^&*()_+=-~/][><.,?>:;'}{";u.GeneratePassword=l;u.GenerateStrongPassword=a,u.GenerateNumericPassword=v,u.GenerateLabel=y})(r=i.Generators||(i.Generators={}))})(t=n.Utility||(n.Utility={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){function u(o,s){return s?s(o):o}function f(h,c,l){var p=h.Select(function(w){return{item:w,sortKey:u(w,c),typeNum:0,typeStr:"notset"}}).Select(function(b){var d=b.sortKey,k;if(d===undefined)k=r.Undefined;else if(d===null)k=r.Null;else if(d.constructor==Date)k=r.Date;else switch(typeof d){case"string":k=r.String;break;case"number":k=isNaN(d)?r.NaN:r.Number;break;case"boolean":k=r.Boolean;break;default:k=r.Object}b.typeNum=k;b.typeStr=k+"";return b}),a=[],y={},v;p.ForEach(function(g){var nt=y[g.typeStr];nt||(y[g.typeStr]=nt=[],nt.typeNum=g.typeNum,a.push(nt));nt.push(g)});a.sort(function(tt,it){return tt.typeNum<it.typeNum?-1:tt.typeNum>it.typeNum?1:0}),a.ForEach(function(rt){return rt.sort(function(ut,ft){return ut.sortKey<ft.sortKey?-1:ut.sortKey>ft.sortKey?1:0})}),v=[],a.ForEach(function(et){return et.ForEach(function(ot){return v.push(ot.item)})}),l&&v.reverse();return v}var r;(function(e){e[e.Undefined=1]="Undefined";e[e.Null=2]="Null",e[e.NaN=3]="NaN",e[e.Boolean=4]="Boolean",e[e.Number=5]="Number",e[e.Date=6]="Date",e[e.String=7]="String",e[e.Object=8]="Object"})(r||(r={}));i.SortArray=f})(t=n.ArraySorter||(n.ArraySorter={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){function r(h,c){var l=h[c];if(n.Type.TypeInspector.IsNumber(l))return l;throw new Error("enum name not found: "+c);}function u(a){var v=[];n.Collections.ForEachOwnProperties(a,function(y,p){typeof p=="number"&&v.push(p)});return v}function f(w,b){var k=w[b];return n.Type.TypeInspector.IsString(k)?!0:!1}function e(d,g){var nt=d[g];return n.Type.TypeInspector.IsNumber(nt)?!0:!1}function o(tt,it){var rt=tt[it];if(n.Type.TypeInspector.IsString(rt))return rt;throw new Error("enum value not found: "+it);}function s(ut){var ft=[];n.Collections.ForEachOwnProperties(ut,function(et,ot){typeof ot=="string"&&ft.push(ot)});return ft}i.GetValue=r;i.GetValues=u,i.HasValue=f,i.HasName=e,i.GetName=o,i.GetNames=s})(t=n.Enum||(n.Enum={}))}(Calysto||(Calysto={})),function(n){var t=function(){function u(f){if(typeof f!="function")throw new Error("GetEnumerator is not function");this._getEnumerator=f}u.prototype.GetEnumerator=function(){if(this._getEnumerator)return this._getEnumerator();throw new Error("GetEnumerator is not defined");};u.prototype.AsEnumerable=function(){return this},u.prototype.AsIterableIterator=function(){var e=this,o=new n.BoxValue,s=function(){var h;return __generator(this,function(c){switch(c.label){case 0:h=e.GetEnumerator(),c.label=1;case 1:return h.YieldNext(o)?[4,h.Current]:[3,3];case 2:c.sent();return[3,1];case 3:return[2]}})};return s()},u.prototype.ToArray=function(){for(var a=[],v=this.GetEnumerator(),l=new n.BoxValue;v.YieldNext(l)&&l.HasValue();)a.push(l.GetValue()),l.RemoveValue();return a},u.prototype.AsDomQuery=function(){var y=this;return new n.DomQuery(function(){return y.GetEnumerator()})},u.prototype.ToList=function(){return new n.List(this.ToArray())},u.prototype.Count=function(){return this.ToArray().length},u.prototype.ToDictionary=function(p,w){typeof p!="function"&&(p=n.Utility.Expressions.CompileLambdaExpression(p)),typeof w!="function"&&(w=n.Utility.Expressions.CompileLambdaExpression(w));var b=new n.Dictionary;this.ForEach(function(k){return b.Add(p(k),w(k))});return b},u.prototype.ToRawObject=function(d,g){typeof d!="function"&&(d=n.Utility.Expressions.CompileLambdaExpression(d)),typeof g!="function"&&(g=n.Utility.Expressions.CompileLambdaExpression(g));var nt={};this.ForEach(function(tt){return nt[d(tt)+""]=g(tt)});return nt},u.prototype.ToStringJoined=function(it){var rt=this.ToArray();return rt.join(it||"")},u.prototype.ForEach=function(ut){var et,ft;for(typeof ut=="string"&&(ut=n.Utility.Expressions.CompileLambdaNoReturnCheck(ut)),et=this.ToArray(),ft=0;ft<et.length;ft++)ut(et[ft],ft);return u.From(et)},u.prototype.Skip=function(ot){var st=this;return u.From(function(){return function(ht){var vt,lt,ct,yt,pt,at,wt;return __generator(this,function(bt){switch(bt.label){case 0:vt=-1,bt.label=1;case 1:bt.trys.push([1,7,8,9]),lt=__values(ht.AsIterableIterator()),ct=lt.next(),bt.label=2;case 2:return!ct.done?(yt=ct.value,!(++vt<ot))?[3,3]:[3,5]:[3,6];case 3:return[4,yt];case 4:bt.sent(),bt.label=5;case 5:ct=lt.next();return[3,2];case 6:return[3,9];case 7:pt=bt.sent(),at={error:pt};return[3,9];case 8:try{ct&&!ct.done&&(wt=lt.return)&&wt.call(lt)}finally{if(at)throw at.error;}return[7];case 9:return[2]}})}(st)})},u.prototype.Take=function(kt){var dt=this;return u.From(function(){return function(gt){var ri,ti,ni,ui,fi,ii,ei;return __generator(this,function(oi){switch(oi.label){case 0:ri=-1,oi.label=1;case 1:oi.trys.push([1,7,8,9]),ti=__values(gt.AsIterableIterator()),ni=ti.next(),oi.label=2;case 2:return!ni.done?(ui=ni.value,!(++ri<kt))?[3,4]:[4,ui]:[3,6];case 3:oi.sent();return[3,5];case 4:return[3,6];case 5:ni=ti.next();return[3,2];case 6:return[3,9];case 7:fi=oi.sent(),ii={error:fi};return[3,9];case 8:try{ni&&!ni.done&&(ei=ti.return)&&ei.call(ti)}finally{if(ii)throw ii.error;}return[7];case 9:return[2]}})}(dt)})},u.prototype.Single=function(){var si=this.Take(2).ToArray();if(si.length==1)return si[0];if(si.length==0)throw new Error("Error in .Single(), sequence contains no elements");else throw new Error("Error in .Single(), sequence contains more than single element");},u.prototype.Exact=function(hi){if(!(hi>=0))throw new Error("Exact(count) requires count parameter >= 0");var ci=this.ToArray();if(ci.length!=hi)throw new Error("Error in .Exact(), sequence contains "+ci.length+" elements. Required is "+hi+" elements.");return u.From(ci)},u.prototype.Sum=function(li){var ai=null;this.Select(li||function(vi){return vi}).ForEach(function(yi){n.Type.TypeInspector.IsNumber(yi)&&(ai=(ai||0)+yi)});return ai},u.prototype.Average=function(pi){var wi=null,bi=0;this.Select(pi||function(ki){return ki}).ForEach(function(di){n.Type.TypeInspector.IsNumber(di)&&(wi=(wi||0)+di,bi++)});return bi>0?wi/bi:0},u.prototype.Min=function(gi){var nr=null;this.Select(gi||function(tr){return tr}).ForEach(function(ir){(n.Type.TypeInspector.IsNumber(ir)||n.Type.TypeInspector.IsDate(ir))&&(nr==null||ir<nr)&&(nr=ir)});return nr},u.prototype.Max=function(rr){var ur=null;this.Select(rr||function(fr){return fr}).ForEach(function(er){(n.Type.TypeInspector.IsNumber(er)||n.Type.TypeInspector.IsDate(er))&&(ur==null||er>ur)&&(ur=er)});return ur},u.prototype.Concat=function(or){var sr=this;return u.From(function(){return function(hr){var ar,cr,br,vr,lr,yr,kr,pr,dr,wr,gr;return __generator(this,function(nu){switch(nu.label){case 0:nu.trys.push([0,5,6,7]),ar=__values(hr.AsIterableIterator()),cr=ar.next(),nu.label=1;case 1:if(!!cr.done)return[3,4];yr=cr.value;return[4,yr];case 2:nu.sent(),nu.label=3;case 3:cr=ar.next();return[3,1];case 4:return[3,7];case 5:br=nu.sent(),pr={error:br};return[3,7];case 6:try{cr&&!cr.done&&(dr=ar.return)&&dr.call(ar)}finally{if(pr)throw pr.error;}return[7];case 7:nu.trys.push([7,12,13,14]),vr=__values(or.AsEnumerable().AsIterableIterator()),lr=vr.next(),nu.label=8;case 8:if(!!lr.done)return[3,11];yr=lr.value;return[4,yr];case 9:nu.sent(),nu.label=10;case 10:lr=vr.next();return[3,8];case 11:return[3,14];case 12:kr=nu.sent(),wr={error:kr};return[3,14];case 13:try{lr&&!lr.done&&(gr=vr.return)&&gr.call(vr)}finally{if(wr)throw wr.error;}return[7];case 14:return[2]}})}(sr)})},u.prototype.Intersect=function(tu,iu,ru){if(ru===void 0&&(ru=false),!tu||!iu)throw new Error("Intersect(secondSource, predicate) requires secondSource and predicate parameters");var uu=tu.ToArray();typeof iu=="string"&&(iu=n.Utility.Expressions.CompileLambdaExpression(iu));return this.Where(function(fu){return!ru==uu.Where(function(eu){return iu(fu,eu)}).Any()})},u.prototype.Except=function(ou,su){return this.Intersect(ou,su,true)},u.prototype.Join=function(hu,cu,lu,au){var vu=hu.AsEnumerable().ToDictionary(function(yu){return lu(yu)});return this.Select(function(pu){var wu=new n.BoxValue,bu=new n.BoxValue;vu.TryGetValue(cu(pu),bu)&&wu.SetValue(au(pu,bu.GetValue()));return wu}).Where(function(ku){return ku.HasValue()}).Select(function(du){return du.GetValue()})},u.prototype.TakeWhile=function(gu){var nf=this;if(!gu)throw new Error("TakeWhile(predicate) requires predicate");typeof gu!="function"&&(gu=n.Utility.Expressions.CompileLambdaExpression(gu));return u.From(function(){return function(tf){var of,uf,rf,ff,sf,ef,hf;return __generator(this,function(cf){switch(cf.label){case 0:of=-1,cf.label=1;case 1:cf.trys.push([1,7,8,9]),uf=__values(tf.AsIterableIterator()),rf=uf.next(),cf.label=2;case 2:return!rf.done?(ff=rf.value,!!gu(ff,++of))?[3,3]:[3,6]:[3,6];case 3:return[4,ff];case 4:cf.sent(),cf.label=5;case 5:rf=uf.next();return[3,2];case 6:return[3,9];case 7:sf=cf.sent(),ef={error:sf};return[3,9];case 8:try{rf&&!rf.done&&(hf=uf.return)&&hf.call(uf)}finally{if(ef)throw ef.error;}return[7];case 9:return[2]}})}(nf)})},u.prototype.SkipWhile=function(lf){var af=this;if(!lf)throw new Error("SkipWhile(predicate) requires predicate");typeof lf!="function"&&(lf=n.Utility.Expressions.CompileLambdaExpression(lf));return u.From(function(){return function(vf){var bf,df,pf,yf,wf,gf,kf,ne;return __generator(this,function(te){switch(te.label){case 0:bf=false,df=-1,te.label=1;case 1:te.trys.push([1,9,10,11]),pf=__values(vf.AsIterableIterator()),yf=pf.next(),te.label=2;case 2:return!yf.done?(wf=yf.value,!bf)?[3,4]:[4,wf]:[3,8];case 3:te.sent();return[3,7];case 4:return lf(wf,++df)?[3,7]:[3,5];case 5:bf=true;return[4,wf];case 6:te.sent(),te.label=7;case 7:yf=pf.next();return[3,2];case 8:return[3,11];case 9:gf=te.sent(),kf={error:gf};return[3,11];case 10:try{yf&&!yf.done&&(ne=pf.return)&&ne.call(pf)}finally{if(kf)throw kf.error;}return[7];case 11:return[2]}})}(af)})},u.prototype.Reverse=function(){var ie=this;return new u(function(){var re=ie.ToArray();re.reverse();return n.CalystoEnumerator.From(re)})},u.prototype.FirstOrDefault=function(ue){var fe=this.Take(1).ToArray();return fe.length==1?fe.pop():ue},u.prototype.First=function(){var ee=this.Take(1).ToArray();if(ee.length==1)return ee[0];throw new Error("Error in .First(), sequence contains no elements");},u.prototype.LastOrDefault=function(oe){var se=this.ToArray();return se.length>0?se[se.length-1]:oe},u.prototype.Last=function(){var he=this.ToArray();if(he.length>0)return he[he.length-1];throw new Error("Error in .Last(), sequence contains no elements");},u.prototype.Any=function(ce){typeof ce!="function"&&(ce=n.Utility.Expressions.CompileLambdaExpression(ce)),ce=ce||function(){return true};var le=this.Where(ce).Take(1).ToArray();return le.length==1},u.prototype.All=function(ae){return!this.Where(function(ve,ye){return!ae(ve,ye)}).Any()},u.prototype.Where=function(pe){var we=this;typeof pe!="function"&&(pe=n.Utility.Expressions.CompileLambdaExpression(pe));return u.From(function(){return function(be){var to,de,ke,ge,io,no,ro;return __generator(this,function(uo){switch(uo.label){case 0:to=-1,uo.label=1;case 1:uo.trys.push([1,7,8,9]),de=__values(be.AsIterableIterator()),ke=de.next(),uo.label=2;case 2:return!ke.done?(ge=ke.value,!!pe(ge,++to))?[3,3]:[3,5]:[3,6];case 3:return[4,ge];case 4:uo.sent(),uo.label=5;case 5:ke=de.next();return[3,2];case 6:return[3,9];case 7:io=uo.sent(),no={error:io};return[3,9];case 8:try{ke&&!ke.done&&(ro=de.return)&&ro.call(de)}finally{if(no)throw no.error;}return[7];case 9:return[2]}})}(we)})},u.prototype.Select=function(fo){var eo=this;typeof fo!="function"&&(fo=n.Utility.Expressions.CompileLambdaExpression(fo));return u.From(function(){return function(oo){var lo,ho,so,ao,vo,co,yo;return __generator(this,function(po){switch(po.label){case 0:lo=-1,po.label=1;case 1:po.trys.push([1,6,7,8]),ho=__values(oo.AsIterableIterator()),so=ho.next(),po.label=2;case 2:if(!!so.done)return[3,5];ao=so.value;return[4,fo(ao,++lo)];case 3:po.sent(),po.label=4;case 4:so=ho.next();return[3,2];case 5:return[3,8];case 6:vo=po.sent(),co={error:vo};return[3,8];case 7:try{so&&!so.done&&(yo=ho.return)&&yo.call(ho)}finally{if(co)throw co.error;}return[7];case 8:return[2]}})}(eo)})},u.prototype.Cast=function(){return this},u.prototype.SelectMany=function(wo){var bo=this;typeof wo!="function"&&(wo=n.Utility.Expressions.CompileLambdaExpression(wo));return u.From(function(){return function(ko){var os,ts,go,us,fs,ss,is,ns,hs,cs,ls,es,as,rs,vs;return __generator(this,function(ys){switch(ys.label){case 0:os=wo||function(ps){return ps},ys.label=1;case 1:ys.trys.push([1,12,13,14]),ts=__values(ko.AsIterableIterator()),go=ts.next(),ys.label=2;case 2:if(!!go.done)return[3,11];if(us=go.value,!us)return[3,10];if(fs=os(us),!fs)return[3,10];ss=u.From(fs),ys.label=3;case 3:ys.trys.push([3,8,9,10]),is=(rs=void 0,__values(ss.AsIterableIterator())),ns=is.next(),ys.label=4;case 4:if(!!ns.done)return[3,7];hs=ns.value;return[4,hs];case 5:ys.sent(),ys.label=6;case 6:ns=is.next();return[3,4];case 7:return[3,10];case 8:cs=ys.sent(),rs={error:cs};return[3,10];case 9:try{ns&&!ns.done&&(vs=is.return)&&vs.call(is)}finally{if(rs)throw rs.error;}return[7];case 10:go=ts.next();return[3,2];case 11:return[3,14];case 12:ls=ys.sent(),es={error:ls};return[3,14];case 13:try{go&&!go.done&&(as=ts.return)&&as.call(ts)}finally{if(es)throw es.error;}return[7];case 14:return[2]}})}(bo)})},u.prototype.Distinct=function(ws){var bs=this;typeof ws!="function"&&(ws=n.Utility.Expressions.CompileLambdaExpression(ws));return u.From(function(){return function(ks){var uh,nh,gs,ds,th,ih,fh,rh,eh;return __generator(this,function(oh){switch(oh.label){case 0:uh=ws||function(sh){return sh},nh=new Set,oh.label=1;case 1:oh.trys.push([1,6,7,8]),gs=__values(ks.AsIterableIterator()),ds=gs.next(),oh.label=2;case 2:if(!!ds.done)return[3,5];if(th=ds.value,ih=uh(th),!!nh.has(ih))return[3,4];nh.add(ih);return[4,th];case 3:oh.sent(),oh.label=4;case 4:ds=gs.next();return[3,2];case 5:return[3,8];case 6:fh=oh.sent(),rh={error:fh};return[3,8];case 7:try{ds&&!ds.done&&(eh=gs.return)&&eh.call(gs)}finally{if(rh)throw rh.error;}return[7];case 8:return[2]}})}(bs)})},u.prototype.Cycle=function(hh){var ch=this;if(!hh)throw new Error("Cycle requires take parameter");return u.From(function(){return function(lh){var vh,wh,yh,ah,bh,kh,ph,dh;return __generator(this,function(gh){switch(gh.label){case 0:vh=0,wh=false,gh.label=1;case 1:gh.trys.push([1,7,8,9]),yh=(ph=void 0,__values(lh.AsIterableIterator())),ah=yh.next(),gh.label=2;case 2:return!ah.done?(bh=ah.value,!(vh<hh))?[3,4]:[4,bh]:[3,6];case 3:gh.sent(),vh++;return[3,5];case 4:wh=true;return[3,6];case 5:ah=yh.next();return[3,2];case 6:return[3,9];case 7:kh=gh.sent(),ph={error:kh};return[3,9];case 8:try{ah&&!ah.done&&(dh=yh.return)&&dh.call(yh)}finally{if(ph)throw ph.error;}return[7];case 9:if(!wh&&vh>0&&vh<hh)return[3,1];gh.label=10;case 10:return[2]}})}(ch)})},u.prototype.GroupBy=function(nc){var uc,oc,ic,sc,rc,tc;typeof nc!="function"&&(nc=n.Utility.Expressions.CompileLambdaExpression(nc)),ic=new n.Dictionary,sc=this.ToArray();try{for(rc=__values(sc),tc=rc.next();!tc.done;tc=rc.next()){var hc=tc.value,fc=nc(hc),ec=void 0;ic.ContainsKey(fc)?ec=ic.GetValue(fc):ic.Add(fc,ec=[]),ec.push(hc)}}catch(cc){uc={error:cc}}finally{try{tc&&!tc.done&&(oc=rc.return)&&oc.call(rc)}finally{if(uc)throw uc.error;}}return ic.GetItems().AsEnumerable().Select(function(lc){return new i(lc.Key,function(){return lc.Value.AsEnumerable().GetEnumerator()})})},u.prototype.OrderBy=function(ac,vc){vc===void 0&&(vc=false),typeof ac!="function"&&(ac=n.Utility.Expressions.CompileLambdaExpression(ac));var yc=this.GroupBy(ac).ToArray(),pc=yc.OrderBy(function(wc){return wc.Key},vc);return new r(function(){return pc.AsEnumerable().GetEnumerator()})},u.prototype.OrderByDescending=function(bc){typeof bc!="function"&&(bc=n.Utility.Expressions.CompileLambdaExpression(bc));return this.OrderBy(bc,true)},u.From=function(kc){return new u(function(){return n.CalystoEnumerator.From(kc)})},u.Range=function(dc,gc){return u.From(function(){var nl;return __generator(this,function(tl){switch(tl.label){case 0:nl=0,tl.label=1;case 1:return(nl<gc)?[4,dc]:[3,3];case 2:tl.sent(),dc++,nl++;return[3,1];case 3:return[2]}})})},u.Repeat=function(il,rl){return u.From(function(){var ul;return __generator(this,function(fl){switch(fl.label){case 0:ul=0,fl.label=1;case 1:return(ul<rl)?[4,il]:[3,3];case 2:fl.sent(),ul++;return[3,1];case 3:return[2]}})})};return u}(),i,r;n.CalystoEnumerable=t;i=function(el){function ol(sl,hl){var cl=el.call(this,hl)||this;cl.Key=sl;return cl}__extends(ol,el);return ol}(t),r=function(ll){function al(vl){var yl=ll.call(this,function(){return yl.GetFlatEnumerable().GetEnumerator()})||this;yl.getGroupsEnumerator=vl;return yl}__extends(al,ll),al.prototype.GetFlatEnumerable=function(){return this.GetGroupsEnumerable().SelectMany(function(pl){return pl})},al.prototype.GetGroupsEnumerable=function(){return new t(this.getGroupsEnumerator)},al.prototype.ThenBy=function(wl,bl){bl===void 0&&(bl=false);var kl=new t(this.getGroupsEnumerator).SelectMany(function(dl){return dl.OrderBy(wl,bl).GetGroupsEnumerable()});return new al(function(){return kl.GetEnumerator()})},al.prototype.ThenByDescending=function(gl){return this.ThenBy(gl,true)};return al}(t)}(Calysto||(Calysto={})),function(n){var t;(function(i){function r(){for(var y,d,p,b,w=[],k=0;k<arguments.length;k++)if(y=arguments[k],y==undefined)continue;else if(y.GetEnumerator&&y.ToArray)for(d=y.ToArray(),p=0;p<d.length;p++)b=r(d[p]),w.AddRange(b);else if(y.tagName&&y.nodeType||y.nodeType==n.Utility.Dom.NodeTypeEnum.TEXT_NODE)w.push(y);else if(y.length>=0)if(typeof y=="string")w.push(y);else for(p=0;p<y.length;p++)b=r(y[p]),w.AddRange(b);else w.push(y);return w}function o(g,nt,tt){if(typeof g=="string")throw new Error("ForEach does not accept string");if(g&&g.length>0)for(var it=0;it<g.length;it++)nt.call(tt,g[it],it)}function s(rt,ut,ft){if(rt&&rt.length>0)for(var et=0;et<rt.length;et++)ut.call(ft,rt[et],et)}function h(ot,st,ht){if(typeof ot!="string")throw new Error("ForEachChars requires string argument");if(ot&&ot.length>0)for(var ct=0;ct<ot.length;ct++)st.call(ht,ot.charAt(ct),ct)}function u(lt,at){var yt=[],vt;if(lt)for(vt in lt)(!at||lt.hasOwnProperty(vt))&&yt.push(vt);return yt}function c(pt){return u(pt,!0)}function l(wt,bt,kt){var gt,dt;if(wt){gt=0;for(dt in wt)bt.call(kt,dt,wt[dt],gt++)}}function a(ni,ti,ii){var ui,ri;if(ni){ui=0;for(ri in ni)ni.hasOwnProperty(ri)&&ti.call(ii,ri,ni[ri],ui++)}}function e(fi){return fi&&f in fi}function v(ei){return e(ei)?ei[f]:undefined}i.SelectFlatten=r;i.ForEach=o,i.ForEachNodeList=s,i.ForEachChars=h,i.GetProperties=u,i.GetOwnProperties=c,i.ForEachProperties=l,i.ForEachOwnProperties=a;var f="InnerArray";i.HasInnerArray=e;i.GetInnerArray=v})(t=n.Collections||(n.Collections={}))}(Calysto||(Calysto={}));Array.prototype.RemoveAt||function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(n){for(var t=0;t<this.length;t++)if(this[t]===n)return t;return-1}),Array.prototype.SkipTake=function(i,r){return this.slice(i,i+r)},Array.prototype.ForEach=function(u){typeof u=="string"&&(u=Calysto.Utility.Expressions.CompileLambdaNoReturnCheck(u)),Calysto.Collections.ForEach(this,u);return this},Array.prototype.Where=function(f,e){var s,o;for(typeof f=="string"&&(f=Calysto.Utility.Expressions.CompileLambdaExpression(f)),s=[],o=0;o<this.length;o++)if(f(this[o],o)&&(s.push(this[o]),e&&s.length>=e))return s;return s},Array.prototype.Select=function(h){typeof h=="string"&&(h=Calysto.Utility.Expressions.CompileLambdaExpression(h));var c=[];Calysto.Collections.ForEach(this,function(l,a){c.push(h(l,a))});return c},Array.prototype.Reverse=function(){this.reverse();return this},Array.prototype.OrderBy=function(v,y){typeof v=="string"&&(v=Calysto.Utility.Expressions.CompileLambdaExpression(v));return Calysto.ArraySorter.SortArray(this,v,y)},Array.prototype.RemoveAt=function(p){this.splice(p,1);return this},Array.prototype.Remove=function(w){var b=this.indexOf(w);return b==0||b>0?this.RemoveAt(b):this},Array.prototype.RemoveBy=function(k){typeof k=="string"&&(k=Calysto.Utility.Expressions.CompileLambdaExpression(k));for(var d=this.length-1;d>=0;d--)k(this[d],d)&&this.splice(d,1);return this},Array.prototype.Contains=function(g){var nt=this.indexOf(g);return nt>0||nt===0},Array.prototype.AsEnumerable=function(){return Calysto.CalystoEnumerable.From(this.slice(0))},Array.prototype.ToArray=function(){return this.slice(0)},Array.prototype.Any=function(){return this.length>0},Array.prototype.Add=function(tt){this.push(tt);return this},Array.prototype.AddRange=function(it){for(var rt=0;it&&rt<it.length;rt++)this.push(it[rt]);return this},Array.prototype.InsertRange=function(ut,ft){for(var et=ft.length;et>0;et--)this.splice(ut,0,ft[et-1]);return this},Array.prototype.Clear=function(){this.splice(0,this.length);return this},Array.prototype.ToStringJoined=function(ot){return this.join(arguments.length>0?ot:"")}}(),function(){var n,t,i,r;window.Symbol||(i=function(){},i.iterator={},window.Symbol=i),r=function(){function u(){this._kvArr=[]}Object.defineProperty(u.prototype,"size",{get:function(){return this._kvArr.length},enumerable:false,configurable:true}),u.prototype.has=function(f){return this._kvArr.Where(function(e){return e.key===f},1).Any()},u.prototype.get=function(o){return this._kvArr.Where(function(s){return s.key===o},1).Select(function(h){return h.value}).pop()},u.prototype.set=function(c,l){var a=this._kvArr.Where(function(v){return v.key===c},1).pop();a?a.value=l:this._kvArr.push({key:c,value:l});return this},u.prototype.add=function(y,p){return this.set(y,p||true)},u.prototype.delete=function(w){var b=this.get(w);this._kvArr.RemoveBy(function(k){return k.key==w});return!!b},u.prototype.clear=function(){this._kvArr.Clear()},u.prototype.keys=function(){var g,d,tt,it,nt,rt;return __generator(this,function(ut){switch(ut.label){case 0:ut.trys.push([0,5,6,7]),g=__values(this._kvArr),d=g.next(),ut.label=1;case 1:if(!!d.done)return[3,4];tt=d.value;return[4,tt.key];case 2:ut.sent(),ut.label=3;case 3:d=g.next();return[3,1];case 4:return[3,7];case 5:it=ut.sent(),nt={error:it};return[3,7];case 6:try{d&&!d.done&&(rt=g.return)&&rt.call(g)}finally{if(nt)throw nt.error;}return[7];case 7:return[2]}})},u.prototype.entries=function(){var et,ft,ot,ht,st,ct;return __generator(this,function(lt){switch(lt.label){case 0:lt.trys.push([0,5,6,7]),et=__values(this._kvArr),ft=et.next(),lt.label=1;case 1:if(!!ft.done)return[3,4];ot=ft.value;return[4,[ot.key,ot.value]];case 2:lt.sent(),lt.label=3;case 3:ft=et.next();return[3,1];case 4:return[3,7];case 5:ht=lt.sent(),st={error:ht};return[3,7];case 6:try{ft&&!ft.done&&(ct=et.return)&&ct.call(et)}finally{if(st)throw st.error;}return[7];case 7:return[2]}})};return u}(),((t=(n=window.Map)===null||n===void 0?void 0:n.prototype)===null||t===void 0?void 0:t.entries)||(window.Set=r,window.Map=r)}(Calysto||(Calysto={})),Math.trunc||(Math.trunc=function(n){return isFinite(n)&&!isNaN(n)?parseInt((n+"").split(".")[0],10):n}),typeof Blob=="undefined"||Blob.prototype.SaveFileAs||(Blob.prototype.SaveFileAs=function(n){var i=this,t;navigator&&navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(i,n||i.filename):(t=document.createElement("a"),t.style.position="absolute",t.style.opacity="0",t.href=window.URL.createObjectURL(i),t.download=n||i.filename,document.body.appendChild(t),t.click(),t.parentNode&&t.parentNode.removeChild(t))}),Boolean.prototype.ToStringFormated||(Boolean.prototype.ToStringFormated=function(){return this==true?"true":"false"}),Date.FromLocalISOTString||function(){Date.now=function(){return(new Date).getTime()};var n=function(i,r){for(i+="";i.length<r;)i="0"+i;return i},t=function(u,f){for(u+="";u.length<f;)u=u+"0";return u};Date.ToLocalISOTString=function(e){return n(e.getFullYear(),4)+"-"+n(e.getMonth()+1,2)+"-"+n(e.getDate(),2)+"T"+n(e.getHours(),2)+":"+n(e.getMinutes(),2)+":"+n(e.getSeconds(),2)+"."+t(e.getMilliseconds(),3)},Date.FromLocalISOTString=function(s){var h=s.match(new RegExp("[\\d]+","g")),c=new Date(0);h&&(c.setFullYear(parseInt(h[0])),c.setMonth(parseInt(h[1])-1),c.setDate(parseInt(h[2])),c.setHours(parseInt(h[3])),c.setMinutes(parseInt(h[4])),c.setSeconds(parseInt(h[5])),c.setMilliseconds(parseInt(t(h[6]||"",3).substr(0,3))||0));return c}}(),typeof Error!="undefined"&&(Error.prototype.AppendErrorDetails=function(n,t){var i=[],r=[];if(n)try{typeof n=="string"?i.push(n):"length"in n?Calysto.Collections.ForEach(n,function(f){return i.push(f)}):Calysto.Collections.ForEachProperties(n,function(e,o){e=="errorHtml"?r.push(o):e=="errorDescription"?i.push(o):i.push(e+": "+o)})}catch(u){}this.CalystoException={Message:this.message,Details:i.join("\r\n"),HtmlDetails:r.join("<br/>"),IsServerError:!!t};return this}),Function.prototype.BindContext||(Function.prototype.BindContext=function(n){if(arguments.length!=1)throw new Error("BindContext(...) requires 1 argument exactly, current arguments: "+arguments.length);var t=this,i=n||this||null;return function(){return t.apply(i,arguments)}}),function(n){var t;(function(i){var r;(function(u){function e(h){var c=(h+"").match(new RegExp("return[\\s]+[\\w]+\\.([\\w\\.\\[\\]_@]+)"));if(c&&c[1])return c[1];throw new Error("Invalid path expression: "+h);}function f(l,a){var b=typeof l,v,p;if(l){if(b=="function"){if(n.Core.IsDebugDefined&&a&&(v=(l+"").substr(0,1e3),!(v.indexOf("return")>0)&&!(v.indexOf("=>")>0)))throw Error("Invalid lambda, missing return in: "+v);return l}if(b=="string")try{if(l=="")return function(tt){return tt};if((p=l.indexOf("=>"))>0){var d=l.substr(0,p),y=l.substr(p+2),w=d.match(new RegExp("[\\w$@_]+","ig"))||[],k;return(k=y.match(new RegExp("^[\\s]*new[\\s]+(\\{[\\w\\W]*)$")))?new Function(w.join(","),"return "+k[1]+";"):new RegExp("^[\\s]*\\{").test(y)?new Function(w.join(","),y+";"):new Function(w.join(","),"return "+y+";")}}catch(g){throw new Error(g+"\r\nin "+l);}}else return function(nt){return nt};throw new Error("Unsupported expression in Calysto.Utility.Expressions.CompileLambdaExpression("+l+")");}function o(it){return f(it,true)}function s(rt){return f(rt,false)}u.ParsePath=e,u.CompileLambdaExpression=o,u.CompileLambdaNoReturnCheck=s})(r=i.Expressions||(i.Expressions={}))})(t=n.Utility||(n.Utility={}))}(Calysto||(Calysto={})),RegExp.Escape||function(){var n=new RegExp("[ \\\\\\*\\+\\?\\|\\,\\^\\$\\.\\#\\(\\)\\{\\}\\[\\]]","g");RegExp.Escape=function(t){return t.replace(n,"\\$&")}}(),function(n){var t;(function(i){function r(u,f,e,o){for(var s in f)(!o||f.hasOwnProperty(s))&&(!e&&s in u||(u[s]=f[s]));return u}i.Extend=r})(t=n.Utility||(n.Utility={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){u[u.String=1]="String",u[u.Boolean=2]="Boolean",u[u.Decimal=3]="Decimal",u[u.Number=4]="Number",u[u.Integer=5]="Integer",u[u.Array=6]="Array",u[u.Function=7]="Function",u[u.DateTime=8]="DateTime",u[u.Date=9]="Date",u[u.Any=10]="Any"})(r=i.KnownType||(i.KnownType={}))})(t=n.Type||(n.Type={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){function f(b,k,d){if(i.TypeInspector.IsNumber(b))return b;isNaN(k)||i.TypeInspector.IsNullOrUndefined(k)&&(k=null),d=d||n.Globalization.CultureInfo.CurrentCulture.NumberFormat.NumberDecimalSeparator;var tt=new RegExp("[\\-]*[ ]*[ \\.\\,]?[\\d]+[\\d\\.\\,]*"),g=(b+"").match(tt),it=g&&g[0]?g[0]:"",rt=it.replace(new RegExp(RegExp.Escape(d=="."?",":"."),"ig"),"").replace(new RegExp(RegExp.Escape(d),"ig"),".").replace(new RegExp("[ ]*","ig"),""),nt=parseFloat(rt);return!isNaN(nt)&&isFinite(nt)?nt:k}function e(ut,ft,et){return f(ut,ft,et)}function o(ot,st,ht){return f(ot,st,ht)}function s(ct,lt){i.TypeInspector.IsNullOrUndefined(lt)&&(lt=NaN);var at=e(ct,lt);return!isNaN(at)&&isFinite(at)?at>0?Math.floor(at):Math.ceil(at):lt}function h(vt,yt){return i.TypeInspector.IsBoolean(vt)?vt:vt=="true"||vt=="True"?true:vt=="false"||vt=="False"?false:vt>0?true:vt===0?false:i.TypeInspector.IsNullOrUndefined(yt)?null:yt}function c(pt,wt){if(i.TypeInspector.IsNullOrUndefined(pt)){if(!i.TypeInspector.IsNullOrUndefined(wt))return wt+""}else return pt+"";return""}u.ToNumberOrDefault=e,u.ToDecimal=o,u.ToInteger=s,u.ToBoolean=h,u.ToString=c})(r=i.NumberConverter||(i.NumberConverter={}))})(t=n.Type||(n.Type={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){function e(s,h){return i.TypeInspector.IsNullOrUndefined(s)?"":s&&s.ToStringFormated?s.ToStringFormated(h):f(s,"String")}function f(c,l,a){var v,p,b,w,y;if(l=="Int")throw new Error("Int is not supported, use Integer instead");if(v=typeof l=="string"?i.TypeDescriptor.FromTypeName(l,a):l,!v.IsValidKnownType)throw new Error("Invalid destType: "+l);if(i.TypeInspector.IsNullOrUndefined(c)||v.KnownTypeName!=i.KnownType.String&&c===""){if(v.IsNullable)return null;throw new Error("Error in ChangeType(). Can not convert null to "+l);}if(p=i.TypeDescriptor.FromValue(c),p.UnderlayingTypeName==v.UnderlayingTypeName)return c;switch(v.KnownTypeName){case i.KnownType.String:return p.KnownTypeName==i.KnownType.String?c:i.TypeInspector.IsNullOrUndefined(c)?"":c.ToStringFormated?c.ToStringFormated():c&&c.join?"["+c.join(",")+"]":c+"";case i.KnownType.Boolean:if(p.KnownTypeName==i.KnownType.Boolean)return c;if(c===true||c=="true"||c=="True"||c=="1")return true;if(c===false||c=="false"||c=="False"||c=="0")return false;if(typeof c=="number")return c===0?false:true;throw new Error("Can not create boolean from: "+c);case i.KnownType.Decimal:case i.KnownType.Number:case i.KnownType.Integer:if(!i.TypeInspector.IsNumber(c)&&(b=new RegExp("^[\\+\\-]*[\\s]*[\\d\\,\\.]+$"),!b.test(c+"")))throw new Error("Can not create number from: "+c);if(w=i.NumberConverter.ToDecimal(c),i.TypeInspector.IsNumber(w))return v.KnownTypeName==i.KnownType.Integer?parseInt(w):w;throw new Error("Can not create number from: "+c);case i.KnownType.DateTime:case i.KnownType.Date:if(typeof c=="string")try{if(y=n.DateTime.ParseDateTime(c,undefined,true),!y)throw new Error("Can not create DateTime from "+c);return y&&v.KnownTypeName==i.KnownType.Date?y.ToSystemDate():y}catch(k){}throw new Error("Can not create DateTime from "+c);case i.KnownType.Function:return n.Utility.Expressions.CompileLambdaExpression(c);case i.KnownType.Array:return c.Trim(["[","]"]).Split([","]).Select(function(d){return d.Trim()})}throw new Error("Can not create "+l+" from "+c);}function o(g,nt,tt){try{tt.SetValue(f(g,nt));return true}catch(it){}return false}u.ToStringFormated=e,u.ChangeType=f,u.TryChangeType=o})(r=i.TypeConverter||(i.TypeConverter={}))})(t=n.Type||(n.Type={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r=function(){function u(){}Object.defineProperty(u.prototype,"UnderlayingTypeName",{get:function(){return this._typeName},enumerable:false,configurable:true}),Object.defineProperty(u.prototype,"KnownTypeName",{get:function(){return i.KnownType[this._typeName]},enumerable:false,configurable:true}),Object.defineProperty(u.prototype,"IsNullable",{get:function(){return!!this._isNullable},enumerable:false,configurable:true}),Object.defineProperty(u.prototype,"NullableTypeName",{get:function(){return this.UnderlayingTypeName+(this.IsNullable?"?":"")},enumerable:false,configurable:true}),Object.defineProperty(u.prototype,"IsValidKnownType",{get:function(){return!!this.KnownTypeName},enumerable:false,configurable:true}),u.ResolveKnownTypeFromValue=function(f){if(i.TypeInspector.IsNullOrUndefined(f))return i.KnownType.Any;if(i.TypeInspector.IsString(f))return i.KnownType.String;if(i.TypeInspector.IsBoolean(f))return i.KnownType.Boolean;if(i.TypeInspector.IsNumber(f))return i.KnownType.Decimal;if(i.TypeInspector.IsArrayOrDomArray(f))return i.KnownType.Array;if(i.TypeInspector.IsFunction(f))return i.KnownType.Function;if(i.TypeInspector.IsDateTime(f))return i.KnownType.DateTime;if(i.TypeInspector.IsDate(f))return i.KnownType.Date;throw new Error("Can not reslove KnownType from value "+f);},u.FromTypeName=function(e,o){var s=new u,h;s._isNullable=o===true,s._typeName=e,(e||"").indexOf("?")>0&&(h=(e||"").TrimEnd([" ","?"]),s._typeName=h,s._isNullable=true);return s},u.FromValue=function(c,l){return u.FromTypeName(i.KnownType[u.ResolveKnownTypeFromValue(c)],l||i.TypeInspector.IsNullOrUndefined(c))};return u}();i.TypeDescriptor=r})(t=n.Type||(n.Type={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){function f(nt,tt){if(nt&&nt.length>0){for(var it=0;it<nt.length;it++)if(!tt(nt[it]))return false;return true}return false}function v(rt,ut){return rt&&ut&&rt[ut]!==undefined}function e(){for(var et=[],ft=0;ft<arguments.length;ft++)et[ft]=arguments[ft];return f(arguments,function(ot){return typeof ot=="boolean"})}function o(){for(var ht=[],st=0;st<arguments.length;st++)ht[st]=arguments[st];return f(arguments,function(ct){return typeof ct=="number"&&!isNaN(ct)&&isFinite(ct)})}function s(){for(var at=[],lt=0;lt<arguments.length;lt++)at[lt]=arguments[lt];return f(arguments,function(vt){return typeof vt=="string"})}function h(){for(var pt=[],yt=0;yt<arguments.length;yt++)pt[yt]=arguments[yt];return f(arguments,function(wt){return wt&&wt.push&&wt.pop&&(wt.length>0||wt.length===0)})}function c(){for(var kt=[],bt=0;bt<arguments.length;bt++)kt[bt]=arguments[bt];return f(arguments,function(dt){var gt=typeof dt;return dt&&(gt=="object"||gt=="function")&&!(gt.tagName&&gt.nodeType)&&(dt.length>0||dt.length===0)&&!l(dt)})}function y(){for(var ti=[],ni=0;ni<arguments.length;ni++)ti[ni]=arguments[ni];return h.apply(null,arguments)||c.apply(null,arguments)}function l(){for(var ri=[],ii=0;ii<arguments.length;ii++)ri[ii]=arguments[ii];return f(arguments,function(ui){return typeof ui=="function"&&"call"in ui&&"apply"in ui})}function a(){for(var ei=[],fi=0;fi<arguments.length;fi++)ei[fi]=arguments[fi];return arguments.length==0?true:f(arguments,function(oi){return oi===null||typeof oi=="undefined"?true:typeof oi=="number"&&(isNaN(oi)||!isFinite(oi))?true:false})}function p(){for(var hi=[],si=0;si<arguments.length;si++)hi[si]=arguments[si];return s.apply(null,arguments)||o.apply(null,arguments)||e.apply(null,arguments)}function w(ci){return ci&&ci.constructor==n.DateTime}function b(li){return li&&li.constructor==Date}function k(){for(var yi,vi,pi=[],ai=0;ai<arguments.length;ai++)pi[ai]=arguments[ai];for(vi=0;vi<arguments.length;vi++)if(yi=arguments[vi],!a(yi))return yi}function d(wi,bi){return wi===bi?true:window.JSON?JSON.stringify(wi)===JSON.stringify(bi):false}function g(ki){if(ki===null||ki===void 0?void 0:ki.__$$hash)return ki===null||ki===void 0?void 0:ki.__$$hash;var di=JSON.stringify(ki);typeof di!="string"&&(di=ki+"");try{ki.__$$hash=di}catch(gi){}return di}u.ContainsProperty=v,u.IsBoolean=e,u.IsNumber=o,u.IsString=s,u.IsArray=h,u.IsDomArray=c,u.IsArrayOrDomArray=y,u.IsFunction=l,u.IsNullOrUndefined=a,u.IsValueType=p,u.IsDateTime=w,u.IsDate=b,u.Coalesce=k,u.AreValuesEqual=d,u.CalculateHashCode=g})(r=i.TypeInspector||(i.TypeInspector={}))})(t=n.Type||(n.Type={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){function f(){var l=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new RegExp("[xy]","g"),function(v){var y=(l+Math.random()*16)%16|0;l=Math.floor(l/16);return(v=="x"?y:y&7|8).toString(16)})}function u(p,w){if(p=n.Type.TypeInspector.IsNumber(p)?p:0,w=n.Type.TypeInspector.IsNumber(w)?w:1,p>w)throw new Error("Invalid range in Calysto.Mathm.Random(...)");return Math.random()*(w-p)+p}function e(b,k){return Math.floor(u(n.Type.TypeInspector.IsNumber(b)?b:0,n.Type.TypeInspector.IsNumber(k)?k:100))}function r(d,g,nt){if(!(nt==0||nt>0))throw new Error("Missing decimalPlaces");var tt=Math.pow(10,nt);return Math[d](g*tt)/tt}function o(it,rt){return r("floor",it,rt)}function s(ut,ft){return r("ceil",ut,ft)}function h(et,ot){return r("round",et,ot)}function c(st,ht){return r("trunc",st,ht)}i.NewGuid=f,i.Random=u,i.RandomInt=e,i.DecimalFloor=o,i.DecimalCeil=s,i.DecimalRound=h,i.DecimalTrunc=c})(t=n.Mathm||(n.Mathm={}))}(Calysto||(Calysto={})),Number.prototype.ToStringFormated||(Number.prototype.ToStringFormated=function(n){var e=this,l,p,h;if(isFinite(e)&&!isNaN(e)){var u=0,i=0,c=false,o=false,t=void 0;if(n)if(t=n.toLowerCase().match(new RegExp("([NnCc])([\\d]*)"))){if(o=true,t[1]=="c"&&(c=true),u=i=!t[2]?2:parseInt(t[2],10),t[3]&&(i=parseInt(t[3])),i>15)throw new Error("Number format, allowed maxDecPlaces is 15, current: "+i);}else if(n.indexOf("#")>=0&&(t=n.match(new RegExp("([\\,\\.]*)([\\#]*)([0]*)([\\,\\.]+)([0]*)([\\#]*)$"))))l=t[1],o=!!l,p=t[4],u=(t[5]||"").length,i=u+(t[6]||"").length;else throw new Error("Unsupported number format in Number.ToStringFormated("+n+")");else i=15;for(var a=Calysto.Mathm.DecimalRound(e,i),w=a<0,v=(Math.abs(a)+"").split("."),s=v[0],r=v[1]||"";r.length<u;)r+="0";if(r&&(r=Calysto.Globalization.CultureInfo.CurrentCulture.NumberFormat.NumberDecimalSeparator+r),o){for(var b=s.split(""),f=[],y=void 0;y=b.pop();)(f.length+1)%4==0&&f.unshift(Calysto.Globalization.CultureInfo.CurrentCulture.NumberFormat.NumberGroupSeparator),f.unshift(y);s=f.join("")}h=(w?"-":"")+s+r;return c?Calysto.Globalization.CultureInfo.CurrentCulture.NumberFormat.CurrencyPositivePatternString.replace("{CurrencySymbol}",Calysto.Globalization.CultureInfo.CurrentCulture.NumberFormat.CurrencySymbol).replace("{Value}",h):h}throw new Error("NaN or undefined number can not be formated to string");}),function(){function t(d,g,nt,tt){if(!d)return d;var it=i;g&&(it="("+n(g)+")+"),arguments.length<4&&(tt=true),arguments.length<3&&(nt=true),tt&&nt?it="(^"+it+")|("+it+"$)":tt?it+="$":nt&&(it="^"+it);return d.replace(new RegExp(it,"g"),"")}function r(li,ai,vi,yi){for(var nr=ai-(yi||"").length,gi=0,wi=[],bi,tr=new RegExp("([\\w]+)|([^\\w]+)","ig"),ki=[],pi,di;pi=tr.exec(li);)ki.push(pi);for(vi&&ki.reverse(),di=0;di<ki.length;di++)if(pi=ki[di],gi+=pi[0].length,pi[2]){bi=(bi||"")+pi[0];continue}else if(gi>nr)break;else bi&&(wi.push(bi),bi=null),wi.push(pi[0]);yi&&wi.push(yi),vi&&wi.reverse();return wi.join("")}var n=function(u){var e,f;if(typeof u=="string")return RegExp.Escape(u);for(e=[],f=0;f<u.length;f++)e.push(RegExp.Escape(u[f]));return e.join("|")},i;String.IsNullOrEmpty=function(){var o,s,h;if(arguments.length==0)return true;for(o=0;o<arguments.length;o++)if(s=arguments[o],h=typeof s,!s||h!="string"&&h!="object"||!(s.length>0))return true;return false},String.IsNullOrWhiteSpace=function(){var l,c,a;if(arguments.length==0)return true;for(l=0;l<arguments.length;l++)if(c=arguments[l],a=typeof c,!c||a!="string"&&a!="object"||!(c.length>0)||new RegExp("^[\\s]+$").test(c))return true;return false},String.prototype.ToCharArray=function(){for(var y=this+"",p=[],v=0;v<y.length;v++)p.push(y.charAt(v));return p},String.prototype.Equals=function(w,b){var k=this+"";if(k===w)return true;if(b){k&&(k=k.toLowerCase()),w&&(w=w.toLowerCase());return k===w}return false},i="("+n([" ","\r","\n","\t"])+")+",String.prototype.Trim=function(rt){var ut=this+"";return rt?t(ut,rt,true,true):ut.replace(new RegExp("(^[\\s]+)|([\\s]+$)","g"),"")},String.prototype.TrimStart=function(ft){var et=this+"";return ft?t(et,ft,true,false):et.replace(new RegExp("(^[\\s]+)","g"),"")},String.prototype.TrimEnd=function(ot){var st=this+"";return ot?t(st,ot,false,true):st.replace(new RegExp("([\\s]+$)","g"),"")},String.prototype.EndsWith=function(ht,ct){var lt=this+"",at;if(!lt||!ht)return false;at=new RegExp(n(ht)+"$",ct?"ig":"g");return at.test(lt)},String.prototype.StartsWith=function(vt,yt){var pt=this+"",wt;if(!pt||!vt)return false;if(yt){wt=new RegExp("^"+n(vt),yt?"ig":"g");return wt.test(pt)}return pt.indexOf(vt)==0},String.prototype.Contains=function(bt,kt){var dt=this+"",gt,ni;if(!dt||!bt)return false;if(kt){gt=new RegExp(n(bt),kt?"ig":"g");return gt.test(dt)}ni=dt.indexOf(bt);return ni>=0},String.prototype.Substring=function(ti,ii){var ri=this+"",ui;if(!ri)return ri;ui=ri.length-ti;return(ii||0)>ui?ri.substr(ti):ri.substr(ti,ii)},String.prototype.Remove=function(fi){var ei=this+"";return ei&&ei.length>0&&fi>=0?ei.substr(0,fi):""},String.prototype.Repeat=function(oi){for(var ci=this+"",si=[],hi=0;hi<oi;hi++)si.push(ci);return si.join("")},String.prototype.TakeFirst=function(ir,rr,ur){var fr=this+"";return!fr||ir>fr.length?fr:ur?r(fr,ir,false,rr):fr.substr(0,ir-(rr?rr.length:0))+(rr||"")},String.prototype.TakeLast=function(er,or,sr){var hr=this+"";return!hr||er>hr.length?hr:sr?r(hr,er,true,or):(or||"")+hr.substr(hr.length-er+(or?or.length:0),er)},String.prototype.Split=function(cr,lr){var ar=this+"";return ar?ar.split(new RegExp(n(cr),lr?"ig":"g")):[]},String.prototype.ReplaceAll=function(vr,yr,pr){var wr=this+"",br;if(!wr)return wr;br=new RegExp(n(vr),pr?"ig":"g");return wr.replace(br,yr)},String.prototype.ToNumber=function(){return Calysto.Type.NumberConverter.ToDecimal(this+"")},String.prototype.ToFunc=function(kr){return kr?Calysto.Utility.Expressions.CompileLambdaNoReturnCheck(this+""):Calysto.Utility.Expressions.CompileLambdaExpression(this+"")},String.prototype.GetHashCode=function(){for(var tu,nu=this+"",dr=0,gr=0;gr<(nu||"").length;gr++)tu=nu.charCodeAt(gr),dr=(dr<<5)-dr+tu;return dr&dr},String.prototype.FormatWith=function(iu,ru,uu){ru===void 0&&(ru="{"),uu===void 0&&(uu="}");var fu=this+"";return iu?fu.replace(new RegExp("("+RegExp.Escape(ru||"{")+"([\\w_\\-\\.]+)"+RegExp.Escape(uu||"}")+")","g"),function(eu,ou,su){var hu=Calysto.DataBinder.GetValue(iu,su);if(hu==undefined)throw new Error("Exception in String.FormatWith(), "+ou+" property not found.");return hu}):fu},String.prototype.FormatWith2=function(cu,lu,au){lu===void 0&&(lu="{{"),au===void 0&&(au="}}");return(this+"").FormatWith(cu,lu,au)},String.prototype.FormatWith3=function(vu,yu,pu){yu===void 0&&(yu="{{{"),pu===void 0&&(pu="}}}");return(this+"").FormatWith(vu,yu,pu)},String.prototype.AsEnumerable=function(){var wu=this;return new Calysto.CalystoEnumerable(function(){return Calysto.CalystoEnumerator.From(wu+"")})},String.prototype.ToHtml=function(bu){return Calysto.Utility.Html.StringToHtml(this+"",bu)},String.prototype.ToNullIfEmpty=function(ku){var du=this+"";ku&&(du=du.Trim());return String.IsNullOrWhiteSpace(du)?null:du}}(),function(n){var t=function(){function r(u){this.Ticks=u||0,this.TotalSeconds=Math.floor(u/1e3),this.Hours=Math.floor(this.Ticks/36e5),this.Minutes=Math.floor(this.TotalSeconds/60)%60,this.Seconds=this.TotalSeconds%60,this.Milliseconds=Math.floor(this.Ticks)%1e3}return r}(),i=function(){function f(){this._token=new RegExp("[H]{1,2}|[h]{1,2}|[m]{1,2}|[s]{1,2}|[f]{1,3}","g"),this._ticks=0}f.GetTicks=function(e,o,s,h,c){return 864e5*(e||0)+36e5*(o||0)+6e4*(s||0)+1e3*(h||0)+(c||0)},f.Create=function(l,a,v,y,p){var w=new n.TimeSpan;w._ticks=n.TimeSpan.GetTicks(l,a,v,y,p);return w},f.Frommilliseconds=function(b){return(new n.TimeSpan).AddMilliseconds(b)},f.FromTicks=function(k){return(new n.TimeSpan).AddMilliseconds(k)},f.FromSeconds=function(d){return(new n.TimeSpan).AddSeconds(d)},f.FromMinutes=function(g){return(new n.TimeSpan).AddMinutes(g)},f.FromHours=function(nt){return(new n.TimeSpan).AddHours(nt)},f.FromDays=function(tt){return(new n.TimeSpan).AddDays(tt)},f.prototype.AddTicks=function(it){var rt=new n.TimeSpan;rt._ticks=this._ticks+it;return rt},f.prototype.AddDays=function(ut){return this.AddTicks(n.TimeSpan.GetTicks(ut))},f.prototype.AddHours=function(ft){return this.AddTicks(n.TimeSpan.GetTicks(0,ft))},f.prototype.AddMinutes=function(et){return this.AddTicks(n.TimeSpan.GetTicks(0,0,et))},f.prototype.AddSeconds=function(ot){return this.AddTicks(n.TimeSpan.GetTicks(0,0,0,ot))},f.prototype.AddMilliseconds=function(st){return this.AddTicks(st)},f.prototype.Totalmilliseconds=function(){return this._ticks},f.prototype.TotalSeconds=function(){return this._ticks/1e3},f.prototype.TotalMinutes=function(){return this._ticks/6e4},f.prototype.TotalHours=function(){return this.TotalMinutes()/60},f.prototype.TotalDays=function(){return this.TotalHours()/24},f.prototype.ToParts=function(){return new t(this._ticks)},f.prototype.pad=function(ht,ct){for(ct===void 0&&(ct=2),ht=String(ht),ct=ct||2;ht.length<ct;)ht="0"+ht;return ht},f.prototype.FormatTime=function(lt,at){var vt=this.pad(Math.floor(lt)%1e3,3),yt=Math.floor(lt/1e3),pt=Math.floor(lt/36e5),wt=Math.floor(yt/60)%60,bt=yt%60,kt={H:pt,HH:this.pad(pt),m:wt,mm:this.pad(wt),s:bt,ss:this.pad(bt),f:String(vt).substr(0,1),ff:String(vt).substr(0,2),fff:String(vt).substr(0,3)};return at.replace(this._token,function(dt){return dt in kt?kt[dt]:""})},f.prototype.ToStringFormated=function(ni){return this.FormatTime(this._ticks,ni||"HH:mm:ss.fff")};return f}();n.TimeSpan=i}(Calysto||(Calysto={})),function(n){var u,t,i,r;(function(f){f[f.Sunday=0]="Sunday",f[f.Monday=1]="Monday",f[f.Tuesday=2]="Tuesday",f[f.Wednesday=3]="Wednesday",f[f.Thursday=4]="Thursday",f[f.Friday=5]="Friday",f[f.Saturday=6]="Saturday"})(u=n.DayOfWeek||(n.DayOfWeek={})),function(e){function o(k,d){for(k=String(k),d=d||2;k.length<d;)k="0"+k;return k}function y(g,nt,tt){var ht,ft;nt=nt||n.Globalization.CultureInfo.CurrentCulture.DateTimeFormat.GeneralLongTimePattern,nt.slice(0,4)=="UTC:"&&(nt=nt.slice(4),tt=true),ft=(g+"").match(a),ft&&ft.length>0&&(ht=(ft[0]||"").replace(v,""));var it=tt?"getUTC":"get",rt=g[it+"Date"](),ct=g[it+"Day"](),et=g[it+"Month"](),lt=g[it+"FullYear"](),ut=g[it+"Hours"](),at=g[it+"Minutes"](),vt=g[it+"Seconds"](),ot=g[it+"Milliseconds"](),ot=o(Math.floor(ot)%1e3,3),st=tt?0:g.getTimezoneOffset(),yt={dddd:h.DayNames[ct],ddd:h.AbbreviatedDayNames[ct],dd:o(rt),d:rt,MMMM:h.MonthNames[et],MMM:h.AbbreviatedMonthNames[et],MM:o(et+1),M:et+1,yy:String(lt).slice(2),yyyy:lt,h:ut%12||12,hh:o(ut%12||12),H:ut,HH:o(ut),m:at,mm:o(at),s:vt,ss:o(vt),f:String(ot).substr(0,1),ff:String(ot).substr(0,2),fff:ot,t:ut<12?"A":"P",tt:ut<12?"AM":"PM",K:(st>0?"-":"+")+o(Math.floor(Math.abs(st)/60))+":"+o(Math.abs(st)%60),Z:tt?"UTC":ht,S:["th","st","nd","rd"][rt%10>3||rt>=10&&rt<=20?0:rt%10]};return nt.replace(l,function(pt){return pt in yt?yt[pt]:pt.slice(1,pt.length-1)})}function s(bt,kt,dt,gt){var ri,ui,ti,ni,ii;try{for(ti=__values(gt),ni=ti.next();!ni.done;ni=ti.next())if(ii=ni.value,ii in dt)return n.Type.TypeInspector.IsNumber(dt[ii])?dt[ii]:NaN}catch(fi){ri={error:fi}}finally{try{ni&&!ni.done&&(ui=ti.return)&&ui.call(ti)}finally{if(ri)throw ri.error;}}return 0}function b(si,hi,ci,li){var bi,vi,pi,wi,di,ai,gi;if(n.Type.TypeInspector.IsDate(si)){ci.SetValue(new r(si));return true}if(n.Type.TypeInspector.IsDateTime(si)){ci.SetValue(si);return true}if(vi=si||"",hi){var ki=hi.split(new RegExp("[^\\w]+")),nr=vi.split(new RegExp("[^\\d]+")),yi={};for(pi=0;pi<ki.length;pi++)wi=nr[pi],((bi=ki[pi])===null||bi===void 0?void 0:bi.StartsWith("f"))&&(wi=c(wi,3)),yi[ki[pi]]=parseInt(wi);if(di=[s(vi,hi,yi,["yyyy","yy"]),s(vi,hi,yi,["MM","M"]),s(vi,hi,yi,["dd","d"]),s(vi,hi,yi,["HH","H"]),s(vi,hi,yi,["mm","m"]),s(vi,hi,yi,["ss","s"]),s(vi,hi,yi,["fff","ff","f"])],di.Where(function(ir){return ir==NaN}).Any())if(li)throw new Error("Error parsing date from: "+vi+", to format: "+hi);else return false;try{ci.SetValue(n.DateTime.Create.apply(null,di));return true}catch(tr){if(li)throw tr;}return false}if(ai=vi.match(p),ai){ci.SetValue(n.DateTime.Create(parseInt(ai[1],10),parseInt(ai[2],10),parseInt(ai[3],10),parseInt(ai[4],10),parseInt(ai[5],10),parseInt(ai[6],10),parseInt(c(ai[7]||"",3).substr(0,3),10)));return true}if(ai=vi.match(w),ai){ci.SetValue(n.DateTime.Create(parseInt(ai[3],10),parseInt(ai[2],10),parseInt(ai[1],10),parseInt(ai[4],10),parseInt(ai[5],10),parseInt(ai[6],10),parseInt(c(ai[7]||"",3).substr(0,3),10)));return true}if((gi=new Date(Date.parse(vi)))&&!isNaN(gi.getFullYear())){ci.SetValue(new n.DateTime(gi));return true}if(li)throw new Error("Can not parse DateTime from "+vi);return false}var l=new RegExp('d{1,4}|M{1,4}|yy(?:yy)?|[H]{1,2}|[h]{1,2}|[m]{1,2}|[s]{1,2}|[f]{1,3}|[t]{1,2}|[LloKSZT]|"[^"]*"|\'[^\']*',"g"),a=new RegExp("\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]d{4})?)\b","g"),v=new RegExp("[^-+dA-Z]","g"),h;e.Format=y;var p=new RegExp("([\\d]+)-([\\d]+)-([\\d]+)[T\\s]+([\\d]*)[:]*([\\d]*)[:]*([\\d]*)[\\.]*([\\d]*)([\\+ \\:\\d\\w]*)"),w=new RegExp("([\\d]+).([\\d]+).([\\d]+)[\\.]*[T\\s]+([\\d]*)[:]*([\\d]*)[:]*([\\d]*)[\\.]*([\\d]*)([\\+ \\:\\d\\w]*)"),c=function(ei,oi){for(ei+="";ei.length<oi;)ei=ei+"0";return ei};e.TryParseExact=b,e.masks={"default":"ddd MMM dd yyyy HH:mm:ss",shortDate:"M/d/yy",mediumDate:"MMM d, yyyy",longDate:"MMMM d, yyyy",fullDate:"dddd, MMMM d, yyyy",shortTime:"h:mm tt",mediumTime:"h:mm:ss tt",longTime:"h:mm:ss tt K",isoDate:"yyyy-MM-dd",isoTime:"HH:mm:ss",isoDateTime:"yyyy-MM-dd HH:mm:ss.fff",iso3DateTime:"yyyy-MM-ddTHH:mm:ss.fff",iso6DateTime:"yyyy-MM-ddTHH:mm:ss.ffffff",isoUtcDateTime:"UTC:yyyy-MM-dd HH:mm:ss.fff"},h=n.Globalization.CultureInfo.CurrentCulture.DateTimeFormat}(t=n.DateFormat||(n.DateFormat={})),i=function(){function rr(ur){this.Year=ur.getFullYear(),this.Month=ur.getMonth()+1,this.Day=ur.getDate(),this.DayOfWeek=ur.getDay(),this.Hour=ur.getHours(),this.Minute=ur.getMinutes(),this.Second=ur.getSeconds(),this.Millisecond=ur.getMilliseconds(),this.Ticks=ur.getTime()}return rr}(),n.DateTimeParts=i,r=function(){function fr(er){this._typeName="DateTime",er?typeof er=="string"?this._dateItem=Date.FromLocalISOTString(er):er.constructor==fr?this._dateItem=er._dateItem:er.constructor==Date&&(this._dateItem=er):this._dateItem=new Date(0),n.Core.IsDebugDefined&&(this._isoDateStr=Date.ToLocalISOTString(this._dateItem),this._currCultureStr=this._dateItem.ToStringFormated())}fr.prototype.ToStringFormated=function(or){return t.Format(this._dateItem,or)},fr.prototype.ToShortDateString=function(){return this.ToStringFormated(n.Globalization.CultureInfo.CurrentCulture.DateTimeFormat.ShortDatePattern)},fr.prototype.toString=function(){return this.ToStringFormated("yyyy-MM-dd HH:mm:ss.fff K")},fr.prototype.DayOfWeek=function(){return this._dateItem.getDay()},fr.prototype.DatePart=function(){var sr=this.ToParts();return n.DateTime.Create(sr.Year,sr.Month,sr.Day)},fr.prototype.TimePart=function(){var hr=this.ToParts();return n.TimeSpan.Create(0,hr.Hour,hr.Minute,hr.Second,hr.Millisecond)},fr.prototype.ToParts=function(){return new i(this._dateItem)},fr.prototype.AddHours=function(cr){return new n.DateTime(new Date(this._dateItem.getTime()+cr*36e5))},fr.prototype.AddMinutes=function(lr){return new n.DateTime(new Date(this._dateItem.getTime()+lr*6e4))},fr.prototype.AddSeconds=function(ar){return new n.DateTime(new Date(this._dateItem.getTime()+ar*1e3))},fr.prototype.AddMiliseconds=function(vr){return new n.DateTime(new Date(this._dateItem.getTime()+vr))},fr.prototype.AddDays=function(yr){return new n.DateTime(new Date(this._dateItem.getTime()+yr*864e5))},fr.prototype.AddMonths=function(pr){var br=this._dateItem.getFullYear()*12+this._dateItem.getMonth()+pr,kr=br/12,dr=br%12,wr=new Date(this._dateItem.getTime());wr.setMonth(dr),wr.setFullYear(kr);return new n.DateTime(wr)},fr.prototype.AddYears=function(gr){var tu=this._dateItem.getFullYear()+gr,nu=new Date(this._dateItem.getTime());nu.setFullYear(tu);return new n.DateTime(nu)},fr.prototype.ToSystemDate=function(){var iu=this._dateItem?this._dateItem.getTime():0;return new Date(iu)},fr.prototype.ToDateTime=function(){return new fr(this._dateItem)},fr.Now=function(){return new n.DateTime(new Date)},fr.Create=function(ru,uu,fu,eu,ou,su,hu){if(arguments.length>2&&n.Type.TypeInspector.IsNumber(ru,uu,fu))return new n.DateTime(new Date(ru||1700,(uu||1)-1,fu||1,eu||0,ou||0,su||0,hu||0));throw new Error("Can not create DateTime");},fr.TryParseDateTime=function(cu,lu,au){return lu?t.TryParseExact(cu,lu,au):t.TryParseExact(cu,n.Globalization.CultureInfo.CurrentCulture.DateTimeFormat.GeneralLongTimePattern,au)||t.TryParseExact(cu,n.Globalization.CultureInfo.CurrentCulture.DateTimeFormat.ShortDatePattern,au)?true:false},fr.TryParseDate=function(vu,yu,pu){if(fr.TryParseDateTime(vu,yu,pu)){pu.SetValue(pu.GetValue().DatePart());return true}return false},fr.ParseDateTime=function(wu,bu,ku){var du=new n.BoxValue;if(fr.TryParseDateTime(wu,bu,du))return du.GetValue();if(ku)throw Error("Error in ParseDateTime, can not parse: "+wu);return undefined},fr.ParseDate=function(gu,nf,tf){var rf=new n.BoxValue;if(fr.TryParseDate(gu,nf,rf))return rf.GetValue();if(tf)throw Error("Error in ParseDate, can not parse: "+gu);return undefined};return fr}(),n.DateTime=r}(Calysto||(Calysto={})),Date.prototype.ToStringFormated=function(n){return Calysto.DateFormat.Format(this,n)},Date.prototype.ToDateTime=function(){return new Calysto.DateTime(this)},Date.prototype.ToSystemDate=function(){return new Date(this)},Date.prototype.ToDateTime=function(){return new Calysto.DateTime(this)},function(n){var t=function(){function r(u,f){this.Key=u,this.Value=f}return r}(),i;n.KeyValue=t,i=function(){function e(){this._map=new Map}e.prototype.AsEnumerable=function(){var o=this;return n.CalystoEnumerable.From(function(){return function(s){var c,h,l,v,a,y;return __generator(this,function(p){switch(p.label){case 0:p.trys.push([0,5,6,7]),c=__values(s._map.entries()),h=c.next(),p.label=1;case 1:if(!!h.done)return[3,4];l=h.value;return[4,new t(l[0],l[1])];case 2:p.sent(),p.label=3;case 3:h=c.next();return[3,1];case 4:return[3,7];case 5:v=p.sent(),a={error:v};return[3,7];case 6:try{h&&!h.done&&(y=c.return)&&y.call(c)}finally{if(a)throw a.error;}return[7];case 7:return[2]}})}(o)})},e.prototype.GetItems=function(){return this.AsEnumerable().ToArray()},e.prototype.ToRawObject=function(w){var b={};this.GetItems().ForEach(function(k){var d=k.Key+"";if(w&&b[d]!=undefined)throw new Error("Duplicated key: "+k.Key);b[d]=k.Value});return b},e.prototype.Clear=function(){this._map.clear()},e.prototype.RemoveKey=function(g){this._map.delete(g)},e.prototype.GetValues=function(){return this.AsEnumerable().Select(function(nt){return nt.Value}).ToArray()},e.prototype.GetKeys=function(){return this.AsEnumerable().Select(function(tt){return tt.Key}).ToArray()},e.prototype.Count=function(){return this._map.size},e.prototype.ContainsKey=function(it){return!!this._map.has(it)},e.prototype.AddKeyValue=function(rt){return this.Add(rt.Key,rt.Value)},e.prototype.Add=function(ut,ft){if(this._map.has(ut))throw Error("Duplicated key: "+ut);this._map.set(ut,ft);return this},e.prototype.SetValue=function(et,ot){this._map.set(et,ot);return this},e.prototype.TryGetValue=function(st,ht){if(this._map.has(st)){ht.SetValue(this._map.get(st));return true}return false},e.prototype.GetValue=function(ct){var lt=new n.BoxValue;if(this.TryGetValue(ct,lt))return lt.GetValue();throw new Error("Key not found: "+ct);},e.prototype.GetValueOrDefault=function(at,vt){var yt=new n.BoxValue;return this.TryGetValue(at,yt)?yt.GetValue():vt};return e}(),n.Dictionary=i}(Calysto||(Calysto={})),function(n){function r(ht){var ct=-1;return new t(function(lt){if(ht.length>0&&++ct<ht.length){lt.SetValue(ht[ct]);return true}return false})}function i(at){var vt;return new t(function(yt){if(vt=at.next(),vt&&!vt.done){yt.SetValue(vt.value);return true}return false})}function u(pt){var wt,bt;return new t(function(kt){if(bt||(bt=pt()),wt=bt.next(),wt&&!wt.done){kt.SetValue(wt.value);return true}return false})}function f(dt){if(dt&&n.Type.TypeInspector.IsString(dt)){var gt=-1;return new t(function(ni){if(dt.length>0&&++gt<dt.length){ni.SetValue(dt.charAt(gt));return true}return false})}throw new Error("CalystoEnumerator can not be created from source: "+dt);}var t=function(){function e(o){this.fnYieldNext=o}e.prototype.YieldNext=function(s){if(this.fnYieldNext(s)){this.current=s.GetValue();return true}return false},e.prototype.GetNext=function(){var h=new n.BoxValue;this.YieldNext(h);return h},e.prototype.MoveNext=function(){return this.YieldNext(new n.BoxValue)},Object.defineProperty(e.prototype,"Current",{get:function(){return this.current},enumerable:false,configurable:true}),e.FromYieldFunc=function(c){if(c&&n.Type.TypeInspector.IsFunction(c))return new e(c);throw new Error("CalystoEnumerator can not be created from fnYieldNext: "+c);},e.From=function(l){var v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,a;if(l){if(typeof l=="string")return f(l);if(((y=(v=l)===null||v===void 0?void 0:v.GetEnumerator)===null||y===void 0?void 0:y.apply)&&"GetEnumerator"in l)return l.GetEnumerator();if(((w=(p=l)===null||p===void 0?void 0:p.YieldNext)===null||w===void 0?void 0:w.apply)&&((k=(b=l)===null||b===void 0?void 0:b.MoveNext)===null||k===void 0?void 0:k.apply)&&"Current"in l)return l;if(n.Type.TypeInspector.IsArrayOrDomArray(l))return r(l);if((nt=(g=(d=l)===null||d===void 0?void 0:d.next)===null||g===void 0?void 0:g.apply)===null||nt===void 0?void 0:nt.apply)return i(l);if(typeof l=="function"){if((ut=(rt=(it=(tt=l)===null||tt===void 0?void 0:tt.prototype)===null||it===void 0?void 0:it.next)===null||rt===void 0?void 0:rt.apply)===null||ut===void 0?void 0:ut.apply)return u(l);if(a=l(),(et=(ft=a===null||a===void 0?void 0:a.next)===null||ft===void 0?void 0:ft.apply)===null||et===void 0?void 0:et.apply)return i(a);if(((ot=a===null||a===void 0?void 0:a.YieldNext)===null||ot===void 0?void 0:ot.apply)&&((st=a===null||a===void 0?void 0:a.MoveNext)===null||st===void 0?void 0:st.apply)&&"Current"in a)return a}}throw new Error("CalystoEnumerator can not be created from source: "+l);};return e}();n.CalystoEnumerator=t}(Calysto||(Calysto={})),function(n){var t;(function(i){function o(nt){if(window.navigator&&navigator.mimeTypes)for(var tt=0;tt<navigator.mimeTypes.length;tt++)if((navigator.mimeTypes[tt].type+"").indexOf(nt)>0)return true;return false}function l(){f||(f={value:o("x-shockwave-flash")});return f.value}function a(){e||(e={value:o("x-silverlight")});return e.value}function s(it){var rt=it.split("."),ut=rt.shift();rt.length>0&&(ut+="."+rt.join(""));return ut||""}function v(){var ft=navigator.userAgent||"",lt=navigator.vendor||"",ot=null,et=null,st=null,ht=null,vt=null,yt=null,at,ct;(ft.Contains("Bot",true)||ft.Contains("Crawler",true))&&(vt=true),ft.Contains("Mobile",true)&&(st=true),yt=navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,ft.Contains("iPad")?(ht=true,et=r.iPad,ot=ft.match("Version\\/([\\d\\.]+)")):ft.Contains("iPod")?(st=true,et=r.iPod,ot=ft.match("Version\\/([\\d\\.]+)")):ft.Contains("iPhone")?(st=true,et=r.iPhone,ot=ft.match("Version\\/([\\d\\.]+)")):ft.Contains("IEMobile")?(st=true,et=r.IEMobile,ot=ft.match("IEMobile\\/([\\d\\.]+)")):ft.Contains("Nokia")?(st=true,et=r.NokiaMobile,ot=ft.match("Version\\/([\\d\\.]+)")):ft.Contains("PlayBook")||ft.Contains("BlackBerry")||ft.Contains("BB10")?(et=r.BlackBerry,(ht=ft.Contains("Tablet"))||(st=ft.Contains("Mobile"))):(ot=ft.match("MSIE ([\\d\\.]+)"))?et=r.MSIE:("msMaxTouchPoints"in navigator||"msManipulationViewsEnabled"in navigator)&&(ot=ft.match("rv:([\\d\\.]+)"))?et=r.MSIE:"msManipulationViewsEnabled"in navigator&&(ot=ft.match("Edge[\\/]([\\d\\.]+)"))?et=r.MSEdge:(ot=ft.match(" Edg[\\/]([\\d\\.]+)"))?et=r.ChromiumEdge:ft.Contains("MSIE")?et=r.MSIE:ft.Contains("Android")?((ot=ft.match("Version\\/([\\d\\.]+)"))||(ot=ft.match("Android ([\\d\\.]+)")),ft.Contains("Tablet")||screen.width>900&&screen.width>screen.height?(ht=true,et=r.AndroidTablet):(st=true,et=r.AndroidMobile)):lt.Contains("Opera")||ft.Contains("OPR/")||ft.Contains("Opera")?(et=r.Opera,ot=ft.match("(OPR|Opera)\\/([\\d\\.]+)"),ot&&(ot=[ot[0],ot[2]])):lt.Contains("Google")?(ot=ft.match("(OPR|Opera)\\/([\\d\\.]+)"))?et=r.Opera:(et=r.Chrome,ot=ft.match("Chrome\\/([\\d\\.]+)")):lt.Contains("Apple")?(et=r.Safari,ot=ft.match("Version\\/([\\d\\.]+)")):(ot=ft.match("Firefox\\/([\\d\\.]+)"))?et=r.Firefox:ft.Contains("Firefox")?et=r.Firefox:ft.Contains("Mobile")?(st=true,et=r.MobilePhone):ft.Contains("Chrome")?et=r.Chrome:ft.Contains("Safari")&&(et=r.Safari),at=null,ct=ot?ot[1]:"",ct&&(at=parseFloat(s(ct))),st&&ht&&(st=false);return{Found:!!(et&&et>0),KindName:r[et||0],Kind:et||0,Version:at||0,VersionString:ct,IsCrawler:!!vt,IsMobile:!!st,IsTablet:!!ht,IsDesktop:!st&&!ht,HasTouch:!!yt}}function y(){return h||(h=v())}function p(pt){switch(pt){case 10:return"Windows 10";case 6.3:return"Windows 8.1";case 6.2:return"Windows 8";case 6.1:return"Windows 7";case 6:return"Windows Vista";case 5.2:return"Windows XP Professional x64";case 5.1:return"Windows XP";case 4.9:return"Windows ME";case 5:return"Windows 2000";case 4.1:return"Windows 98";case 4:return"Windows NT 4.0";default:return null}}function w(wt){switch(wt){case 4.21:return"iPhone 4";case 7:return"iPhone 5";case 8:return"iPhone 6";default:return null}}function b(){var dt=navigator.userAgent||"",bt=null,kt=null;dt.Contains("Windows Phone")?(kt=u.WindowsPhone,bt=dt.match(new RegExp("Windows Phone( OS | )([\\d\\.]+)")),bt&&(bt=[bt[0],bt[2]])):dt.Contains("Windows")?(kt=u.Windows,bt=dt.match(new RegExp("Windows NT ([\\d\\.]+)"))):dt.Contains("Mac")?(kt=u.Macintosh,bt=dt.match(new RegExp("(OS |OS X )([\\d_]+)")),bt&&bt[2]&&(bt=[bt[0],bt[2].replace(new RegExp("_","g"),".")])):dt.Contains("Android")?(kt=u.Android,bt=dt.match(new RegExp("Android ([\\d\\.]+)"))):dt.Contains("Linux")&&(kt=u.Linux);var gt=null,ni=bt?bt[1]:"",ti=null,ii=null;ni&&(gt=parseFloat(s(ni)),kt==u.Windows?ti=p(gt):kt==u.Macintosh&&(ii=w(gt)));return{Found:!!(kt&&kt>0),KindName:n.Enum.GetName(u,kt||0),Kind:kt||0,Version:gt||0,VersionString:ni,WinName:ti,iPhoneVersion:ii,IsWindows:kt==u.Windows,IsAndroid:kt==u.Android,IsLinux:kt==u.Linux,IsMacintosh:kt==u.Macintosh}}function k(){return c||(c=b())}var r,u,f,e,h,c;(function(d){d[d.Unknown=0]="Unknown",d[d.Firefox=1]="Firefox",d[d.Chrome=2]="Chrome",d[d.Safari=3]="Safari",d[d.Opera=4]="Opera",d[d.MSIE=5]="MSIE",d[d.Bot=6]="Bot",d[d.MobileBot=7]="MobileBot",d[d.iPhone=8]="iPhone",d[d.AndroidMobile=9]="AndroidMobile",d[d.NokiaMobile=10]="NokiaMobile",d[d.WapPhone=11]="WapPhone",d[d.MobilePhone=12]="MobilePhone",d[d.IEMobile=13]="IEMobile",d[d.iPad=14]="iPad",d[d.AndroidTablet=15]="AndroidTablet",d[d.iPod=16]="iPod",d[d.BlackBerry=17]="BlackBerry",d[d.MSEdge=18]="MSEdge",d[d.ChromiumEdge=19]="ChromiumEdge"})(r=i.BrowserKindEnum||(i.BrowserKindEnum={})),function(g){g[g.Unknown=0]="Unknown",g[g.Windows=1]="Windows",g[g.Macintosh=2]="Macintosh",g[g.Android=3]="Android",g[g.Linux=4]="Linux",g[g.WindowsPhone=5]="WindowsPhone"}(u=i.OSKindEnum||(i.OSKindEnum={})),i.HasFlash=l,i.HasSilverlight=a,i.GetBrowser=y,i.GetOS=k})(t=n.Features||(n.Features={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){function r(o,s,h,c,l,a){if(!o)throw Error("cookieName is required");var v=h?new Date(Math.round(Date.now()+1e3*h)):null,y=encodeURIComponent(o+"")+"="+encodeURIComponent(s+"")+(v?"; expires="+v.toUTCString():"")+(c?"; domain="+c:"")+("; path="+(l?l:"/"))+(a?"; secure":"");document.cookie=y}function u(p){var k="",d=document.cookie.indexOf(encodeURIComponent(p)+"="),w,b;p&&d>=0&&(w=d+(encodeURIComponent(p)+"=").length,b=document.cookie.indexOf(";",w),k=b>=0?decodeURIComponent(document.cookie.substring(w,b)):decodeURIComponent(document.cookie.substring(w)));return k||""}function f(){for(var nt,tt,it=document.cookie.split(";"),rt=[],g=0;g<it.length;g++)nt=it[g].replace(new RegExp("(^[\\s]+)|([\\s]$)","ig"),""),nt&&(tt=nt.split("="),rt.push({Name:decodeURIComponent(tt[0]),Value:decodeURIComponent(tt[1])}));return rt}function e(ut,ft){return r(ut,"",Date.now()/-1e3,ft)}i.SetCookieValue=r,i.GetCookieValue=u,i.GetCookies=f,i.DeleteCookie=e})(t=n.CookieUtility||(n.CookieUtility={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){function e(it){var rt,ut;it.indexOf("on")==0&&(it=it.substr(2));switch(it){case"hover":it="mouseover";break;case"hout":it="mouseout";break;case"enterKey":case"escKey":return true}rt=document.createElement(f[it]||"div"),it="on"+it,ut=it in rt,ut||(rt.setAttribute(it,"return;"),ut=typeof rt[it]=="function"),rt=null;return ut}function r(ft,et,ot,st){et=et||"",et.indexOf("on")==0&&(et=et.substr(2));var ht=et.split(".");return{element:ft,eventFullName:et,type:ht.shift(),namespaces:ht,callbackFunc:ot,removeEvent:function(){},useCapture:!!st,passive:false}}function o(ct,lt,at,vt){var yt=r(ct,lt,at,vt);if(!yt.element)throw new Error("element is required");if(!yt.type)throw new Error("eventFullName is required");if(!yt.callbackFunc)throw new Error("callbackMethod is required");if(yt.element.$$calysto_EventsArr||(yt.element.$$calysto_EventsArr=[]),yt.element.$$calysto_EventsArr.push(yt),yt.removeEvent=function(){yt.element.$$calysto_EventsArr.Remove(yt),yt.element.$$calysto_EventsArr.Any()||delete yt.element.$$calysto_EventsArr,u(yt)},yt.element.addEventListener)yt.element.addEventListener(yt.type,yt.callbackFunc,yt.useCapture);else if(yt.element.attachEvent)yt.element.attachEvent("on"+yt.type,yt.callbackFunc,yt.useCapture);else throw new Error("Attaching event is not supported");return yt}function s(pt,wt,bt,kt){if(!wt)return pt.$$calysto_EventsArr;var dt=r(pt,wt,bt,kt);return dt.element.$$calysto_EventsArr?dt.element.$$calysto_EventsArr.Where(function(gt){return(!dt.type||dt.type==gt.type)&&(!dt.callbackFunc||dt.callbackFunc==gt.callbackFunc)&&(dt.namespaces.length==0||dt.namespaces.AsEnumerable().All(function(ni){return gt.namespaces.Contains(ni)}))}):[]}function h(ti,ii,ri,ui){var fi=s(ti,ii,ri,ui),ei;fi&&fi.ForEach(function(oi){return oi.removeEvent()}),ei=r(ti,ii,ri,ui),u(ei)}function u(si){if(si.element.removeEventListener)si.element.removeEventListener(si.type,si.callbackFunc,si.useCapture);else if(si.element.detachEvent)si.element.detachEvent("on"+si.type,si.callbackFunc,si.useCapture);else throw new Error("Dettaching event is not supported");}function c(hi){return hi.target||hi.srcElement}function l(ci,li){!li||(ci.preventDefault&&ci.preventDefault(),ci.stopPropagation&&ci.stopPropagation()),ci.returnValue=!li,ci.cancelBubble=!!li}function a(ai){return{offsetX:"offsetX"in ai?ai.offsetX:"layerX"in ai?ai.layerX:NaN,offsetY:"offsetY"in ai?ai.offsetY:"layerY"in ai?ai.layerY:NaN}}function v(vi){if(!window.attachEvent){if(!!window.addEventListener)return vi.button===0}else return vi.button===0||vi.button===1;return false}function y(yi){return yi.button===2}function p(pi){if(!window.attachEvent){if(!!window.addEventListener)return pi.button===1}else return pi.button===4;return false}function w(wi){return wi&&(wi.button===0||wi.button>0)}function b(bi){return bi&&(bi.keyCode==10||bi.keyCode==13)}function k(ki){return ki&&ki.ctrlKey?true:false}function d(di){return di&&di.shiftKey?true:false}function g(gi){return gi&&gi.keyCode==27}function nt(nr,tr,ir){tr=tr||window.event;var rr=(ir?tr.fromElement:tr.toElement)||tr.relatedTarget;return nr!=rr&&!n.Utility.Dom.IsDescendant(rr,nr)?true:false}function tt(ur,fr){var er,or,sr,hr;if(typeof fr=="string"){if(er=fr,er.indexOf("on")==0&&(er=er.substr(2)),ur.dispatchEvent){if(er.Contains("mouse")||er.Contains("click")){or=document.createEvent("MouseEvent"),or.initEvent(er,false,true),ur.dispatchEvent(or);return}if(er.Contains("key")){sr=document.createEvent("KeyboardEvent"),sr.initEvent(er,false,true),ur.dispatchEvent(sr);return}hr=document.createEvent("Event"),hr.initEvent(er,false,true),ur.dispatchEvent(hr);return}if(ur.fireEvent){ur.fireEvent("on"+er);return}}else{if(ur.dispatchEvent){ur.dispatchEvent(fr);return}if(ur.fireEvent){ur.fireEvent("on"+fr.type);return}}throw new Error("Not supported dispatchEvent: "+fr);}var f={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};i.IsSupported=e,i.Attach=o,i.Detach=h,i.GetTarget=c,i.StopPropagation=l,i.GetOffsetToTarget=a,i.IsLeftMouseButton=v,i.IsRightMouseButton=y,i.IsMiddleMouseButton=p,i.IsAnyMouseButton=w,i.IsEnterKey=b,i.IsCtrlKey=k,i.IsShiftKey=d,i.IsEscKey=g,i.IsHoverChanged=nt,i.DispatchEvent=tt})(t=n.Event||(n.Event={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){function l(nt,tt){tt===void 0&&(tt="");for(var it=new RegExp("\\<[^\\>]+\\>");nt.match(it)!=null;)nt=nt.replace(it,tt||"");return nt}function a(rt){var ut,ft;return rt?(ut=rt.lastIndexOf("_"),ut>0)?rt.substr(ut+1):(ft=rt.lastIndexOf("$"),ft>0)?rt.substr(ft+1):rt:undefined}function v(et){return encodeURIComponent(n.Utility.Encoding.Utf8CharsEncoder.EncodeUTF8(et))}function y(ot){return n.Utility.Encoding.Utf8CharsEncoder.DecodeUTF8(decodeURIComponent(ot))}function p(st){return st.replace(new RegExp("<","g"),"&lt;").replace(new RegExp(">","g"),"&gt;")}function w(ht){return ht.replace(new RegExp("&lt;","g"),"<").replace(new RegExp("&gt;","g"),">")}function h(ct){var lt,at;if(!ct)return"";if(!o){lt=[];for(at in f)lt.push("("+RegExp.Escape(at)+")");o=lt.join("|")}return ct.replace(new RegExp(o,"g"),function(vt){return f[vt]})}function b(yt){var wt,pt;if(!yt)return"";if(!e){e={},wt=[];for(pt in f)e[f[pt]]=pt,wt.push("("+RegExp.Escape(f[pt])+")");s=wt.join("|")}return yt.replace(new RegExp(s,"g"),function(bt){return e[bt]})}function k(kt,dt){if(String.IsNullOrEmpty(kt))return kt;kt=kt.ReplaceAll("\r\n","\n").ReplaceAll("\r","");return dt?kt.Split("\n").Select(function(gt){return h(gt)}).ToStringJoined("<br/>"):kt.ReplaceAll("\n","<br/>")}function d(ni){return ni.replace(new RegExp('([\\\\\x00-\x1f\\"])',"g"),function(ti,ii){var ri=c[ii];if(ri)return ri;ri=ii.charCodeAt();return"\\u00"+Math.floor(ri/16).toString(16)+(ri%16).toString(16)})}function g(ui,fi){if(fi===void 0&&(fi="Full"),ui=new n.Regex(n.Regex.Escape("/*")+"[\\w\\W]*?"+n.Regex.Escape("*/")).Replace(ui," "),fi=="Full"){ui=new n.Regex("[\\s]+").Replace(ui," "),ui=new n.Regex("[ ]*([\\;\\{\\}\\,]+)[ ]*").Replace(ui,"$1");var ei=new RegExp("\\{[^\\}]+\\}","ig"),oi=new RegExp("[ ]*([\\:])[ ]*","ig");ui=ui.replace(ei,function(si){return si.replace(oi,":")});return ui.TrimStart()}return ui}var f,o,e,s,c;u.RemoveHtmlTags=l,u.ExtractAspNameOrId=a,u.UrlEncode=v,u.UrlDecode=y,u.HtmlEncodeSimple=p,u.HtmlDecodeSimple=w,f={"&":"&amp;","'":"&#39;",'"':"&quot;","<":"&lt;",">":"&gt;","\r":"&#13","\n":"&#10"},u.HtmlEncode=h,u.HtmlDecode=b,u.StringToHtml=k,c={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},u.JavaScriptStringEncode=d,u.Minify=g})(r=i.Html||(i.Html={}))})(t=n.Utility||(n.Utility={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){var s,h,f=n.Constants.BaseXCharsTable,c,l,e,a,o;(function(v){function y(w){var k,d,b;for(w=w.replace(new RegExp("\r\n","g"),"\n"),k="",d=0;d<w.length;d++)b=w.charCodeAt(d),b<128?k+=String.fromCharCode(b):b>127&&b<2048?(k+=String.fromCharCode(b>>6|192),k+=String.fromCharCode(b&63|128)):(k+=String.fromCharCode(b>>12|224),k+=String.fromCharCode(b>>6&63|128),k+=String.fromCharCode(b&63|128));return k}function p(g){for(var it="",nt=0,tt=0,rt=0,ut=0;nt<g.length;)tt=g.charCodeAt(nt),tt<128?(it+=String.fromCharCode(tt),nt++):tt>191&&tt<224?(rt=g.charCodeAt(nt+1),it+=String.fromCharCode((tt&31)<<6|rt&63),nt+=2):(rt=g.charCodeAt(nt+1),ut=g.charCodeAt(nt+2),it+=String.fromCharCode((tt&15)<<12|(rt&63)<<6|ut&63),nt+=3);return it}v.EncodeUTF8=y,v.DecodeUTF8=p})(c=u.Utf8CharsEncoder||(u.Utf8CharsEncoder={})),function(ft){function et(st){for(var ct=c.EncodeUTF8(st),lt=[],ht=0;ht<ct.length;ht++)lt.push(ct.charCodeAt(ht));return lt}function ot(at){for(var yt=[],vt=0;vt<at.length;vt++)yt.push(String.fromCharCode(at[vt]));return c.DecodeUTF8(yt.join(""))}ft.GetBytes=et,ft.GetString=ot}(l=u.UTF8||(u.UTF8={})),e=function(){function pt(wt){wt===void 0&&(wt=f.JavaScriptRFCTable64),this.charsTable=wt}pt.prototype.ConvertBytes=function(bt,kt,dt){for(var fi,ti=[],ni=0,gt=0,ii=Math.pow(2,dt)-1,ui=false,ri=0;ri<bt.length;ri++)for(fi=bt[ri],ui?ni=ni<<kt:ui=true,ni=ni|fi,gt+=kt;gt>=dt;)ti.push(ni>>gt-dt&ii),gt-=dt;while(gt>=dt)ti.push(ni>>gt-dt&ii),gt-=dt;while(gt>0&&kt>dt)ti.push(ni<<dt-gt&ii),gt-=dt;return ti},pt.prototype.Convert=function(ei,oi,si){var hi,li,ai,yi;if(!oi||oi!=8&&(oi<1||oi>6))throw Error(oi+" is invalid value. fromBits can be in range [1-6] or 8");if(!si||si!=8&&(si<1||si>6))throw Error(si+" is invalid value. toBits can be in range [1-6] or 8");if(hi=this.ConvertBytes(ei,oi,si),this.charsTable!=f.StandardBase64RFC)return hi;if(oi==8&&si==6){if(ei.length%3>0)for(li=3-ei.length%3,ai=this.charsTable.length-1;li>0;)li--,hi.push(ai)}else if(oi==6&&si==8){for(var ai=this.charsTable.length-1,ci=0,vi=ei.length;ci<vi&&ei[vi-1-ci]==ai;)ci++;yi=hi.length-ci,hi=hi.slice(0,yi)}return hi},pt.prototype.EncodeToBaseString=function(pi,wi){var ki,di,bi;for(typeof pi=="string"&&(pi=l.GetBytes(pi)),ki=this.Convert(pi,8,wi),di=[],bi=0;bi<ki.length;bi++)di.push(this.charsTable.charAt(ki[bi]));return di.join("")},pt.prototype.DecodeBaseStringToArray=function(gi,nr){for(var ir=[],tr=0;tr<gi.length;tr++)ir.push(this.charsTable.indexOf(gi.charAt(tr)));return this.Convert(ir,nr,8)},pt.prototype.DecodeBaseStringToString=function(rr,ur){return l.GetString(this.DecodeBaseStringToArray(rr,ur))};return pt}(),u.CalystoBaseConverter=e,a=function(){function fr(){this.converter=new e}fr.prototype.EncodeToHexString=function(er){return this.converter.EncodeToBaseString(er,4)},fr.prototype.DecodeHexStringToArray=function(or){return this.converter.DecodeBaseStringToArray(or,4)},fr.prototype.DecodeHexStringToString=function(sr){return this.converter.DecodeBaseStringToString(sr,4)};return fr}(),u.HEX=new a,o=function(){function hr(cr){this.converter=new e(cr)}hr.prototype.EncodeToBase64String=function(lr){return this.converter.EncodeToBaseString(lr,6)},hr.prototype.DecodeBase64StringToArray=function(ar){return this.converter.DecodeBaseStringToArray(ar,6)},hr.prototype.DecodeBase64StringToString=function(vr){return this.converter.DecodeBaseStringToString(vr,6)};return hr}(),u.RfcBase64=new o(f.StandardBase64RFC),u.CalystoBase64=new o(f.JavaScriptRFCTable64),u.Base64RndEncoder=new o(((h=(s=n.Core)===null||s===void 0?void 0:s.Constants)===null||h===void 0?void 0:h.RandomRFCTable64)||f.RandomRFCTable64)})(r=i.Encoding||(i.Encoding={}))})(t=n.Utility||(n.Utility={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){function s(cr){return cr?(cr||"").replace(new RegExp("(^[\\s]+)|([\\s]+$)","ig"),""):cr}function yt(lr){return typeof lr=="string"?lr:lr.id?lr.id:lr.id=n.Utility.Generators.GenerateLabel(20)}function pt(ar){var vr=ar;return!!(vr&&vr.parentNode&&vr.offsetWidth>0&&vr.offsetHeight>0&&vr.style&&vr.style.display!="none")}function wt(yr){for(var pr=yr;pr&&pr!=document&&(pr=pr.offsetParent||pr.parentNode););return pr==document}function bt(wr,br){var kr=wr;if(!kr||!br||kr==br)return false;while(kr&&kr!=br)try{kr=kr.parentNode}catch(dr){return false}return kr==br}function kt(gr){var nu=gr,tu;if(!nu)return"";tu="innerText"in nu?nu.innerText:"innerHTML"in nu?n.Utility.Html.RemoveHtmlTags(nu.innerHTML,""):"nodeValue"in nu?nu.nodeValue:nu.value||"";return tu+""}function dt(iu,ru){return iu&&iu.tagName&&iu.tagName.toLowerCase()==ru.toLowerCase()?true:false}function o(){if(!h){var uu=document.createElement("div");uu.innerHTML="<div id='calystoViewportSizeDiv' style='position:fixed;top:0;left:0;bottom:0;right:0;z-index:-10000000;'><\/div>",h=uu.childNodes[0],(document.body||document.documentElement).appendChild(h)}return h}function e(fu){var eu=fu,su,ou;if(eu.getBoundingClientRect)return eu.getBoundingClientRect();su=fu,ou={left:0,top:0,bottom:0,right:0,width:eu.offsetWidth,height:eu.offsetHeight};do if(ou.left+=(eu.offsetLeft||0)-(eu.scrollLeft||0),ou.top+=(eu.offsetTop||0)-(eu.scrollTop||0),eu.style&&(eu.style.position=="fixed"||d(eu).position=="fixed"))break;else eu=eu.offsetParent||eu.parentNode;while(eu);return ou}function gt(hu){var cu=e(hu),lu=tt();return{left:cu.left+lu.scrollLeft,top:cu.top+lu.scrollTop,width:cu.width,height:cu.height}}function ni(au){for(var yu=[],vu=au,pu=0,wu=0;vu=vu.parentNode;){if(pu=vu.scrollTop,wu=vu.scrollTop,vu.scrollTop>0||vu.scrollTop>0){yu.push(vu);continue}if(++vu.scrollTop,vu.scrollTop==pu+1){--vu.scrollTop,yu.push(vu);continue}if(--vu.scrollTop,vu.scrollTop==pu-1){++vu.scrollTop,yu.push(vu);continue}if(++vu.scrollLeft,vu.scrollLeft==wu+1){--vu.scrollLeft,yu.push(vu);continue}if(--vu.scrollLeft,vu.scrollLeft==wu-1){++vu.scrollLeft,yu.push(vu);continue}}return yu}function tt(){return{scrollLeft:Math.max(document.body.scrollLeft,document.documentElement.scrollLeft,window.pageXOffset||0),scrollTop:Math.max(document.body.scrollTop,document.documentElement.scrollTop,window.pageYOffset||0),scrollWidth:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),scrollHeight:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight),clientWidth:o().offsetWidth,clientHeight:o().offsetHeight}}function ti(ku,du){var gu=e(ku),nf=e(o()),tf=gu.top>=nf.top&&gu.top<=nf.top+nf.height,rf=gu.top+gu.height>=nf.top&&gu.top+gu.height<=nf.top+nf.height,uf=gu.left>=nf.left&&gu.left<=nf.left+nf.width,ff=gu.left+gu.width>=nf.left&&gu.left+gu.width<=nf.left+nf.width,ef,of;if(du){ef=gu.width<=nf.width?uf||ff:uf&&!ff||!uf&&ff||!uf&&!ff&&gu.left<nf.left&&gu.left+gu.width>nf.left,of=gu.height<=nf.height?tf||rf:tf&&!rf||!tf&&rf||!tf&&!rf&&gu.top<nf.top&&gu.top+gu.height>nf.top;return ef&&of}return tf&&rf&&uf&&ff}function ii(sf){var hf=e(sf),cf=e(o());return{left:hf.left-cf.left,top:hf.top-cf.top,bottom:cf.top+cf.height-(hf.top+hf.height),right:cf.left+cf.width-(hf.left+hf.width)}}function it(lf,af){var vf=af.match(new RegExp("(rect|margins)[\\(][\\s]*([\\d\\+\\-px\\%]+)[\\s]+([\\d\\+\\-px\\%]+)[\\s]+([\\d\\+\\-px\\%]+)[\\s]+([\\d\\+\\-px\\%]+)[\\s]*[\\)]"));vf=vf||[];return{match:vf,useMargins:vf&&vf[1]=="margins",top:parseFloat(vf[2])||0,right:vf[3]?parseFloat(vf[3]):lf.offsetWidth,bottom:vf[4]?parseFloat(vf[4]):lf.offsetHeight,left:parseFloat(vf[5])||0}}function rt(yf){return it(yf,g(yf,"clip").StyleValue)}function ri(pf,wf){var kf=rt(pf),bf,df;typeof wf=="string"?(df=wf.match(new RegExp("[\\d\\+\\-px\\%]+","g")),df=df||[],bf={top:df[0],right:df[1],bottom:df[2],left:df[3],useMargins:wf.indexOf("margins")>=0}):bf=wf;return bf.useMargins?{top:f(kf.top,bf.top),right:pf.offsetWidth-f(kf.right,bf.right),bottom:pf.offsetHeight-f(kf.bottom,bf.bottom),left:f(kf.left,bf.left)}:{top:f(kf.top,bf.top),right:f(kf.left,bf.right),bottom:f(kf.top,bf.bottom),left:f(kf.left,bf.left)}}function ui(){throw new Error("Not implemeted: SetClip()");}function ut(gf,ne){return!!(gf&&gf.className&&ne&&(" "+gf.className+" ").indexOf(" "+ne+" ")>=0)}function ft(te,ie){ie&&te&&(y(te,ie),te.className=s(te.className+" "+ie))}function y(re,ue){var ee,fe;if(ue&&re)for(ee=ue.split(" "),fe=0;fe<ee.length;fe++)(ue=ee[fe])&&(re.className=s((" "+re.className+" ").replace(new RegExp(" "+ue+" ","g")," ")))}function fi(oe,se){oe&&(oe.className=s(se)||"")}function ei(he,ce){he&&"className"in he&&ce&&(ut(he,ce)?y(he,ce):ft(he,ce))}function p(le){for(var ye=new RegExp("(([\\w]*)-([a-z]))|([^\\-]+)","g"),ae,ve="";(ae=ye.exec(le))!=null;)ve+=(ae[2]||"")+(ae[3]||"").toUpperCase()+(ae[4]||"");return ve}function oi(pe){for(var ke=new RegExp("(([a-z]*)([A-Z]))|([\\w\\-]+)","g"),we,be="";(we=ke.exec(pe))!=null;)be+=(we[2]||"")+((we[3]||"")!=""?"-"+(we[3]||"").toLowerCase():"")+(we[4]||"");return be}function et(de,ge){if(de&&de.style){var no=typeof ge=="string"?parseFloat(ge):ge;no<0?no=0:no>1&&(no=no/100),no>1&&(no=1),"opacity"in de.style&&(de.style.opacity=no+""),"filter"in de.style&&(de.style.filter="alpha(opacity="+no*100+")")}}function ot(to){var io=NaN,ro;to&&to.style&&("opacity"in to.style?io=parseFloat(to.style.opacity)*100:"filter"in to.style&&(ro=to.style.filter.match(new RegExp("opacity[\\s\\=]+([\\d]+)")),ro&&(io=parseFloat(ro[1]))));return typeof io=="number"&&io>=0&&io<100?io:100}function w(uo){var fo=[];return uo&&uo.style&&l(uo.style.zIndex,fo)?fo[0]:NaN}function si(eo){for(var oo=eo,so=NaN;oo&&oo.ownerDocument&&!n.Type.TypeInspector.IsNumber(so=w(oo));)oo=oo.parentNode;return so}function c(ho,co){if(co=="opacity"||co=="zoom"||co=="zIndex")return"";var lo;return ho&&typeof ho=="string"&&(lo=ho.match(new RegExp("(px|%)$","ig")))&&lo&&lo[1]?lo[1]:typeof co=="string"&&st.test(co)?"px":""}function l(ao,vo){var yo,po;if(ao&&typeof ao=="string"?(po=ao.match(new RegExp("^[\\*\\-\\+\\=]*?([\\-]{0,1}[\\d\\.]+)(px|%)?$")),po&&(yo=parseFloat(po[1]))):yo=ao,n.Type.TypeInspector.IsNumber(yo)){vo.push(yo);return true}return false}function a(wo,bo){var ko=[];if(l(wo,ko))return ko.pop();if(n.Type.TypeInspector.IsNumber(bo))return bo;throw new Error("Can not extract number from: "+wo);}function b(go){return!!go&&typeof go=="string"&&go.indexOf("=")==1}function k(ns){return!!ns&&typeof ns=="string"&&ns.indexOf("%")>0}function v(ts,is){return typeof ts=="string"?ts.replace(new RegExp("^([\\-]?[\\.\\d]+)(px|%)?$","i"),"$1"+is):isNaN(ts)?"auto":is?Math.round(ts)+""+is:ts+""}function f(rs,us){var fs,os,es;if(typeof us=="string"){if(b(us)){if(fs=a(us.substr(2)),os=false,typeof rs=="string"&&(os=k(rs),rs=parseFloat(rs)),k(us)&&(os||(fs=rs*fs/100)),es=us?us.match(new RegExp("^[\\+\\-\\*]\\=")):null,es&&es[0])switch(es[0]){case"+=":rs+=fs;break;case"-=":rs-=fs;break;case"*=":rs*=fs}return rs}return a(us)}return us}function d(ss){return ss.ownerDocument&&ss.ownerDocument.defaultView&&ss.ownerDocument.defaultView.getComputedStyle?ss.ownerDocument.defaultView.getComputedStyle(ss):window.getComputedStyle?window.getComputedStyle(ss):ss.currentStyle?ss.currentStyle:ss.style}function g(hs,cs){var ys=p(cs),ls=undefined,as=NaN,ws,bs=false,vs,ps;if(cs=="opacity")as=ot(hs),ls=as+"";else if(ys=="zIndex")as=w(hs),ls=as+"";else if(cs.indexOf("client")==0||cs.indexOf("offset")==0||cs.indexOf("scroll")==0)if(vs=hs[ys],typeof vs=="string")ls=vs,as=a(vs);else if(n.Type.TypeInspector.IsNumber(vs))as=vs,ls=vs+"";else throw new Error("Extracting number is not supported");else ls=hs.style[ys],(!ls||cs.indexOf("color")>=0||ls=="auto"||ls=="initial"||ls=="inherit")&&(ls=d(hs)[ys]),ps=[],l(ls,ps)&&(bs=true,as=Math.round(ps.pop()),ws=c(ls,cs));if(n.Type.TypeInspector.IsNumber(as)&&ls=="auto")switch(ys){case"height":as=hs.clientHeight;break;case"width":as=hs.clientWidth}return{Element:hs,Name:cs,NumericValue:as,IsNumber:bs,Units:ws,StyleValue:ls+"",StyleName:ys}}function hi(ks,ds,gs,nh){var uh,ih,th,rh,fh,eh;if(ks&&ks.style)if(uh=p(ds),b(gs)?(rh=g(ks,ds),th=f(rh.NumericValue,gs),ih=v(th,nh||rh.Units)):typeof gs=="string"?(fh=c(gs,ds),ih=v(gs,fh)):(eh=nh||c(gs,ds),th=gs,ih=v(gs,eh)),ds=="opacity")et(ks,th);else if(ds.indexOf("offset")!=0)if(ds.indexOf("client")==0||ds.indexOf("scroll")==0)ks[ds]=th;else try{ks.style[uh]=ih}catch(oh){}}function ci(sh,hh){return sh&&sh.getAttributeNode?sh.getAttributeNode(hh):null}function li(ch,lh){return ch&&ch.getAttribute?ch.getAttribute(lh):null}function ht(ah,vh,yh){ah&&ah.setAttribute&&ah.setAttribute(vh,yh)}function ct(ph,wh){ph&&ph.removeAttribute&&ph.removeAttribute(wh)}function ai(bh,kh){if(bh){if(bh.hasAttribute)return bh.hasAttribute(kh);if(bh.getAttribute)return!(bh.getAttribute(kh)==null)}return false}function vi(dh,gh){dh&&(gh?(ct(dh,"disabled"),dh.disabled=false):(ht(dh,"disabled","disabled"),dh.disabled=true))}function yi(nc){return nc&&nc.parentNode&&nc.cloneNode?nc.cloneNode(true):nc}function pi(tc){tc&&tc.parentNode&&tc.parentNode.removeChild(tc)}function nt(ic,rc){var uc,fc;if(ic&&ic.parentNode){if(rc&&rc.length>0)for(uc=rc.length-1;uc>=0;uc--)fc=rc[uc],fc&&ic.parentNode&&(ic.parentNode.insertBefore(fc,ic),ic=fc)}else throw new Error("InsertBefore failed, no parentNode");}function wi(ec,oc){nt(ec,oc),ec&&ec.parentNode&&ec.parentNode.removeChild(ec)}function bi(sc,hc){var lc,cc;if(sc&&sc.parentNode){if(hc&&hc.length>0)for(lc=0;lc<hc.length;lc++)cc=hc[lc],cc&&sc.parentNode&&(sc.parentNode.insertBefore(cc,sc),sc.parentNode.insertBefore(sc,cc),sc=cc)}else throw new Error("InsertAfter failed, no parentNode");}function ki(ac,vc){var pc,yc;if(ac&&ac.childNodes&&ac.nodeType==1){for(yc=ac.childNodes.length-1;yc>=0;yc--)pc=ac.childNodes[yc],pc&&pc.parentNode&&pc.parentNode.removeChild(pc);if(vc&&vc.length>0)for(yc=0;yc<vc.length;yc++)ac.appendChild(vc[yc])}}function lt(wc,bc){var kc,dc;if(wc&&wc.childNodes&&wc.nodeType==1&&bc&&bc.length>0)for(kc=0;kc<bc.length;kc++)dc=bc[kc],dc&&wc.appendChild(dc)}function di(gc,nl){gc&&gc.childNodes&&(gc.childNodes.length>0?nt(gc.childNodes[0],nl):lt(gc,nl))}function gi(){for(var ul,rl,tl=[],il=0;il<arguments.length;il++)tl[il]=arguments[il];if(arguments.length==0)return[];for(ul=[],tl=n.Collections.SelectFlatten(arguments),rl=0;rl<tl.length;rl++)ul.AddRange(nr(tl[rl]));return ul}function nr(fl){var hl,ol,cl,el,sl;if(n.Type.TypeInspector.IsNullOrUndefined(fl))return[];if(typeof fl=="number"&&(fl=fl+""),typeof fl=="string"){if(String.IsNullOrWhiteSpace(fl))return[];for(hl=document.createElement("div"),hl.innerHTML=fl,ol=[],el=0;el<hl.childNodes.length;el++)cl=hl.childNodes[el],ol.push(cl);for(el=0;el<ol.length;el++)sl=ol[el],sl&&sl.parentNode&&sl.parentNode.removeChild(sl);return ol}if(fl.childNodes)return[fl];throw new Error("Invalid type in ConvertSingleToElementsArray");}function tr(ll,al,vl){var yl=ll,bl,na,ta;if(yl&&yl.parentNode&&yl.parentNode.clientHeight>0&&yl.parentElement.clientWidth>0){bl=true,yl.parentNode.style.overflow="hidden",(vl||bl)&&((yl.tagName||"").toLowerCase()=="img"&&(yl.removeAttribute("width"),yl.removeAttribute("height"),yl.style.width="",yl.style.height=""),yl.style.margin="");var kl=yl.__initialWidth||yl.offsetWidth||yl.clientWidth,dl=yl.__initialHeight||yl.offsetHeight||yl.clientHeight,gl=kl/dl||1,wl=kl,pl=dl;(vl&&(wl<yl.parentElement.clientWidth||pl<yl.parentElement.clientHeight)||bl&&(wl>yl.parentElement.clientWidth||pl>yl.parentElement.clientHeight))&&(wl=yl.parentElement.clientWidth,pl=wl/gl,(al&&pl<yl.parentElement.clientHeight||!al&&pl>yl.parentElement.clientHeight)&&(pl=yl.parentElement.clientHeight,wl=pl*gl)),yl.style.position="relative",yl.style.top="0",yl.style.left="0",yl.style.bottom="0",yl.style.right="0",yl.style.padding="0",yl.style.margin="0",wl=Math.ceil(wl),pl=Math.ceil(pl),na=Math.floor((yl.parentNode.clientWidth-wl)/2),ta=Math.floor((yl.parentNode.clientHeight-pl)/2),yl.style.marginTop=ta+"px",yl.style.marginLeft=na+"px",yl.style.width=wl+"px",yl.style.height=pl+"px"}}function ir(ia){return ia&&ia.style?ia.style.transform||ia.style.msTransform||ia.style.webkitTransform:""}var at=function(){function rr(){this._currDeltaY=0,this._currDeltaX=0}rr.prototype.HandleScroll=function(ur,fr){var er,or,sr;if(fr.deltaY||fr.deltaX){er=fr.deltaY||0,or=fr.deltaX||0,fr.shiftKey&&(sr=er,er=or,or=sr);switch(fr.deltaMode){case 0:this._currDeltaY+=er,this._currDeltaX+=or;break;case 1:this._currDeltaY+=er*20,this._currDeltaX+=or*20;break;case 2:this._currDeltaY+=er*window.screen.height,this._currDeltaX+=or*window.screen.height}Math.abs(this._currDeltaY)>10&&(ur.scrollTop+=this._currDeltaY,this._currDeltaY=0),Math.abs(this._currDeltaX)>10&&(ur.scrollLeft+=this._currDeltaX,this._currDeltaX=0)}};return rr}(),vt,h,st;u.ScrollHandler=at,function(hr){hr[hr.ELEMENT_NODE=1]="ELEMENT_NODE",hr[hr.ATTRIBUTE_NODE=2]="ATTRIBUTE_NODE",hr[hr.TEXT_NODE=3]="TEXT_NODE",hr[hr.CDATA_SECTION_NODE=4]="CDATA_SECTION_NODE",hr[hr.ENTITY_REFERENCE_NODE=5]="ENTITY_REFERENCE_NODE",hr[hr.ENTITY_NODE=6]="ENTITY_NODE",hr[hr.PROCESSING_INSTRUCTION_NODE=7]="PROCESSING_INSTRUCTION_NODE",hr[hr.COMMENT_NODE=8]="COMMENT_NODE",hr[hr.DOCUMENT_NODE=9]="DOCUMENT_NODE",hr[hr.DOCUMENT_TYPE_NODE=10]="DOCUMENT_TYPE_NODE",hr[hr.DOCUMENT_FRAGMENT_NODE=11]="DOCUMENT_FRAGMENT_NODE",hr[hr.NOTATION_NODE=12]="NOTATION_NODE"}(vt=u.NodeTypeEnum||(u.NodeTypeEnum={})),u.TrimSpaces=s,u.EnsureElementId=yt,u.IsElementVisible=pt,u.IsElementInDom=wt,u.IsDescendant=bt,u.GetInnerText=kt,u.HasTagName=dt,u.GetViewportDiv=o,u.GetElementScreenPosition=e,u.GetElementPagePosition=gt,u.GetScrollableAncestors=ni,u.GetPageDimensions=tt,u.IsElementInViewport=ti,u.GetElementToViewportPosition=ii,u.ParseClip=it,u.GetClip=rt,u.CalculateClip=ri,u.SetClip=ui,u.HasClass=ut,u.AddClass=ft,u.RemoveClass=y,u.SetClass=fi,u.ToggleClass=ei,u.ConvertCssNameToCamel=p,u.ConvertCssNameFromCamel=oi,u.SetOpacity=et,u.GetOpacity=ot,u.GetZIndex=w,u.GetZIndexNested=si,st=new RegExp("top|left|bottom|right|width|height|size|radius|padding|margin","i"),u.ExtractUnits=c,u.TryExtractStyleNumericValue=l,u.ExtractNumericValue=a,u.IsIncrementValue=b,u.IsPercent=k,u.CreateStyleValue=v,u.CalculateNumericValue=f,u.GetComputedStyleDeclaration=d,u.GetComputedStyle=g,u.SetStyleValue=hi,u.GetAttributeNode=ci,u.GetAttribute=li,u.SetAttribute=ht,u.RemoveAttribute=ct,u.HasAttribute=ai,u.SetEnabled=vi,u.CloneNodeIfHasParent=yi,u.RemoveNodeFromDom=pi,u.InsertBefore=nt,u.ReplaceWith=wi,u.InsertAfter=bi,u.ReplaceChildrenWith=ki,u.AddChildren=lt,u.InsertChildren=di,u.ConvertToElementsArray=gi,u.CenterElementIntoParent=tr,u.SelectTransform=ir})(r=i.Dom||(i.Dom={}))})(t=n.Utility||(n.Utility={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){function f(l){var a;return l&&(a=l.indexOf("?"))>=0?l.substr(0,a):l}function e(v){var y;return v&&(y=v.indexOf("?"))>=0?v.substr(y):""}function o(p){var w;return p&&(w=p.indexOf("?"))>=0?p.substr(0,w):p}function s(b){var k;return b&&(b=f(b))&&(k=b.lastIndexOf("."))>=0?b.substr(k):""}function h(d){var g;return d&&(d=f(d))&&((g=d.lastIndexOf("/"))>=0||(g=d.lastIndexOf("\\"))>=0)?d.substr(0,g):d}function c(nt){var tt;return nt&&(nt=f(nt))&&((tt=nt.lastIndexOf("/"))>=0||(tt=nt.lastIndexOf("\\"))>=0)?nt.substr(tt+1):nt}u.GetQueryString=e,u.GetFilePath=o,u.GetExtension=s,u.GetDirectoryName=h,u.GetFileName=c})(r=i.Path||(i.Path={}))})(t=n.Utility||(n.Utility={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){function f(c,l){var a,v,y;if(window.Blob)return new window.Blob(c,{type:l});if(a=window,v=a.BlobBuilder||a.WebKitBlobBuilder||a.MozBlobBuilder||a.MSBlobBuilder,v){y=new v,y.append(c);return y.getBlob(l)}throw new Error("Blob is not supported");}function e(p,w){var b,k,nt,ot;w=w||"";var d=1024,tt=atob(p),it=tt.length,rt=Math.ceil(it/d),ut=new Array(rt);for(b=0;b<rt;++b){var g=b*d,ft=Math.min(g+d,it),et=new Array(ft-g);for(k=g,nt=0;k<ft;++nt,++k)et[nt]=tt[k].charCodeAt(0);ot=new Uint8Array(et),ut[b]=ot}return f(ut,w)}function o(st,ht){for(var ct,at,vt,yt,pt=st.split(";"),lt=0;lt<pt.length;lt++)ct=pt[lt],ct.StartsWith("data:")?vt=ct.substr(5):ct.StartsWith("base64,")&&(yt=ct.substr(7));at=e(yt,vt),at.filename=ht;return at}function s(wt,bt){var kt=new FileReader;kt.onload=function(dt){for(var ii,ri,ni=new Uint8Array(dt.currentTarget.result),ti=[ni.length],gt=0;gt<ni.length;gt++)ti[gt]=String.fromCharCode(ni[gt]);ii=ti.join(""),ri=btoa(ii),bt(ri)},kt.readAsArrayBuffer(wt)}function h(ui,fi){var ei=new FileReader;ei.onload=function(oi){fi(oi.currentTarget.result,ui.name||ui.filename)},ei.readAsDataURL(ui)}u.CreateBlob=f,u.Base64ToBlob=e,u.DataUrlToBlob=o,u.BlobToBase64Async=s,u.BlobToDataUrlAsync=h})(r=i.Blob||(i.Blob={}))})(t=n.Utility||(n.Utility={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){function f(h,c,l){var a=h,v;if(a!=null&&a.type)try{(!c||c<0)&&(c=0),(arguments.length<3||l>a.value.length)&&(l=a.value.length),a.setSelectionRange?(a.focus(),a.setSelectionRange(c,l)):a.createTextRange&&(a.focus(),a.caret?(v=a.caret,v.moveStart("textedit",-1),v.moveEnd("textedit",-1)):v=a.createTextRange(),v.moveEnd("character",l),v.moveStart("character",c),v.select())}catch(y){}}function o(p,w){f(p,w,w)}function e(b){var k=b,d;if(k==null||!k.type)return null;try{if(k.createTextRange&&k.caret){d=k.caret.duplicate(),d.moveStart("textedit",-1);return d.text.length}if(k.selectionStart||k.selectionStart==0)return k.selectionStart}catch(g){}return null}function s(nt){var tt=nt,it;if(tt==null||!tt.type)return null;try{if(tt.selectionEnd)return{start:tt.selectionStart,end:tt.selectionEnd};if(tt.createTextRange&&tt.caret&&(it=e(tt),typeof it=="number"))return{start:it-tt.caret.text.length,end:it}}catch(rt){}return null}u.SetInputSelectionRange=f,u.SetCaretPosition=o,u.GetCaretPosition=e,u.GetInputSelectionRange=s})(r=i.Caret||(i.Caret={}))})(t=n.Utility||(n.Utility={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){function a(g){var nt=g,tt=nt.requestFullscreen||nt.msRequestFullscreen||nt.mozRequestFullScreen||nt.webkitRequestFullscreen||nt.webkitRequestFullScreen||nt.webkitEnterFullScreen||nt.webkitEnterFullscreen;tt&&tt.apply(nt)}function v(){f&&f.apply(document)}function s(){var rt=document;return rt.fullscreenElement||rt.msFullscreenElement||rt.mozFullScreenElement||rt.webkitFullscreenElement||rt.webkitCurrentFullScreenElement||rt.webkitDisplayingFullscreen}function y(){return!!s()}function h(){var ut=document;return!!(ut.fullscreenEnabled||ut.msFullscreenEnabled||ut.mozFullScreenEnabled||ut.webkitFullscreenEnabled||"webkitIsFullScreen"in ut)}function p(){return window.parent?!!(f&&h()):!!f}function k(ft){if(!c){c=true;var et=document;w.ForEach(function(ot){return n.Event.Attach(et,ot,function(){l.ForEach(function(st){return st(et)})})})}l.push(ft)}function d(ht){if(!e){e=true;var ct=document;b.ForEach(function(lt){return n.Event.Attach(ct,lt,function(){o.ForEach(function(at){return at(ct)})})})}o.push(ht)}var f,e,o;u.RequestFullScreen=a,f=function(){var it=document;return it.cancelFullscreen||it.msExitFullscreen||it.msCancelFullscreen||it.mozCancelFullScreen||it.webkitExitFullscreen||it.webkitExitFullScreen||it.webkitCancelFullscreen||it.webkitCancelFullScreen}(),u.CancelFullScreen=v,u.GetFullScreenElement=s,u.IsInFullscreen=y,u.IsIframeFullscreenEnabled=h,u.IsSupported=p;var w=["MSFullscreenChange","webkitfullscreenchange","mozfullscreenchange","fullscreenchange"],b=["MSFullscreenError","webkitfullscreenerror","mozfullscreenerror","fullscreenerror"],c=false,l=[];u.OnFullscreenChanged=k,e=false,o=[],u.OnFullscreenError=d})(r=i.FullScreen||(i.FullScreen={}))})(t=n.Utility||(n.Utility={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){function f(o,s){var h,l,c;if(!(o>0||o===0))throw new Error("LongToByteArray argument may not be negative");for(h=[],l=0;l<8;l++)if(c=o&255,s&&Math.pow(2,l*8)>o){(c>0||h.length==0)&&h.push(c);break}else h.push(c),o=(o-c)/256;return h}function e(a){for(var v=0,y=a.length-1;y>=0;y--)v=v*256+a[y];return v}u.LongToByteArray=f,u.ByteArrayToLong=e})(r=i.CalystoTools||(i.CalystoTools={}))})(t=n.Utility||(n.Utility={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var u,r;(function(f){f[f.Fit=0]="Fit",f[f.Crop=1]="Crop",f[f.Exact=2]="Exact",f[f.Stretch=3]="Stretch"})(u=i.ResizeModeEnum||(i.ResizeModeEnum={})),r=function(){function e(){this.Width=500,this.Height=500,this.Mode="Fit",this.Overscan=0}e.prototype.Resize=function(o){var h=o.width,s=o.height,a=o.width/o.height,v=this.Width,y=this.Height,c,l,p,w;if(this.Mode=="Stretch"?(h=this.Width,s=this.Height):this.Mode=="Exact"||this.Mode=="Fit"?(h=this.Width,s=h/a,s>this.Height&&(s=this.Height,h=s*a),this.Mode=="Fit"&&(v=h,y=s)):this.Mode=="Crop"&&(h=Math.min(o.width,this.Width),s=h/a,s<this.Height&&(s=Math.min(o.height,this.Height),h=s*a),v=Math.min(h,this.Width),y=Math.min(s,this.Height)),s+=this.Overscan,h+=this.Overscan,c=document.createElement("canvas"),l=c.getContext("2d"),!l)throw new Error("Can not create 2d context");c.width=v,c.height=y,this.BackColor&&this.BackColor!="transparent"&&(l.fillStyle=this.BackColor,l.fillRect(0,0,c.width,c.height)),p=(v-h)/2,w=(y-s)/2,l.drawImage(o,p,w,h,s);return c.toDataURL(this.OutputMime||"image/png")};return e}(),i.ImageResize=r})(t=n.Graphics||(n.Graphics={}))}(Calysto||(Calysto={})),function(n){var t=function(){function i(r){this.urlStr=r,this.items=[],r&&this.ParseImpl(r)}i.prototype.GetInnerUri=function(){return this.uri||(this.uri=new n.Uri)},i.prototype.GetQuery=function(){for(var e,u=[],f=0;f<this.items.length;f++)e=this.items[f],u.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value));return u.length>0?"?"+u.join("&"):""},i.prototype.GetUrl=function(){this.uri=this.uri||new n.Uri,this.uri.Query=this.GetQuery();return this.uri.GetAbsoluteUri()},i.prototype.Clear=function(){this.items=[]},i.prototype.FindItem=function(o,s){if(s===void 0&&(s=false),s)return this.items.Where(function(c){return c.name==o});var h=o.toLowerCase();return this.items.Where(function(l){return l.lowerName==h})},i.prototype.SetValue=function(a,v){if(a){var y=this.FindItem(a).pop(),p=a.toLowerCase();y?(y.lowerName=p,y.name=a,y.value=n.Type.TypeInspector.IsNullOrUndefined(v)?"":v+""):(y={lowerName:p,name:a,value:n.Type.TypeInspector.IsNullOrUndefined(v)?"":v+""},this.items.push(y))}return this},i.prototype.RemoveValue=function(w){if(w){var b=w.toLowerCase();this.items=this.items.Where(function(k){return k.lowerName!=b})}return this},i.prototype.GetValue=function(d){var g=this.FindItem(d).pop();return g?g.value:null},i.prototype.ParseImpl=function(nt){var it,rt,tt;if(this.uri=new n.Uri(nt),it=(this.uri.Query||"").Trim(["?"]),it)for(rt=it.split("&"),tt=0;tt<rt.length;tt++){var ut=rt[tt].split("="),ft=decodeURIComponent(ut[0]),et=decodeURIComponent(ut[1]);this.SetValue(ft,et)}return this};return i}();n.QueryString=t}(Calysto||(Calysto={})),function(n){var t;(function(i){function r(s){for(var l=s.tagName.toLowerCase(),h=document.createElement(l),c=0;c<s.attributes.length;c++)h.setAttribute(s.attributes[c].name,s.attributes[c].value);h.text=h.textContent=s.textContent||s.text,n.Utility.Dom.ReplaceWith(s,[h]);return h}function u(a,v){var y=document.createElement("script");y.type="text/javascript",y.src=a,y.async=!!v,(document.getElementsByTagName("head")[0]||document.body||document.documentElement).appendChild(y);return y}function f(p){var w=document.createElement("script");w.type="text/javascript",w.text=w.textContent=p,(document.getElementsByTagName("head")[0]||document.body||document.documentElement).appendChild(w);return w}function e(b){var k=document.createElement("link");k.rel="stylesheet",k.type="text/css",k.href=b,(document.getElementsByTagName("head")[0]||document.body||document.documentElement).appendChild(k);return k}function o(d){var g=document.createElement("style");g.type="text/css",g.text=g.textContent=d,(document.getElementsByTagName("head")[0]||document.body||document.documentElement).appendChild(g);return g}i.ReloadScriptNode=r,i.LoadJSFile=u,i.LoadJS=f,i.LoadCSSFile=e,i.LoadCSS=o})(t=n.ScriptLoader||(n.ScriptLoader={}))}(Calysto||(Calysto={})),function(n){var r=function(){function u(f){this.onTimeout=f,this.sleepMs=0,this.items=[],f&&this.OnTimeout(f)}u.prototype.IsRunning=function(){return!!this.timeoutId},u.prototype.Abort=function(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null);return this},u.prototype.Start=function(e){var o=this;this.Abort(),this.timeoutId=setTimeout(function(){clearTimeout(o.timeoutId),o.timeoutId=null;for(var s=0;s<o.items.length;s++)o.items[s](o)},e>0?e:0);return this},u.prototype.OnTimeout=function(h){this.items.push(h);return this};return u}(),t,i;n.Timer=r,t=function(){function c(l){this.timeoutMs=l,this._expires=0}c.prototype.Start=function(){this._expires=Date.now()+this.timeoutMs;return this},c.prototype.Abort=function(){this._expires=0;return this},c.prototype.IsBussy=function(){return this._expires>Date.now()},c.prototype.IsBussyOrStart=function(){if(this.IsBussy())return true;this.Start();return false};return c}(),n.BussyTimer=t,i=function(){function a(v){v===void 0&&(v=300),this._timer=new t(v)}a.prototype.IsDoubleclicked=function(){return this._timer.IsBussyOrStart()};return a}(),n.MouseTimer=i}(Calysto||(Calysto={})),function(n){var t,i;(function(r){r[r.Scheme=0]="Scheme",r[r.Host=1]="Host",r[r.Port=2]="Port",r[r.Path=3]="Path",r[r.Query=4]="Query",r[r.Hash=5]="Hash"})(t||(t={})),i=function(){function u(f){this.Scheme="",this.Username="",this.Password="",this.Host="",this.Port="",this.Path="",this.Query="",this.Hash="",f&&this.ParseUrl(f)}u.prototype.CloneUri=function(e,o){o===void 0&&(o=t.Hash);var s=new n.Uri;e<=t.Scheme&&o>=t.Scheme&&(s.Scheme=this.Scheme),e<=t.Host&&o>=t.Host&&(s.Username=this.Username,s.Password=this.Password,s.Host=this.Host),e<=t.Port&&o>=t.Port&&(s.Port=this.Port),e<=t.Path&&o>=t.Path&&(s.Path=this.Path),e<=t.Query&&o>=t.Query&&(s.Query=this.Query),e<=t.Hash&&o>=t.Hash&&(s.Hash=this.Hash);return s},u.prototype.BuildUri=function(){var h=[];String.IsNullOrEmpty(this.Scheme)||h.push(this.Scheme+":"),String.IsNullOrEmpty(this.Host)||(h.push("//"),String.IsNullOrEmpty(this.Username)||(h.push(this.Username),String.IsNullOrEmpty(this.Password)||h.push(":"+this.Password),String.IsNullOrEmpty(this.Username)&&String.IsNullOrEmpty(this.Password)||h.push("@")),String.IsNullOrEmpty(this.Host)||h.push(this.Host),this.Port&&h.push(":"+this.Port)),String.IsNullOrEmpty(this.Path)||h.push(this.Path),String.IsNullOrEmpty(this.Query)||(this.Query.StartsWith("?")||h.push("?"),h.push(this.Query)),String.IsNullOrEmpty(this.Hash)||(this.Hash.StartsWith("#")||h.push("#"),h.push(this.Hash));return h.join("")},u.prototype.GetSchemeHost=function(){return this.CloneUri(t.Scheme,t.Port).BuildUri()},u.prototype.GetSchemeHostPath=function(){return this.CloneUri(t.Scheme,t.Path).BuildUri()},u.prototype.GetAbsoluteUri=function(){return this.CloneUri(t.Scheme).BuildUri()},u.prototype.GetPathQueryHash=function(){return this.CloneUri(t.Path).BuildUri()},u.prototype.ParseUrl=function(c){if(c){var l=c.match(new RegExp("(([\\w]+)\\:)?((//)(([^\\:@]+)(:([^\\:@]+))?@)?([^/\\:]+)(:([\\d]+))?)?(/[^\\?\\#]*)?(\\?[^\\#]+)?(\\#[\\w\\W]+)?"));l&&(this.Scheme=l[2]||"",this.Username=l[6]||"",this.Password=l[8]||"",this.Host=l[9]||"",this.Port=l[11]||"",this.Path=l[12]||"",this.Query=l[13]||"",this.Hash=l[14]||"")}};return u}(),n.Uri=i}(Calysto||(Calysto={})),function(n){var t;(function(i){function f(a){var v=n.Constants.AppConstants.EmailRegexPattern;a+="";return!!(a&&a.match(new RegExp(v)))}function u(y){y+="";return!!(y&&y.match(new RegExp("^[\\-]*[ ]*[ \\.\\,]?[\\d]+[\\d\\.\\,]*$")))}function e(p){return u(p)}function o(w){w+="";return!!(w&&w.match(new RegExp("^[\\- ]?[\\d]+$")))}function s(b){b+="";return!!(b&&b.match(new RegExp("[\\- ]?[ \\.\\,]?[\\d]+[\\d\\.\\,]*")))}function h(k,d){var g=new n.BoxValue;return n.DateFormat.TryParseExact(k,d||n.Globalization.CultureInfo.CurrentCulture.DateTimeFormat.ShortDatePattern,g)}function c(nt,tt){var it=new n.BoxValue;return n.DateFormat.TryParseExact(nt,tt||n.Globalization.CultureInfo.CurrentCulture.DateTimeFormat.GeneralLongTimePattern,it)}function r(rt){var ut=parseFloat(rt);return isFinite(ut)&&ut>0&&ut<256||ut===0}function l(ft){var et=ft.match(new RegExp("^([\\d]+)\\.([\\d]+)\\.([\\d]+)\\.([\\d]+)$"));return!!(et&&r(et[1])&&r(et[2])&&r(et[3])&&r(et[4]))}i.IsEmail=f,i.CanConvertToNumber=u,i.CanConvertToDecimal=e,i.CanConvertToInteger=o,i.ContainsNumber=s,i.CanConvertToDate=h,i.CanConvertToDateTime=c,i.IsIPv4Address=l})(t=n.Validate||(n.Validate={}))}(Calysto||(Calysto={})),function(n){var t=function(){function i(r,u){u===void 0&&(u=false),this.ignoreCase=false,this.regexPattern=r||"",this.ignoreCase=u}i.Escape=function(f){return RegExp.Escape(f)},i.prototype.CreateRegex=function(e){e===void 0&&(e=false);return new RegExp(this.regexPattern,(this.ignoreCase?"i":"")+(e?"g":""))},i.prototype.CreateMatchSegment=function(o,s,h){var c,l;typeof o=="string"?(c=[o],c.index=s||0,c.success=!!h):c=o,l=c[0]||"";return{Success:!!(arguments.length>2?h:l),Index:arguments.length>1?s:c?c.index:-1,Length:l.length,Value:l,Groups:c}},i.prototype.IsMatch=function(a){return this.CreateRegex(false).test(a)},i.prototype.SelectMatches=function(v,y,p){var w=this;return new n.CalystoEnumerable(function(){!!y&&y>0&&(v=v.substr(y||0)),!!p&&p>0&&(v=v.substr(0,p||0));var k=w.CreateRegex(true),b;return n.CalystoEnumerator.FromYieldFunc(function(d){if((b=k.exec(v))&&b[0]){d.SetValue(w.CreateMatchSegment(b));return true}return false})})},i.prototype.SelectSegments=function(g,nt,tt){var it=this;return new n.CalystoEnumerable(function(){!!nt&&nt>0&&(g=g.substr(nt||0)),!!tt&&tt>0&&(g=g.substr(0,tt||0));var ht=it.CreateRegex(true),st,rt=0,ft,ot=0,ut=[],et;return n.CalystoEnumerator.FromYieldFunc(function(ct){while(ut.length>0){ct.SetValue(ut.shift());return true}if(rt>=g.length)return false;for((st=ht.exec(g))&&st[0]&&(et=it.CreateMatchSegment(st),et.Index>rt&&(ft=g.substr(rt,et.Index-rt),ot=ft.length,ut.push(it.CreateMatchSegment(ft,rt,false)),rt+=ot),ut.push(et),rt=et.Index+et.Length);ut.length>0;){ct.SetValue(ut.shift());return true}if(ft=g.substr(rt),ot=ft.length,ot>0&&(ut.push(it.CreateMatchSegment(ft,rt,false)),rt+=ot),ut.length>0){ct.SetValue(ut.shift());return true}return false})})},i.prototype.Matches=function(lt,at,vt){return this.SelectMatches(lt,at,vt).ToArray()},i.prototype.Match=function(yt){var pt=this.CreateRegex(false).exec(yt);return pt?this.CreateMatchSegment(pt):null},i.prototype.Replace=function(wt,bt){if(!wt)return wt;var kt=this.CreateRegex(true);return wt.replace(kt,bt)};return i}();n.Regex=t}(Calysto||(Calysto={})),function(n){var t=function(){function i(){this.disabledPrefix="-calysto-disabled-rule-",this.sheets=[]}i.prototype.Sheets=function(){if(!this.sheets){var r=n.ScriptLoader.LoadCSS("");r.disabled=true,this.sheets=[r.sheet]}return this.sheets},i.prototype.SelectRules=function(u){var f=this.disabledPrefix+(u=="*"?"":u);return this.Sheets().AsEnumerable().SelectMany(function(e){return e.cssRules}).Where(function(o){return!!o.selectorText}).Select(function(s){s.selectorArray||(s.selectorArray=s.selectorText.split(",").AsEnumerable().Select(function(h){return h.Trim()}).ToArray(),s.selectorDic=s.selectorArray.AsEnumerable().ToDictionary(function(c){return c},function(){return true}));return s}).Where(function(l){return u?l.selectorDic.ContainsKey(u)||l.selectorDic.ContainsKey(f):true})},i.prototype.GetIndex=function(a,v){for(var y=0;y<a.length;y++)if(a[y]==v)return y;return-1},i.prototype.DeleteRule=function(p){p.parentStyleSheet&&p.parentStyleSheet.deleteRule(this.GetIndex(p.parentStyleSheet.cssRules,p))},i.prototype.RecreateRule=function(w){var b=w.parentStyleSheet;if(b){var d=w.style.cssText,g=this.GetIndex(b.cssRules,w),k=w.selectorArray.join(", ");k&&b.insertRule(k+"{"+d+"}",g)}},i.prototype.SplitSelectors=function(nt){var tt=this;this.SelectRules(nt).ForEach(function(it){it.selectorArray.AsEnumerable().ForEach(function(rt){it.selectorDic=null,it.selectorArray=[rt],tt.RecreateRule(it)}),tt.DeleteRule(it)});return this},i.prototype.AddSelector=function(ut,ft){var et=this;ft&&this.SelectRules().Where(function(ot){return ot.selectorDic.ContainsKey(ut)&&!ot.selectorDic.ContainsKey(ft)}).ForEach(function(st){st.selectorArray.push(ft),et.RecreateRule(st),et.DeleteRule(st)});return this},i.prototype.RemoveSelector=function(ht){var ct=this;this.SelectRules(ht).ForEach(function(lt){lt.selectorArray=lt.selectorArray.Where(function(at){return at!=ht}),ct.RecreateRule(lt),ct.DeleteRule(lt)});return this},i.prototype.AddRule=function(vt,yt){var wt=this.Sheets(),pt=wt[wt.length-1];pt.addRule?pt.addRule(vt,yt):pt.insertRule&&pt.insertRule(vt+"{"+yt+"}",pt.cssRules.length);return this},i.prototype.RemoveRules=function(bt){var kt=this;this.SelectRules(bt).ForEach(function(dt){dt.parentStyleSheet&&dt.parentStyleSheet.deleteRule(kt.GetIndex(dt.parentStyleSheet.cssRules,dt))});return this},i.prototype.DisableRules=function(gt){var ni=this;this.SelectRules(gt).ForEach(function(ti){ti.selectorArray=ti.selectorArray.Select(function(ii){return gt&&ii!=gt?ii:ii.indexOf(ni.disabledPrefix)==0?ii:ni.disabledPrefix+(ii=="*"?"":ii)}),ni.RecreateRule(ti),ni.DeleteRule(ti)});return this},i.prototype.EnableRules=function(ri){var ui=this,fi=this.disabledPrefix+(ri=="*"?"":ri);this.SelectRules(ri).ForEach(function(ei){ei.selectorArray=ei.selectorArray.Select(function(oi){return ri?oi==fi?ri:oi:oi.replace(ui.disabledPrefix,"")||"*"}),ui.RecreateRule(ei),ui.DeleteRule(ei)});return this},i.prototype.ToCssText=function(si){return this.SelectRules().Select(function(hi){return hi.cssText}).ToStringJoined(si||"")},i.GetCurrent=function(){var ci,li;for(document.styleSheets.length==0&&n.ScriptLoader.LoadCSS(""),ci=new i,ci.sheets=[],li=0;li<document.styleSheets.length;li++)ci.sheets.push(document.styleSheets[li]);return ci};return i}();n.CalystoStyleSheet=t}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){var o=function(){function s(){this.__calystotype="Calysto_Blob"}return s}(),f,e;u.JsonBlob=o,f=function(){function h(){this.__calystotype="Calysto_Date"}return h}(),u.JsonDateTime=f,e=function(){function c(){this.__calystotype="Calysto_Function"}return c}(),u.JsonFunction=e,u.escapeeChars={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"}})(r=i.Infrastructure||(i.Infrastructure={}))})(t=n.Json||(n.Json={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){var f=function(){function e(o){o===void 0&&(o=false),this.parts=[],this.blobs=[],this.indexes=[],this.isAsync=false,this.escapee=u.escapeeChars,this.SerializeFunctions=false,this.parts=[],this.blobs=[],this.indexes=[],this.isAsync=!!o}e.prototype.Write=function(s){this.parts.push(s)},e.prototype.isArray=function(h){return h&&typeof h.pop=="function"},e.prototype.isDate=function(c){return c&&typeof c.getFullYear=="function"},e.prototype.encodeString=function(l){var a=this,v=l.replace(new RegExp('([\\\\\x00-\x1f\\"])',"g"),function(y,p){var w=a.escapee[p];if(w)return w;w=p.charCodeAt();return"\\u00"+Math.floor(w/16).toString(16)+(w%16).toString(16)});this.Write('"'+v+'"')},e.prototype.encodeArray=function(b,k){this.Write("[");for(var tt,it=b.length,g,nt,d=0;d<it;d++)g=b[d],nt=typeof g,nt=="undefined"||(nt!="function"||this.SerializeFunctions)&&(tt&&this.Write(","),g===null?this.Write("null"):this.serializeWithCalysto(g,k-1),tt=true);this.Write("]")},e.prototype.createJsonDateTime=function(rt){var ut=new u.JsonDateTime;ut.Date=Date.ToLocalISOTString(rt);return ut},e.prototype.serializeDate=function(ft){this.Write((new e).Serialize(this.createJsonDateTime(ft)))},e.prototype.createJsonFunction=function(et){var ot=new u.JsonFunction;ot.Function=et+"";return ot},e.prototype.serializeFunction=function(st){this.Write((new e).Serialize(this.createJsonFunction(st)))},e.prototype.createBlob=function(ht){if(!this.isAsync)throw new Error("Blob type serialization requires async serializer mode");var ct=this.blobs.length+100+Math.random()+"";this.blobs.push({UID:ct,BLOB:ht});return ct},e.prototype.serializeBlob=function(lt){this.Write(this.createBlob(lt))},e.prototype.asyncSerializeBlobs=function(at){var pt=this,vt,yt;if(at.blobsCopy&&at.blobsCopy.length>0&&(vt=at.blobsCopy[++at.currentIndex]))yt=new u.JsonBlob,yt.FileName=vt.BLOB.name||vt.BLOB.filename||"",yt.MimeType=vt.BLOB.type,yt.Size=vt.BLOB.size,at.useBlobIndex?(yt.BlobIndex=at.currentIndex,at.json=at.json.replace(vt.UID,(new e).Serialize(yt)),this.asyncSerializeBlobs(at)):n.Utility.Blob.BlobToDataUrlAsync(vt.BLOB,function(wt){yt.DataUrl=wt,at.json=at.json.replace(vt.UID,(new e).Serialize(yt)),pt.asyncSerializeBlobs(at)});else at.onComplete(at.json,at.pureBlobs)},e.prototype.serializeWithJsonStringify=function(bt){var kt=this,dt=new RegExp("^[\\d]{4}[\\-][\\d]{2}[\\-][\\d]{2}T[\\d]{2}[\\:][\\d]{2}[\\:][\\d]{2}[\\.][\\d]{3}Z$");return JSON.stringify(bt,function(gt,ni){var ri=typeof ni,ii,ti;if(ri=="undefined"||ni==null)return null;if(ri=="function")return kt.SerializeFunctions?kt.createJsonFunction(ni):ni;if(ni.constructor==window.FileList){for(ii=[],ti=0;ti<ni.length;ti++)ii.push(ni[ti]);return ii}return ni.constructor==window.File?kt.createBlob(ni):ni.constructor==window.Blob?kt.createBlob(ni):ni.constructor==n.DateTime?kt.createJsonDateTime(ni.ToSystemDate()):kt.isDate(ni)?kt.createJsonDateTime(ni):typeof ni=="string"&&dt.test(ni)?kt.createJsonDateTime(new Date(ni)):typeof ni=="number"?isFinite(ni)?ni:null:kt.isArray(ni)?ni:ni&&ni.ToArray?ni.ToArray():ni})},e.prototype.serializeWithCalysto=function(ui,fi){var ei=ui,hi=typeof ei,ci,si,oi;if(hi=="undefined"||ei===null)return this.Write("null");if(this.isArray(ei))return fi<1?this.Write("[...]"):this.encodeArray(ei,fi-1);if(ei.constructor==n.DateTime)return this.serializeDate(ei.ToSystemDate());if(ei.constructor==window.FileList)this.encodeArray(ei,fi-1);else{if(ei.constructor==window.File||ei.constructor==window.Blob)return this.serializeBlob(ei);if(this.isDate(ei))return this.serializeDate(ei);if(hi=="function")return this.SerializeFunctions?this.serializeFunction(ei):null;if(typeof ei=="string")return this.encodeString(ei);if(typeof ei=="number")return this.Write(isFinite(ei)?String(ei):"null");if(typeof ei=="boolean")return this.Write(String(ei));if("ToArray"in ei)return this.serializeWithCalysto(ei.ToArray(),fi-1);if(fi<1)return this.Write("{...}");this.Write("{");for(si in ei){try{if(!ei.hasOwnProperty(si))continue;oi=ei[si]}catch(li){continue}(typeof oi!="function"||this.SerializeFunctions)&&(ci&&this.Write(","),this.serializeWithCalysto(si,fi-1),this.Write(":"),oi===null||typeof oi=="undefined"||oi==NaN?this.Write("null"):this.serializeWithCalysto(oi,fi-1),ci=true)}return this.Write("}")}},e.prototype.serializeObject=function(ai,vi){if(window.JSON&&!vi)return this.serializeWithJsonStringify(ai);this.serializeWithCalysto(ai,vi);return this.parts.join("")},e.prototype.SerializeAsync=function(yi,pi,wi,bi){var di=this.serializeObject(yi,pi),ki=[];wi&&this.blobs.length>0&&n.Collections.ForEach(this.blobs,function(gi){return ki.push(gi.BLOB)}),this.asyncSerializeBlobs({currentIndex:-1,json:di,pureBlobs:ki,blobsCopy:this.blobs.slice(0),useBlobIndex:wi,onComplete:bi})},e.prototype.Serialize=function(nr,tr){tr===void 0&&(tr=100);return this.serializeObject(nr,tr)};return e}();u.CalystoJsonSerializer=f})(r=i.Infrastructure||(i.Infrastructure={}))})(t=n.Json||(n.Json={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){var f=function(){function e(o,s){this.json=o,this.blobsArray=s,this.index=-1,this.escapee=u.escapeeChars}e.prototype.Error=function(h){throw new Error("JSON Error: "+h+", position: "+this.index+", json: "+this.json);},e.prototype.Next=function(c){c&&c!==this.currchar&&this.Error("Expected '"+c+"' instead of '"+this.currchar+"'"),this.currchar=this.json.charAt(this.index),this.index++;return this.currchar},e.prototype.Number=function(){var l="",a;for(this.currchar=="-"&&(l="-",this.Next("-"));this.currchar>="0"&&this.currchar<="9";)l+=this.currchar,this.Next();if(this.currchar==".")for(l+=".";this.Next()&&this.currchar>="0"&&this.currchar<="9";)l+=this.currchar;if(this.currchar=="e"||this.currchar=="E")for(l+=this.currchar,this.Next(),(this.currchar=="-"||this.currchar=="+")&&(l+=this.currchar,this.Next());this.currchar>="0"&&this.currchar<="9";)l+=this.currchar,this.Next();if(a=+l,isFinite(a))return a;this.Error("Bad number");return null},e.prototype.String=function(){var p,w,v="",y;if(this.currchar=='"')while(this.Next()){if(this.currchar=='"'){this.Next();return v}if(this.currchar=="\\")if(this.Next(),this.currchar=="u"){for(y=0,w=0;w<4;w+=1){if(p=parseInt(this.Next(),16),!isFinite(p))break;y=y*16+p}v+=String.fromCharCode(y)}else if(this.currchar&&typeof this.escapee[this.currchar]=="string")v+=this.escapee[this.currchar];else break;else v+=this.currchar}this.Error("Bad string");return},e.prototype.White=function(){while(this.currchar&&this.currchar<=" ")this.Next()},e.prototype.Word=function(){switch(this.currchar){case"t":this.Next("t"),this.Next("r"),this.Next("u"),this.Next("e");return true;case"f":this.Next("f"),this.Next("a"),this.Next("l"),this.Next("s"),this.Next("e");return false;case"n":this.Next("n"),this.Next("u"),this.Next("l"),this.Next("l");return null}this.Error("Unexpected '"+this.currchar+"'");return},e.prototype.Array=function(){var b=[];if(this.currchar=="["){if(this.Next("["),this.White(),this.currchar=="]"){this.Next("]");return b}while(this.currchar){if(b.push(this.Value()),this.White(),this.currchar=="]"){this.Next("]");return b}this.Next(","),this.White()}}this.Error("Bad array");return},e.prototype.Object=function(){var k,d={};if(this.currchar=="{"){if(this.Next("{"),this.White(),this.currchar=="}"){this.Next("}");return d}while(this.currchar){if(k=this.String(),this.White(),this.Next(":"),Object.hasOwnProperty.call(d,k)&&this.Error("Duplicate key '"+k+"'"),d[k]=this.Value(),this.White(),this.currchar=="}"){this.Next("}");return d}this.Next(","),this.White()}}this.Error("Bad object");return},e.prototype.Value=function(){this.White();switch(this.currchar){case"{":var g=this.Object();g=i.fnJsonPostConvertObject(g,this.blobsArray);return g;case"[":return this.Array();case'"':return this.String();case"-":return this.Number();default:return this.currchar>="0"&&this.currchar<="9"?this.Number():this.Word()}},e.prototype.Parse=function(){var nt;this.index=0,this.currchar=" ",nt=this.Value(),this.White(),this.currchar&&this.Error("Syntax error");return nt};return e}();u.CalystoJsonReader=f})(r=i.Infrastructure||(i.Infrastructure={}))})(t=n.Json||(n.Json={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){function u(s,h){if(typeof s=="string"&&!!s)return window.JSON?JSON.parse(s,function(c,l){return l?r(l,h):l}):new i.Infrastructure.CalystoJsonReader(s,h).Parse()}function r(a,v){var y,p;if(!a)return a;switch(a.__calystotype){case"Calysto_Date":return Date.FromLocalISOTString(a.Date);case"Calysto_Blob":if(y=a,y.DataUrl)return n.Utility.Blob.DataUrlToBlob(y.DataUrl,y.FileName);if(y.BlobIndex===0||y.BlobIndex>0){if(p=(v||[]).Where(function(w){return w.blobIndex==y.BlobIndex}).pop(),!p)throw new Error("Blob not found at index: "+y.BlobIndex);return p}return y;case"Calysto_Function":return n.Utility.Expressions.CompileLambdaNoReturnCheck(a.Function);default:return a}}function f(b,k,d,g){new i.Infrastructure.CalystoJsonSerializer(true).SerializeAsync(b,k,d,g)}function e(nt,tt){tt===void 0&&(tt=100);return new i.Infrastructure.CalystoJsonSerializer(false).Serialize(nt,tt)}function o(it,rt){return u(it,rt)}i.fnJsonPostConvertObject=r,n.Core.ExportGlobal(r,"fnJsonPostConvertObject"),i.SerializeAsync=f,i.Serialize=e,i.Deserialize=o})(t=n.Json||(n.Json={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(o){o[o.PrimitiveValue=1]="PrimitiveValue",o[o.KeyValue=2]="KeyValue",o[o.ArrayValue=3]="ArrayValue"})(r=i.NodeTypeEnum||(i.NodeTypeEnum={}));var u="@",e=new RegExp("^[\\d]+$"),f=function(){function s(h,c,l){typeof l=="number"?(this.Index=l,this.Property=l+""):this.Property=typeof l=="string"?l:u,this.Level=c?c.Level+1:0,this.Type=this.ResolveType(h),this.Value=h,c&&(this.Parent=c)}s.prototype.ResolveType=function(a){var v=typeof a;return v=="undefined"||a===null||v=="function"||v=="string"||v=="number"||v=="boolean"?r.PrimitiveValue:a&&typeof a.pop=="function"||"ToArray"in a?r.ArrayValue:r.KeyValue},s.prototype.Children=function(y){var p=this;y===void 0&&(y=false);return new n.CalystoEnumerable(function(){return n.CalystoEnumerator.From(function(w){var b,k;return __generator(this,function(d){switch(d.label){case 0:return y?[4,w]:[3,2];case 1:d.sent(),d.label=2;case 2:if(!(w.Type==r.ArrayValue))return[3,6];b=-1,d.label=3;case 3:return(++b<w.Value.length)?[4,new s(w.Value[b],w,b)]:[3,5];case 4:d.sent();return[3,3];case 5:return[3,9];case 6:if(!(w.Type==r.KeyValue))return[3,9];b=-1,k=n.Collections.GetOwnProperties(w.Value),d.label=7;case 7:return(++b<k.length)?[4,new s(w.Value[k[b]],w,k[b])]:[3,9];case 8:d.sent();return[3,7];case 9:return[2]}})}(p))})},s.prototype.Descendants=function(g){var nt=this;g===void 0&&(g=false);return new n.CalystoEnumerable(function(){return n.CalystoEnumerator.From(function(tt){var ut,it,ot,ft,rt,ht,ct,lt,st,at,et,vt;return __generator(this,function(yt){switch(yt.label){case 0:return g?[4,tt]:[3,2];case 1:yt.sent(),yt.label=2;case 2:yt.trys.push([2,14,15,16]),ut=__values(tt.Children().AsIterableIterator()),it=ut.next(),yt.label=3;case 3:if(!!it.done)return[3,13];ot=it.value;return[4,ot];case 4:yt.sent(),yt.label=5;case 5:yt.trys.push([5,10,11,12]),ft=(et=void 0,__values(ot.Descendants().AsIterableIterator())),rt=ft.next(),yt.label=6;case 6:if(!!rt.done)return[3,9];ht=rt.value;return[4,ht];case 7:yt.sent(),yt.label=8;case 8:rt=ft.next();return[3,6];case 9:return[3,12];case 10:ct=yt.sent(),et={error:ct};return[3,12];case 11:try{rt&&!rt.done&&(vt=ft.return)&&vt.call(ft)}finally{if(et)throw et.error;}return[7];case 12:it=ut.next();return[3,3];case 13:return[3,16];case 14:lt=yt.sent(),st={error:lt};return[3,16];case 15:try{it&&!it.done&&(at=ut.return)&&at.call(ut)}finally{if(st)throw st.error;}return[7];case 16:return[2]}})}(nt))})},s.prototype.Ancestors=function(pt){var wt=this;pt===void 0&&(pt=false);return new n.CalystoEnumerable(function(){return n.CalystoEnumerator.From(function(bt){var kt;return __generator(this,function(dt){switch(dt.label){case 0:return pt?[4,bt]:[3,2];case 1:dt.sent(),dt.label=2;case 2:kt=bt,dt.label=3;case 3:return!!(kt=kt.Parent)?[4,kt]:[3,5];case 4:dt.sent();return[3,3];case 5:return[2]}})}(wt))})},s.prototype.Root=function(){for(var gt=this;gt.Parent&&(gt=gt.Parent););return gt},s.prototype.SelectChain=function(ni){var ti=this;return new n.CalystoEnumerable(function(){return n.CalystoEnumerator.From(function(ii){var fi,ri,ui;return __generator(this,function(ei){switch(ei.label){case 0:fi=ni.split("."),ri=ii,ei.label=1;case 1:return!!(ui=fi.shift())?!ri?[3,12]:[3,2]:[3,12];case 2:if(!(ui==u))return[3,4];ri=ri.Root();return[4,ri];case 3:ei.sent();return[3,11];case 4:return(ui==="")?(ri=ri.Parent,!!!ri)?[3,6]:[4,ri]:[3,8];case 5:ei.sent();return[3,7];case 6:return[3,12];case 7:return[3,11];case 8:return(ri=ri.Children().Where(function(oi){return oi.Property==ui}).FirstOrDefault(),!!!ri)?[3,10]:[4,ri];case 9:ei.sent();return[3,11];case 10:return[3,12];case 11:return[3,1];case 12:return[2]}})}(ti))})};return s}();i.JsonNode=f})(t=n.Json||(n.Json={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){function o(l,a){for(var v,b,y,k=n.Utility.CalystoTools.ByteArrayToLong(new Uint8Array(l.slice(0,f))),tt=n.Utility.Encoding.UTF8.GetString(new Uint8Array(l.slice(f,f+k))),d=n.Json.Deserialize(tt),g="",nt=[],p=f+k,w=0;w<d.Items.length;w++)v=d.Items[w],b=new Uint8Array(l.slice(p,p+v.Size)),v.IsJson?g=n.Utility.Encoding.UTF8.GetString(b):(y=n.Utility.Blob.CreateBlob([b],v.MimeType),y.filename=v.FileName,y.blobIndex=v.BlobIndex,nt.push(y)),p+=v.Size;a(n.Json.Deserialize(g,nt))}function s(it,rt){if(it&&window.ArrayBuffer&&it.constructor==ArrayBuffer)o(it,rt);else if(typeof it=="string")rt(n.Json.Deserialize(it));else if(it&&window.Blob&&it.constructor==Blob){var ut=new FileReader;ut.onload=function(ft){o(ft.currentTarget.result,rt)},ut.readAsArrayBuffer(it)}else throw new Error("Current binaryData type is not supported");}function h(et,ot){var lt={Items:[]},ht,at,st,yt;for(ot=ot||[],st=0;st<ot.length;st++)ht=ot[st],lt.Items.push({Size:ht.size,FileName:ht.filename,MimeType:ht.type,BlobIndex:ht.blobIndex||st,IsJson:false});at=n.Utility.Encoding.UTF8.GetBytes(et),lt.Items.push({Size:at.length,FileName:null,MimeType:"application/json",BlobIndex:null,IsJson:true});var pt=n.Json.Serialize(lt),vt=n.Utility.Encoding.UTF8.GetBytes(pt),wt=n.Utility.CalystoTools.LongToByteArray(vt.length).slice(0,4),ct=[];for(ct.push(new Uint8Array(wt)),ct.push(new Uint8Array(vt)),st=0;st<ot.length;st++)ct.push(ot[st]);ct.push(new Uint8Array(at)),yt=n.Utility.Blob.CreateBlob(ct,"application/octet-stream");return yt}function c(bt,kt){n.Json.SerializeAsync(bt,100,true,function(dt,gt){kt(new e(dt||"",gt||[]))})}var f=4,e;u.DeserializeAsync=s,u.SerializeAsync=c,e=function(){function ni(ti,ii){this.Json=ti,this.Blobs=ii}ni.prototype.ToBinaryData=function(){return h(this.Json,this.Blobs)};return ni}(),u.BinaryFrameItem=e})(r=i.BinaryFrame||(i.BinaryFrame={}))})(t=n.Json||(n.Json={}))}(Calysto||(Calysto={})),function(n){function l(bt){switch(bt){case"error":return n.Resources.CalystoLang.Error;case"warning":return n.Resources.CalystoLang.Warning;case"info":return n.Resources.CalystoLang.Information;case"question":return n.Resources.CalystoLang.Question;case"success":return n.Resources.CalystoLang.Success;default:return n.Resources.CalystoLang.Message}}function o(kt){switch(kt){case"success":return"fa-check-circle";case"error":return"fa-times-circle";case"warning":return"fa-exclamation-triangle";case"info":return"fa-info-circle";case"question":return"fa-question-circle";default:return""}}function a(dt){switch(dt){case"success":return"calystoWindowIconGreen";case"error":return"calystoWindowIconRed";case"warning":return"calystoWindowIconOrange";case"info":return"calystoWindowIconBlue";case"question":return"calystoWindowIconOrange";default:return""}}var h,i,r,e,f,c,t;(function(p){p.destroy="destroy",p.hide="hide"})(h=n.CloseMode||(n.CloseMode={})),function(w){w.XClose="XClose",w.Yes="Yes",w.No="No",w.Cancel="Cancel",w.Close="Close"}(i=n.DialogButton||(n.DialogButton={})),function(b){b[b.Windows=0]="Windows",b[b.Modern=1]="Modern"}(r||(r={})),e='<div class="themeAero calystoDialogControl calystoDialogModal">\n\t<div class="calystoDialogMask"><\/div>\n\t<div class="calystoDialogBoxContainer">\n\t\t<div class="calystoDialogBox">\n\t\t\t\t\n\t\t\t<div class="calystoWindow">\n\t\t\t\t<div class="calystoWindowTitle">\n\t\t\t\t\t\n\t\t\t\t\t<div class="calystoWindowTitleText element1">Alert<\/div>\n\n\t\t\t\t\t<label class="calystoWindowXMark fa fa-close" style="display: none;">\n\t\t\t\t\t\t<button class="calystoXCloseButton" calysto_button_name="'+i.XClose+'" style="position: absolute; width: 1px; height: 1px; opacity: 0;"><\/button>\n\t\t\t\t\t<\/label>\n\t\t\t\t<\/div>\n\t\t\t\t<div class="calystoTopContainer element2" style="display:none">\n\t\t\t\t\t<div class="calystoWindowTd1">\n\t\t\t\t\t\t<div class="calystoWindowIcon fa fa-info-circle" style="display:none"><\/div>\n\t\t\t\t\t<\/div>\n\t\t\t\t\t<div class="calystoWindowTitleText">Alert<\/div>\n\t\t\t\t<\/div>\n\t\t\t\t<div class="calystoWindowContent" style="min-width: 250px; min-height: 50px;">\n\t\t\t\t\t<table class="calystoWindowTable1 calystoWindowInnerContent" cellpadding="0" cellspacing="0">\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td class="calystoWindowTd1 element3">\n\t\t\t\t\t\t\t\t\t<div class="calystoWindowIcon fa fa-info-circle" style="display:none"><\/div>\n\t\t\t\t\t\t\t\t<\/td>\n\t\t\t\t\t\t\t\t<td class="calystoWindowTd2">\n\t\t\t\t\t\t\t\t<\/td>\n\t\t\t\t\t\t\t<\/tr>\n\t\t\t\t\t\t<\/tbody>\n\t\t\t\t\t<\/table>\n\t\t\t\t<\/div>\n\t\t\t\t<div class="calystoWindowButtons calystoThemeContainer" style="display:none"><\/div>\n\t\t\t<\/div>\n\t\t\n\t\t<\/div>\n\t<\/div>\n<\/div>',function(k){function tt(){var ot,st,et,ut,ft;try{for(et=__values([document.documentElement,document.body]),ut=et.next();!ut.done;ut=et.next())if((ft=ut.value,ft.scrollHeight>ft.clientHeight)||ft.scrollWidth>ft.clientWidth)return ft}catch(ht){ot={error:ht}}finally{try{ut&&!ut.done&&(st=et.return)&&st.call(et)}finally{if(ot)throw ot.error;}}return undefined}function it(){var ct,lt,at,vt,yt;nt||(nt=true,$$calysto(document.body).RemoveClass(g),d=null,ct=tt(),ct)&&(d={},lt=ct.clientWidth,at=ct.clientHeight,$$calysto(document.body).AddClass(g),vt=ct.clientWidth,yt=ct.clientHeight,vt>lt&&(d.paddingRight=document.body.style.paddingRight||"",document.body.style.paddingRight=vt-lt+"px"),yt>at&&(d.paddingBottom=document.body.style.paddingBottom||"",document.body.style.paddingBottom=yt-at+"px"))}function rt(){(nt=false,d)&&($$calysto(document.body).RemoveClass(g),document.body.style.paddingRight=d.paddingRight||"",document.body.style.paddingBottom=d.paddingBottom||"")}var g="calystoOverflowHidden",nt=false,d;k.CreateOverflow=it,k.RemoveOverflow=rt}(f||(f={})),function(pt){pt.info="info",pt.error="error",pt.warning="warning",pt.question="question",pt.success="success",pt.none="none"}(c=n.DialogIcon||(n.DialogIcon={})),function(wt){wt[wt.Alert=0]="Alert",wt[wt.Panel=1]="Panel"}(t=n.DialogMode||(n.DialogMode={})),n.GetFAIconClass=o;var v=1e6,u=[],s=false,y=function(){function gt(){this._closeMode="destroy",this._viewMode=t.Alert,this._designMode=r.Windows,this.OnButtonClick=(new n.MulticastDelegate).AsFunc(this),this.OnShown=(new n.MulticastDelegate).AsFunc(this),this.OnClosing=(new n.MulticastDelegate).AsFunc(this),this.OnClosed=(new n.MulticastDelegate).AsFunc(this),this._buttons=[],this.Initialize()}gt.prototype.Initialize=function(){var ii=document.createElement("div"),ti,ni;ii.innerHTML=e,this._dialogControlEl=ii.childNodes[0],this._dialogControlEl.__calystoDialog=this,ti=$$calysto(this._dialogControlEl),this._dialogControlEl.style.zIndex=v+++"",this._maskEl=ti.Query("//.calystoDialogMask").First(),this._dialogBoxContainerEl=ti.Query("//.calystoDialogBoxContainer").First(),this._dialogBoxEl=ti.Query("//.calystoDialogBox").First(),this._windowEl=ti.Query("//.calystoWindow").First(),ni=$$calysto(this._windowEl),this._xButtonEl=ni.Query("//.calystoWindowXMark").First(),this._titleEl=ni.Query("//.calystoWindowTitle").First(),this._contentEl=ni.Query("//.calystoWindowContent").First(),this._innerContentEl=ni.Query("//.calystoWindowInnerContent").First(),this._tdContentEl=ni.Query("//.calystoWindowTd2").First(),this._buttonsEl=ni.Query("//.calystoWindowButtons").First(),this._topContainer=ni.Query("//.calystoTopContainer").First()},gt.prototype.GetDialogEl=function(){return this._dialogControlEl},gt.prototype.GetContentEl=function(){return this._contentEl},gt.prototype.PrefferedWidth=function(ri){$$calysto(this._dialogBoxEl).ApplyStyle("width:100%;max-width:"+ri+"px;");return this},gt.prototype.Set=function(ui){ui(this);return this},gt.prototype.DesignMode=function(fi){this._designMode=fi,$$calysto(this._windowEl).AddClass("calystoWindow2",fi==r.Modern);return this},gt.prototype.RenderTitle=function(ei){var oi=false;this._viewMode==t.Panel?oi=false:this._designMode==r.Windows?oi=!String.IsNullOrWhiteSpace(ei):this._designMode==r.Modern&&(oi=!String.IsNullOrWhiteSpace(this._titleText)),$$calysto(this._dialogControlEl).Query("//.calystoWindowTitleText").SetProperty("innerHTML",ei||"").SetVisible(oi);return this},gt.prototype.Title=function(si){this._titleText=si;return this.RenderTitle(si)},gt.prototype.Icon=function(hi){var ci,li;this._iconName=hi,this._titleText||this.RenderTitle(l(hi)),ci=!!this._iconName&&this._iconName!="none",$$calysto(this._windowEl).AddClass("calystoShowIcon",ci),li="calystoWindowIcon fa "+o(this._iconName)+" "+a(this._iconName),$$calysto(this._windowEl).Query("//.calystoWindowTd1/div").SetVisible(ci).SetClass(li);return this},gt.prototype.CloseMode=function(ai){this._closeMode=ai;return this},gt.prototype.fnButtonClickHandler=function(vi,yi){var wi=this,pi=typeof vi=="string"?vi:vi.getAttribute("calysto_button_name");pi==i.XClose?this.Close():this.OnButtonClick.Invoke(function(bi){return bi(wi,pi,yi)})},gt.prototype.HideButtons=function(){$$calysto([this._buttonsEl,this._xButtonEl]).SetVisible(false);return this},gt.prototype.ButtonXClose=function(){return this.Button(i.XClose)},gt.prototype.Button=function(ki,di){var tr=this,gi={name:ki,isDefault:!!di,isRendered:false},nr;this._buttons.push(gi),gi.isRendered=true,gi.name==i.XClose?nr=$$calysto(this._dialogControlEl).Query("//.calystoWindowXMark").SetVisible(true).Query("/button").First():$$calysto(this._buttonsEl).SetVisible(true).AddChildren(nr=n.DomQuery.CreateElement("button").AddClass("calystoBtn").SetAttribute("calysto_button_name",gi.name).SetInnerHtml(gi.name).First()),gi.isDefault&&(this._focusButtonEl=nr),$$calysto(nr).OnClick(function(ir,rr){return tr.fnButtonClickHandler(ir,rr)});return this},gt.prototype.AppendContent=function(ur){ur&&ur.nodeType>0||typeof ur=="string"&&ur.match(new RegExp("(<[^>/\\s]+/>)|(<\/[^>/\\s]+>)"))?$$calysto(this._tdContentEl).AddChildren(ur):$$calysto(this._tdContentEl).AddChildren(n.DomQuery.CreateElement("pre").AddClass("calystoWindowPre").SetInnerHtml(n.Utility.Html.HtmlEncodeSimple(ur)));return this},gt.prototype.Content=function(fr){this._tdContentEl.innerHTML="";return this.AppendContent(fr)},gt.prototype.MaskOpacity=function(er){$$calysto(this._maskEl).SetOpacity(er);return this},gt.prototype.Background=function(or){$$calysto(this._windowEl).ApplyStyle("background",or);return this},gt.prototype.Close=function(){var sr=this;this.OnClosing.Invoke(function(hr){return hr(sr)}),this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null),u.Remove(this),$$calysto(this._dialogControlEl).RemoveClass("showDialog").Sleep(400,function(cr){cr.SetVisible(false),sr._closeMode=="destroy"&&cr.RemoveFromDom(),sr.OnClosed.Invoke(function(lr){return lr(sr)}),u.Any()||sr._viewMode!=t.Panel||f.RemoveOverflow()})},gt.prototype.AutoClose=function(ar){var vr=this;ar>0&&setTimeout(function(){return vr.Close()},ar);return this},gt.prototype.fnFixPosition=function(){var wr;if(this._viewMode!=t.Panel&&this._viewMode==t.Alert){var yr=10,br=n.Utility.Dom.GetViewportDiv(),pr=br.clientWidth-yr*2,dr=Math.min(pr,400),kr=br.clientHeight-yr*2-this._titleEl.offsetHeight-this._buttonsEl.offsetHeight-this._topContainer.offsetHeight;this._contentEl.style.overflowX=this._innerContentEl.offsetWidth>pr?"scroll":"",this._contentEl.style.overflowY=this._innerContentEl.offsetHeight>kr?"scroll":"",this._contentEl.style.maxWidth=pr+"px",this._contentEl.style.maxHeight=kr+"px",this._contentEl.style.minWidth=dr+"px",this._windowEl.style.maxWidth=pr+"px",wr=Math.round((br.clientHeight-2*yr-this._dialogBoxEl.offsetHeight)*.2),wr>yr||(wr=yr),this._dialogBoxEl.style.top=wr+"px"}},gt.prototype.fnFirstTimeInit=function(){var gr=this,nu;this._initDone||(this._initDone=true,(document.body||document.documentElement).appendChild(this._dialogControlEl),this._viewMode==t.Panel?($$calysto(this._titleEl).SetVisible(false),this._topContainer.style.display="none",this._dialogBoxEl.style.padding="20px 5px",this._dialogBoxContainerEl.style.overflowY="scroll",this._dialogBoxContainerEl.style.overflowX="auto",this._dialogBoxContainerEl.style.bottom="0",setTimeout(function(){gr._dialogBoxContainerEl.scrollTop=0,gr._dialogBoxContainerEl.scrollLeft=0},1)):this._viewMode==t.Alert&&(nu=new n.Utility.Dom.ScrollHandler,$$calysto([this._dialogBoxContainerEl]).On(["scroll","mousewheel","wheel","DOMMouseScroll"],function(tu,iu){nu.HandleScroll(gr._contentEl,iu);return false})))},gt.prototype.fnShowWorker=function(){var ru=this,uu,fu;this.fnFirstTimeInit(),this._intervalId||this._viewMode!=t.Alert||(this._intervalId=setInterval(function(){return ru.fnFixPosition()},1e3)),$$calysto(this._dialogControlEl).SetVisible(true),setTimeout(function(){return $$calysto(ru._dialogControlEl).AddClass("showDialog")},5),uu=Date.now(),fu=setInterval(function(){ru.fnFixPosition(),Date.now()-uu>400&&clearInterval(fu)},10),this._focusButtonEl&&this._focusButtonEl.focus(),this.OnShown.Invoke(function(eu){return eu(ru)})},gt.prototype.CloseOnMaskClick=function(){var ou=this;if(this._closeOnMaskAssigned)return this;this._closeOnMaskAssigned=true,$$calysto([this._maskEl,this._dialogBoxContainerEl,this._windowEl]).OnMouseDown(function(su,hu){if(n.Event.IsLeftMouseButton(hu)&&n.Event.GetTarget(hu)==su){ou.fnButtonClickHandler(i.XClose,hu);return false}return undefined});return this},gt.prototype.CloseOnEscKey=function(){this._closeOnEscKey=true;return this},gt.prototype.ViewMode=function(cu){this._viewMode=cu;return this},gt.prototype.Show=function(){s||(s=true,n.Page.OnEscKey(function(){var lu=u[u.length-1];lu&&lu._closeOnEscKey&&lu.fnButtonClickHandler(i.XClose,{})})),this.fnShowWorker(),u.push(this),this._viewMode==t.Panel&&f.CreateOverflow();return this};return gt}();n.Dialog=y}(Calysto||(Calysto={})),function(n){var t;(function(i){function u(v){return $$calysto(v).AncestorNodes().Select(function(y){return y.__calystoDialog}).Where(function(p){return!!p}).FirstOrDefault()}function f(){if(!n.Page.IsPageReloading&&!n.Page.IsVersionExpiredVisible){n.Page.IsVersionExpiredVisible=true;return(new n.Dialog).Content(n.Resources.CalystoLang.JavascriptEngineIsOutdatedInformation).Icon("warning").Button(n.Resources.CalystoLang.Reload).Button(n.Resources.CalystoLang.Cancel).ButtonXClose().OnButtonClick(function(w,b){n.Page.IsVersionExpiredVisible=false,w.Close(),b==n.Resources.CalystoLang.Reload&&(document.documentElement.className+=" calystoAjaxLoading",(new n.Dialog).Content(n.Resources.CalystoLang.PageIsReloadingPleaseWait).Icon("info").Show(),n.Page.IsPageReloading=true,setTimeout(function(){return window.location.reload(true)},1))}).Show()}}function e(k,d){return(new n.Dialog).Title(d).Icon("info").Content(k).ButtonXClose().CloseOnEscKey()}function r(g,nt,tt){return(new n.Dialog).Title(tt).Icon(nt||"info").Content(g).ButtonXClose().Button(n.Resources.CalystoLang.Close).CloseOnEscKey().OnButtonClick(function(it){it.Close()})}function o(rt,ut){return(new n.Dialog).Title(ut).Icon("question").Content(rt).ButtonXClose().CloseOnEscKey().CloseOnMaskClick()}function s(ft,et,ot){return r(ft,et,ot)}function h(st,ht){return r(st,"error",ht)}function c(ct,lt){return r(ct,"warning",lt)}function l(at,vt){return r(at,"success",vt)}function a(){return(new n.Dialog).CloseOnEscKey().CloseOnMaskClick().ViewMode(n.DialogMode.Panel)}i.FindDialog=u,i.ShowVersionExpired=f,i.CreateInformation=e,i.CreateConfirm=o,i.CreateAlert=s,i.CreateError=h,i.CreateWarning=c,i.CreateSuccess=l,i.CreatePanel=a})(t=n.Dialog||(n.Dialog={}))}(Calysto||(Calysto={})),function(n){var r,u,t,i;(function(f){f.center="center",f.right="right",f.left="left"})(r=n.NotifyHPosition||(n.NotifyHPosition={})),function(e){e.bottom="bottom",e.top="top"}(u=n.NotifyVPosition||(n.NotifyVPosition={})),t=2e6,i=function(){function o(s){this.VPosition="top",this.HPosition="center",this.Icon="info",this.PrefferedWidth=500,this.AutoCloseMs=3e3,this._template="<div class= 'calystoNotify2 hiddeNotifBox' >\n\t<div class='calystoNotifyInner'>\n\t\t<div class='calystoNotifyContent'>\n\t\t\t<table cellpadding='0' cellspacing='0'>\n\t\t\t\t<tr>\n\t\t\t\t\t<td class='tdIcon'><span class='calystoNotifyIcon'><\/span><\/td>\n\t\t\t\t\t<td class='calystoTextContent' style='width:100%'><\/td>\n\t\t\t\t\t<td class='tdBtnClose'><span class='calystoCloseBtn fa fa-times'><\/span><\/td>\n\t\t\t\t<\/tr>\n\t\t\t<\/table>\n\t\t<\/div>\n\t<\/div>\n<\/div>",this.Text=s}o.prototype.Set=function(h){h(this);return this},o.prototype.EnsureContainer=function(){var c=".calystoNotifyContainer."+this.VPosition+"."+this.HPosition,l;(this._containerEl=$$calysto(c).FirstOrDefault(),this._containerEl)||(l=c.ReplaceAll("."," ").Trim(),this._containerEl=n.DomQuery.CreateElement("div").AddClass(l).AddAsChildrenTo(document.body).FirstOrDefault(),this._containerEl.style.zIndex=t+"")},o.prototype.EnsureNotif=function(){var y=this,a,v;this._notifBoxEl||(a=n.DomQuery.FromHtml(this._template),this._notifBoxEl=a.FirstOrDefault(),this._notifInnerEl=a.Query("//.calystoNotifyInner").FirstOrDefault(),this._notifContentEl=a.Query("//.calystoNotifyContent").AddClass(this.Icon).FirstOrDefault(),this._notifTextEl=a.Query("//.calystoTextContent").FirstOrDefault(),v="fa "+n.GetFAIconClass(this.Icon),this._notifIconEl=a.Query("//.calystoNotifyIcon").AddClass(v).FirstOrDefault(),this._notifCloseBtnEl=a.Query("//.calystoCloseBtn").FirstOrDefault(),this._notifCloseBtnEl.onclick=function(){return y.Hide()})},o.prototype.Show=function(){var p=this;setTimeout(function(){p.EnsureContainer(),p.EnsureNotif(),p._containerEl.style.maxWidth=p.PrefferedWidth+"px",p._notifTextEl.innerHTML=p.Text,p.VPosition=="top"?$$calysto(p._containerEl).InsertChildren(p._notifBoxEl):p.VPosition=="bottom"&&$$calysto(p._containerEl).AddChildren(p._notifBoxEl),p._notifBoxEl.style.height="1px",$$calysto(p._notifBoxEl).RemoveClass("hiddeNotifBox"),p._notifBoxEl.style.height=p._notifInnerEl.offsetHeight+"px",p.AutoCloseMs>0&&setTimeout(function(){return p.Hide()},p.AutoCloseMs)},1);return this},o.prototype.Hide=function(){var w=this;setTimeout(function(){$$calysto(w._notifBoxEl).AddClass("hiddeNotifBox").Sleep(1500,function(b){return b.RemoveFromDom()})},1)},o.Create=function(k,d,g,nt,tt){d===void 0&&(d="info"),g===void 0&&(g=3e3),nt===void 0&&(nt="top"),tt===void 0&&(tt="center");return new n.Notification(k).Set(function(it){return it.Icon=d}).Set(function(rt){return rt.AutoCloseMs=g}).Set(function(ut){return ut.VPosition=nt}).Set(function(ft){return ft.HPosition=tt})};return o}(),n.Notification=i}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){u[u.Continue=100]="Continue",u[u.SwitchingProtocols=101]="SwitchingProtocols",u[u.Processing=102]="Processing",u[u.EarlyHints=103]="EarlyHints",u[u.OK=200]="OK",u[u.Created=201]="Created",u[u.Accepted=202]="Accepted",u[u.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",u[u.NoContent=204]="NoContent",u[u.ResetContent=205]="ResetContent",u[u.PartialContent=206]="PartialContent",u[u.MultiStatus=207]="MultiStatus",u[u.AlreadyReported=208]="AlreadyReported",u[u.IMUsed=226]="IMUsed",u[u.Ambiguous=300]="Ambiguous",u[u.MultipleChoices=300]="MultipleChoices",u[u.Moved=301]="Moved",u[u.MovedPermanently=301]="MovedPermanently",u[u.Found=302]="Found",u[u.Redirect=302]="Redirect",u[u.RedirectMethod=303]="RedirectMethod",u[u.SeeOther=303]="SeeOther",u[u.NotModified=304]="NotModified",u[u.UseProxy=305]="UseProxy",u[u.Unused=306]="Unused",u[u.RedirectKeepVerb=307]="RedirectKeepVerb",u[u.TemporaryRedirect=307]="TemporaryRedirect",u[u.PermanentRedirect=308]="PermanentRedirect",u[u.BadRequest=400]="BadRequest",u[u.Unauthorized=401]="Unauthorized",u[u.PaymentRequired=402]="PaymentRequired",u[u.Forbidden=403]="Forbidden",u[u.NotFound=404]="NotFound",u[u.MethodNotAllowed=405]="MethodNotAllowed",u[u.NotAcceptable=406]="NotAcceptable",u[u.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",u[u.RequestTimeout=408]="RequestTimeout",u[u.Conflict=409]="Conflict",u[u.Gone=410]="Gone",u[u.LengthRequired=411]="LengthRequired",u[u.PreconditionFailed=412]="PreconditionFailed",u[u.RequestEntityTooLarge=413]="RequestEntityTooLarge",u[u.RequestUriTooLong=414]="RequestUriTooLong",u[u.UnsupportedMediaType=415]="UnsupportedMediaType",u[u.RequestedRangeNotSatisfiable=416]="RequestedRangeNotSatisfiable",u[u.ExpectationFailed=417]="ExpectationFailed",u[u.MisdirectedRequest=421]="MisdirectedRequest",u[u.UnprocessableEntity=422]="UnprocessableEntity",u[u.Locked=423]="Locked",u[u.FailedDependency=424]="FailedDependency",u[u.UpgradeRequired=426]="UpgradeRequired",u[u.PreconditionRequired=428]="PreconditionRequired",u[u.TooManyRequests=429]="TooManyRequests",u[u.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",u[u.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",u[u.InternalServerError=500]="InternalServerError",u[u.NotImplemented=501]="NotImplemented",u[u.BadGateway=502]="BadGateway",u[u.ServiceUnavailable=503]="ServiceUnavailable",u[u.GatewayTimeout=504]="GatewayTimeout",u[u.HttpVersionNotSupported=505]="HttpVersionNotSupported",u[u.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",u[u.InsufficientStorage=507]="InsufficientStorage",u[u.LoopDetected=508]="LoopDetected",u[u.NotExtended=510]="NotExtended",u[u.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired"})(r=i.HttpStatusCode||(i.HttpStatusCode={}))})(t=n.Net||(n.Net={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r=function(){function u(f){this.url=f,this.timeoutMs=9e4,this.responseType="text",this.async=true,n.Core.Constants.WebClientGlobalTimeout>0&&(this.timeoutMs=n.Core.Constants.WebClientGlobalTimeout)}u.IsCrossdomain=function(e){if(e&&(e.indexOf("//")==0&&(e=location.protocol+e),e.indexOf("http")==0)){var o=location.protocol+"//"+location.hostname;return e.indexOf(o)!=0}return false},u.GetXMLHttpRequest=function(s){var c,h;if(window.XMLHttpRequest)return new XMLHttpRequest;if(u.IsCrossdomain(s)&&window.XDomainRequest)return new window.XDomainRequest;if(window.ActiveXObject)for(c=["Microsoft.XMLHTTP","Msxml2.XMLHTTP","Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.4.0","Msxml2.XMLHTTP.3.0"],h=0;h<c.length;h++)try{return new window.ActiveXObject(c[h])}catch(l){}return null},u.prototype.SetTimeout=function(a){this.timeoutMs=a;return this},u.prototype.SetUrl=function(v){this.url=v;return this},u.prototype.SetAsync=function(y){this.async=!!y},u.prototype.CreateData=function(p,w,b,k){return{content:w,fileName:k,uploadType:b||"text/plain",httpMethod:p||"GET",formData:false}},u.prototype.CreateNameValue=function(d,g){return{name:d+"",value:g+""}},u.prototype.UploadDictionary=function(nt){var tt=[];n.Collections.ForEachOwnProperties(nt,function(it,rt){return tt.push(encodeURIComponent(it+"")+"="+encodeURIComponent(rt+""))}),this.data=this.CreateData("POST",tt.join("&"),"application/x-www-form-urlencoded");return this},u.prototype.UploadString=function(ut){this.data=this.CreateData("POST",ut,"text/plain");return this},u.prototype.UploadJson=function(ft){this.data=this.CreateData("POST",ft,"application/json");return this},u.prototype.UploadData=function(et){this.data=this.CreateData("POST",et,"multipart/form-data"),this.data.formData=true;return this},u.prototype.UploadHtmlForm=function(ot,st){var yt,kt,pt,dt,wt,at,ht,bt,vt,lt,ct;if(window.FormData){if(wt=new FormData(ot),st)try{for(at=__values(st),ht=at.next();!ht.done;ht=at.next())ct=ht.value,wt.append(ct.Key,ct.Value)}catch(gt){yt={error:gt}}finally{try{ht&&!ht.done&&(kt=at.return)&&kt.call(at)}finally{if(yt)throw yt.error;}}this.data=this.CreateData(ot.method,wt,ot.enctype),this.data.formData=true}else{if(bt=n.Forms.FormSerialize(ot),st)try{for(vt=__values(st),lt=vt.next();!lt.done;lt=vt.next())ct=lt.value,bt[ct.Key]=ct.Value}catch(ni){pt={error:ni}}finally{try{lt&&!lt.done&&(dt=vt.return)&&dt.call(vt)}finally{if(pt)throw pt.error;}}this.UploadDictionary(bt)}return this},u.prototype.UploadFile=function(ti,ii){this.data=this.CreateData("POST",ti,"multipart/form-data",ii||ti.name);return this},u.prototype.SetResponseType=function(ri){this.responseType=ri||"";return this},u.prototype.AddRequestHeader=function(ui,fi){this.headers||(this.headers=[]),this.headers.push(this.CreateNameValue(ui,fi));return this},u.prototype.Abort=function(){this.isAborted=true,this.xhr&&(this.xhr.abort(),this.xhr=null);return this},u.prototype.Start=function(){var li=this,oi,ci,si,ei,hi;if(this.isAborted||this.isStarted)return this;if(this.isStarted=true,this.xhr=u.GetXMLHttpRequest(this.url),oi=this,this.xhr.onabort=function(){console.log({abort:oi.xhr.getAllResponseHeaders()})},ci=NaN,si=false,this.timeoutMs>0&&(ci=setTimeout(function(){if(!si){si=true,oi.xhr.abort();var ai=oi.GetLiistenersItem("OnTimeout");ai&&ai.callbacks.ForEach(function(vi){return vi(oi,{type:"timeout",bubles:false})})}},this.timeoutMs)),n.Collections.ForEachOwnProperties(this.listeners,function(yi,pi){var wi=pi.isUpload?oi.xhr.upload:oi.xhr;wi&&(pi.fullName=="OnLoad"?wi.onreadystatechange=function(bi){if(wi.readyState==4&&!si){bi=bi||{type:"load"},si=true,clearTimeout(ci);var ki=oi.GetLiistenersItem("OnLoad");ki&&ki.callbacks.ForEach(function(di){return di(oi,bi)})}}:wi["on"+pi.eventName]=function(gi){if(!si){gi=gi||{type:pi.eventName},(gi.type=="abort"||gi.type=="error"||gi.type=="timeout")&&(si=true);var nr=oi.GetLiistenersItem(pi.fullName);nr&&nr.callbacks.ForEach(function(tr){return tr(oi,gi)})}})}),ei=this.data||{},ei.formSubmit){ei.formSubmit.action=this.url,ei.formSubmit.submit();return this}this.xhr.open(ei.httpMethod||"GET",this.url,this.async),this.xhr.timeout=this.timeoutMs,ei.uploadType&&(window.FormData?this.xhr.contentType=ei.uploadType:this.xhr.setRequestHeader("Content-Type",ei.uploadType)),ei.fileName&&this.xhr.setRequestHeader("x-calysto-filename",ei.fileName),this.responseType&&(this.xhr.responseType=this.responseType),this.headers&&this.headers.ForEach(function(ir){return li.xhr.setRequestHeader(ir.name,ir.value)}),"content"in ei?(hi=ei.content,typeof hi=="function"&&(hi=hi()),this.xhr.send(hi)):this.xhr.send();return this},u.prototype.GetResponseText=function(){return this.xhr?this.xhr.responseText:""},u.prototype.GetResponse=function(){if(this.xhr)return this.xhr.response},u.prototype.GetLiistenersItem=function(rr){return this.listeners[rr]},u.prototype.AddCallback=function(ur,fr){var er,or,sr;if(this.isStarted)throw new Error("Request started, can't assign callback: "+ur);this.listeners||(this.listeners={}),er=this.GetLiistenersItem(ur),er||(or=ur.StartsWith("OnUpload"),sr=or?ur.substr(8).toLowerCase():ur.substr(2).toLowerCase(),er={isUpload:or,eventName:sr,fullName:ur,callbacks:[]},this.listeners[ur]=er),er.callbacks.push(fr);return this},u.prototype.OnUploadAbort=function(hr){return this.AddCallback("OnUploadAbort",hr)},u.prototype.OnUploadError=function(cr){return this.AddCallback("OnUploadError",cr)},u.prototype.OnUploadLoad=function(lr){return this.AddCallback("OnUploadLoad",lr)},u.prototype.OnUploadProgress=function(ar){return this.AddCallback("OnUploadProgress",ar)},u.prototype.OnUploadTimeout=function(vr){return this.AddCallback("OnUploadTimeout",vr)},u.prototype.OnReadyStateChange=function(yr){return this.AddCallback("OnReadyStateChange",yr)},u.prototype.OnAbort=function(pr){return this.AddCallback("OnAbort",pr)},u.prototype.OnError=function(wr){return this.AddCallback("OnError",wr)},u.prototype.OnLoad=function(br){return this.AddCallback("OnLoad",br)},u.prototype.OnProgress=function(kr){return this.AddCallback("OnProgress",kr)},u.prototype.OnTimeout=function(dr){return this.AddCallback("OnTimeout",dr)};return u}();i.WebClient=r})(t=n.Net||(n.Net={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){function r(f){console.log(Date.now(),f)}var u=function(){function e(o){this.virtualPath=o,this.OnOpen=(new n.MulticastDelegate).AsFunc(this),this.OnClose=(new n.MulticastDelegate).AsFunc(this),this.OnError=(new n.MulticastDelegate).AsFunc(this),this.OnMessage=(new n.MulticastDelegate).AsFunc(this),this.isSending=false}e.prototype.Open=function(s){var h=this,c;if(n.Core.IsDebugDefined&&r("#WebSocket: "+(this.ws?this.ws.readyState:"not initialized")),this.ws&&this.ws.readyState==WebSocket.OPEN)s&&s(this);else if(!this.ws||this.ws.readyState!=WebSocket.CONNECTING){c=this.virtualPath,c.indexOf("//")>0||(c=(window.location.protocol=="https:"?"wss:":"ws:")+"//"+window.location.host+this.virtualPath);try{this.ws=new WebSocket(c),this.ws.binaryType="arraybuffer"}catch(l){}this.ws.onmessage=function(a){a.data&&h.OnMessage.Any()&&n.Json.BinaryFrame.DeserializeAsync(a.data,function(v){n.Core.IsDebugDefined&&r({"#SOCKET_RECEIVED":v}),h.OnMessage.Invoke(function(y){return y(v)})})},this.ws.onclose=function(){n.Core.IsDebugDefined&&r("#WebSocket closed"),h.OnClose.Invoke(function(p){return p()})},this.ws.onerror=function(){n.Core.IsDebugDefined&&r("#WebSocket error"),h.OnError.Invoke(function(w){return w("#WebSocket error")})},this.ws.onopen=function(){n.Core.IsDebugDefined&&r("#WebSocket opened"),h.OnOpen.Invoke(function(b){return b()}),s&&s(h)}}},e.prototype.SendWorker=function(){var d=this,k;this.sendQueue&&(k=this.sendQueue.shift())?(this.isSending=true,n.Json.BinaryFrame.SerializeAsync(k,function(g){n.Core.IsDebugDefined&&r({"#SOCKET_SEND":k});var nt=g.ToBinaryData();d.ws.send(nt),d.SendWorker()})):this.isSending=false},e.prototype.Send=function(tt){var it=this;this.sendQueue||(this.sendQueue=[]),this.sendQueue.push(tt),this.isSending||this.Open(function(){return it.SendWorker()});return this},e.prototype.IsOpened=function(){return!!(this.ws&&this.ws.readyState==WebSocket.OPEN)},e.prototype.Close=function(){this.ws&&this.ws.close();return this};return e}();i.CalystoWebSocket=u})(t=n.Net||(n.Net={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){var f=function(){function s(){var h=this;this.OnAbort=(new n.MulticastDelegate).OnInvoke(function(c){h.SetValue("OnAbort",c)}).OnAdd(function(l){return h.TryInvokeValue("OnAbort",l)}).AsFunc(this),this.OnError=(new n.MulticastDelegate).OnInvoke(function(a){h.SetValue("OnError",a)}).OnAdd(function(v){return h.TryInvokeValue("OnError",v)}).AsFunc(this),this.OnProgress=(new n.MulticastDelegate).OnInvoke(function(y){h.SetValue("OnProgress",y)}).OnAdd(function(p){return h.TryInvokeValue("OnProgress",p)}).AsFunc(this),this.OnEnd=(new n.MulticastDelegate).OnInvoke(function(){h.SetValue("OnEnd",true)}).OnAdd(function(w){return h.TryInvokeValue("OnEnd",w)}).AsFunc(this),this._values={}}s.prototype.Abort=function(){this.OnAbort.Invoke(function(b){return b("abort")});return this},s.prototype.SetValue=function(k,d){this._values[k]=d},s.prototype.TryInvokeValue=function(g,nt){g in this._values&&nt(this._values[g])};return s}(),e,o;u.AjaxServiceClientBase=f,e=function(tt){function it(){var rt=tt!==null&&tt.apply(this,arguments)||this;rt.OnSuccess=(new n.MulticastDelegate).OnInvoke(function(){rt.SetValue("OnSuccess",true)}).OnAdd(function(ut){return rt.TryInvokeValue("OnSuccess",ut)}).AsFunc(rt),rt.OnResponse=(new n.MulticastDelegate).OnInvoke(function(ft){rt.SetValue("OnResponse",ft)}).OnAdd(function(et){return rt.TryInvokeValue("OnResponse",et)}).AsFunc(rt);return rt}__extends(it,tt);return it}(f),u.AjaxServiceClientVoid=e,o=function(ot){function st(){var ht=ot!==null&&ot.apply(this,arguments)||this;ht.OnSuccess=(new n.MulticastDelegate).OnInvoke(function(ct){ht.SetValue("OnSuccess",ct)}).OnAdd(function(lt){return ht.TryInvokeValue("OnSuccess",lt)}).AsFunc(ht),ht.OnResponse=(new n.MulticastDelegate).OnInvoke(function(at){ht.SetValue("OnResponse",at)}).OnAdd(function(vt){return ht.TryInvokeValue("OnResponse",vt)}).AsFunc(ht);return ht}__extends(st,ot);return st}(f),u.AjaxServiceClientWithReturn=o})(r=i.WebService||(i.WebService={}))})(t=n.Net||(n.Net={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(){})(r=i.WebService||(i.WebService={}))})(t=n.Net||(n.Net={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){var f=function(){function e(o,s){var h=this;this.settings=o,this.Socket=s,this.OnBroadcastMessage=(new n.MulticastDelegate).AsFunc(this),this.OnError=(new n.MulticastDelegate).AsFunc(this),this._pendingCallbacks=new n.Dictionary,this.Socket.OnMessage(function(c){return h.HandleSocketMessage(c)})}e.prototype.HandleSocketMessage=function(l){var p=l.Method==n.Constants.AppConstants.BroadcastMethodName,a=null,v,w,y;!p&&l.ReferenceGuid&&(v=new n.BoxValue,this._pendingCallbacks.TryGetValue(l.ReferenceGuid,v)&&(this._pendingCallbacks.RemoveKey(l.ReferenceGuid),a=v.GetValue())),w=this.ProcessResponse(a,l),w||(l.JavaScriptLO&&!l.IsJavaScriptLODone&&(l.IsJavaScriptLODone=true,y=n.ScriptLoader.LoadJS(l.JavaScriptLO),setTimeout(function(){return y.parentNode.removeChild(y)},200)),p&&this.OnBroadcastMessage.Invoke(function(b){return b(l.ReturnedValue)}),a&&(a.OnResponse.Invoke(function(k){return k(l)}),a.OnSuccess.Invoke(function(d){return d(l.ReturnedValue)}),a.OnEnd.Invoke()))},e.prototype.ProcessResponse=function(g,nt){if(nt.IsEngineExpired){this.Socket.Close(),u.EngineExpired();return true}if(n.Page.IsPageReloading)return true;if(nt.EchoMsg=="EchoServerRequest"){this.Socket.Send({ReferenceGuid:nt.ReferenceGuid,EchoMsg:"EchoClientResponse"});return true}if(nt.ExceptionMessage&&!nt.IsExceptionMessageDone){if(nt.IsExceptionMessageDone=true,g===null||g===void 0?void 0:g.OnError.Any()){if(g.OnError.Invoke(function(tt){return tt(nt.ExceptionMessage)}),n.Core.IsDebugDefined)throw new Error("Socket Error: "+nt.ExceptionMessage).AppendErrorDetails(nt.ExceptionDetails,true);}else if(this.OnError.Any()){if(this.OnError.Invoke(function(it){return it(nt.ExceptionMessage)}),n.Core.IsDebugDefined)throw new Error("Socket Error: "+nt.ExceptionMessage).AppendErrorDetails(nt.ExceptionDetails,true);}else throw new Error(nt.ExceptionMessage).AppendErrorDetails(nt.ExceptionDetails,true);return true}return false},e.prototype.OnMethodReturn=function(rt,ut){this._pendingCallbacks.Add(rt,ut)};return e}();u.WebSocketSession=f})(r=i.WebService||(i.WebService={}))})(t=n.Net||(n.Net={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){function o(p){n.Core.IsDebugDefined&&console.log(Date.now(),p)}function s(){n.Page&&n.Page.OnVersionExpired&&n.Page.OnVersionExpired.Any&&n.Page.OnVersionExpired.Any()?n.Page.OnVersionExpired.Invoke(function(w){return w()}):n.Page.IsPageReloading||(document.documentElement.className+=" calystoAjaxLoading",n.Page.IsPageReloading=true,n.Notification.Create(n.Resources.CalystoLang.NewVersionFoundPageIsReloading,"warning",NaN,"top","center").Show(),setTimeout(function(){return window.location.reload(true)},1e3))}function l(b,k){return(b||"").replace("__calysto_method_name__",k.method||"").replace("__calysto_ss__",k.sstate?"1":"0").replace("__calysto_culture__",n.Globalization.CultureInfo.CurrentCulture.Name).replace("__calysto_current_url__",n.Utility.Encoding.Base64RndEncoder.EncodeToBase64String(window.location.pathname+window.location.search))}function a(d,g,nt){for(var it,rt={},tt=0;tt<nt.length;tt++){if(it=g[tt],typeof it=="undefined")it=null;else if(typeof it=="function")throw new Error("Argument "+nt[tt]+" can not be an function in "+d+"("+nt.join(", ")+")");rt[nt[tt]]=it}return rt}function v(){if(window.event&&"isTrusted"in window.event){if(event&&event.isTrusted&&(event.target||event.srcElement)){n.Core.IsDebugDefined&&console.log("web service method invoked by user event: "+event.type);return true}if(n.Core.IsDebugDefined)throw new Error("Event is null, not invoked in user event.");}return false}function h(ut,ft){var et=ut.xhr,ot="",ht,st;try{ot=et.getResponseHeader("Content-type")}catch(ct){}ot||(ot=et.contentType||(et.response||{}).type||""),ht=et.getResponseHeader(n.Constants.WsjsHeaderConstants.XTypeHeaderKey),st=__assign(__assign({},ft),{isErrorStatus:et.status<200||et.status>=300,contentType:ot,isHtml:(ot||"").indexOf("text/html")>=0,isJson:(ot||"").indexOf("application/json")>=0,calystoType:ht});switch(et.responseType){case"arraybuffer":st.arrayBuffer=et.response;break;case"blob":st.blob=et.response;break;case"":case"text":st.respTxt=et.responseText;break;default:throw new Error("ResponseType not supported: "+et.responseType);}return st}function e(lt,at){if(lt.calystoType==n.Constants.WsjsHeaderConstants.XTypeHeaderBinaryFrameValue)n.Json.BinaryFrame.DeserializeAsync(lt.arrayBuffer,function(yt){lt.responseContainer=yt,at()});else if(lt.respTxt=n.Utility.Encoding.UTF8.GetString(new Uint8Array(lt.arrayBuffer)),lt.isHtml)lt.errorText="Blob download failed",lt.errorHtml=lt.respTxt,at();else if(lt.isJson){try{lt.responseContainer=n.Json.Deserialize(lt.respTxt)}catch(vt){lt.errorText="Blob download failed",lt.errorDescription=lt.respTxt}at()}else lt.errorText="Blob download failed",lt.errorDescription=lt.respTxt,at()}function c(pt,wt){if(wt.fnResponseContainerCallback(pt),pt.IsEngineExpired){wt.fnResponseEndCallback(),s();return}if(n.Page.IsPageReloading){wt.fnResponseEndCallback();return}if(pt.ExceptionMessage&&!pt.IsExceptionMessageDone){pt.IsExceptionMessageDone=true,wt.fnResponseEndCallback(),wt.fnErrorCallback(pt.ExceptionMessage,pt.ExceptionDetails,true);return}if(pt.JavaScriptLO&&!pt.IsJavaScriptLODone){pt.IsJavaScriptLODone=true;var bt=n.ScriptLoader.LoadJS(pt.JavaScriptLO);setTimeout(function(){return bt.parentNode.removeChild(bt)},200)}pt.IsSuccessful&&wt.fnReturnValueCallback(pt.ReturnedValue),wt.fnResponseEndCallback()}function f(kt){n.Core.IsDebugDefined&&o({AJAX_RESPONSE:kt.responseContainer}),kt.errorText?(kt.fnResponseEndCallback(),kt.fnErrorCallback(kt.errorText,{errorDescription:kt.errorDescription,errorHtml:kt.errorHtml},false)):kt.responseContainer&&kt.responseContainer.Type=="IWebServiceResponseContainer"?c(kt.responseContainer,kt):(kt.fnResponseEndCallback(),kt.fnReturnValueCallback(kt.responseContainer||kt.errorText))}function y(dt,gt){var ri,ni,ii,ti;if(dt.xhr.status==0){gt.fnResponseEndCallback();return}if(ri=dt.xhr.getResponseHeader("location"),ri){location.assign(ri);return}if(ni=h(dt,gt),ni.isErrorStatus)ni.errorText="Ajax response error #2 - error status received",ni.errorDescription="xhr.status: "+dt.xhr.status+"\r\nxhr.statusText: "+dt.xhr.statusText+"\r\nxhr.resposeText:\r\n",ii=function(){ni.isHtml?ni.errorHtml=ni.respTxt:ni.errorDescription+=ni.respTxt,f(ni)},ni.respTxt?ii():ni.arrayBuffer?(ni.respTxt=n.Utility.Encoding.UTF8.GetString(new Uint8Array(ni.arrayBuffer)),ii()):ni.blob&&(ti=new FileReader,ti.onload=function(fi){ni.respTxt=n.Utility.Encoding.UTF8.GetString(new Uint8Array(fi.currentTarget.result)),ii()},ti.readAsArrayBuffer(ni.blob));else if(ni.arrayBuffer)e(ni,function(){f(ni)});else if(ni.blob)ti=new FileReader,ti.onload=function(ei){ni.arrayBuffer=ei.currentTarget.result,e(ni,function(){f(ni)})},ti.readAsArrayBuffer(ni.blob);else{try{ni.isJson&&(ni.responseContainer=n.Json.Deserialize(ni.respTxt))}catch(ui){ni.errorText="Ajax response error #1 - invalid JSON string",ni.errorDescription=ui+"\r\nRESPONSE:\r\n"+ni.respTxt}f(ni)}}u.Log=o,u.EngineExpired=s,u.CreateUrl=l,u.CreateArgsObj=a,u.IsTriggeredByUserAction=v,u.CreateFullStateObj=h,u.ReadArrayBuffer=e,u.ProcessResponseContainer=c,u.ProcessResponse=f,u.AjaxResponseReceivedHandler=y})(r=i.WebService||(i.WebService={}))})(t=n.Net||(n.Net={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){var f=function(){function e(o,s){if(this.namespace=o,this.vpath=n.Utility.Encoding.Base64RndEncoder.DecodeBase64StringToString(s),this.ns=n.DataBinder.GetValue(window,o),this.ns)throw new Error("Ajax namespace is already registered: "+o);this.ns={},n.DataBinder.SetValue(window,o,this.ns)}e.prototype.RegisterAjaxMethod=function(h){if(this.ns[h.method])throw new Error("Ajax method is already registered: "+h.method);var c=this,l=function(){var k=arguments,a=new u.AjaxServiceClientWithReturn,y,v;if(h.reque&&!u.IsTriggeredByUserAction())return a;y=u.CreateArgsObj(h.method,k,h.argNames||[]),v=false,a.OnAbort(function(){v=true});var p=false,w=function(){p||(p=true,h.silent||n.Page.OnEndResponse.Invoke(function(tt){return tt()}),a.OnEnd.Invoke())},d=function(){h.silent||n.Page.OnBeginRequest.Invoke(function(it){return it()})},g=function(rt){return a.OnSuccess.Invoke(function(ut){return ut(rt)})},nt=function(ft){return a.OnResponse.Invoke(function(et){return et(ft)})},b=function(ot,st,ht){if(a.OnError.Any()){if(a.OnError.Invoke(function(ct){return ct(ot)}),n.Core.IsDebugDefined)throw new Error(ot).AppendErrorDetails(st,ht);}else throw new Error(ot).AppendErrorDetails(st,ht);};v||n.Json.BinaryFrame.SerializeAsync(y,function(lt){var at,vt,yt,wt;if(n.Core.IsDebugDefined&&u.Log({AJAX_SEND:lt.Json,BLOBS:lt.Blobs,method:h.method+"("+(h.argNames||[]).join(", ")+")",jsObject:y}),!v){if(at=new n.Net.WebClient(""),a.OnAbort(function(){return at.Abort()}),vt=u.CreateUrl(c.vpath,h),h.post||lt.Blobs.length>0||lt.Json.length>1e3)if(vt=vt.replace("__calysto_json_arg__",""),at.AddRequestHeader(n.Constants.WsjsHeaderConstants.XTypeHeaderKey,n.Constants.WsjsHeaderConstants.XTypeHeaderBinaryFrameValue),yt=lt.ToBinaryData(),yt&&yt.size>0)at.UploadData(yt);else throw Error("Invalid blob, can not continue.");else wt=n.Utility.Encoding.Base64RndEncoder.EncodeToBase64String(lt.Json),vt=vt.replace("__calysto_json_arg__","&"+n.Constants.CalystoAjaxHandlerConstants.AjaxGetParamName+"="+wt);at.url=vt,at.timeoutMs=h.timeoutMs||at.timeoutMs,at.AddRequestHeader(n.Constants.WsjsHeaderConstants.XAjaxHeaderKey,n.Constants.WsjsHeaderConstants.XAjaxHeaderValue),at.responseType=typeof ArrayBuffer!="undefined"?"arraybuffer":"text";var pt=function(gt,ni){if(ni.type=="timeout"){w(),b("Ajax request timeout.");return}u.AjaxResponseReceivedHandler(at,{fnResponseContainerCallback:nt,fnReturnValueCallback:g,fnErrorCallback:b,fnResponseEndCallback:w})},bt=function(ti,ii,ri){var ui={};ui.IsComputable=!!ii.lengthComputable,ui.IsUpload=!!ri,ui.Loaded=ii.loaded,ui.Total=ii.total,ii.total>0&&(ui.Percent=ii.loaded/ii.total*100,ui.Percent>100&&(ui.Percent=100),a.OnProgress.Invoke(function(fi){return fi(ui)}))},kt=function(ei,oi){return bt(ei,oi,false)},dt=function(si,hi){return bt(si,hi,true)};if(at.OnLoad(pt),at.OnError(pt),at.OnTimeout(pt),at.OnAbort(pt),at.OnProgress(kt),at.OnUploadProgress(dt),!v){if(d(),!at.async)throw new Error("Sync ajax request is not supported for web service");at.Start()}}});return a};if(h.method in c.ns)throw new Error("WebService error, method "+h.method+" already exists in destination object.");else c.ns[h.method]=l;return this};return e}();u.WebAjaxServiceHelper=f})(r=i.WebService||(i.WebService={}))})(t=n.Net||(n.Net={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){function e(g,nt,tt,it){return function(){var ft=arguments;if(nt.reque&&!u.IsTriggeredByUserAction())return null;var et=u.CreateArgsObj(nt.method,ft,nt.argNames||[]),rt=n.Mathm.NewGuid(),ot=u.CreateUrl(it,nt).replace("__calysto_json_arg__",""),ut=new u.AjaxServiceClientWithReturn;tt.OnMethodReturn(rt,ut),tt.Socket.Send({Method:nt.method,ReferenceGuid:rt,RequestObj:{IsSocketWebClient:true,AjaxQueryString:ot,AjaxArgs:et}});return ut}}var f=function(){function o(s,h){if(this.namespace=s,this.methods=[],this.ns=n.DataBinder.GetValue(window,s),this.ns)throw new Error("Socket session type is already registered: "+s);this.vpath=n.Utility.Encoding.Base64RndEncoder.DecodeBase64StringToString(h);var c=this;this.ns=function(){var v,w,b=new n.Net.CalystoWebSocket(u.CreateUrl(c.vpath,{method:"$"}).replace("__calysto_json_arg__","")),y=new u.WebSocketSession({method:"RequestReceived"},b),a,l,p;try{for(a=__values(c.methods),l=a.next();!l.done;l=a.next())p=l.value,y[p.method]=e(c,p,y,c.vpath)}catch(k){v={error:k}}finally{try{l&&!l.done&&(w=a.return)&&w.call(a)}finally{if(v)throw v.error;}}return y},n.DataBinder.SetValue(window,s,this.ns)}o.prototype.RegisterSocketMethod=function(d){this.methods.push(d);return this};return o}();u.WebSocketSessionHelper=f})(r=i.WebService||(i.WebService={}))})(t=n.Net||(n.Net={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){function f(o,s){return new u.WebAjaxServiceHelper(o,s)}function e(h,c){return new u.WebSocketSessionHelper(h,c)}u.CreateAjax=f,u.CreateSocket=e})(r=i.WebService||(i.WebService={}))})(t=n.Net||(n.Net={}))}(Calysto||(Calysto={})),function(n){var t=function(){function r(){}r.prototype.ForRemoval=function(){return this.doCountExecutions&&this.executedCount>=this.executionsMax};return r}(),i=function(){function u(){this._asFuncCached=new Map,this.items=[],this.onAddHandlers=[],this.onInvokeHandlers=[]}u.prototype.OnAdd=function(f){this.onAddHandlers.push(f);return this},u.prototype.OnInvoke=function(e){this.onInvokeHandlers.push(e);return this},u.prototype.Add=function(o,s){var h=new t;h.delegate=o,h.executedCount=0,s&&s>0&&(h.doCountExecutions=true,h.executionsMax=s),this.items.push(h),this.onAddHandlers.ForEach(function(c){return c(o)});return this},u.prototype.Remove=function(l){var a=this,v=this.items.Where(function(y){return y.delegate==l});v.ForEach(function(p){return a.items.Remove(p)});return this},u.prototype.AddOnce=function(w){return this.Add(w,1)},u.prototype.AddCount=function(b,k){return this.Add(k,b)},u.prototype.Invoke=function(d){var ut,st,ft,ht,tt,g,et,ot,it,nt,rt;try{for(tt=__values(this.onInvokeHandlers),g=tt.next();!g.done;g=tt.next())et=g.value,d?d(et):et()}catch(ct){ut={error:ct}}finally{try{g&&!g.done&&(st=tt.return)&&st.call(tt)}finally{if(ut)throw ut.error;}}ot=false;try{for(it=__values(this.items),nt=it.next();!nt.done;nt=it.next())rt=nt.value,rt.ForRemoval()?ot=true:(d?d(rt.delegate):rt.delegate(),rt.executedCount++)}catch(lt){ft={error:lt}}finally{try{nt&&!nt.done&&(ht=it.return)&&ht.call(it)}finally{if(ft)throw ft.error;}}ot&&(this.items=this.items.Where(function(at){return!at.ForRemoval()}))},u.prototype.Any=function(){return this.items.Any()},u.prototype.Count=function(){return this.items.length},u.prototype.Clear=function(){this.items.Clear();return this},u.prototype.AsFunc=function(vt){if(!this._asFuncCached.has(vt)){var pt=this,yt=function(wt){pt.Add(wt);return vt};Object.defineProperty(yt,"MCD",{get:function(){return pt}}),this.CopyFunction(yt,"Invoke"),this.CopyFunction(yt,"Any"),this._asFuncCached.set(vt,yt)}return this._asFuncCached.get(vt)},u.prototype.CopyFunction=function(bt,kt){bt[kt]=this[kt].BindContext(this)};return u}();n.MulticastDelegate=i}(Calysto||(Calysto={})),function(n){var t;(function(i){function h(p){var d,g,b,w,k;try{for(b=__values(u),w=b.next();!w.done;w=b.next())k=w.value,!k.IsExecuted&&k.MinReadyState<=p&&(k.IsExecuted=true,k.Func())}catch(nt){d={error:nt}}finally{try{w&&!w.done&&(g=b.return)&&g.call(b)}finally{if(d)throw d.error;}}}function l(){if(window.document&&document.body)switch(document.readyState){case"interactive":setTimeout(function(){return h(r.Interactive)},f);break;case"complete":setTimeout(function(){return h(r.Complete)},f);return}clearTimeout(c),c=setTimeout(l,f)}function a(tt,it){var rt=new s;rt.Func=tt,rt.MinReadyState=it,u.push(rt),u=u.OrderBy(function(ut){return ut.MinReadyState}),l()}var r,s,u,c,f,e,o;(function(v){v[v.Loading=2]="Loading",v[v.Interactive=3]="Interactive",v[v.Complete=4]="Complete"})(r||(r={})),s=function(){function y(){}return y}(),u=[],f=window.FormData?10:200,i.IsPageReloading=false,i.IsVersionExpiredVisible=false,i.OnLoadComplete=(new n.MulticastDelegate).OnAdd(function(ft){a(ft,r.Complete)}).AsFunc(n.Page),i.OnLoading=(new n.MulticastDelegate).AsFunc(n.Page),e=0,i.OnBeginRequest=(new n.MulticastDelegate).Add(function(){++e==1&&i.OnLoading.Invoke(function(et){return et(true)})}).AsFunc(n.Page),i.OnEndResponse=(new n.MulticastDelegate).Add(function(){--e<1&&(e=0,i.OnLoading.Invoke(function(ot){return ot(false)}))}).AsFunc(n.Page),i.OnInteractive=(new n.MulticastDelegate).OnAdd(function(st){a(st,r.Interactive)}).Add(function(){var ht=window.Sys;typeof ht!="undefined"&&ht.WebForms&&ht.WebForms.PageRequestManager&&(ht.WebForms.PageRequestManager.getInstance().add_beginRequest(function(){return i.OnBeginRequest.Invoke(function(ct){return ct()})}),ht.WebForms.PageRequestManager.getInstance().add_endRequest(function(){return i.OnEndResponse.Invoke(function(lt){return lt()})})),i.OnEndResponse.Invoke(function(at){return at()})}).AsFunc(n.Page),i.OnUnhandledException=(new n.MulticastDelegate).AsFunc(n.Page),i.OnVersionExpired=(new n.MulticastDelegate).AsFunc(n.Page),o=false,i.OnEscKey=(new n.MulticastDelegate).OnAdd(function(){o||(o=true,n.Event.Attach(document,"keydown",function(vt){n.Event.IsEscKey(vt)&&i.OnEscKey.Invoke(function(yt){return yt()})}))}).AsFunc(n.Page)})(t=n.Page||(n.Page={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){var f;(function(e){function o(){(function(a,v,y){var b=(n.Globalization.CultureInfo.CurrentCulture.Name||"").replace("-","_"),p,w=a.getElementsByTagName(v)[0];a.getElementById(y)||(p=a.createElement(v),p.id=y,p.src="//connect.facebook.net/"+(b||"en_US")+"/sdk.js",p.async="async",w&&w.parentNode&&w.parentNode.insertBefore(p,w))})(document,"script","facebook-jssdk")}function s(){return __awaiter(this,void 0,void 0,function(){var k=this;return __generator(this,function(){return[2,n.Tasks.TaskUtility.RunAsync(function(d){return __awaiter(k,void 0,void 0,function(){var g;return __generator(this,function(nt){switch(nt.label){case 0:d.Watchdog(15e3),d.OnError(function(){return d.NotifySuccess(null)}),o(),nt.label=1;case 1:if(!!d.IsCancelled)return[3,3];if(g=window.FB,g&&g.init&&g.Event&&g.Event.subscribe){d.NotifySuccess(g);return[2]}return[4,n.Tasks.TaskUtility.SleepAsync(100)];case 2:nt.sent();return[3,1];case 3:return[2]}})})})]})})}var h=function(){function it(rt){this._fbInstance=rt}Object.defineProperty(it.prototype,"FB",{get:function(){return this._fbInstance},enumerable:false,configurable:true});return it}(),c=function(){function ut(){}ut.prototype.InitEngine=function(){return __awaiter(this,void 0,void 0,function(){var ft=this;return __generator(this,function(){return[2,n.Tasks.TaskUtility.RunAsync(function(et){return __awaiter(ft,void 0,void 0,function(){var ot;return __generator(this,function(st){switch(st.label){case 0:return[4,s()];case 1:ot=st.sent(),ot?(this.Data=new h(ot),et.NotifySuccess(true)):et.NotifySuccess(false);return[2]}})})})]})})},ut.prototype.InitApp=function(ht){return __awaiter(this,void 0,void 0,function(){var ct=this;return __generator(this,function(){return[2,n.Tasks.TaskUtility.RunAsync(function(lt){ct.Data.FB.__fbInitDone!=ht&&(ct.Data.FB.__fbInitDone=ht,ct.Data.FB.init({appId:ht,xfbml:true,status:true,cookie:true,version:"v4.0"})),lt.NotifySuccess(true)})]})})},ut.prototype.Login=function(at){return __awaiter(this,void 0,void 0,function(){var vt=this;return __generator(this,function(){return[2,n.Tasks.TaskUtility.RunAsync(function(yt){yt.Watchdog(12e4);var pt=(at||"").split(",").AsEnumerable().Select(function(wt){return wt.Trim()}).Concat(["public_profile","email"]).Where(function(bt){return!!bt}).Distinct().ToStringJoined(",");n.Core.IsDebugDefined&&console.log("fb#before-login"),vt.Data.FB.login(function(kt){vt.Data.StatusReponse=kt,kt.status=="connected"?(n.Core.IsDebugDefined&&console.log("fb#login-success"),yt.NotifySuccess(true)):(n.Core.IsDebugDefined&&console.log("fb#login-failed"),vt.Error=kt.status,yt.NotifySuccess(false))},{enable_profile_selector:true,return_scopes:true,scope:pt})})]})})},ut.prototype.LoadProfile=function(){return __awaiter(this,void 0,void 0,function(){var dt=this;return __generator(this,function(){n.Core.IsDebugDefined&&console.log("fb#before-LoadProfile1");return[2,n.Tasks.TaskUtility.RunAsync(function(gt){n.Core.IsDebugDefined&&console.log("fb#before-LoadProfile2");try{dt.Data.FB.api("/me",{fields:"id,name,gender,email,birthday,verified,picture,locale,link,first_name,last_name,age_range,hometown,photos"},function(ti){n.Core.IsDebugDefined&&console.log("fb#loaded-LoadProfile"),dt.Data.Profile=ti,gt.NotifySuccess(true)})}catch(ni){dt.Error=ni,gt.NotifySuccess(false)}})]})})},ut.prototype.LoadPicture=function(){return __awaiter(this,void 0,void 0,function(){var ii=this;return __generator(this,function(){n.Core.IsDebugDefined&&console.log("fb#before-LoadPicture1");return[2,n.Tasks.TaskUtility.RunAsync(function(ri){n.Core.IsDebugDefined&&console.log("fb#before-LoadPicture2");try{ii.Data.FB.api("/me/picture",{redirect:false,height:300,width:300},function(fi){ii.Data.Picture=fi,ri.NotifySuccess(true)})}catch(ui){ii.Error=ui,ri.NotifySuccess(false)}})]})})},ut.prototype.LoadPermissions=function(){return __awaiter(this,void 0,void 0,function(){var ei=this;return __generator(this,function(){n.Core.IsDebugDefined&&console.log("fb#before-LoadPermissions1");return[2,n.Tasks.TaskUtility.RunAsync(function(oi){n.Core.IsDebugDefined&&console.log("fb#before-LoadPermissions2");try{ei.Data.FB.api("/me/permissions",function(hi){ei.Data.Permissions=hi,oi.NotifySuccess(true)})}catch(si){ei.Error=si,oi.NotifySuccess(false)}})]})})};return ut}();e.FacebookPromise=c})(f=u.Facebook||(u.Facebook={}))})(r=i.Social||(i.Social={}))})(t=n.Page||(n.Page={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){var f;(function(e){function s(){(function(y,p,w){var b,k=y.getElementsByTagName(p)[0];y.getElementById(w)||(b=y.createElement(p),b.id=w,b.src="https://apis.google.com/js/platform.js",b.async="async",k&&k.parentNode&&k.parentNode.insertBefore(b,k))})(document,"script","google-platform")}function h(){return __awaiter(this,void 0,void 0,function(){var d=this;return __generator(this,function(){return[2,n.Tasks.TaskUtility.RunAsync(function(g){return __awaiter(d,void 0,void 0,function(){var nt;return __generator(this,function(tt){switch(tt.label){case 0:g.Watchdog(15e3),g.OnError(function(){return g.NotifySuccess(false)}),s(),tt.label=1;case 1:if(!!g.IsCancelled)return[3,3];if(nt=window.gapi,nt&&nt.load){g.NotifySuccess(true);return[2]}return[4,n.Tasks.TaskUtility.SleepAsync(100)];case 2:tt.sent();return[3,1];case 3:return[2]}})})})]})})}function c(it){return{Id:it.getId(),Name:it.getName(),GivenName:it.getGivenName(),FamilyName:it.getFamilyName(),ImageUrl:it.getImageUrl(),Email:it.getEmail()}}function a(ut){return ut?o+" "+ut:o}var l=function(){function rt(){}return rt}(),o="https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/plus.me",v=function(){function ft(){}ft.prototype.InitEngine=function(){return __awaiter(this,void 0,void 0,function(){var et=this;return __generator(this,function(){return[2,n.Tasks.TaskUtility.RunAsync(function(ot){return __awaiter(et,void 0,void 0,function(){var st;return __generator(this,function(ht){switch(ht.label){case 0:ot.OnError(function(){return ot.NotifySuccess(false)});return[4,h()];case 1:st=ht.sent(),st?(this.Data=new l,ot.NotifySuccess(true)):ot.NotifySuccess(false);return[2]}})})})]})})},ft.prototype.InitApp=function(ct,lt,at){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return[2,n.Tasks.TaskUtility.RunAsync(function(vt){if(vt.Watchdog(15e3),vt.OnError(function(){return vt.NotifySuccess(false)}),window.gapi&&gapi.load&&gapi.auth2&&gapi.auth2.init){vt.NotifySuccess(true);return}gapi.load("client:auth2",{callback:function(){gapi.client.init({apiKey:ct,clientId:lt,scope:a(at)}).then(function(yt){n.Core.IsDebugDefined&&console.log({"google#success_LoadAuth2":yt}),vt.NotifySuccess(true)},function(pt){n.Core.IsDebugDefined&&console.log(pt),vt.NotifyError()})},onerror:function(wt){vt.NotifyError(wt)}})})]})})},ft.prototype.Login=function(){return __awaiter(this,void 0,void 0,function(){var bt=this;return __generator(this,function(){return[2,n.Tasks.TaskUtility.RunAsync(function(kt){kt.Watchdog(12e4),kt.OnError(function(){return kt.NotifySuccess(false)}),n.Core.IsDebugDefined&&console.log({"google#Login":bt.Data}),gapi.auth2.getAuthInstance().signIn().then(function(dt){n.Core.IsDebugDefined&&console.log({"google#success-Login":dt}),bt.Data.GoogleUser=dt,bt.Data.Data={AuthResponse:dt.getAuthResponse(),GrantedScopes:dt.getGrantedScopes(),isSignedIn:dt.isSignedIn(),UserId:dt.getId()},kt.NotifySuccess(true)},function(gt){kt.NotifyError(gt)})})]})})},ft.prototype.LoadProfile=function(){return __awaiter(this,void 0,void 0,function(){var ni=this;return __generator(this,function(){return[2,n.Tasks.TaskUtility.RunAsync(function(ti){ti.Watchdog(15e3),ti.OnError(function(){return ti.NotifySuccess(false)}),n.Core.IsDebugDefined&&console.log({"google#LoadProfile":ni.Data}),ni.Data.BasicProfile=c(ni.Data.GoogleUser.getBasicProfile()),ti.NotifySuccess(true)})]})})};return ft}();e.GooglePromise=v})(f=u.Google||(u.Google={}))})(r=i.Social||(i.Social={}))})(t=n.Page||(n.Page={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){var f=function(){function e(o){this.trackingId=o,this.gtag("js",new Date),n.ScriptLoader.LoadJSFile("https://www.googletagmanager.com/gtag/js?id="+o,true)}e.prototype.gtag=function(){for(var h,c=[],s=0;s<arguments.length;s++)c[s]=arguments[s];h=window.dataLayer=window.dataLayer||[],h.push(arguments)},e.prototype.HitPageView=function(l){l?this.gtag("config",this.trackingId,{page_path:l}):this.gtag("config",this.trackingId);return this};return e}();u.AnalyticsService=f})(r=i.Google||(i.Google={}))})(t=n.Page||(n.Page={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){function c(a){a===void 0&&(a=300),s=arguments.length==0?300:a,o=true,f||(f=(new n.Timer).OnTimeout(function(){e?n.Utility.Dom.AddClass(document.documentElement,"calystoAjaxLoading"):n.Utility.Dom.RemoveClass(document.documentElement,"calystoAjaxLoading")})),h||(h=true,n.Page.OnLoading(function(v){e=v,o&&f.Abort().Start(e?s:1)}))}function l(){f&&(o=false,e=false,f.Abort().Start(1))}var e=false,s=300,o=false,f,h=false;u.Enable=c,u.Disable=l})(r=i.Preloader||(i.Preloader={}))})(t=n.Page||(n.Page={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){function o(c,l){var v,p,a,w,b,k;if(c&&!(c.indexOf("Blocked a frame with origin")>=0)&&!(c.indexOf("null is not an object (evaluating 'elt.parentNode')")>=0)){v=n.Net.WebClient.GetXMLHttpRequest(f),v.open("POST",f,true),v.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),v.setRequestHeader(n.Constants.WsjsHeaderConstants.XAjaxHeaderKey,n.Constants.WsjsHeaderConstants.XExceptionHeaderValue);var nt=(document.documentElement.innerHTML||"").substr(0,100),d=l,y="";try{p=$$calysto(document.documentElement).Query("//input, //select, //textarea").Select(function(tt){return{tagName:tt.tagName,type:tt.type,calystoId:tt.getAttribute(n.AttrName.CalystoId),id:tt.id,name:tt.name,value:tt.value}}).ToArray(),y=n.Json.Serialize(p,50)}catch(g){n.Core.IsDebugDefined&&console.error(g),y="*error, values can no be serialized*"}a={location:{},screen:{},navigator:{}},n.Collections.ForEachProperties(location,function(it,rt){try{a.location[it]=rt}catch(ut){}}),n.Collections.ForEachProperties(screen,function(ft,et){try{a.screen[ft]=et}catch(ot){}}),n.Collections.ForEachProperties(navigator,function(st,ht){try{a.navigator[st]=ht}catch(ct){}}),w={calystoExObj:true,errMsg:c,errDetails:d,url:window.location.href,cookie:document.cookie,userAgent:navigator.userAgent,location:n.Json.Serialize(a.location),screen:n.Json.Serialize(a.screen),navigator:n.Json.Serialize(a.navigator),inputValues:y},n.Core.IsDebugDefined,b=n.Json.Serialize(w),k=n.Utility.Encoding.Base64RndEncoder.EncodeToBase64String(b),v.send(k)}}function s(lt,at){try{f&&o(lt,at)}catch(vt){if(n.Core.IsDebugDefined)try{console.error(vt)}catch(yt){}}}function h(pt){var wt={},kt,bt;try{kt=pt&&pt.error&&pt.error.CalystoException?pt.error.CalystoException:undefined,wt.IsServerError=!!(kt&&kt.IsServerError),bt=[],wt.IsServerError?(wt.Message=kt.Message,bt.push(kt.Details),wt.HtmlDetails=kt.HtmlDetails||""):(pt=pt||window.event)&&(wt.Message=pt.message,wt.FileName=pt.filename,wt.LineNo=pt.lineno,wt.ColNo=pt.colno,pt.error&&(wt.Message=pt.error.message||pt.message,pt.message&&wt.Message!=pt.message&&bt.push(pt.message),pt.error.description&&pt.error.description!=wt.Message&&bt.push(pt.error.description)),bt.push("filename: "+pt.filename),bt.push("lineno: "+pt.lineno),pt.colno!=null&&bt.push("colno: "+pt.colno),pt.error&&(wt.Stack=(pt.error||{}).stack,wt.Stack&&bt.push("stack:\r\n"+wt.Stack),pt.error&&kt&&(bt.push("-----------------------------"),bt.push("CalystoException.Message:"),bt.push(kt.Message),bt.push("CalystoException.Details:"),bt.push(kt.Details),wt.HtmlDetails=kt.HtmlDetails||""))),wt.Details=bt.join("\r\n")}catch(dt){}return wt}function e(gt){var ni,ti;try{if(ni=h(gt),!ni||!ni.Message)return;if(ni&&!ni.IsServerError&&ni.FileName&&ni.Message&&ni.Stack)try{n.Page.Diagnostic.ElmahLog(ni.Message,ni.Details)}catch(ii){}try{n.Page.OnUnhandledException.Invoke(function(fi){return fi(ni.Message)})}catch(ri){}if(n.Core.IsDebugDefined)try{ti=n.Dialog.CreateError(ni.Message+"\r\n\r\n"+ni.Details,"DEBUG MODE - "+(ni.IsServerError?"Server Exception":"Unhandled JS Exception")).Show(),ni.HtmlDetails&&ti.AppendContent(ni.HtmlDetails)}catch(ri){}}catch(ui){}}var f=(n.Core.Constants.ServerDiagnosticUrl||"").replace("=","://");u.ElmahLog=s,typeof ErrorEvent!="undefined"?window.addEventListener?window.addEventListener("error",e,true):window.attachEvent&&window.attachEvent("onerror",e,true):window.onerror=function(ei,oi,si,hi){e({colno:hi||null,lineno:si,filename:oi,message:ei,type:"error"})}})(r=i.Diagnostic||(i.Diagnostic={}))})(t=n.Page||(n.Page={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){function f(){r||(r=true,n.Event.Attach(window,"popstate",function(h){return e(h.state)}))}function u(c){var l={isCalystoState:true,url:window.location.href,pathname:window.location.pathname,search:window.location.search,hash:window.location.hash,title:document.title,stateArray:c};l&&l.isCalystoState&&window.history.replaceState&&(f(),window.history.replaceState(l,l.title,l.url))}function e(a){var v,y;if(a&&a.isCalystoState&&a.stateArray&&window.history.replaceState)for(document.title=a.title,v=0;v<a.stateArray.length;v++)y=a.stateArray[v],y.selector&&$$calysto(y.selector).SetInnerHtml(y.html)}function o(){window.location.hash="!x"+Date.now()+"-"+Math.floor(Math.random()*1e6)}function s(p){for(var k,b,d=[],w=0;w<p.length;w++){if(b=p[w].selector,!b)throw new Error("Error in AjaxHistory, selector is null");d.push({selector:b,html:$$calysto(b).SelectInnerHtml().FirstOrDefault()})}for(u(d),w=0;w<p.length;w++)$$calysto(p[w].selector).SetInnerHtml(p[w].html);for(o(),k=[],w=0;w<p.length;w++)b=p[w].selector,k.push({selector:b,html:$$calysto(b).SelectInnerHtml().FirstOrDefault()});u(k)}var r=false;i.PushState=s})(t=n.AjaxHistory||(n.AjaxHistory={}))}(Calysto||(Calysto={})),function(n){function t(e){return(e||"uid")+(Math.random()+"").substr(2)+Date.now()}function i(o){return n.Json.Serialize(o)}function u(s){try{return n.Json.Deserialize(s)}catch(h){return null}}var r="__EchoTestMethod",f=function(){function c(l){var a=this;this._listenersArr=[],this._funcBag={},this._uniqueUID=l||t("uid"),this._funcBag[r]=function(v){return"received: "+v},this.AddDistinctListener(window.parent),this.AddDistinctListener(window.opener),n.Event.Attach(window,"message",function(y){return a.HandleMessageEvent(y)})}c.prototype.AddDistinctListener=function(p){if(p&&p!=window){for(var w=0;w<this._listenersArr.length;w++)if(this._listenersArr[w]==p)return;this._listenersArr.push(p)}},c.prototype.EncapsulateFunc=function(b){if(b){for(var d=0,k;d++<50&&(!(k=t("fn"))||this._funcBag[k]););this._funcBag[k]=b;return k}return null},c.prototype.RegisterMethod=function(g,nt){if(typeof g!="string")throw Error("PostMessage.RegisterMethod argument funcName is not string");if(typeof nt!="function")throw Error("PostMessage.RegisterMethod argument funcRef is not function");if(this._funcBag[g])throw new Error("Method is already registerd in PostMessage.RegisterMethod: "+g);this._funcBag[g]=nt;return this},c.prototype.InvokeMethod=function(tt,it,rt,ut){for(var et,ot=[tt,it,rt],st=["destinationUID","funcName","arg"],ft=0;ft<ot.length;ft++)if(typeof ot[ft]=="function")throw Error("PostMessage.InvokeMethod argument "+st[ft]+" can not be function");if(ut&&typeof ut!="function")throw Error("PostMessage.InvokeMethod argument callbackFunc is not function");for(ft=0;ft<this._listenersArr.length;ft++)(et=this._listenersArr[ft])&&et!=window&&et.postMessage(i({senderUID:this._uniqueUID,destinationUID:tt,funcName:it,argument:rt,callbackFuncName:this.EncapsulateFunc(ut)}),"*");return this},c.prototype.Echo=function(ht,ct,lt){return this.InvokeMethod(ht,r,ct,lt)},c.prototype.HandleMessageEvent=function(at){var vt,yt,pt,wt;if(at&&at.data&&at.type=="message"&&typeof at.data=="string"&&(vt=u(at.data))&&vt.senderUID&&vt.destinationUID&&(n.Core.IsDebugDefined,vt.destinationUID=="*"||vt.destinationUID==this._uniqueUID))if(this.AddDistinctListener(at.source),vt.funcName&&(yt=this._funcBag[vt.funcName]))pt=yt(vt.argument,at),vt.isCallback?delete this._funcBag[vt.funcName]:at&&at.source&&vt.callbackFuncName&&(wt=i({senderUID:this._uniqueUID,destinationUID:vt.senderUID,funcName:vt.callbackFuncName,isCallback:true,argument:pt}),at.source.postMessage(wt,"*"));else throw new Error("Error in PostMessage, function not registered: "+vt.funcName);},c.FindIframe=function(bt){for(var gt=document.getElementsByTagName("iframe"),kt,dt=0;dt<gt.length;dt++)if((kt=gt[dt])&&(kt.contentWindow==bt.source||kt.contentWindow==bt))return kt;return null};return c}();n.PostMessage=f}(Calysto||(Calysto={})),function(n){var t;(function(i){function u(d){var ht,it,ft,rt,nt,tt,et,ct,ot,ut;if(!(d&&d.tagName&&d.type))return{};var lt=d.name,at=d.tagName.toUpperCase(),vt=d.type.toLowerCase(),g=null,st=d.getAttribute(n.AttrName.CalystoGetter);if(st)ht=n.Utility.Expressions.CompileLambdaExpression(st),g=ht.call(d,d);else switch(at){case"INPUT":switch(vt){case"checkbox":case"radio":if(d.checked)g=d.value!="on"||d.getAttribute("value")?d.value:true;else return{};break;case"file":if(g=[],d.files&&d.files[0])for(it=0;it<d.files.length;it++)g.push(d.files[it]);break;default:g=d.value}break;case"TEXTAREA":g=d.value;break;case"SELECT":switch(d.type){case"select":case"select-one":g=d.value;break;case"select-multiple":for(g=[],rt=0;rt<d.options.length;rt++)(ft=d.options[rt])&&ft.selected&&g.push(ft.value)}}if(nt=d.getAttribute(n.AttrName.CalystoType),nt){if(tt=n.Type.TypeDescriptor.FromTypeName(nt),!tt.IsValidKnownType)throw new Error("Forms serializer error, invalid toType: "+nt);if(et=function(yt){var wt=d.getAttribute(n.AttrName.CalystoFormat),pt;yt&&wt&&(tt.KnownTypeName==n.Type.KnownType.Date||tt.KnownTypeName==n.Type.KnownType.DateTime)&&(pt=new n.BoxValue,n.DateTime.TryParseDateTime(yt,wt,pt)&&(yt=pt.GetValue())),yt=n.Type.TypeConverter.ChangeType(yt,nt,true);return yt},ct=n.Type.TypeDescriptor.FromValue(g),ct.KnownTypeName!=tt.KnownTypeName)if(n.Type.TypeInspector.IsArray(g)){for(ot=[],ut=0;ut<g.length;ut++)ot.push(et(g[ut]));g=ot}else g=et(g)}return{Element:d,Name:lt,Value:g,HasValue:!n.Type.TypeInspector.IsNullOrUndefined(g)}}function f(bt){var dt,ni,gt,kt;if(!bt)return[];for(dt=$$calysto(bt).Query("*, //*").Query("input, textarea, select").ToArray(),gt=[],kt=0;kt<dt.length;kt++)(ni=u(dt[kt])).HasValue&&gt.push(ni);return gt}function o(ti,ii){if(!ti.getAttribute(n.AttrName.CalystoType)){var ri=n.Type.TypeDescriptor.FromValue(ii);ri.IsValidKnownType&&ti.setAttribute(n.AttrName.CalystoType,ri.NullableTypeName)}}function r(ui,fi){var ei=ui,ci,li,si,ai,vi,pi,yi,oi,hi;if(o(ei,fi),ci=ei.getAttribute(n.AttrName.CalystoSetter),ci){li=n.Utility.Expressions.CompileLambdaNoReturnCheck(ci),li.call(ei,fi);return true}si="",ei.type&&(si=ei.type.toLowerCase()),n.Type.TypeInspector.IsNullOrUndefined(fi)&&(fi=""),ai=ei.tagName.toUpperCase();switch(ai){case"TEXTAREA":ei.value=fi;break;case"INPUT":switch(si){case"checkbox":case"radio":ei.checked=ei.value!="on"||ei.getAttribute("value")?ei.value+""==fi+"":fi===true||fi==="true"||fi==="True";break;default:ei.value=n.Type.TypeConverter.ToStringFormated(fi,ei.getAttribute(n.AttrName.CalystoFormat))}break;case"SELECT":switch(si){case"select":case"select-one":case"select-multiple":try{if(fi&&"Items"in fi){vi=fi.Items,oi=ei,oi.innerHTML="",pi=vi.ForEach(function(bi){var ki=document.createElement("option");ki.innerHTML=bi.Text,ki.value=bi.Value,oi.appendChild(ki),ki.selected=!!bi.Selected;return ki});break}}catch(wi){}if(si=="select-multiple")for(n.Type.TypeInspector.IsNullOrUndefined(fi)?fi=[]:n.Type.TypeInspector.IsArray(fi)||(fi=[fi]),yi=fi,oi=ei,hi=0;hi<oi.options.length;hi++)oi.options[hi].selected=yi.Where(function(di){return di+""==oi.options[hi].value}).Any();else ei.value=n.Type.TypeConverter.ToStringFormated(fi,ei.getAttribute(n.AttrName.CalystoFormat));break;default:throw new Error("Type "+si+" not supported.");}break;default:if("innerHTML"in ei)ei.innerHTML=n.Type.TypeConverter.ToStringFormated(fi,ei.getAttribute(n.AttrName.CalystoFormat));else return false}return true}function s(gi){$$calysto(gi||document.documentElement).Query("*, //*").Query("input, select, textarea, ["+n.AttrName.CalystoSetter+"=*]").ForEach(function(nr){var ir,tr,rr;nr.disabled||nr.readOnly||(ir=nr.getAttribute(n.AttrName.CalystoSetter),tr=nr.tagName.toLowerCase(),ir?(rr=n.Utility.Expressions.CompileLambdaNoReturnCheck(ir),rr.call(nr,"")):tr=="textarea"?nr.value="":tr=="input"?nr.type=="radio"||nr.type=="checkbox"?nr.checked=false:nr.type=="button"||nr.type=="submit"||(nr.value=""):tr.indexOf("select")==0&&(nr.value="",nr.selectedIndex=0))})}function h(ur,fr,er){for(var sr,or,cr=f(ur||document.documentElement),lr={},ar=er||{},hr=0;hr<cr.length;hr++){if(sr=cr[hr].Name,sr){if(lr[sr])continue}else continue;lr[sr]=true,or=cr[hr].Value,fr&&n.Type.TypeInspector.IsString(or)&&(or=(or||"").Trim()),n.Type.TypeInspector.IsNullOrUndefined(or)||String.IsNullOrEmpty(or)||(ar[sr]=or)}return ar}function c(vr,yr,pr){vr=vr||{},$$calysto(yr||document.documentElement).Query("[name=*], //[name=*]").ForEach(function(wr){var br;if(wr&&(br=wr.name)&&(pr||br in vr)&&!r(wr,vr[br]))throw new Error("Element with name="+br+" is not valid for data binding");})}function e(kr,dr,gr){for(var tu,nu,ru=f(kr||document.documentElement),uu={},fu=gr||{},iu=0;iu<ru.length;iu++){if(tu=ru[iu].Name,tu){if(uu[tu])continue}else continue;uu[tu]=true,nu=ru[iu].Value,dr&&n.Type.TypeInspector.IsString(nu)&&(nu=(nu||"").Trim()),n.Type.TypeInspector.IsNullOrUndefined(nu)||String.IsNullOrEmpty(nu)||n.DataBinder.SetValue(fu,tu,nu)}return fu}function l(eu,ou,su){eu=eu||{},$$calysto(ou||document.documentElement).Query("*, //*").ForEach(function(hu){var cu,lu,au;if(hu&&(cu=hu.name)&&!!cu&&(lu=new n.BoxValue,au=n.DataBinder.TryGetValue(eu,cu,lu),(su||au)&&!r(hu,lu.GetValue())))throw new Error("Element with name="+cu+" is not valid for data binding");})}function a(vu,yu,pu){for(var tf,rf=$$calysto(vu||document.documentElement).Query("["+n.AttrName.CalystoId+"=*], //["+n.AttrName.CalystoId+"=*]").Query("input, textarea, select, ["+n.AttrName.CalystoGetter+"=*]").Distinct().ToArray(),ku=pu||{},du=0;du<rf.length;du++){var gu=rf[du],nf=void 0,wu=void 0,bu=void 0,uf=!!gu.getAttribute(n.AttrName.CalystoIsGroup),ff=uf||!!pu;if(nf=u(gu),!!pu||nf.HasValue){if(wu=gu.getAttribute(n.AttrName.CalystoId),bu=nf.Value,!wu)continue}else continue;if(yu&&typeof bu=="string"&&(bu=(bu||"").Trim()),tf=new n.BoxValue,!ff&&n.DataBinder.TryGetValue(ku,wu,tf))throw new Error("Error in CalystoSerialize, property "+wu+" already exists.");uf?n.DataBinder.SetValue(ku,wu,[tf.GetValue()]):n.DataBinder.SetValue(ku,wu,bu)}return ku}function v(ef,of,sf){ef&&$$calysto(of||document.documentElement).Query("["+n.AttrName.CalystoId+"=*], //["+n.AttrName.CalystoId+"=*]").Distinct().ForEach(function(hf){var cf=hf.getAttribute(n.AttrName.CalystoId),lf=new n.BoxValue;if(cf&&n.DataBinder.TryGetValue(ef,cf,lf)||sf)if(hf.type=="text"&&hf.getAttribute(n.AttrName.CalystoIsGroup))throw new Error("NotImplemented: deserialization to element with calysto-isgroup attribute");else if(!r(hf,lf.GetValue()))throw new Error("Element with calysto-id="+cf+" is not valid for data binding");})}function y(af,vf,yf){for(var te=$$calysto(af||document.documentElement).Query("["+n.AttrName.CalystoId+"=*], //["+n.AttrName.CalystoId+"=*]").Query("input, textarea, select, ["+n.AttrName.CalystoGetter+"=*]").Distinct().ToArray(),ie=!!yf,kf=yf||{},df=0;df<te.length;df++){var pf=te[df],wf=pf.getAttribute(n.AttrName.CalystoId),gf=pf.getAttribute(n.AttrName.CalystoUid);gf||pf.setAttribute(n.AttrName.CalystoUid,gf=n.Utility.Generators.GeneratePassword(20));var ne=u(pf),bf={CalystoId:wf,CalystoUid:gf,Value:ne&&ne.HasValue?ne.Value:undefined,Enabled:$$calysto(pf).WhereEnabled(true).Any(),Visible:$$calysto(pf).WhereVisible(true).Any(),Name:n.Utility.Html.ExtractAspNameOrId(pf.name),Id:n.Utility.Html.ExtractAspNameOrId(pf.id),Checked:pf.checked,HtmlName:pf.name,HtmlValue:pf.value,HtmlId:pf.id,HtmlTagName:pf.tagName,HtmlType:pf.type},re=new n.BoxValue;if(!ie&&n.DataBinder.TryGetValue(kf,wf,re))throw new Error("Error in CalystoSerialize2, property "+wf+" already exists.");vf&&typeof bf.Value=="string"&&(bf.Value=(bf.Value||"").Trim()),n.DataBinder.SetValue(kf,wf,bf)}return kf}function p(ue,fe,ee){ue&&$$calysto(fe||document.documentElement).Query("["+n.AttrName.CalystoId+"=*], //["+n.AttrName.CalystoId+"=*]").Distinct().ForEach(function(oe){var he=oe.getAttribute(n.AttrName.CalystoId),ce=new n.BoxValue,se,le;if(he&&n.DataBinder.TryGetValue(ue,he,ce)||ee)if(se=ce.GetValue(),le=se?se.Value:undefined,r(oe,le))se&&$$calysto(oe).SetVisible(!!se.Visible).SetEnabled(!!se.Enabled).SetProperty("checked",!!se.Checked);else throw new Error("Element with calysto-id="+he+" is not valid for data binding");})}function w(ae){var ve=new n.Web.UI.Direct.CalystoMvcModelState;ve.Raw=e(ae,true),ve.RootSelector=n.Utility.Dom.EnsureElementId(ae);return ve}var b=function(){function k(){this.Enabled=true,this.Visible=true}return k}();i.SerializeContainer=f,i.ResetForm=s,i.FormSerialize=h,i.FormDeserialize=c,i.MvcSerialize=e,i.MvcDeserialize=l,i.CalystoSerialize=a,i.CalystoDeserialize=v,i.CalystoSerialize2=y,i.CalystoDeserialize2=p,i.ToMvcModelState=w})(t=n.Forms||(n.Forms={}))}(Calysto||(Calysto={})),function(n){var t=function(){function i(r){this.selector=r,this.currPosition=0}i.prototype.Peek=function(u){u===void 0&&(u=0);return this.selector.charAt(this.currPosition+(u||0))},i.prototype.Pop=function(){return this.selector.charAt(this.currPosition++)},i.prototype.PopMatch=function(f,e){e===void 0&&(e=0),e=e||0;var o=(this.selector.substr(this.currPosition+e)||"").match(f);if(o&&o[0]){this.currPosition+=o[0].length+e;return o}return null};return i}();n.SelectorReader=t}(Calysto||(Calysto={})),function(n){function h(nt,tt,it,rt){var ft,ut,st,et,ot;if(!it)return n.Utility.Dom.HasAttribute(nt,tt);if(ft=n.Utility.Dom.GetAttribute(nt,tt)||"",ut=it,ut){if(ut=="="||ut=="==")return ft==rt;if(ut=="=*")return!!ft;if(ut=="~=")return(" "+ft+" ").indexOf(" "+rt+" ")>=0;if(ut=="*=")return ft.indexOf(rt)>=0;if(ut=="^=")return ft.indexOf(rt)==0;if(ut=="$="){st=ft.lastIndexOf(rt);return st+rt.length==ft.length}if(ut=="!="||ut=="<>")return ft!=rt;if(et=n.Type.NumberConverter.ToNumberOrDefault(ft,NaN,"."),ot=n.Type.NumberConverter.ToNumberOrDefault(rt,NaN,"."),!n.Type.TypeInspector.IsNumber(et)||!n.Type.TypeInspector.IsNumber(ot))return false;switch(ut){case"<":return et<ot;case">":return et>ot;case">=":return et>=ot;case"<=":return et<=ot}throw new Error("Unsupported calystoSelector ("+(tt+", "+it+", "+rt)+") in Calysto.DomQuery.BuildLambdaExpression #2");}else return!!ft}function c(ht,ct,lt,at){var vt=function(yt,pt,wt){return function(bt){return h(bt,yt,pt,wt)}}(ct,lt,at);return ht.Where(function(kt){return vt(kt)})}function l(dt,gt){return dt.Where(function(ni){return ni.id==gt||n.Utility.Html.ExtractAspNameOrId(ni.id)==gt})}function a(ti,ii){return ti.Where(function(ri){return n.Utility.Dom.HasClass(ri,ii)})}function v(ui,fi){return ui.Where(function(ei){return n.Utility.Dom.HasTagName(ei,fi)})}function y(oi,si,hi){var ci=parseInt(hi,10)||1;switch(si){case"visible":return oi.WhereVisible(true);case"invisible":case"hidden":return oi.WhereVisible(false);case"first":case"take":return oi.Take(ci);case"last":return oi.Reverse().Take(ci).Reverse();case"skip":return oi.Skip(ci);case"exact":return oi.Exact(ci).AsDomQuery();case"is":case"not":return oi.Where(function(li){return r.FromArray([li]).Query(hi).Any()==(si=="is")});case"reverse":return oi.Reverse();case"ancestor":return oi.AncestorNodes();case"descendant":return oi.DescendantNodes();case"child":return oi.ChildNodes();case"parent":return oi.ParentNodes();case"next-sibling":return oi.NextSiblings();case"previous-sibling":return oi.PreviousSiblings();default:throw new Error("Unsupported calystoSelector: "+si+"("+hi+")");}}function p(ai){for(var vi=[];ai.parentNode;)vi.push(ai.parentNode),ai=ai.parentNode;return vi}function f(yi,pi,wi){var bi=yi,ki,di,gi,nr;n.Utility.Dom.IsElementVisible(bi)&&(typeof pi=="number"&&n.Type.TypeInspector.IsNumber(pi)&&(bi.style.width=pi+"px",bi.offsetWidth!=pi&&(ki=n.Utility.Dom.GetComputedStyle(bi,"width").NumericValue,di=pi-(bi.offsetWidth-(ki||0)),bi.style.width=di+"px")),typeof wi=="number"&&n.Type.TypeInspector.IsNumber(wi)&&(bi.style.height=wi+"px",bi.offsetHeight!=wi&&(gi=n.Utility.Dom.GetComputedStyle(bi,"height").NumericValue,nr=wi-(bi.offsetHeight-(gi||0)),bi.style.height=nr+"px")))}function b(tr,ir){var rr=tr.tagName||"",ur,fr;if(tr.attributes&&tr.attributes.length>0)for(ur=0;ur<tr.attributes.length;ur++)fr=tr.attributes[ur],rr+=" "+fr.name+'="'+fr.value+'"';tr.nodeValue&&(rr&&rr.length>0&&(rr+=" "),rr+=tr.nodeValue);return ir?rr.toLowerCase():rr}function i(er,or,sr){return er.ForEach(function(hr){n.Utility.Dom[or](hr,sr)})}function o(cr,lr){return function(ar,vr){if(n.Event.IsHoverChanged(ar,vr,cr))return lr.call(ar,ar,vr)}}function k(yr,pr){var wr=0;return function(br,kr){var dr;kr=kr||window.event,wr<yr&&(wr++,dr=pr.call(br,br,kr));return dr}}function d(gr){return function(nu,tu){tu=tu||window.event;var iu=gr.call(nu,nu,tu);iu===false?n.Event.StopPropagation(tu,true):iu===true&&n.Event.StopPropagation(tu,false);return iu}}function t(ru,uu,fu){for(var lu,eu,au,ou=uu,su=n.Utility.Dom.ConvertToElementsArray(fu),hu=[],cu=0;cu<ou.length;cu++){for(lu=[],eu=0;su&&eu<su.length;eu++)au=n.Utility.Dom.CloneNodeIfHasParent(su[eu]),lu.push(au),hu.push(au);n.Utility.Dom[ru](ou[cu],lu)}u(hu);return{ThisItems:ou,NewItems:hu}}function u(vu){r.FromArray(vu).Query("script, //script").ForEach(function(yu){return n.ScriptLoader.ReloadScriptNode(yu)})}function g(pu){var wu,bu;window.DOMParser?(bu=new DOMParser,wu=bu.parseFromString(pu,"text/xml")):(pu.indexOf("<?")==0&&(pu=pu.substr(pu.indexOf("?>")+2)),wu=new window.ActiveXObject("Microsoft.XMLDOM"),wu.async=false,wu.loadXML(pu));return wu}var w={absoluteTop:NaN,absoluteLeft:NaN,position:"",top:NaN,right:NaN,bottom:NaN,left:NaN,width:NaN,height:NaN,minWidth:NaN,minHeight:NaN,maxWidth:NaN,maxHeight:NaN,clientLeft:NaN,clientTop:NaN,clientWidth:NaN,clientHeight:NaN,offsetLeft:NaN,offsetTop:NaN,offsetWidth:NaN,offsetHeight:NaN,scrollLeft:NaN,scrollTop:NaN,scrollWidth:NaN,scrollHeight:NaN,paddingTop:NaN,paddingRight:NaN,paddingBottom:NaN,paddingLeft:NaN,marginTop:NaN,marginRight:NaN,marginBottom:NaN,marginLeft:NaN,borderTop:NaN,borderRight:NaN,borderBottom:NaN,borderLeft:NaN},e=["transform","-ms-transform","-webkit-transform"],s=function(){function ku(du,gu){this.query=du,this.intervalID=gu}ku.prototype.Abort=function(){clearInterval(this.intervalID);return this},ku.prototype.AsDomQuery=function(){return this.query};return ku}(),r;n.PoolingState=s,r=function(nf){function tf(rf){var uf=nf.call(this,rf)||this;uf.OnEventAttached=(new n.MulticastDelegate).AsFunc(uf);return uf}__extends(tf,nf),tf.prototype.ForEach=function(ff){return nf.prototype.ForEach.call(this,ff).AsDomQuery()},tf.prototype.Skip=function(ef){return nf.prototype.Skip.call(this,ef).AsDomQuery()},tf.prototype.Take=function(of){return nf.prototype.Take.call(this,of).AsDomQuery()},tf.prototype.SkipWhile=function(sf){return nf.prototype.SkipWhile.call(this,sf).AsDomQuery()},tf.prototype.Reverse=function(){return nf.prototype.Reverse.call(this).AsDomQuery()},tf.prototype.Where=function(hf){return nf.prototype.Where.call(this,hf).AsDomQuery()},tf.prototype.Select=function(cf){return nf.prototype.Select.call(this,cf).AsDomQuery()},tf.prototype.Cast=function(){return this},tf.prototype.SelectMany=function(lf){return nf.prototype.SelectMany.call(this,lf).AsDomQuery()},tf.prototype.Distinct=function(af){return nf.prototype.Distinct.call(this,af).AsDomQuery()},tf.prototype.selectFilteredSingle=function(vf,yf){for(var gf=vf,pf=vf,df=yf.replace(new RegExp("['\"]","ig"),"").replace(new RegExp("(^[\\s]+)|([\\s]+$)","ig"),"").replace(new RegExp("([ ]*)([\\/\\<\\>\\!\\~\\^\\$\\*\\=]+)([ ]*)","ig"),"$2").replace(new RegExp("[ ]+")," "),bf,wf,kf=new n.SelectorReader(df);bf=kf.Pop();)if(bf=="#"&&(wf=kf.PopMatch(new RegExp("^([\\w\\-_]+)"))))pf=l(pf,wf[1]);else if(bf=="."&&(wf=kf.PopMatch(new RegExp("^([\\w\\-_]+)"))))pf=a(pf,wf[1]);else if(bf==" ")pf=pf.DescendantNodes();else if(bf=="/"&&kf.Peek()=="/"&&kf.Peek(1)!="/")kf.Pop(),pf=pf.DescendantNodes();else if(bf=="*")pf=pf.Select(function(ne){return ne});else if(bf=="^")pf=pf.AncestorNodes();else if(bf=="<")pf=pf.ParentNodes();else if(bf==">")pf=pf.ChildNodes();else if(bf=="/"&&kf.Peek()!="/")pf=pf.ChildNodes();else if(bf==":"&&(wf=kf.PopMatch(new RegExp("^([\\w\\-_]+)([\\(]([^\\)]*)[\\)])*"))))pf=y(pf,wf[1],wf[3]);else if(bf=="["&&(wf=kf.PopMatch(new RegExp("^[ ]*([\\w\\-_]+)[ ]*([<>\\!\\=\\~\\^\\$\\*]*)[ ]*((([^\\[\\]])*(\\[\\d+\\])*)*)[ ]*\\]"))))pf=c(pf,wf[1],wf[2],wf[3]);else if(wf=kf.PopMatch(new RegExp("^([\\w\\-_]+)"),-1))pf=v(pf,wf[1]);else throw new Error("Unsupported calystoSelector ("+df+")");pf==gf&&(pf=tf.FromArray([]));return pf},tf.prototype.Query=function(te){return this.QueryWorker(te).Cast().AsDomQuery()},tf.prototype.QueryWorker=function(ie){var se,ae,fe,oe,re,he,le;if(!ie)return this;if(se=this,typeof ie=="string"&&ie.indexOf("=>")>0||typeof ie=="function"){ae=n.Utility.Expressions.CompileLambdaExpression(ie);return se.Where(ae)}var ee=[],ue="",ce=0;for(re=0;re<ie.length;re++)fe=ie.charAt(re),fe==")"?(ce--,ue+=fe):fe=="("?(ce++,ue+=fe):fe==","&&ce==0?(ee.push(ue),ue=""):ue+=fe;if(ue.length>0&&ee.push(ue),ee.length>1){for(oe=null,re=0;re<ee.length;re++)he=ee[re].replace(new RegExp("((^[ ,]+)|([ ,]+$))","ig"),""),he!=null&&he!=""&&(le=this.selectFilteredSingle(se,he),oe=oe?oe.Concat(le):le);return oe}return this.selectFilteredSingle(se,ie)},tf.prototype.ParentNodes=function(ve){return this.Where(function(ye){return!!ye.parentNode}).Select(function(pe){return pe.parentNode}).Query(ve)},tf.prototype.AncestorNodes=function(we){return this.SelectMany(function(be){return p(be)}).Select(function(ke){return ke}).Query(we)},tf.prototype.ChildNodes=function(de){return this.Where(function(ge){return ge.childNodes&&ge.childNodes.length>0}).SelectMany(function(no){return no.childNodes}).Query(de)},tf.prototype.getDescendants=function(to){return to&&to.childNodes&&to.childNodes.length>0&&to.nodeType&&to.getElementsByTagName?to.getElementsByTagName("*"):null},tf.prototype.DescendantNodes=function(io){var ro=this;return this.SelectMany(function(uo){return ro.getDescendants(uo)}).Query(io)},tf.prototype.NextSiblings=function(fo){return this.Where(function(eo){return eo&&eo.parentNode&&eo.parentNode.childNodes}).SelectMany(function(oo){return tf.FromArray(oo.parentNode.childNodes).Select(function(so){return so}).SkipWhile(function(ho){return ho!=oo}).Skip(1).ToArray()}).Query(fo)},tf.prototype.PreviousSiblings=function(co){return this.Where(function(lo){return lo&&lo.parentNode&&lo.parentNode.childNodes}).SelectMany(function(ao){return tf.FromArray(ao.parentNode.childNodes).Select(function(vo){return vo}).TakeWhile(function(yo){return yo!=ao}).ToArray()}).Reverse().Query(co)},tf.prototype.WhereTagName=function(po){if(!po)throw new Error("WhereTagName requires tagName parameter");po=po.toLowerCase();return this.Where(function(wo){return wo.tagName&&wo.tagName.toLowerCase()==po})},tf.prototype.WhereAttribute=function(bo,ko){if(!bo)throw new Error("WhereAttribute requires name parameter");return this.Where(function(go){return ko(n.Utility.Dom.GetAttribute(go,bo))})},tf.prototype.WhereHasAttribute=function(ns,ts){ts===void 0&&(ts=true);return this.Where(function(is){return n.Utility.Dom.HasAttribute(is,ns)==ts})},tf.prototype.WhereStyle=function(rs,us){if(!rs)throw new Error("WhereAttribute requires name parameter");return this.Where(function(fs){return us(n.Utility.Dom.GetComputedStyle(fs,rs).NumericValue)})},tf.prototype.WhereId=function(es){if(!es)throw new Error("WhereId requires id parameter");return this.WhereAttribute("id",function(os){return os==es})},tf.prototype.WhereHasClass=function(ss,hs){if(hs===void 0&&(hs=true),!ss)throw new Error("WhereHasClass requires cssClass parameter");return this.Where(function(cs){return n.Utility.Dom.HasClass(cs,ss)==hs})},tf.prototype.SelectStyle=function(ls){if(!ls)throw new Error("StyleValue requires name parameter");return this.Select(function(as){var vs=n.Utility.Dom.GetComputedStyle(as,ls);return n.Type.TypeInspector.IsNumber(vs.NumericValue)?vs.NumericValue:vs.StyleValue})},tf.prototype.SelectStyleMap=function(ys){return this.Select(function(ps){var ws={};n.Collections.ForEachOwnProperties(ys,function(bs){var ds=n.Utility.Dom.GetComputedStyle(ps,bs),ks=n.Type.NumberConverter.ToNumberOrDefault(ds.NumericValue,NaN,".");n.Type.TypeInspector.IsNumber(ks)||(ks=ds.StyleValue),ws[bs]=ks});return ws})},tf.prototype.SelectDimensionsMap=function(){return this.SelectStyleMap(w)},tf.prototype.ApplyStyleMap=function(gs){return this.ForEach(function(nh){for(var th in gs)n.Utility.Dom.SetStyleValue(nh,th,gs[th])})},tf.prototype.ApplyStyle=function(ih,rh){if(!ih)return this;if(arguments.length==1){if(typeof ih=="string")return this.ForEach(function(uh){uh&&uh.style&&(uh.style.cssText+=";"+ih)});if(typeof ih=="object")return this.ApplyStyleMap(ih);throw new Error("Invalid argument in ApplyStyle: "+ih);}else return this.ForEach(function(fh){n.Utility.Dom.SetStyleValue(fh,ih,rh)})},tf.prototype.SetOffsetSize=function(eh,oh){return this.ForEach(function(sh){f(sh,eh,oh)})},tf.prototype.FitIntoParent=function(){return this.ForEach(function(hh){hh._calystoPrevPosition=hh.style.position}).ApplyStyle("position:absolute").ForEach(function(ch){var lh=n.Utility.Dom.GetComputedStyle(ch.parentNode,"width").NumericValue,ah=n.Utility.Dom.GetComputedStyle(ch.parentNode,"height").NumericValue;f(ch,lh,ah)}).ForEach(function(vh){vh.style.position=vh._calystoPrevPosition||"",delete vh._calystoPrevPosition})},tf.prototype.SelectAttribute=function(yh){return this.Select(function(ph){return n.Utility.Dom.GetAttribute(ph,yh)})},tf.prototype.SelectAttributeMap=function(wh){return this.Select(function(bh){var kh={};n.Collections.ForEachOwnProperties(wh,function(dh){kh[dh]=n.Utility.Dom.GetAttribute(bh,dh)});return kh})},tf.prototype.SelectAttributesAll=function(){return this.Select(function(gh){var ic,ec,rc,uc={},oc=(rc=gh)===null||rc===void 0?void 0:rc.attributes,tc,nc,fc;if(!oc)return uc;try{for(tc=__values(oc),nc=tc.next();!nc.done;nc=tc.next())fc=nc.value,uc[fc.name]=fc.value}catch(sc){ic={error:sc}}finally{try{nc&&!nc.done&&(ec=tc.return)&&ec.call(tc)}finally{if(ic)throw ic.error;}}return uc})},tf.prototype.SetAttribute=function(hc,cc,lc){if(lc===void 0&&(lc=true),!hc)throw new Error("AttributeValue requires name parameter");return this.ForEach(function(ac){lc?n.Utility.Dom.SetAttribute(ac,hc,cc):n.Utility.Dom.RemoveAttribute(ac,hc)})},tf.prototype.RemoveAttribute=function(vc){return this.SetAttribute(vc,null,false)},tf.prototype.SetInnerHtml=function(yc){(arguments.length==0||yc==null||typeof yc=="undefined")&&(yc="");return this.ForEach(function(pc){var wc=yc+"";pc.innerHTML=wc,wc&&u([pc])})},tf.prototype.SetValueOrInnerHtml=function(bc){return this.ForEach(function(kc){var dc=kc,gc=dc.tagName.toLowerCase();switch(gc){case"input":case"select":case"textarea":dc.value=bc;break;default:dc.innerHTML=bc,u([dc])}})},tf.prototype.SetProperty=function(nl,tl){return this.ForEach(function(il){il[nl]=tl})},tf.prototype.SetChecked=function(rl){return this.SetProperty("checked",rl)},tf.prototype.AppendInnerHtml=function(ul){(arguments.length==0||ul==null||typeof ul=="undefined")&&(ul="");return this.ForEach(function(fl){fl.innerHTML+=ul+""})},tf.prototype.SelectInnerHtml=function(){return this.Select(function(el){return el.innerHTML})},tf.prototype.SelectInnerText=function(){return this.Select(function(ol){return n.Utility.Dom.GetInnerText(ol)})},tf.prototype.WhereText=function(sl,hl){if(!sl)throw new Error("WhereText requires textToSearch parameter");sl=hl?sl.toLowerCase():sl;return this.Where(function(cl){return cl&&b(cl,hl).indexOf(sl)>=0})},tf.prototype.AddClass=function(ll,al){al===void 0&&(al=true);return al?i(this,"AddClass",ll):this.RemoveClass(ll)},tf.prototype.RemoveClass=function(vl){return i(this,"RemoveClass",vl)},tf.prototype.SetClass=function(yl){return i(this,"SetClass",yl)},tf.prototype.ToggleClass=function(pl){return i(this,"ToggleClass",pl)},tf.prototype.SelectClassNames=function(){return this.SelectMany(function(wl){return wl.className.match(new RegExp("[\\S]+","g"))})},tf.prototype.WhereVisible=function(bl){bl===void 0&&(bl=true),bl=arguments.length==0||!!bl;return this.Where(function(kl){return n.Utility.Dom.IsElementVisible(kl)==bl})},tf.prototype.WhereInViewPort=function(dl,gl){dl===void 0&&(dl=true),gl===void 0&&(gl=true),dl=arguments.length==0||!!dl;return this.Where(function(na){return n.Utility.Dom.IsElementVisible(na)==dl&&n.Utility.Dom.IsElementInViewport(na,gl)==dl})},tf.prototype.WhereEnabled=function(ta){ta===void 0&&(ta=true),ta=arguments.length==0||!!ta;return this.Where(function(ia){return!n.Utility.Dom.HasAttribute(ia,"disabled")==ta})},tf.prototype.On=function(ra,ua,fa,ea){var va=this,la,ha,sa;if(!ua)throw new Error("CallbackFunc can not be null");if(n.Type.TypeInspector.IsArray(ra)){for(la=this,ha=0;ha<ra.length;ha++)la=this.On(ra[ha],ua,fa,ea);return la}sa=ra,sa.indexOf("on")==0&&(sa=sa.substr(2));var aa=ua,oa=sa.split("."),ca=oa[0];ca=="enterKey"?(oa.unshift("keydown"),aa=function(ya,pa){if(n.Event.IsEnterKey(pa))return ua.call(ya,ya,pa)}):ca=="escKey"&&(oa.unshift("keydown"),aa=function(wa,ba){if(n.Event.IsEscKey(ba))return ua.call(wa,wa,ba)});return this.ForEach(function(ka){var da,ga,nv;ka&&(da=d(aa),ca=="hover"?(oa.unshift("mouseover"),da=o(true,da)):ca=="hout"&&(oa.unshift("mouseout"),da=o(false,da)),ea&&ea>0&&(da=k(ea,da)),ga=function(tv,iv){return function(rv){iv.call(tv,tv,rv)}}(ka,da),nv=n.Event.Attach(ka,oa.join("."),ga,fa),va.OnEventAttached.Invoke(function(uv){return uv(nv)}))})},tf.prototype.RemoveEvent=function(fv){return this.ForEach(function(ev){ev&&ev.$$calysto_EventsArr.Where(function(ov){return ov.eventFullName==fv}).ForEach(function(sv){return sv.removeEvent()})})},tf.prototype.DispatchEvent=function(hv){return this.ForEach(function(cv){n.Event.DispatchEvent(cv,hv)})},tf.prototype.OnHover=function(lv,av){var vv=this;lv&&(vv=vv.On("hover",lv)),av&&(vv=vv.On("hout",av));return vv},tf.prototype.OnChange=function(yv){return this.On("change",yv)},tf.prototype.OnChangePooling=function(pv,wv){wv===void 0&&(wv=100);var dv=n.Utility.Generators.GeneratePassword(10),bv="__value_"+dv,kv="__checked_"+dv,gv=this.ForEach(function(ty){ty[bv]=ty.value,ty[kv]=ty.checked}).ToList(),ny=setInterval(function(){gv.ForEach(function(iy){(iy[bv]!=iy.value||iy[kv]!=iy.checked)&&(iy[bv]=iy.value,iy[kv]=iy.checked,pv(iy,{type:"change",target:iy,currentTarget:iy}))})},100);return new s(gv.AsDomQuery(),ny)},tf.prototype.OnInput=function(ry){return this.On("input",ry)},tf.prototype.OnClick=function(uy){return this.On("click",uy)},tf.prototype.OnDblClick=function(fy){return this.On("dblclick",fy)},tf.prototype.OnMouseUp=function(ey){return this.On("mouseup",ey)},tf.prototype.OnMouseDown=function(oy){return this.On("mousedown",oy)},tf.prototype.OnMouseOver=function(sy){return this.On("mouseover",sy)},tf.prototype.OnMouseOut=function(hy){return this.On("mouseout",hy)},tf.prototype.OnLeftMouseDown=function(cy){function ay(vy,yy){n.Event.IsLeftMouseButton(yy)&&cy.apply(ly,arguments)}var ly=this;return this.On("mousedown.leftmousedown",ay)},tf.prototype.OnRightMouseDown=function(py){function by(ky,dy){n.Event.IsRightMouseButton(dy)&&py.apply(wy,arguments)}var wy=this;return this.On("mousedown.rightmousedown",by)},tf.prototype.OnMouseMove=function(gy){return this.On("mousemove",gy)},tf.prototype.OnFocus=function(np){return this.On("focus",np)},tf.prototype.OnBlur=function(tp){return this.On("blur",tp)},tf.prototype.OnKeyDown=function(ip){return this.On("keydown",ip)},tf.prototype.OnKeyUp=function(rp){return this.On("keyup",rp)},tf.prototype.OnKeyPress=function(up){return this.On("keypress",up)},tf.prototype.OnEnter=function(fp){return this.On("enterKey",fp)},tf.prototype.OnEscKey=function(ep){return this.On("escKey",ep)},tf.prototype.CloneNodes=function(){return this.Where(function(op){return!!op.cloneNode}).Select(function(sp){return sp.cloneNode(true)})},tf.prototype.RemoveFromDom=function(){return this.ForEach(function(hp){n.Utility.Dom.RemoveNodeFromDom(hp)})},tf.prototype.ReplaceWith=function(){for(var ap,lp,vp=[],cp=0;cp<arguments.length;cp++)vp[cp]=arguments[cp];ap=t("InsertBefore",this.ToArray(),arguments),(lp=ap.ThisItems)===null||lp===void 0?void 0:lp.ForEach(function(yp){return n.Utility.Dom.RemoveNodeFromDom(yp)});return ap.NewItems.AsEnumerable().AsDomQuery()},tf.prototype.ReplaceChildren=function(){for(var bp,wp=[],pp=0;pp<arguments.length;pp++)wp[pp]=arguments[pp];bp=t("ReplaceChildrenWith",this.ToArray(),arguments);return this},tf.prototype.RemoveChildren=function(){return this.ReplaceChildren()},tf.prototype.AddChildren=function(){for(var gp,dp=[],kp=0;kp<arguments.length;kp++)dp[kp]=arguments[kp];gp=t("AddChildren",this.ToArray(),arguments);return this},tf.prototype.InsertChildren=function(){for(var iw,tw=[],nw=0;nw<arguments.length;nw++)tw[nw]=arguments[nw];iw=t("InsertChildren",this.ToArray(),[].AddRange(arguments).Reverse());return this},tf.prototype.InsertBefore=function(){for(var fw,uw=[],rw=0;rw<arguments.length;rw++)uw[rw]=arguments[rw];fw=t("InsertBefore",this.ToArray(),arguments);return this},tf.prototype.InsertAfter=function(){for(var sw,ow=[],ew=0;ew<arguments.length;ew++)ow[ew]=arguments[ew];sw=t("InsertAfter",this.ToArray(),[].AddRange(arguments).Reverse());return this},tf.prototype.InsertAsChildrenTo=function(hw){var cw=n.DomQuery.FromSelector(hw).ToArray(),lw=this.Reverse().ToArray(),aw=t("InsertChildren",cw,lw);return aw.NewItems.AsEnumerable().AsDomQuery()},tf.prototype.AddAsChildrenTo=function(vw){var yw=n.DomQuery.FromSelector(vw).ToArray(),pw=this.ToArray(),ww=t("AddChildren",yw,pw);return ww.NewItems.AsEnumerable().AsDomQuery()},tf.prototype.InsertBeforeTo=function(bw){var kw=n.DomQuery.FromSelector(bw).ToArray(),dw=this.ToArray(),gw=t("InsertBefore",kw,dw);return gw.NewItems.AsEnumerable().AsDomQuery()},tf.prototype.InsertAfterTo=function(nb){var tb=n.DomQuery.FromSelector(nb).ToArray(),ib=this.ToArray(),rb=t("InsertAfter",tb,ib);return rb.NewItems.AsEnumerable().AsDomQuery()},tf.prototype.Sleep=function(ub,fb){var eb=this;setTimeout(function(){fb.call(eb,eb)},ub);return this},tf.prototype.ToAnimator=function(ob){if(!ob)throw new Error("ToAnimator requires finalMap");var sb=new n.Animator;this.ForEach(function(hb){for(var cb in ob)sb.AddElement(hb,cb,ob[cb])});return sb},tf.prototype.SetSelectable=function(lb){lb===void 0&&(lb=true);return lb?this.RemoveClass("calystoNoUserSelect"):this.AddClass("calystoNoUserSelect")},tf.prototype.SetEnabled=function(ab){ab===void 0&&(ab=true);return this.ForEach(function(vb){n.Utility.Dom.SetEnabled(vb,ab)})},tf.prototype.SetVisible=function(yb){yb===void 0&&(yb=true);return this.ForEach(function(pb){var wb;pb&&pb.style&&(yb?(pb.style.display=="none"&&(pb.style.display=""),wb=n.Utility.Dom.GetComputedStyle(pb,"display").StyleValue,wb=="none"&&(pb.style.display=pb.tagName.toLowerCase()=="div"?"block":"inherit"),pb.style.visibility=="hidden"&&(pb.style.visibility=""),wb=n.Utility.Dom.GetComputedStyle(pb,"visibility").StyleValue,(wb=="hidden"||wb=="collapse")&&(pb.style.visibility="inherit")):pb.style.display="none")})},tf.prototype.SetReadOnly=function(bb){bb===void 0&&(bb=true);return bb?this.SetAttribute("readonly","readonly"):this.RemoveAttribute("readonly")},tf.prototype.SetOpacity=function(kb){kb>1&&(kb=kb/100);return this.ApplyStyle("filter","alpha(opacity="+kb*100+")").ApplyStyle("opacity",kb)},tf.prototype.SetClip=function(db){return this.ForEach(function(gb){n.Utility.Dom.SetClip(gb,db)})},tf.prototype.SetTransition=function(nk,tk,ik,rk){nk===void 0&&(nk="all"),tk===void 0&&(tk=0),ik===void 0&&(ik="linear"),rk===void 0&&(rk=0),arguments.length<1&&(nk="all"),arguments.length<2&&(tk=400),arguments.length<3&&(ik="linear"),arguments.length<4&&(rk=0);var uk=nk=="none"?"":nk+" "+tk+"ms "+ik+" "+rk+"ms";this.ApplyStyle("transition",uk),this.ApplyStyle("-webkit-transition",uk);return this},tf.prototype.SetTransform=function(fk){(arguments.length==0||fk=="none")&&(fk="");for(var ek=0;ek<e.length;ek++)this.ApplyStyle(e[ek],fk);return this},tf.prototype.ApplyTransform=function(ok){if(arguments.length==0||ok=="none")return this.SetTransform("none");var sk=ok.match(new RegExp("[\\w]+","ig"));return this.ForEach(function(hk){if(hk&&hk.style&&sk&&sk.length>0){var ck=ok,lk=hk.style.transform||hk.style.msTransform||hk.style.webkitTransform;lk&&(ck=lk.replace(new RegExp("("+sk.join("|")+")[\\s]*\\([^\\)]*\\)","ig"),"")+" "+ok),n.DomQuery.FromSelector(hk).SetTransform(ck)}})},tf.prototype.SelectTransform=function(){return this.Select(function(ak){return n.Utility.Dom.SelectTransform(ak)})},tf.prototype.SetLinearGradient=function(vk,yk){var bk,pk;if(arguments.length==0||vk=="none")return this.ApplyStyle("background-color","").ApplyStyle("background-image","");for(vk=parseFloat(vk),n.Features.GetBrowser().Kind==n.Features.BrowserKindEnum.Safari&&(vk=(vk-90)*-1),vk+="deg",bk=[vk],pk=1;pk<arguments.length;pk++)bk.push(arguments[pk]);var dk=bk.join(", "),kk=["-webkit-","-moz-","-ms-","-o-",""],wk=["background-color:"+(yk||"").split(" ")[0]];for(pk=0;pk<kk.length;pk++)wk.push("background-image:"+kk[pk]+"linear-gradient("+dk+")");wk.push(""),console.log(wk.join(";")),this.ApplyStyle(wk.join(";"));return this},tf.prototype.ToAnimatorScrollIntoView=function(gk){gk===void 0&&(gk=false);var nd=new n.Animator;this.ForEach(function(td){var rd=td,id=n.Utility.Dom.GetScrollableAncestors(rd)[0];if(id){var ud=n.Utility.Dom.GetElementScreenPosition(rd),fd=n.Utility.Dom.GetElementScreenPosition(id),ed=ud.top-fd.top,od=ud.left-fd.left;gk||(ed+=id.clientHeight-rd.clientHeight,od+=id.clientHeight-rd.clientWidth),nd.AddElement(id,"scrollTop",ed),nd.AddElement(id,"scrollLeft",od)}});return nd},tf.FromArray=function(sd){return new tf(function(){return n.CalystoEnumerator.From(sd)})},tf.FromSelector=function(hd){var yd=arguments,vd,pd,ld,cd,ad;if(yd.length>1){for(vd=void 0,cd=0;cd<yd.length;cd++)pd=n.DomQuery.FromSelector(yd[cd]),vd=vd?vd.addPredicateInfo("Concat",yd[cd]).Concat(pd):pd;return vd}if(!hd)return tf.FromArray([]);if(typeof hd=="string")switch(hd.charAt(0)){case" ":case"/":hd=hd.TrimStart([" ","/"])}if(hd==window)return tf.FromArray([hd]);if(hd==document)return tf.FromArray([hd]);if(hd.nodeType>0&&hd.cloneNode)return tf.FromArray([hd]);if(hd=="html")return tf.FromArray([document.documentElement]);if(hd=="body")return tf.FromArray([document.body]);if(hd.constructor==n.DomQuery)return hd;if(hd.GetEnumerator)return new n.DomQuery(function(){return hd.GetEnumerator()});if(hd.childNodes)return tf.FromArray([hd]);if(typeof hd=="string"&&hd.length>0)return tf.FromArray([document]).DescendantNodes().Query(hd);if(hd.push&&hd.pop){for(ld=null,cd=0;cd<hd.length;cd++)ad=n.DomQuery.FromSelector(hd[cd]),ld=ld?ld.Concat(ad).AsDomQuery():ad;return ld||tf.FromArray([])}if(hd&&hd.length>0&&hd[0]&&hd[0].nodeType>0){for(ld=null,cd=0;cd<hd.length;cd++)ad=n.DomQuery.FromSelector(hd[cd]),ld=ld?ld.Concat(ad).AsDomQuery():ad;return ld||tf.FromArray([])}if(hd)return tf.FromArray([hd]);throw new Error("Unknown calystoSelector in GetDomNodesEnumerable");},tf.FromXml=function(wd){var bd=g(wd),kd=bd.documentElement;return tf.FromArray([kd])},tf.FromHtml=function(dd){var gd=n.Utility.Dom.ConvertToElementsArray(dd);return tf.FromArray(gd)},tf.CreateElement=function(ng){return tf.FromArray([document.createElement(ng)])};return tf}(n.CalystoEnumerable),n.DomQuery=r}(Calysto||(Calysto={})),$$calysto=Calysto.DomQuery.FromSelector,function(n){var t;(function(i){function r(b,k,d,g){var nt=parseFloat(b);return isNaN(nt)||!isFinite(nt)?k:(typeof b=="string"&&b.indexOf("%")>0&&(nt=nt/100),nt<d)?d:nt>g?g:nt}function o(tt,it){for(tt=String(tt),it=it||2;tt.length<it;)tt="0"+tt;return tt}var e,f,u,s;i.NamedColors={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},function(h){function c(l){var p,v,w,a,y;if(l&&(p=i.NamedColors[l])&&p.indexOf("#")==0)return h.ParseToRGB(p);if(l.indexOf("rgb")==0){v=l.match(new RegExp("[\\d\\.]+","ig"));return new u(v[0],v[1],v[2],v[3])}if(l.indexOf("hsl")==0){v=l.match(new RegExp("[\\d\\.\\%]+","ig"));return new f(v[0],v[1],v[2],v[3]).ToRGB()}if(l.indexOf("#")==0){for(w=l.substr(1),a=w.match(new RegExp("(.{"+w.length/3+"})","g")),y=0;y<a.length;y++)a[y]=parseInt(a[y].length==1?a[y]+a[y]:a[y],16);return new u(a[0],a[1],a[2],a[3])}throw Error(l+" can not be parsed to RGB color");}h.ParseToRGB=c}(e=i.ColorConverter||(i.ColorConverter={})),f=function(){function rt(ut,ft,et,ot){this.h=(parseInt(ut)||0)%360,this.s=r(ft,1,0,1),this.l=r(et,.5,0,1),this.a=r(ot,1,0,1)}rt.Parse=function(st){var ht,ct;if(st.indexOf("hsl")==0){ht=st.match(new RegExp("[\\d\\.\\%]+","ig"));return new rt(ht[0],ht[1],ht[2],ht[3])}ct=e.ParseToRGB(st);return ct.ToHSL()},rt.prototype.Clone=function(){return new rt(this.h,this.s,this.l,this.a)},rt.prototype.Set=function(lt){lt(this);return this},rt.prototype.ToHslString=function(){var vt=this.a!=1&&(this.a>0||this.a===0),at="hsl";vt&&(at+="a"),at+="("+this.h+","+this.s*100+"%,"+this.l*100+"%",vt&&(at+=","+this.a),at+=")";return at},rt.prototype.ToRGB=function(){var gt=this,fi=gt.h/360,ni=gt.s,yt=gt.l,ui=gt.a;if(ni==0)return new u(yt*255,yt*255,yt*255,ui);var ti=fi*6,pt=Math.floor(ti),dt=yt*(1-ni),ii=yt*(1-ni*(ti-pt)),ri=yt*(1-ni*(1-(ti-pt))),wt,bt,kt;pt==0?(wt=yt,bt=ri,kt=dt):pt==1?(wt=ii,bt=yt,kt=dt):pt==2?(wt=dt,bt=yt,kt=ri):pt==3?(wt=dt,bt=ii,kt=yt):pt==4?(wt=ri,bt=dt,kt=yt):(wt=yt,bt=dt,kt=ii);return new u(wt*255,bt*255,kt*255,ui)};return rt}(),i.HSL=f,u=function(){function ei(oi,si,hi,ci){this.r=Math.round(r(oi,255,0,255)),this.g=Math.round(r(si,255,0,255)),this.b=Math.round(r(hi,255,0,255)),this.a=r(ci,1,0,1)}ei.Parse=function(li){if(li.indexOf("rgb")){var ai=li.match(new RegExp("[\\d\\.]+","ig"));return new ei(ai[0],ai[1],ai[2],ai[3])}return e.ParseToRGB(li)},ei.prototype.Clone=function(){return new ei(this.r,this.g,this.b,this.a)},ei.prototype.Set=function(vi){vi(this);return this},ei.prototype.ToRgbString=function(){var pi=this.a!=1&&(this.a>0||this.a===0),yi="rgb";pi&&(yi+="a"),yi+="("+this.r+","+this.g+","+this.b,pi&&(yi+=","+this.a),yi+=")";return yi},ei.prototype.ToHexString=function(){return"#"+o(Number(Math.round(this.r||0)).toString(16),2)+o(Number(Math.round(this.g||0)).toString(16),2)+o(Number(Math.round(this.b||0)).toString(16),2)},ei.prototype.ToHSL=function(){var di=this,wi={h:NaN,s:NaN,l:NaN,a:NaN},gi=di.r/255,nr=di.g/255,tr=di.b/255;wi.a=di.a;var fr=Math.min(gi,nr,tr),bi=Math.max(gi,nr,tr),ki=bi-fr;if(wi.l=bi,ki==0)wi.h=0,wi.s=0;else{wi.s=ki/bi;var ir=((bi-gi)/6+ki/2)/ki,rr=((bi-nr)/6+ki/2)/ki,ur=((bi-tr)/6+ki/2)/ki;gi==bi?wi.h=ur-rr:nr==bi?wi.h=1/3+ir-ur:tr==bi&&(wi.h=2/3+rr-ir),wi.h<0&&(wi.h+=1),wi.h>1&&(wi.h-=1)}wi.h=wi.h*360,wi.s=wi.s,wi.l=wi.l;return new f(wi.h,wi.s,wi.l,wi.a)},ei.prototype.ToCMYK=function(){var or=this,er={k:NaN,c:NaN,m:NaN,y:NaN},sr=or.r/255,hr=or.g/255,cr=or.b/255;er.k=Math.min(1-sr,1-hr,1-cr),er.c=(1-sr-er.k)/(1-er.k),er.m=(1-hr-er.k)/(1-er.k),er.y=(1-cr-er.k)/(1-er.k),er.c=Math.round(er.c*100),er.m=Math.round(er.m*100),er.y=Math.round(er.y*100),er.k=Math.round(er.k*100);return new s(er.c,er.m,er.y,er.k)};return ei}(),i.RGB=u,s=function(){function lr(ar,vr,yr,pr){this.c=r(ar,100,0,100),this.m=r(vr,100,0,100),this.y=r(yr,100,0,100),this.k=r(pr,100,0,100)}lr.prototype.ToRGB=function(){var kr=this,wr={},dr=kr.c/100,gr=kr.m/100,nu=kr.y/100,br=kr.k/100;wr.r=1-Math.min(1,dr*(1-br)+br),wr.g=1-Math.min(1,gr*(1-br)+br),wr.b=1-Math.min(1,nu*(1-br)+br),wr.r=Math.round(wr.r*255),wr.g=Math.round(wr.g*255),wr.b=Math.round(wr.b*255);return new u(wr.r,wr.g,wr.b,wr.a)};return lr}(),i.CMYK=s})(t=n.Colorspace||(n.Colorspace={}))}(Calysto||(Calysto={})),function(n){var i,r,u,t,f;(function(e){function s(vs,ys,ps,ws){ws<0&&(ws=0),ws>1&&(ws=1);var bs=null;if(typeof vs=="string")bs=o[vs];else if(typeof vs=="function")throw new Error("Easing function not supported: "+vs);if(!bs)throw new Error("Unknown easing function: "+vs);return bs(ws,ws*100,ys,ps-ys,100)}var o={linear:function(h,c,l,a){return l+a*h},swing:function(v,y,p,w){return(-Math.cos(v*Math.PI)/2+.5)*w+p},easeInQuad:function(b,k,d,g,nt){return g*(k/=nt)*k+d},easeOutQuad:function(tt,it,rt,ut,ft){return-ut*(it/=ft)*(it-2)+rt},easeInOutQuad:function(et,ot,st,ht,ct){return(ot/=ct/2)<1?ht/2*ot*ot+st:-ht/2*(--ot*(ot-2)-1)+st},easeInCubic:function(lt,at,vt,yt,pt){return yt*(at/=pt)*at*at+vt},easeOutCubic:function(wt,bt,kt,dt,gt){return dt*((bt=bt/gt-1)*bt*bt+1)+kt},easeInOutCubic:function(ni,ti,ii,ri,ui){return(ti/=ui/2)<1?ri/2*ti*ti*ti+ii:ri/2*((ti-=2)*ti*ti+2)+ii},easeInQuart:function(fi,ei,oi,si,hi){return si*(ei/=hi)*ei*ei*ei+oi},easeOutQuart:function(ci,li,ai,vi,yi){return-vi*((li=li/yi-1)*li*li*li-1)+ai},easeInOutQuart:function(pi,wi,bi,ki,di){return(wi/=di/2)<1?ki/2*wi*wi*wi*wi+bi:-ki/2*((wi-=2)*wi*wi*wi-2)+bi},easeInQuint:function(gi,nr,tr,ir,rr){return ir*(nr/=rr)*nr*nr*nr*nr+tr},easeOutQuint:function(ur,fr,er,or,sr){return or*((fr=fr/sr-1)*fr*fr*fr*fr+1)+er},easeInOutQuint:function(hr,cr,lr,ar,vr){return(cr/=vr/2)<1?ar/2*cr*cr*cr*cr*cr+lr:ar/2*((cr-=2)*cr*cr*cr*cr+2)+lr},easeInSine:function(yr,pr,wr,br,kr){return-br*Math.cos(pr/kr*(Math.PI/2))+br+wr},easeOutSine:function(dr,gr,nu,tu,iu){return tu*Math.sin(gr/iu*(Math.PI/2))+nu},easeInOutSine:function(ru,uu,fu,eu,ou){return-eu/2*(Math.cos(Math.PI*uu/ou)-1)+fu},easeInExpo:function(su,hu,cu,lu,au){return hu==0?cu:lu*Math.pow(2,10*(hu/au-1))+cu},easeOutExpo:function(vu,yu,pu,wu,bu){return yu==bu?pu+wu:wu*(-Math.pow(2,-10*yu/bu)+1)+pu},easeInOutExpo:function(ku,du,gu,nf,tf){return du==0?gu:du==tf?gu+nf:(du/=tf/2)<1?nf/2*Math.pow(2,10*(du-1))+gu:nf/2*(-Math.pow(2,-10*--du)+2)+gu},easeInCirc:function(rf,uf,ff,ef,of){return-ef*(Math.sqrt(1-(uf/=of)*uf)-1)+ff},easeOutCirc:function(sf,hf,cf,lf,af){return lf*Math.sqrt(1-(hf=hf/af-1)*hf)+cf},easeInOutCirc:function(vf,yf,pf,wf,bf){return(yf/=bf/2)<1?-wf/2*(Math.sqrt(1-yf*yf)-1)+pf:wf/2*(Math.sqrt(1-(yf-=2)*yf)+1)+pf},easeInElastic:function(kf,df,gf,ne,te){var ue=1.70158,ie=0,re=ne;if(df==0)return gf;if((df/=te)==1)return gf+ne;ie||(ie=te*.3),re<Math.abs(ne)?(re=ne,ue=ie/4):ue=ie/(2*Math.PI)*Math.asin(ne/re);return-(re*Math.pow(2,10*(df-=1))*Math.sin((df*te-ue)*2*Math.PI/ie))+gf},easeOutElastic:function(fe,ee,oe,se,he){var ae=1.70158,ce=0,le=se;if(ee==0)return oe;if((ee/=he)==1)return oe+se;ce||(ce=he*.3),le<Math.abs(se)?(le=se,ae=ce/4):ae=ce/(2*Math.PI)*Math.asin(se/le);return le*Math.pow(2,-10*ee)*Math.sin((ee*he-ae)*2*Math.PI/ce)+se+oe},easeInOutElastic:function(ve,ye,pe,we,be){var ge=1.70158,ke=0,de=we;return ye==0?pe:(ye/=be/2)==2?pe+we:(ke||(ke=be*.3*1.5),de<Math.abs(we)?(de=we,ge=ke/4):ge=ke/(2*Math.PI)*Math.asin(we/de),ye<1)?-.5*de*Math.pow(2,10*(ye-=1))*Math.sin((ye*be-ge)*2*Math.PI/ke)+pe:de*Math.pow(2,-10*(ye-=1))*Math.sin((ye*be-ge)*2*Math.PI/ke)*.5+we+pe},easeInBack:function(no,to,io,ro,uo,fo){fo==undefined&&(fo=1.70158);return ro*(to/=uo)*to*((fo+1)*to-fo)+io},easeOutBack:function(eo,oo,so,ho,co,lo){lo==undefined&&(lo=1.70158);return ho*((oo=oo/co-1)*oo*((lo+1)*oo+lo)+1)+so},easeInOutBack:function(ao,vo,yo,po,wo,bo){return(bo==undefined&&(bo=1.70158),(vo/=wo/2)<1)?po/2*vo*vo*(((bo*=1.525)+1)*vo-bo)+yo:po/2*((vo-=2)*vo*(((bo*=1.525)+1)*vo+bo)+2)+yo},easeInBounce:function(ko,go,ns,ts,is){return ts-this.easeOutBounce(ko,is-go,0,ts,is)+ns},easeOutBounce:function(rs,us,fs,es,os){return(us/=os)<1/2.75?es*7.5625*us*us+fs:us<2/2.75?es*(7.5625*(us-=1.5/2.75)*us+.75)+fs:us<2.5/2.75?es*(7.5625*(us-=2.25/2.75)*us+.9375)+fs:es*(7.5625*(us-=2.625/2.75)*us+.984375)+fs},easeInOutBounce:function(ss,hs,cs,ls,as){return hs<as/2?this.easeInBounce(ss,hs*2,0,ls,as)*.5+cs:this.easeOutBounce(ss,hs*2-as,0,ls,as)*.5+ls*.5+cs}};e.InvokeEasing=s})(i||(i={})),function(ks){function rh(oh){return ds(function(){return oh()})}var ds=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;if(!ds){n.Core.IsDebugDefined&&console.log("requestAnimationFrame not supported");var gs,nh=[],th=function(){var fh=nh,uh;for(nh=[],uh=0;uh<fh.length;uh++)fh[uh]()},ih=function(){gs||(gs=setTimeout(function(){gs=null,th()},20))};ds=function(eh){nh.push(eh),ih()}}ks.RequestAnimationFrame=rh}(r||(r={})),u=function(){function sh(){}return sh}(),function(hh){hh[hh.Unstarted=0]="Unstarted",hh[hh.Running=1]="Running",hh[hh.Completed=2]="Completed",hh[hh.Aborted=3]="Aborted"}(t||(t={})),f=function(){function ch(){this.durationMs=400,this.easing="linear",this.state=t.Unstarted,this.items=[]}ch.RequestAnimationFrame=function(lh){return r.RequestAnimationFrame(lh)},ch.prototype.Items=function(){return this.items.ToArray()},ch.prototype.ToList=function(){return new n.List(this.items.Select(function(ah){return ah.element}).Where(function(vh){return!!vh})).ToList()},ch.prototype.AsDomQuery=function(){return this.ToList().AsDomQuery()},ch.prototype.AddElement=function(yh,ph,wh,bh){var kh=new u;kh.element=yh,kh.elStyleName=ph,kh.elFinalValue=wh,kh.onTick=bh,this.items.push(kh);return this},ch.prototype.AddValue=function(dh,gh,nc){var tc=new u;tc.numStart=dh,tc.numFinal=gh,tc.onTick=nc,tc.isNumValue=true,this.items.push(tc);return this},ch.prototype.Clear=function(){this.items.Clear();return this},ch.prototype.Duration=function(ic){ic===void 0&&(ic=400),(ic||0)>0||(ic=1),this.durationMs=ic;return this},ch.prototype.OnProgress=function(rc){this.onProgress=rc;return this},ch.prototype.OnStart=function(uc){this.onStart=uc;return this},ch.prototype.OnComplete=function(fc){this.onComplete=fc;return this},ch.prototype.OnAbort=function(ec){this.onAbort=ec;return this},ch.prototype.Easing=function(oc){this.easing=typeof oc=="string"?oc:"linear";return this},ch.prototype.initializeFirstRun=function(sc){var yc,hc,pc,lc,cc,vc;if(sc.element&&n.Type.TypeInspector.IsNullOrUndefined(sc.elFinalValue))throw new Error("Error in Animator, no elFinalValue");else if(sc.element&&sc.elStyleName&&sc.elStyleName.Contains("color",true))yc=n.Utility.Dom.GetComputedStyle(sc.element,sc.elStyleName).StyleValue,sc.rgbStart=n.Colorspace.ColorConverter.ParseToRGB(yc),hc=document.createElement("div"),hc.style.position="absolute",hc.style.width="1px",hc.style.height="1px",hc.style.zIndex="-1000",document.body.appendChild(hc),hc.style.backgroundColor=sc.elFinalValue,pc=n.Utility.Dom.GetComputedStyle(hc,"backgroundColor").StyleValue,hc.parentNode&&hc.parentNode.removeChild(hc),sc.rgbFinal=n.Colorspace.ColorConverter.ParseToRGB(pc),sc.rgbCurrent=sc.rgbStart.Clone();else if(sc.element&&sc.elStyleName=="clip")lc=n.Utility.Dom.GetClip(sc.element),sc.clipStart=lc,sc.clipCurrent=__assign({},lc),sc.clipFinal=n.Utility.Dom.CalculateClip(sc.element,sc.elFinalValue);else if(sc.element&&sc.elStyleName=="transform"){var wc=(n.Utility.Dom.SelectTransform(sc.element)||"").split(")").Where(function(dc){return!!dc}).Select(function(gc){return gc.Trim()+")"}).Select(function(nl){return{statement:nl,kind:((nl||"").match(new RegExp("[\\w]+"))||[])[0],args:((nl||"").match(new RegExp("([\\-]?[\\.\\d]+)","ig"))||[]).Select(function(tl){return parseFloat(tl)})}}),bc=sc.elFinalValue.split(")").Where(function(il){return!!il}).Select(function(rl){return rl.Trim()+")"}).Select(function(ul){return{statement:ul,kind:((ul||"").match(new RegExp("[\\w]+"))||[])[0],args:((ul||"").match(new RegExp("([\\-]?[\\.\\d]+)","ig"))||[]).Select(function(fl){return parseFloat(fl)})}}),ac=bc.Select(function(el){var ol=wc.Where(function(hl){return hl.kind==el.kind}).pop(),sl;for(ol||(ol={statement:el.statement,kind:el.kind,args:el.args.Select(function(){return el.kind.indexOf("scale")==0?1:0})}),sl=false;ol.args.length<el.args.length;)sl=true,ol.args.push(ol.args.length>0?ol.args[ol.args.length-1]:el.kind.indexOf("scale")==0?1:0);while(ol.args.length>el.args.length)el.args.push(el.args.length>0?el.args[el.args.length-1]:el.kind.indexOf("scale")==0?1:0);return{startValuesArr:ol.args,finalValuesArr:el.args,stringFormat:sl?el.statement:ol.statement}}),kc=0;sc.transformStart=ac.AsEnumerable().SelectMany(function(cl){return cl.startValuesArr}).ToArray(),sc.transformCurrent=sc.transformStart.ToArray(),sc.transformFinal=ac.AsEnumerable().SelectMany(function(ll){return ll.finalValuesArr}).ToArray(),sc.transformFormat=ac.Select(function(al){return al.stringFormat}).join(" ").replace(new RegExp("([\\-]?[\\.\\d]+)","ig"),function(){return"{"+kc+++"}"})}else if(sc.element){if(cc=n.Utility.Dom.GetComputedStyle(sc.element,sc.elStyleName),sc.numStart=cc.NumericValue,sc.elUnits||(sc.elUnits=typeof sc.elFinalValue=="string"&&sc.elFinalValue.indexOf("%")>0?"%":cc.Units),vc=void 0,sc.elUnits=="%"&&sc.elStyleName.indexOf("margin")==0){sc.elUnits=null;switch(n.Utility.Dom.ConvertCssNameToCamel(sc.elStyleName)){case"marginTop":case"marginBottom":vc=sc.element.offsetHeight;break;case"marginLeft":case"marginRight":vc=sc.element.offsetWidth}}if(n.Type.TypeInspector.IsNullOrUndefined(sc.elFinalValue))throw new Error("Error in Animator, finalValue is not defined");if(sc.numFinal=n.Utility.Dom.CalculateNumericValue(cc.NumericValue,sc.elFinalValue),sc.numCurrent=sc.numStart,!n.Type.TypeInspector.IsNumber(sc.numStart)||!n.Type.TypeInspector.IsNumber(sc.numFinal))throw new Error("Calysto.Animator error, invalid start/stop value. Name: "+sc.elStyleName+", styleFinal: "+sc.elFinalValue+", numStart: "+sc.numStart+", numFinal: "+sc.numFinal);}else sc.isNumValue&&(sc.numCurrent=sc.numStart)},ch.prototype.GetCurrent=function(vl,yl,pl){return ch.InvokeEasing(this.easing,yl,pl,vl/this.durationMs)},ch.prototype.TimerTick=function(wl){var ia=this,gl,dl,bl,na,kl,ta;if(this.state==t.Running){if(gl=false,dl=0,wl){for(this.items=this.items.Where(function(ra){return ra.isNumValue||!!ra.element&&!!ra.elStyleName&&!n.Type.TypeInspector.IsNullOrUndefined(ra.elFinalValue)}),kl=0;kl<this.items.length;kl++)this.initializeFirstRun(this.items[kl]);this.animateStartTicks=Date.now()}else dl=Date.now()-(this.animateStartTicks||0),gl=(this.durationMs||0)<=(dl||0);for(kl=0;kl<this.items.length;kl++){if(bl=this.items[kl],bl.onTick)bl.onTick(this,bl.numCurrent);if(bl.rgbStart)n.Collections.ForEach(["r","g","b","a"],function(ua){var fa=gl?bl.rgbFinal[ua]:ia.GetCurrent(dl,bl.rgbStart[ua],bl.rgbFinal[ua]);bl.rgbCurrent[ua]=ua=="a"?fa:Math.floor(fa)}),n.Utility.Dom.SetStyleValue(bl.element,bl.elStyleName,bl.rgbCurrent.ToRgbString());else if(bl.clipStart)n.Collections.ForEach(["top","right","bottom","left"],function(ea){bl.clipCurrent[ea]=gl?bl.clipFinal[ea]:Math.floor(ia.GetCurrent(dl,bl.clipStart[ea],bl.clipFinal[ea]))}),n.Utility.Dom.SetClip(bl.element,bl.clipCurrent);else if(bl.transformStart){for(na=bl.transformFormat,kl=0;kl<bl.transformCurrent.length;kl++)bl.transformCurrent[kl]=gl?bl.transformFinal[kl]:this.GetCurrent(dl,bl.transformStart[kl],bl.transformFinal[kl]),na=na.replace("{"+kl+"}",bl.transformCurrent[kl]+"");$$calysto(bl.element).ApplyTransform(na)}else bl.numCurrent=gl?bl.numFinal:this.GetCurrent(dl,bl.numStart,bl.numFinal),bl.element&&((bl.elUnits=="px"||bl.elUnits=="%")&&(bl.numCurrent=Math.round(bl.numCurrent)),n.Utility.Dom.SetStyleValue(bl.element,bl.elStyleName,bl.numCurrent,bl.elUnits));if(bl.onTick)bl.onTick(this,bl.numCurrent)}if(this.onProgress){ta=dl/this.durationMs*100,ta>100&&(ta=100);this.onProgress(this,ta)}if(gl){if(this.state=t.Completed,this.onComplete)this.onComplete(this)}else n.Animator.RequestAnimationFrame(function(){return ia.TimerTick(false)})}},ch.prototype.IsRunning=function(){return this.state==t.Running},ch.prototype.Start=function(oa){var sa=this;if(oa===void 0&&(oa=0),this.IsRunning())throw new Error("animation is already running");if(this._delayTimeoutId&&(clearTimeout(this._delayTimeoutId),this._delayTimeoutId=null),oa>0){this._delayTimeoutId=setTimeout(function(){return sa.Start()},oa);return this}if(this.state=t.Running,this.onStart)this.onStart(this);this.TimerTick(true);return this},ch.prototype.Abort=function(){if(this._delayTimeoutId&&(clearTimeout(this._delayTimeoutId),this._delayTimeoutId=null),this.state=t.Aborted,this.onAbort)this.onAbort(this);return this},ch.InvokeEasing=i.InvokeEasing;return ch}(),n.Animator=f}(Calysto||(Calysto={})),function(n){var t;(function(i){function r(w,b,k){w===void 0&&(w="#98c7ef"),b===void 0&&(b="#4b84b5"),k===void 0&&(k=false);var g=[0,.125,.25,.375,.5,.625,.75,.875],d=k?g.reverse().AsEnumerable().GetEnumerator():g.AsEnumerable().GetEnumerator();return'\t<svg class="lds-blocks" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">\n\t\t<rect x="17" y="17" width="20" height="20" fill="'+b+'">\n\t\t\t<animate attributeName="fill" values="'+w+";"+b+";"+b+'" keyTimes="0;0.125;1" dur="1s" repeatCount="indefinite" begin="'+d.GetNext().GetValue()+'s" calcMode="discrete"><\/animate>\n\t\t<\/rect>\n\t\t<rect x="40" y="17" width="20" height="20" fill="'+b+'">\n\t\t\t<animate attributeName="fill" values="'+w+";"+b+";"+b+'" keyTimes="0;0.125;1" dur="1s" repeatCount="indefinite" begin="'+d.GetNext().GetValue()+'s" calcMode="discrete"><\/animate>\n\t\t<\/rect>\n\t\t<rect x="63" y="17" width="20" height="20" fill="'+b+'">\n\t\t\t<animate attributeName="fill" values="'+w+";"+b+";"+b+'" keyTimes="0;0.125;1" dur="1s" repeatCount="indefinite" begin="'+d.GetNext().GetValue()+'s" calcMode="discrete"><\/animate>\n\t\t<\/rect>\n\t\t<rect x="63" y="40" width="20" height="20" fill="'+b+'">\n\t\t\t<animate attributeName="fill" values="'+w+";"+b+";"+b+'" keyTimes="0;0.125;1" dur="1s" repeatCount="indefinite" begin="'+d.GetNext().GetValue()+'s" calcMode="discrete"><\/animate>\n\t\t<\/rect>\n\t\t<rect x="63" y="63" width="20" height="20" fill="'+b+'">\n\t\t\t<animate attributeName="fill" values="'+w+";"+b+";"+b+'" keyTimes="0;0.125;1" dur="1s" repeatCount="indefinite" begin="'+d.GetNext().GetValue()+'s" calcMode="discrete"><\/animate>\n\t\t<\/rect>\n\t\t<rect x="40" y="63" width="20" height="20" fill="'+b+'">\n\t\t\t<animate attributeName="fill" values="'+w+";"+b+";"+b+'" keyTimes="0;0.125;1" dur="1s" repeatCount="indefinite" begin="'+d.GetNext().GetValue()+'s" calcMode="discrete"><\/animate>\n\t\t<\/rect>\n\t\t<rect x="17" y="63" width="20" height="20" fill="'+b+'">\n\t\t\t<animate attributeName="fill" values="'+w+";"+b+";"+b+'" keyTimes="0;0.125;1" dur="1s" repeatCount="indefinite" begin="'+d.GetNext().GetValue()+'s" calcMode="discrete"><\/animate>\n\t\t<\/rect>\n\t\t<rect x="17" y="40" width="20" height="20" fill="'+b+'">\n\t\t\t<animate attributeName="fill" values="'+w+";"+b+";"+b+'" keyTimes="0;0.125;1" dur="1s" repeatCount="indefinite" begin="'+d.GetNext().GetValue()+'s" calcMode="discrete"><\/animate>\n\t\t<\/rect>\n\t<\/svg>'}function u(nt,tt){nt===void 0&&(nt="black"),tt===void 0&&(tt=false);var rt="0 0 0; 45 0 0; 90 0 0; 135 0 0; 180 0 0; 225 0 0 ; 270 0 0; 315 0 0; 360 0 0",ut=[5.375,6.438,8.063,10.063,10.75,12.531,14.344,16],it=ut.AsEnumerable().GetEnumerator();tt&&(rt=rt.split(";").reverse().join(";"),it=ut.reverse().AsEnumerable().GetEnumerator());return'<svg class="snake-main" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 128" x="384" y="0">\n\t\t\t\t<circle cx="16" cy="64" r="'+it.GetNext().GetValue()+'" fill="'+nt+'" />\n\t\t\t\t<circle cx="16" cy="64" r="'+it.GetNext().GetValue()+'" fill="'+nt+'" transform="rotate(45 64 64)" />\n\t\t\t\t<circle cx="16" cy="64" r="'+it.GetNext().GetValue()+'" fill="'+nt+'" transform="rotate(90 64 64)" />\n\t\t\t\t<circle cx="16" cy="64" r="'+it.GetNext().GetValue()+'" fill="'+nt+'" transform="rotate(135 64 64)" />\n\t\t\t\t<circle cx="16" cy="64" r="'+it.GetNext().GetValue()+'" fill="'+nt+'" transform="rotate(180 64 64)" />\n\t\t\t\t<circle cx="16" cy="64" r="'+it.GetNext().GetValue()+'" fill="'+nt+'" transform="rotate(225 64 64)" />\n\t\t\t\t<circle cx="16" cy="64" r="'+it.GetNext().GetValue()+'" fill="'+nt+'" transform="rotate(270 64 64)" />\n\t\t\t\t<circle cx="16" cy="64" r="'+it.GetNext().GetValue()+'" fill="'+nt+'" transform="rotate(315 64 64)" />\n\t\t\t\t<animateTransform attributeName="transform" type="rotate" calcMode="discrete" values="'+rt+'" keyTimes="0;0.125;0.25;0.375;0.5;0.625;0.75;0.875;1" dur="1s" begin="0s" repeatCount="indefinite"><\/animateTransform>\n\t\t\t<\/svg>'}function f(ft,et){var ot;ft===void 0&&(ft="black"),et===void 0&&(et=false);var ht="0 0 0; 45 0 0; 90 0 0; 135 0 0; 180 0 0; 225 0 0 ; 270 0 0; 315 0 0; 360 0 0",ct=[.1,.2,.35,.5,.7,.8,.9],st=ct.AsEnumerable().GetEnumerator();et&&(ht=ht.split(";").reverse().join(";"),st=ct.reverse().AsEnumerable().GetEnumerator()),ot=n.Colorspace.ColorConverter.ParseToRGB(ft);return'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 128" x="448" y="0">\n\t\t\t<circle cx="16" cy="64" r="16" fill="'+ot.ToRgbString()+'" />\n\t\t\t<circle cx="16" cy="64" r="16" fill="'+ot.Set(function(lt){return lt.a=st.GetNext().GetValue()}).ToRgbString()+'" transform="rotate(45, 64, 64)" />\n\t\t\t<circle cx="16" cy="64" r="16" fill="'+ot.Set(function(at){return at.a=st.GetNext().GetValue()}).ToRgbString()+'" transform="rotate(90,64,64)" />\n\t\t\t<circle cx="16" cy="64" r="16" fill="'+ot.Set(function(vt){return vt.a=st.GetNext().GetValue()}).ToRgbString()+'" transform="rotate(135,64,64)" />\n\t\t\t<circle cx="16" cy="64" r="16" fill="'+ot.Set(function(yt){return yt.a=st.GetNext().GetValue()}).ToRgbString()+'" transform="rotate(180,64,64)" />\n\t\t\t<circle cx="16" cy="64" r="16" fill="'+ot.Set(function(pt){return pt.a=st.GetNext().GetValue()}).ToRgbString()+'" transform="rotate(225,64,64)" />\n\t\t\t<circle cx="16" cy="64" r="16" fill="'+ot.Set(function(wt){return wt.a=st.GetNext().GetValue()}).ToRgbString()+'" transform="rotate(270,64,64)" />\n\t\t\t<circle cx="16" cy="64" r="16" fill="'+ot.Set(function(bt){return bt.a=st.GetNext().GetValue()}).ToRgbString()+'" transform="rotate(315,64,64)" />\n\t\t\t<animateTransform attributeName="transform" type="rotate" calcMode="discrete" values="'+ht+'" keyTimes="0;0.125;0.25;0.375;0.5;0.625;0.75;0.875;1" dur="1s" begin="0s" repeatCount="indefinite"><\/animateTransform>\n\t\t<\/svg>'}function e(kt,dt,gt){kt===void 0&&(kt="black"),dt===void 0&&(dt="gainsboro"),gt===void 0&&(gt=false);var ni="0 64 64; 45 64 64; 90 64 64; 135 64 64; 180 64 64; 225 64 64; 270 64 64; 315 64 64; 360 64 64";gt&&(ni=ni.split(";").reverse().join(";"));return'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 128" x="576" y="0">\n\t\t\t<path d="M38.52 33.37L21.36 16.2A63.6 63.6 0 0 1 59.5.16v24.3a39.5 39.5 0 0 0-20.98 8.92z" fill="'+dt+'" />\n\t\t\t<path d="M38.52 33.37L21.36 16.2A63.6 63.6 0 0 1 59.5.16v24.3a39.5 39.5 0 0 0-20.98 8.92z" fill="'+dt+'" transform="rotate(45 64 64)" />\n\t\t\t<path d="M38.52 33.37L21.36 16.2A63.6 63.6 0 0 1 59.5.16v24.3a39.5 39.5 0 0 0-20.98 8.92z" fill="'+dt+'" transform="rotate(90 64 64)" />\n\t\t\t<path d="M38.52 33.37L21.36 16.2A63.6 63.6 0 0 1 59.5.16v24.3a39.5 39.5 0 0 0-20.98 8.92z" fill="'+dt+'" transform="rotate(135 64 64)" />\n\t\t\t<path d="M38.52 33.37L21.36 16.2A63.6 63.6 0 0 1 59.5.16v24.3a39.5 39.5 0 0 0-20.98 8.92z" fill="'+dt+'" transform="rotate(180 64 64)" />\n\t\t\t<path d="M38.52 33.37L21.36 16.2A63.6 63.6 0 0 1 59.5.16v24.3a39.5 39.5 0 0 0-20.98 8.92z" fill="'+dt+'" transform="rotate(225 64 64)" />\n\t\t\t<path d="M38.52 33.37L21.36 16.2A63.6 63.6 0 0 1 59.5.16v24.3a39.5 39.5 0 0 0-20.98 8.92z" fill="'+dt+'" transform="rotate(270 64 64)" />\n\t\t\t<path d="M38.52 33.37L21.36 16.2A63.6 63.6 0 0 1 59.5.16v24.3a39.5 39.5 0 0 0-20.98 8.92z" fill="'+dt+'" transform="rotate(315 64 64)" />\n\t\t\t<path d="M38.52 33.37L21.36 16.2A63.6 63.6 0 0 1 59.5.16v24.3a39.5 39.5 0 0 0-20.98 8.92z" fill="'+kt+'">\n\t\t\t\t<animateTransform attributeName="transform" type="rotate" calcMode="discrete" values="'+ni+'" keyTimes="0;0.125;0.25;0.375;0.5;0.625;0.75;0.875;1" dur="1s" begin="0s" repeatCount="indefinite"><\/animateTransform>\n\t\t\t<\/path>\n\t\t<\/svg>'}function o(ti){ti===void 0&&(ti="black");return'<svg xmlns="http://www.w3.org/2000/svg" viewBox="10 10 108 108" x="704" y="0">\n\t\t\t<path fill="'+ti+'" d="M109.25 55.5h-36l12-12a29.54 29.54 0 0 0-49.53 12H18.75A46.04 46.04 0 0 1 96.9 31.84l12.35-12.34v36zm-90.5 17h36l-12 12a29.54 29.54 0 0 0 49.53-12h16.97A46.04 46.04 0 0 1 31.1 96.16L18.74 108.5v-36z">\n\t\t\t<\/path>\n\t\t\t<animateTransform attributeName="transform" type="rotate" calcMode="linear" values="0 0 0;360 0 0" keyTimes="0;1" dur="1s" begin="0s" repeatCount="indefinite"><\/animateTransform>\n\t\t<\/svg>'}function s(ii,ri){ii===void 0&&(ii="black"),ri===void 0&&(ri=false);var ui=n.Colorspace.ColorConverter.ParseToRGB(ii),oi=[.1,.1,.1,.1,.2,.3,.4,.5,.6,.7,.8,.9],fi=oi.AsEnumerable().GetEnumerator(),ei="0 0 0;30 0 0;60 0 0;90 0 0;120 0 0;150 0 0;180 0 0;210 0 0;240 0 0;270 0 0;300 0 0;330 0 0;360 0 0";ri&&(ei=ei.split(";").reverse().join(";"),fi=oi.reverse().AsEnumerable().GetEnumerator());return'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 128" x="640" y="0">\n\t\t\t<path d="M59.6 0h8v40h-8V0z" fill="'+ui.ToRgbString()+'" />\n\t\t\t<path d="M59.6 0h8v40h-8V0z" fill="'+ui.Set(function(si){return si.a=fi.GetNext().GetValue()}).ToRgbString()+'" transform="rotate(30 64 64)" />\n\t\t\t<path d="M59.6 0h8v40h-8V0z" fill="'+ui.Set(function(hi){return hi.a=fi.GetNext().GetValue()}).ToRgbString()+'" transform="rotate(60 64 64)" />\n\t\t\t<path d="M59.6 0h8v40h-8V0z" fill="'+ui.Set(function(ci){return ci.a=fi.GetNext().GetValue()}).ToRgbString()+'" transform="rotate(90 64 64)" />\n\t\t\t<path d="M59.6 0h8v40h-8V0z" fill="'+ui.Set(function(li){return li.a=fi.GetNext().GetValue()}).ToRgbString()+'" transform="rotate(120 64 64)" />\n\t\t\t<path d="M59.6 0h8v40h-8V0z" fill="'+ui.Set(function(ai){return ai.a=fi.GetNext().GetValue()}).ToRgbString()+'" transform="rotate(150 64 64)" />\n\t\t\t<path d="M59.6 0h8v40h-8V0z" fill="'+ui.Set(function(vi){return vi.a=fi.GetNext().GetValue()}).ToRgbString()+'" transform="rotate(180 64 64)" />\n\t\t\t<path d="M59.6 0h8v40h-8V0z" fill="'+ui.Set(function(yi){return yi.a=fi.GetNext().GetValue()}).ToRgbString()+'" transform="rotate(210 64 64)" />\n\t\t\t<path d="M59.6 0h8v40h-8V0z" fill="'+ui.Set(function(pi){return pi.a=fi.GetNext().GetValue()}).ToRgbString()+'" transform="rotate(240 64 64)" />\n\t\t\t<path d="M59.6 0h8v40h-8V0z" fill="'+ui.Set(function(wi){return wi.a=fi.GetNext().GetValue()}).ToRgbString()+'" transform="rotate(270 64 64)" />\n\t\t\t<path d="M59.6 0h8v40h-8V0z" fill="'+ui.Set(function(bi){return bi.a=fi.GetNext().GetValue()}).ToRgbString()+'" transform="rotate(300 64 64)" />\n\t\t\t<path d="M59.6 0h8v40h-8V0z" fill="'+ui.Set(function(ki){return ki.a=fi.GetNext().GetValue()}).ToRgbString()+'" transform="rotate(330 64 64)" />\n\t\t\t<animateTransform attributeName="transform" type="rotate" calcMode="discrete" values="'+ei+'" keyTimes="0;0.08;0.16;0.25;0.33;0.42;0.5;0.58;0.67;0.75;0.83;0.92;1" dur="1s" begin="0s" repeatCount="indefinite"><\/animateTransform>\n\t\t<\/svg>'}function h(di,gi){di===void 0&&(di="black"),gi===void 0&&(gi=false);return'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" class="lds-dual-ring">\n\t\t\t<circle cx="50" cy="50" fill="none" stroke-linecap="round" r="40" stroke-width="15" stroke="'+di+'" stroke-dasharray="42.411500823462205 42.411500823462205" transform="rotate(60 50 50)">\n\t\t\t\t<animateTransform attributeName="transform" type="rotate" calcMode="linear" values="'+(gi?360:0)+" 50 50;"+(gi?0:360)+' 50 50" keyTimes="0;1" dur="1s" begin="0s" repeatCount="indefinite"><\/animateTransform>\n\t\t\t<\/circle>\n\t\t<\/svg>'}function c(nr){nr===void 0&&(nr="black");return'<svg viewBox="0 -45 120 120" xmlns="http://www.w3.org/2000/svg" fill="'+nr+'">\n    <circle cx="15" cy="15" r="15">\n        <animate attributeName="r" from="15" to="15"\n                 begin="0s" dur="0.8s"\n                 values="15;9;15" calcMode="linear"\n                 repeatCount="indefinite" />\n        <animate attributeName="fill-opacity" from="1" to="1"\n                 begin="0s" dur="0.8s"\n                 values="1;.5;1" calcMode="linear"\n                 repeatCount="indefinite" />\n    <\/circle>\n    <circle cx="60" cy="15" r="9" fill-opacity="0.3">\n        <animate attributeName="r" from="9" to="9"\n                 begin="0s" dur="0.8s"\n                 values="9;15;9" calcMode="linear"\n                 repeatCount="indefinite" />\n        <animate attributeName="fill-opacity" from="0.5" to="0.5"\n                 begin="0s" dur="0.8s"\n                 values=".5;1;.5" calcMode="linear"\n                 repeatCount="indefinite" />\n    <\/circle>\n    <circle cx="105" cy="15" r="15">\n        <animate attributeName="r" from="15" to="15"\n                 begin="0s" dur="0.8s"\n                 values="15;9;15" calcMode="linear"\n                 repeatCount="indefinite" />\n        <animate attributeName="fill-opacity" from="1" to="1"\n                 begin="0s" dur="0.8s"\n                 values="1;.5;1" calcMode="linear"\n                 repeatCount="indefinite" />\n    <\/circle>\n<\/svg>\n'}function l(tr){tr===void 0&&(tr="black");return'<svg viewBox="0 0 57 57" xmlns="http://www.w3.org/2000/svg" stroke="'+tr+'">\n    <g fill="none" fill-rule="evenodd">\n        <g transform="translate(1 1)" stroke-width="2">\n            <circle cx="5" cy="50" r="5">\n                <animate attributeName="cy"\n                     begin="0s" dur="2.2s"\n                     values="50;5;50;50"\n                     calcMode="linear"\n                     repeatCount="indefinite" />\n                <animate attributeName="cx"\n                     begin="0s" dur="2.2s"\n                     values="5;27;49;5"\n                     calcMode="linear"\n                     repeatCount="indefinite" />\n            <\/circle>\n            <circle cx="27" cy="5" r="5">\n                <animate attributeName="cy"\n                     begin="0s" dur="2.2s"\n                     from="5" to="5"\n                     values="5;50;50;5"\n                     calcMode="linear"\n                     repeatCount="indefinite" />\n                <animate attributeName="cx"\n                     begin="0s" dur="2.2s"\n                     from="27" to="27"\n                     values="27;49;5;27"\n                     calcMode="linear"\n                     repeatCount="indefinite" />\n            <\/circle>\n            <circle cx="49" cy="50" r="5">\n                <animate attributeName="cy"\n                     begin="0s" dur="2.2s"\n                     values="50;50;5;50"\n                     calcMode="linear"\n                     repeatCount="indefinite" />\n                <animate attributeName="cx"\n                     from="49" to="49"\n                     begin="0s" dur="2.2s"\n                     values="49;5;27;49"\n                     calcMode="linear"\n                     repeatCount="indefinite" />\n            <\/circle>\n        <\/g>\n    <\/g>\n<\/svg>'}function a(ir){ir===void 0&&(ir="black");return'<svg viewBox="0 0 135 140" xmlns="http://www.w3.org/2000/svg" fill="'+ir+'">\n    <rect y="10" width="15" height="120" rx="6">\n        <animate attributeName="height"\n             begin="0.5s" dur="1s"\n             values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear"\n             repeatCount="indefinite" />\n        <animate attributeName="y"\n             begin="0.5s" dur="1s"\n             values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear"\n             repeatCount="indefinite" />\n    <\/rect>\n    <rect x="30" y="10" width="15" height="120" rx="6">\n        <animate attributeName="height"\n             begin="0.25s" dur="1s"\n             values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear"\n             repeatCount="indefinite" />\n        <animate attributeName="y"\n             begin="0.25s" dur="1s"\n             values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear"\n             repeatCount="indefinite" />\n    <\/rect>\n    <rect x="60" width="15" height="140" rx="6">\n        <animate attributeName="height"\n             begin="0s" dur="1s"\n             values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear"\n             repeatCount="indefinite" />\n        <animate attributeName="y"\n             begin="0s" dur="1s"\n             values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear"\n             repeatCount="indefinite" />\n    <\/rect>\n    <rect x="90" y="10" width="15" height="120" rx="6">\n        <animate attributeName="height"\n             begin="0.25s" dur="1s"\n             values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear"\n             repeatCount="indefinite" />\n        <animate attributeName="y"\n             begin="0.25s" dur="1s"\n             values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear"\n             repeatCount="indefinite" />\n    <\/rect>\n    <rect x="120" y="10" width="15" height="120" rx="6">\n        <animate attributeName="height"\n             begin="0.5s" dur="1s"\n             values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear"\n             repeatCount="indefinite" />\n        <animate attributeName="y"\n             begin="0.5s" dur="1s"\n             values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear"\n             repeatCount="indefinite" />\n    <\/rect>\n<\/svg>\n'}function v(rr,ur,fr){rr===void 0&&(rr="black"),ur===void 0&&(ur="gainsboro"),fr===void 0&&(fr=false);return'<svg viewBox="0 0 38 38" xmlns="http://www.w3.org/2000/svg" stroke="'+rr+'">\n    <g fill="none" fill-rule="evenodd">\n        <g transform="translate(1 1)" stroke-width="2">\n            <circle stroke="'+ur+'" stroke-opacity="1" cx="18" cy="18" r="18"/>\n            <path d="M36 18c0-9.94-8.06-18-18-18">\n                <animateTransform\n                    attributeName="transform"\n                    type="rotate"\n                    from="'+(fr?360:0)+' 18 18"\n                    to="'+(fr?0:360)+' 18 18"\n                    dur="1s"\n                    repeatCount="indefinite"/>\n            <\/path>\n        <\/g>\n    <\/g>\n<\/svg>'}function y(er){return'<svg class="lds-message" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><g transform="translate(20 50)">\n<circle cx="0" cy="0" r="7" fill="'+(er||"#e15b64")+'" transform="scale(0.99275 0.99275)">\n  <animateTransform attributeName="transform" type="scale" begin="-0.375s" calcMode="spline" keySplines="0.3 0 0.7 1;0.3 0 0.7 1" values="0;1;0" keyTimes="0;0.5;1" dur="1s" repeatCount="indefinite"><\/animateTransform>\n<\/circle>\n<\/g><g transform="translate(40 50)">\n<circle cx="0" cy="0" r="7" fill="'+(er||"#f47e60")+'" transform="scale(0.773605 0.773605)">\n  <animateTransform attributeName="transform" type="scale" begin="-0.25s" calcMode="spline" keySplines="0.3 0 0.7 1;0.3 0 0.7 1" values="0;1;0" keyTimes="0;0.5;1" dur="1s" repeatCount="indefinite"><\/animateTransform>\n<\/circle>\n<\/g><g transform="translate(60 50)">\n<circle cx="0" cy="0" r="7" fill="'+(er||"#f8b26a")+'" transform="scale(0.42525 0.42525)">\n  <animateTransform attributeName="transform" type="scale" begin="-0.125s" calcMode="spline" keySplines="0.3 0 0.7 1;0.3 0 0.7 1" values="0;1;0" keyTimes="0;0.5;1" dur="1s" repeatCount="indefinite"><\/animateTransform>\n<\/circle>\n<\/g><g transform="translate(80 50)">\n<circle cx="0" cy="0" r="7" fill="'+(er||"#abbd81")+'" transform="scale(0.113418 0.113418)">\n  <animateTransform attributeName="transform" type="scale" begin="0s" calcMode="spline" keySplines="0.3 0 0.7 1;0.3 0 0.7 1" values="0;1;0" keyTimes="0;0.5;1" dur="1s" repeatCount="indefinite"><\/animateTransform>\n<\/circle>\n<\/g><\/svg>'}function p(or){return'<svg class="lds-microsoft" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><g transform="rotate(0)"><circle cx="81.73413361164941" cy="74.35045716034882" fill="'+(or||"#e15b64")+'" r="5" transform="rotate(340.001 49.9999 50)">\n  <animateTransform attributeName="transform" type="rotate" calcMode="spline" values="0 50 50;360 50 50" times="0;1" keySplines="0.5 0 0.5 1" repeatCount="indefinite" dur="1.5s" begin="0s"><\/animateTransform>\n<\/circle><circle cx="74.35045716034882" cy="81.73413361164941" fill="'+(or||"#f47e60")+'" r="5" transform="rotate(348.352 50.0001 50.0001)">\n  <animateTransform attributeName="transform" type="rotate" calcMode="spline" values="0 50 50;360 50 50" times="0;1" keySplines="0.5 0 0.5 1" repeatCount="indefinite" dur="1.5s" begin="-0.0625s"><\/animateTransform>\n<\/circle><circle cx="65.3073372946036" cy="86.95518130045147" fill="'+(or||"#f8b26a")+'" r="5" transform="rotate(354.236 50 50)">\n  <animateTransform attributeName="transform" type="rotate" calcMode="spline" values="0 50 50;360 50 50" times="0;1" keySplines="0.5 0 0.5 1" repeatCount="indefinite" dur="1.5s" begin="-0.125s"><\/animateTransform>\n<\/circle><circle cx="55.22104768880207" cy="89.65779445495241" fill="'+(or||"#abbd81")+'" r="5" transform="rotate(357.958 50.0002 50.0002)">\n  <animateTransform attributeName="transform" type="rotate" calcMode="spline" values="0 50 50;360 50 50" times="0;1" keySplines="0.5 0 0.5 1" repeatCount="indefinite" dur="1.5s" begin="-0.1875s"><\/animateTransform>\n<\/circle><circle cx="44.77895231119793" cy="89.65779445495241" fill="'+(or||"#849b87")+'" r="5" transform="rotate(359.76 50.0064 50.0064)">\n  <animateTransform attributeName="transform" type="rotate" calcMode="spline" values="0 50 50;360 50 50" times="0;1" keySplines="0.5 0 0.5 1" repeatCount="indefinite" dur="1.5s" begin="-0.25s"><\/animateTransform>\n<\/circle><circle cx="34.692662705396415" cy="86.95518130045147" fill="'+(or||"#e15b64")+'" r="5" transform="rotate(0.183552 50 50)">\n  <animateTransform attributeName="transform" type="rotate" calcMode="spline" values="0 50 50;360 50 50" times="0;1" keySplines="0.5 0 0.5 1" repeatCount="indefinite" dur="1.5s" begin="-0.3125s"><\/animateTransform>\n<\/circle><circle cx="25.649542839651176" cy="81.73413361164941" fill="'+(or||"#f47e60")+'" r="5" transform="rotate(1.86457 50 50)">\n  <animateTransform attributeName="transform" type="rotate" calcMode="spline" values="0 50 50;360 50 50" times="0;1" keySplines="0.5 0 0.5 1" repeatCount="indefinite" dur="1.5s" begin="-0.375s"><\/animateTransform>\n<\/circle><circle cx="18.2658663883506" cy="74.35045716034884" fill="'+(or||"#f8b26a")+'" r="5" transform="rotate(5.45126 50 50)">\n  <animateTransform attributeName="transform" type="rotate" calcMode="spline" values="0 50 50;360 50 50" times="0;1" keySplines="0.5 0 0.5 1" repeatCount="indefinite" dur="1.5s" begin="-0.4375s"><\/animateTransform>\n<\/circle><animateTransform attributeName="transform" type="rotate" calcMode="spline" values="0 50 50;0 50 50" times="0;1" keySplines="0.5 0 0.5 1" repeatCount="indefinite" dur="1.5s"><\/animateTransform><\/g><\/svg>'}i.Squares=r,i.Snake=u,i.BallsRing=f,i.MsRing=e,i.TwoArrows=o,i.Flower=s,i.ThreeArcs=h,i.ThreeDots=c,i.BallTriangle=l,i.Bars=a,i.Oval=v,i.Messenger=y,i.RotatingBalls=p})(t=n.Preloaders||(n.Preloaders={}))}(Calysto||(Calysto={})),function(n){function t(f,e){for(var s={},o=0;o<f.length;o++)s[f[o]]=e[o];return s}function i(h){var c=[],l;if(c.length==0)for(l in h)c.push(l);return c}function r(a,v){for(var p=[],y=0;y<v.length;y++)p.push(a[v[y]]);return p}var u=function(){function w(){this.Columns=[],this.Rows=[]}w.prototype.ToObjectsArray=function(){for(var k=[],b=0;b<this.Rows.length;b++)k.push(t(this.Columns,this.Rows[b]));return k},w.prototype.Clone=function(){var d=new n.DataTable;d.Columns=this.Columns.slice(),d.Rows=this.Rows.slice(),d.TotalCount=this.TotalCount,d.TableName=this.TableName;return d},w.prototype.fromObjectsArray=function(g){for(var tt,it,nt=0;nt<g.length;nt++)tt=g[nt],nt==0&&(this.Columns=i(tt)),it=r(tt,this.Columns),this.Rows.push(it)},w.prototype.fromDataTable=function(rt){this.Columns=rt.Columns.slice(0),this.Rows=rt.Rows.slice(0),this.TotalCount=rt.TotalCount,this.TableName=rt.TableName},w.CreateFrom=function(ut){var ft=new w;if(ut)if(ut.Columns&&ut.Rows)ft.fromDataTable(ut);else if(ut.push&&ut.pop)ft.fromObjectsArray(ut);else throw new Error("Calysto.DataTable: Invalid data, can't create data table");return ft};return w}();n.DataTable=u}(Calysto||(Calysto={})),function(n){function t(r){return r?r.ToArray?r.ToArray():n.CalystoEnumerable.From(r).ToArray():[]}var i=function(u){function f(e){var c,l,h=u.call(this,function(){return n.CalystoEnumerator.From(h.array)})||this,s,o,a;if(h.array=[],typeof e=="string")throw new Error("List source can not be string");try{for(s=__values(t(e)),o=s.next();!o.done;o=s.next())a=o.value,h.array.push(a)}catch(v){c={error:v}}finally{try{o&&!o.done&&(l=s.return)&&l.call(s)}finally{if(c)throw c.error;}}return h}__extends(f,u),Object.defineProperty(f.prototype,"InnerArray",{get:function(){return this.array},enumerable:false,configurable:true}),f.prototype.Add=function(y){this.array.push(y);return this},f.prototype.AddRange=function(p){this.array.AddRange(p);return this},f.prototype.Count=function(){return this.array.length},f.prototype.Any=function(){return this.array.length>0},f.prototype.Insert=function(w,b){this.array.splice(w,0,b);return this},f.prototype.ElementAt=function(k,d){return this.array.length>k?this.array[k]:d},f.prototype.Remove=function(g){return this.RemoveAt(this.IndexOf(g))},f.prototype.RemoveAt=function(nt){return this.RemoveRange(nt,1)},f.prototype.RemoveRange=function(tt,it){(tt>0||tt==0)&&this.array.splice(tt,it||1);return this},f.prototype.Reverse=function(){this.array.reverse();return this},f.prototype.IndexOf=function(rt){return this.array.indexOf(rt)},f.prototype.Contains=function(ut){return this.IndexOf(ut)>=0},f.prototype.Clear=function(){this.array.splice(0,this.array.length);return this},f.prototype.ToArray=function(){return this.array.slice(0)},f.prototype.ToList=function(){return new n.List(this.array.slice(0))},f.prototype.ToStringJoined=function(ft){return this.array.join(ft||"")},f.prototype.ForEach=function(et){typeof et=="string"&&(et=n.Utility.Expressions.CompileLambdaNoReturnCheck(et)),n.Collections.ForEach(this.array,et);return this},f.prototype.FirstOrDefault=function(ot){return this.array.length>0?this.array[0]:ot},f.prototype.First=function(){var st;if(((st=this.array)===null||st===void 0?void 0:st.length)>0)return this.array[0];throw new Error("Error in First(), no items");},f.prototype.LastOrDefault=function(ht){return this.array.length>0?this.array[this.array.length-1]:ht},f.prototype.Last=function(){var ct;if(((ct=this.array)===null||ct===void 0?void 0:ct.length)>0)return this.array[this.array.length-1];throw new Error("Error in Last(), no items");};return f}(n.CalystoEnumerable);n.List=i}(Calysto||(Calysto={})),function(n){var t;(function(i){var u=function(){function f(){this.Pass=-1}return f}(),r=function(){function e(){}e.prototype.CompressImpl=function(o,s){var l=new n.Regex("(.+?)\\1+?").SelectSegments(o).Select(function(w){return w.Value}).Distinct().ToList(),h=l.OrderByDescending(function(b){return b.length}).Skip(l.Take(2).Count()>1?1:0).ToList(),a=0,c=h.AsEnumerable().ToDictionary(function(k){return k},function(){return a++}).ToRawObject(true),v=h.AsEnumerable().Select(function(d){return"("+RegExp.Escape(d)+")"}).ToStringJoined("|"),y=new n.Regex(v).SelectSegments(o).Select(function(g){g.Success||c[g.Value]||(c[g.Value]=a++,h.Add(g.Value));return c[g.Value]}).ToArray(),p={Dic:h.ToArray(),Cont:y,Pass:s};return n.Json.Serialize(p)},e.prototype.Compress=function(nt,tt){var rt,it,ut;for(arguments.length<2&&(tt=1),rt=0,it=nt;rt<=tt;){if(ut=this.CompressImpl(it,rt),ut.length>it.length)return it;it=ut,rt++}return it},e.prototype.Decompress=function(ft){if(!ft.Contains('"Dic"')||!ft.Contains('"Cont"')||!ft.Contains('"Pass"'))return ft;var et=n.Json.Deserialize(ft),st=0,ht=et.Dic.AsEnumerable().ToDictionary(function(){return"n"+st++},function(ct){return ct}).ToRawObject(true),ot=et.Cont.AsEnumerable().Select(function(lt){return ht["n"+lt]}).ToStringJoined();return et.Pass>0?this.Decompress(ot):ot};return e}();i.StringCompressor=r})(t=n.Utility||(n.Utility={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){var f=function(){function e(o){var s;o+="!(&#@`#)#$%^*(_+~`",s=o.ToCharArray().AsEnumerable().Cycle(1e3).Select(function(h,c){return{ch:h.charCodeAt(0),fromByte:c}}).Take(256).OrderBy(function(l){return l.ch}).Select(function(a,v){return{ch:a.ch,fromByte:a.fromByte,toByte:v}}).ToList(),this._dicEncryption=s.AsEnumerable().ToDictionary(function(y){return y.fromByte+"_"},function(p){return p.toByte}).ToRawObject(true),this._dicDecryption=s.AsEnumerable().ToDictionary(function(w){return w.toByte+"_"},function(b){return b.fromByte}).ToRawObject(true)}e.prototype.Encrypt=function(k){var d=this;typeof k=="string"&&(k=n.Utility.Encoding.UTF8.GetBytes(k));return k.Select(function(g){return d._dicEncryption[g+"_"]})},e.prototype.Decrypt=function(nt){var tt=this;return nt.Select(function(it){return tt._dicDecryption[it+"_"]})},e.prototype.DecryptToString=function(rt){return n.Utility.Encoding.UTF8.GetString(this.Decrypt(rt))};return e}();u.SimpleEncryptor=f})(r=i.Cryptography||(i.Cryptography={}))})(t=n.Security||(n.Security={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){var f;(function(e){function o(nt){console.error(nt);return false}function h(tt){return typeof tt=="string"?tt:tt===undefined?"undefined":tt===null?"null":isNaN(tt)?"NaN":JSON.stringify(tt)}function c(ht,ct,lt,at){return n.Type.TypeInspector.AreValuesEqual(ht,ct)?true:o(new s("Assert.AreEqual failed.").AddNameValue("Expected",ht).AddNameValue("Actual",ct).AddCustom(lt,at).ToStringFormated())}function l(vt,yt,pt,wt){return n.Type.TypeInspector.AreValuesEqual(vt,yt)?o(new s("Assert.AreNotEqual failed.").AddNameValue("NotExpected",vt).AddNameValue("Actual",yt).AddCustom(pt,wt).ToStringFormated()):true}function a(bt,kt,dt,gt){return bt===kt?true:o(new s("Assert.AreSame failed.").AddNameValue("Expected",bt).AddNameValue("Actual",kt).AddCustom(dt,gt).ToStringFormated())}function v(ni,ti,ii,ri){return ni!==ti?true:o(new s("Assert.AreNotSame failed.").AddNameValue("Expected",ni).AddNameValue("Actual",ti).AddCustom(ii,ri).ToStringFormated())}function y(ui,fi){return o(new s("Assert.Fail.").AddCustom(ui,fi).ToStringFormated())}function p(ei,oi){return o(new s("Assert.Inconclusive.").AddCustom(ei,oi).ToStringFormated())}function w(si,hi,ci){return si===false?o(new s("Assert.IsFalse failed.").AddCustom(hi,ci).ToStringFormated()):true}function b(li,ai,vi){return li===true?true:o(new s("Assert.IsTrue failed.").AddCustom(ai,vi).ToStringFormated())}function k(yi,pi,wi){return n.Type.TypeInspector.IsNullOrUndefined(yi)?true:o(new s("Assert.IsNull failed.").AddNameValue("Actual",yi).AddCustom(pi,wi).ToStringFormated())}function d(bi,ki,di){return n.Type.TypeInspector.IsNullOrUndefined(bi)?o(new s("Assert.IsNotNull failed.").AddNameValue("Actual",bi).AddCustom(ki,di).ToStringFormated()):true}function g(gi,nr,tr){try{gi()}catch(ir){return true}return o(new s("Assert.ThrowsException failed. Exception was not thrown.").AddCustom(nr,tr).ToStringFormated())}var s=function(){function it(rt){this._lines=[],this._lines.push(rt)}it.prototype.AddNameValue=function(ut,ft){this._lines.Add(ut+":<"+h(ft)+">.");return this},it.prototype.AddCustom=function(et,ot){et&&this._lines.Add(et.FormatWith(ot));return this},it.prototype.ToStringFormated=function(st){st===void 0&&(st="\r\n");return this._lines.join(st)};return it}();e.AreEqual=c,e.AreNotEqual=l,e.AreSame=a,e.AreNotSame=v,e.Fail=y,e.Inconclusive=p,e.IsFalse=w,e.IsTrue=b,e.IsNull=k,e.IsNotNull=d,e.ThrowsException=g})(f=u.Assert||(u.Assert={}))})(r=i.UnitTesting||(i.UnitTesting={}))})(t=n.TestTools||(n.TestTools={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){function e(s){f.push(s)}function o(){var l,v,c,h,y,a;try{for(c=__values(f),h=c.next();!h.done;h=c.next())y=h.value,y()}catch(p){l={error:p}}finally{try{h&&!h.done&&(v=c.return)&&v.call(c)}finally{if(l)throw l.error;}}a="UnitTests complete: "+f.length,console.log(a);return a}var f=[];u.AddTest=e,u.RunTests=o,n.Core.IsTddSpecific&&n.Page.OnInteractive(function(){return u.RunTests()})})(r=i.TestRunner||(i.TestRunner={}))})(t=n.TestTools||(n.TestTools={}))}(Calysto||(Calysto={})),function(n){function r(){t||(t=true,n.ScriptLoader.LoadCSS(n.Utility.Html.Minify(i)))}var i="\n.calystoConsole {\n\tposition:fixed;\n\ttop:0;\n\tleft:0;\n\twidth:400px;\n\theight:100px;\n\toverflow:auto;\n\tborder:solid 1px black;\n\tbackground:#f3f37a;\n\tcolor:black;\n\tfont-size:11px;\n\tz-index:1000000;\n}\n\n.calystoConsole * {\n\tfont-size:inherit;\n}\n",t=false,u=function(){function f(){this.LineMaxLength=1e3}f.prototype.EnsureCreated=function(){if(n.Core.IsDebugDefined){if(this._consoleDiv)return;r();var e=document.createElement("div");e.innerHTML="<div class='calystoConsole'><\/div>",this._consoleDiv=e.childNodes[0],document.body.appendChild(this._consoleDiv)}},f.prototype.ApplyStyle=function(o){n.Core.IsDebugDefined&&(this.EnsureCreated(),$$calysto(this._consoleDiv).ApplyStyle(o))},f.prototype.ConverToString=function(s){return typeof s=="string"?s:s===undefined?"undefined":s===null?"null":s==NaN?"NaN":typeof s=="function"?s+"":JSON.stringify(s)},f.prototype.WriteLine=function(h){if(n.Core.IsDebugDefined){this.EnsureCreated();var c=this.ConverToString(h);c.length>this.LineMaxLength&&(c=c.substr(0,this.LineMaxLength)+"...[truncated]"),$$calysto(this._consoleDiv).AddChildren(n.DomQuery.CreateElement("div").AddChildren(c)),this._consoleDiv.scrollTop=this._consoleDiv.scrollHeight}},f.prototype.Clear=function(){this._consoleDiv&&(this._consoleDiv.innerHTML="")},f.prototype.Destroy=function(){this._consoleDiv&&($$calysto(this._consoleDiv).RemoveFromDom(),this._consoleDiv=null)},f.Current=new f;return f}();n.Console=u}(Calysto||(Calysto={})),function(n){var t;(function(i){function r(h){h.SlidingDuration>0&&(h.Expiration=Math.round(Date.now()+1e3*h.SlidingDuration))}function u(c){return c.Expiration&&c.Expiration<Date.now()}function f(l,a,v,y,p){var k=y?Math.round(Date.now()+1e3*y):null,w={Content:v,Expiration:k,SlidingDuration:p},b;r(w),b=JSON.stringify(w),l.setItem(a,b)}function e(d,g){var tt=d.getItem(g),nt;if(tt)if(nt=JSON.parse(tt),u(nt))d.removeItem(g);else{r(nt);return nt.Content}return null}function o(it,rt){it.removeItem(rt)}function s(ut){ut.clear()}i.Set=f,i.Get=e,i.Remove=o,i.Clear=s})(t=n.CacheProvider||(n.CacheProvider={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){function o(){return f&&!e}function c(y){y===void 0&&(y=true),y===false?e=true:f||(f=true,n.Page.OnEndResponse(function(){return a()}))}function l(p,w){w===void 0&&(w=0),setTimeout(function(){var b=$$calysto(p).First();h(b)},w)}function a(){$$calysto("form").Where(function(k){return!k.$$CalystoInterceptor}).ForEach(function(d){d.$$CalystoInterceptor=true;var g=d;g.submitBase=g.submit,g.submit=function(){var nt=this;setTimeout(function(){return s(nt)},1);return false}}).On("submit",function(tt){setTimeout(function(){return s(tt)},1);return false})}function s(it){var rt;if(!o()||((rt=n.DataAnnotations.FindValidationService(it))===null||rt===void 0?void 0:rt.Validate().Render().Interactive(true).HasErrors()))return false;h(it);return false}function h(ut){var lt,yt,at,ft,et,st,ot,ht;if(!ut)throw new Error("Form is null.");if(ft=ut.getAttribute(n.Constants.CalystoDomAttributes.CalystoFormHandler),et=ut.getAttribute(n.Constants.CalystoDomAttributes.CalystoFormTarget),!et&&!ft){n.Core.IsDebugDefined&&console.log("Form has no target and no received handler.");return}var wt=n.Utility.Dom.EnsureElementId(et||ut),pt=[{Key:"__RootSelectorKey",Value:wt}],bt=n.Forms.SerializeContainer(ut);try{for(st=__values(bt),ot=st.next();!ot.done;ot=st.next())ht=ot.value,((at=ht.Element)===null||at===void 0?void 0:at.disabled)&&pt.push({Key:ht.Name,Value:ht.Value})}catch(kt){lt={error:kt}}finally{try{ot&&!ot.done&&(yt=st.return)&&yt.call(st)}finally{if(lt)throw lt.error;}}n.Core.IsDebugDefined;var vt=ut.getAttribute(n.Constants.CalystoDomAttributes.CalystoFormMode),dt=parseInt(ut.getAttribute("calysto-timeout"))||9e4,gt=n.Mvc.UseCalystoSpinner(ut,false),ct=ut.getAttribute(n.Constants.CalystoDomAttributes.CalystoFormDestination);if(!ct)throw new Error("Invalid action url.");else ct=n.Utility.Encoding.CalystoBase64.DecodeBase64StringToString(ct);n.Page.OnBeginRequest.Invoke();return new n.Net.WebClient(ct).AddRequestHeader(n.Constants.WsjsHeaderConstants.XCalystoAjaxFormKey,n.Constants.WsjsHeaderConstants.XCalystoAjaxFormValue).SetTimeout(dt).UploadHtmlForm(ut,pt).OnError(function(ni,ti){n.Core.IsDebugDefined&&n.Dialog.CreateError(ti+"").Show()}).OnLoad(function(ii){var si,li,ui=ii.GetResponseText(),ai=ii.xhr.getResponseHeader("location"),hi,vi,yi,ci,pi,fi,ri,ei,oi;if(ai){location.assign(ai);return}if(gt.Remove(),ii.xhr.status<200||ii.xhr.status>=300)hi=ii.xhr.status+" "+(ii.xhr.statusText||n.Net.HttpStatusCode[ii.xhr.status]||""),vi=ui||hi,n.Dialog.CreateError(vi,hi).Show();else if(ii.xhr.getResponseHeader(n.Constants.WsjsHeaderConstants.XCalystoResponseContainerKey)==n.Constants.WsjsHeaderConstants.XCalystoResponseContainerValue)yi=v(),n.Net.WebService.AjaxResponseReceivedHandler(ii,yi);else{if(ft)if(ci=new n.BoxValue,ft.Contains("=>"))pi=n.Utility.Expressions.CompileLambdaNoReturnCheck(ft),pi(ui);else if(n.DataBinder.TryGetValue(window,ft,ci))ci.GetValue()(ui);else throw new Error("Received handler supported: "+ft);if(et){vt=vt||"ReplaceChildren";try{for(fi=__values(et.split(",")),ri=fi.next();!ri.done;ri=fi.next())ei=ri.value,ei=ei.Trim(),oi=n.DomQuery.FromHtml(ui).Query(ei+", //"+ei).Distinct().ChildNodes().ToArray(),$$calysto(et)[vt]((oi===null||oi===void 0?void 0:oi.Any())?oi:ui)}catch(wi){si={error:wi}}finally{try{ri&&!ri.done&&(li=fi.return)&&li.call(fi)}finally{if(si)throw si.error;}}}}n.Page.OnEndResponse.Invoke()}).Start()}function v(){return{fnErrorCallback:function(bi){n.Core.IsDebugDefined&&n.Dialog.CreateError(bi).Show()},fnResponseContainerCallback:function(ki){n.Core.IsDebugDefined&&console.log("fnResponseContainerCallback",ki)},fnReturnValueCallback:function(di){n.Core.IsDebugDefined&&console.log("fnReturnValueCallback",di)},fnResponseEndCallback:function(){n.Core.IsDebugDefined&&console.log("fnResponseEndCallback")}}}var f=false,e=false;u.IsAjaxFormSubmitEnabled=o,u.UseAjaxFormSubmit=c,u.SubmitForm=l})(r=i.AjaxForm||(i.AjaxForm={}))})(t=n.Mvc||(n.Mvc={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){function u(st,ht){return r.Start(st,ht)}var r=function(){function f(){}f.Start=function(e,o){var c,a,b=$$calysto(e).Query("//button, //a").WhereEnabled(true).SetEnabled(false),v=$$calysto(e).Query("//div.calysto-spinner").ToArray(),y=[],k=function(g){var nt=parseInt(g.getAttribute("calysto-spinner-delay"))||300,tt=new n.Timer(function(){g.className+=" calysto-visible"}).Start(nt);y.push(tt)},h,s,p,l,w;try{for(h=__values(v),s=h.next();!s.done;s=h.next())p=s.value,k(p)}catch(d){c={error:d}}finally{try{s&&!s.done&&(a=h.return)&&a.call(h)}finally{if(c)throw c.error;}}l=new f,w=l.Remove=function(){var ft,et,rt,it,ut;try{for(rt=__values(y),it=rt.next();!it.done;it=rt.next())ut=it.value,ut===null||ut===void 0?void 0:ut.Abort()}catch(ot){ft={error:ot}}finally{try{it&&!it.done&&(et=rt.return)&&et.call(rt)}finally{if(ft)throw ft.error;}}v.AsEnumerable().AsDomQuery().RemoveClass("calysto-visible"),b.SetEnabled(true)},o&&n.Page.OnEndResponse.MCD.AddOnce(w);return l},f.prototype.Remove=function(){};return f}();i.UseCalystoSpinner=u})(t=n.Mvc||(n.Mvc={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){u[u.NoData=1]="NoData",u[u.Header=2]="Header",u[u.Footer=3]="Footer",u[u.Separator=4]="Separator",u[u.Item=5]="Item",u[u.AlternatingItem=6]="AlternatingItem"})(r=i.TemplateKind||(i.TemplateKind={}))})(t=n.Binding||(n.Binding={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){var f=function(){function s(){this.Bindings=[],this.ViewListeners=[],this.Repeaters=[],this.Templates=[],this.DataListeners=[],this.Sources=[]}return s}(),e=function(){function h(c,l){this._uid=c,this._setup=l}h.prototype.GetCsvValues=function(a){if(a){if(typeof a=="string"){var v=a===null||a===void 0?void 0:a.Split(",").Select(function(y){return y.Trim()}).Where(function(p){return!String.IsNullOrEmpty(p)}).ToArray();if(v&&v.length>1)throw new Error("Single string value is expected or string[]. Provided CSV: "+a);return v.Any()?v:null}if(n.Type.TypeInspector.IsArray(a))return a;throw new Error("Invalid argument, requires string or string[]. Provided: "+a);}else return[]},h.prototype.Root=function(){if(this._setup.RootUid)throw new Error("Root is already defined.");this._setup.RootUid=this._uid;return this},h.prototype.Bind=function(w,b,k,d,g){var tt=this.GetCsvValues(w),nt;if((tt===null||tt===void 0?void 0:tt.length)!=1)throw new Error("Single element property path is required, but provided: "+w);if(nt=this.GetCsvValues(b),(nt===null||nt===void 0?void 0:nt.length)!=1)throw new Error("Single data source property path is required, but provided: "+b);this._setup.Bindings.push({Uid:this._uid,ElementPath:tt[0],DataSourcePath:nt[0],JsSetConvert:k,JsGetConvert:d,EventNames:this.GetCsvValues(g)});return this},h.prototype.ListenData=function(it,rt){this._setup.DataListeners.push({Uid:this._uid,DataSourcePaths:this.GetCsvValues(it),JsHandler:rt});return this},h.prototype.ListenView=function(ut,ft){this._setup.ViewListeners.push({Uid:this._uid,EventNames:this.GetCsvValues(ut),JsHandler:ft});return this},h.prototype.Source=function(et){this._setup.Sources.push({Uid:this._uid,DataSourcePath:et});return this},h.prototype.Repeater=function(ot){this._setup.Repeaters.push({Uid:this._uid,DataSourcePath:ot});return this},h.prototype.Template=function(st){this._setup.Templates.push({Uid:this._uid,TemplateKind:st});return this};return h}(),o=function(){function ht(){this._setup=new f}ht.prototype.GetSetup=function(){return this._setup},ht.prototype.GetRoot=function(){return this._setup.RootUid},ht.prototype.Assign=function(ct,lt){var at=new e(ct,this._setup);lt(at);return this};return ht}();u.BindingFactory=o})(r=i.Setup||(i.Setup={}))})(t=n.Binding||(n.Binding={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){u.ComponentSetting="calysto-binding-component",u.Uid="calysto-binding-uid"})(r=i.Attributes||(i.Attributes={}))})(t=n.Binding||(n.Binding={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){function s(a){var v=o(a);return e[v]}function h(y){return f[y]}function o(p){return p.getAttribute(i.Attributes.Uid)}function c(w){var b=$$calysto(w).Query("//div["+n.Binding.Attributes.ComponentSetting+"=*]").SelectInnerHtml().FirstOrDefault();return n.Json.Deserialize(b)}function l(k,d){var g=d||c(k),it,ut,nt;k.$$observable_RootSetting=g,it=$$calysto(k).Query("["+n.Binding.Attributes.Uid+"], //["+n.Binding.Attributes.Uid+"]").Select(function(et){return{Uid:et.getAttribute(n.Binding.Attributes.Uid),Element:et}}).ToArray(),it.ForEach(function(ot){if(!ot.Uid)throw new Error("Uid is undefined for "+ot.Element.tagName+" element");if(f[ot.Uid])throw new Error("Multiple elements with the same uid: "+ot.Uid);var st={RootUid:g.RootUid,Bindings:g.Bindings.Where(function(ht){return ht.Uid==ot.Uid}).ToArray(),ViewListeners:g.ViewListeners.Where(function(ct){return ct.Uid==ot.Uid}).ToArray(),DataListeners:g.DataListeners.Where(function(lt){return lt.Uid==ot.Uid}).ToArray(),Sources:g.Sources.Where(function(at){return at.Uid==ot.Uid}).ToArray(),Repeaters:g.Repeaters.Where(function(vt){return vt.Uid==ot.Uid}).ToArray(),Templates:g.Templates.Where(function(yt){return yt.Uid==ot.Uid}).ToArray()};if(!st.RootUid&&!st.Bindings.Any()&&!st.ViewListeners.Any()&&!st.DataListeners.Any()&&!st.Sources.Any()&&!st.Repeaters.Any()&&!st.Templates.Any())throw new Error("No settings found for element with uid: "+ot.Uid);f[ot.Uid]={Element:ot.Element,Settings:st}});var rt=it.AsEnumerable().ToRawObject(function(pt){return pt.Uid},function(wt){return wt.Element}),tt=g.Templates.AsEnumerable().Select(function(bt){var kt;try{kt=rt[bt.Uid].parentElement}catch(dt){throw new Error(dt+", Uid: "+bt.Uid);}return{Template:bt,Element:rt[bt.Uid],RepeaterElement:kt,RepeaterUid:kt.getAttribute(n.Binding.Attributes.Uid)}}).ToArray(),ft=tt.Where(function(gt){return!gt.RepeaterUid}).ToArray();if(ft.Any())throw new Error("Template has no parent element.");if(ut=tt.Where(function(ni){return $$calysto(ni.RepeaterElement).WhereVisible().Any()}).ToArray(),ut.Any())throw new Error("Repeater must have style='display:none'");nt=function(ti,ii){return tt.AsEnumerable().Where(function(ri){return ri.RepeaterUid==ti&&ri.Template.TemplateKind==ii}).Select(function(ui){return ui.Element}).FirstOrDefault()},g.Repeaters.ForEach(function(fi){e[fi.Uid]||(e[fi.Uid]={header:nt(fi.Uid,i.TemplateKind.Header),item:nt(fi.Uid,i.TemplateKind.Item),alternating:nt(fi.Uid,i.TemplateKind.AlternatingItem),separator:nt(fi.Uid,i.TemplateKind.Separator),footer:nt(fi.Uid,i.TemplateKind.Footer),nodata:nt(fi.Uid,i.TemplateKind.NoData)})}),$$calysto(tt.Select(function(ei){return ei.Element}).ToArray()).RemoveFromDom()}var e={},f;u.GetRepeaterSetting=s,f={},n.Core.IsDebugDefined&&(window.$$globalRepeatersDic=e,window.$$globalElementsDic=f),u.GetBindingElement=h,u.GetElementUid=o,u.InitializeBindings=l})(r=i.BindingCache||(i.BindingCache={}))})(t=n.Binding||(n.Binding={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r=function(){function u(f){this.dsListeners=new i.BindingDictionaryTree,this.dataSource={},f&&this.SetDataSource(f),window.dsListeners=this.dsListeners}u.prototype.SetDataSource=function(e){this.dataSource=e||{};return this},u.prototype.GetDataSource=function(){return this.dataSource},u.prototype.SetValue=function(o,s,h){if(h)n.DataBinder.SetValue(this.dataSource,o,s);else{var c=n.DataBinder.GetValue(this.dataSource,o);n.Type.TypeInspector.AreValuesEqual(c,s)||(n.DataBinder.SetValue(this.dataSource,o,s),this.NotifyPropertyChanged(o))}return this},u.prototype.GetValue=function(l){return n.DataBinder.GetValue(this.dataSource,l)},u.prototype.SetValueSilent=function(a,v){return this.SetValue(a,v,true)},u.prototype.SetValueLoud=function(y,p){this.SetValue(y,p,true),this.NotifyPropertyChanged(y);return this},u.prototype.NotifyPropertyChanged=function(w){var d,nt,tt,k,b,g;if(!w||w.length==0)throw new Error("NotifyPropertyChanged(...) requires an argument");tt=this.dsListeners.GetListenersAndDescendants(w);try{for(k=__values(tt),b=k.next();!b.done;b=k.next())g=b.value,g.CallbackFunc(g.FullPath)}catch(it){d={error:it}}finally{try{b&&!b.done&&(nt=k.return)&&nt.call(k)}finally{if(d)throw d.error;}}return this};return u}();i.BindingDataSource=r})(t=n.Binding||(n.Binding={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var u=function(){function e(o,s,h,c){this.Owner=o,this.Element=s,this.FullPath=h,this.CallbackFunc=c}e.prototype.RemoveListener=function(){this.Owner.$$$_listeners.Remove(this),this.Owner.$$$_ownerTree.InvalidateCache()};return e}(),r,f;i.DataSourceListenerItem=u,r=function(){function l(a,v){this.$$$_ownerTree=a,this.$$$_fullPath=v,this.$$$_listeners=[]}l.prototype.AddListener=function(y){this.$$$_listeners.push(y)};return l}(),f=function(){function p(){this.itemsCache={}}p.prototype.GetTreeNode=function(w){var d=this,b,g,k;if(n.Core.IsDebugDefined,this.rootNode||(this.rootNode=new r(this,"@")),!w)throw new Error("GetTreeNode(path) requires an argument");if(w=="@"||w=="@.")return this.rootNode;b=n.DataBinder.GetValue(this.rootNode,w),b||(g=this.rootNode,k=[],w.split(".").ForEach(function(nt){k.push(nt);var tt=k.join(".");b=n.DataBinder.GetValue(g,tt),b||(b=new r(d,tt),n.DataBinder.SetValue(d.rootNode,tt,b))}));return b},p.prototype.AddListener=function(it,rt,ut){if(!it||it.length==0)throw new Error("AddListener(...) requires an argument");var ft=this.GetTreeNode(it),et=new u(ft,rt,ft.$$$_fullPath,ut);ft.AddListener(et),this.InvalidateCache();return et},p.prototype.GetListeners=function(ot,st){var ct=this,ht=ot&&ot.$$$_listeners?ot.$$$_listeners.slice(0):[];ot&&st&&n.Collections.ForEachOwnProperties(ot,function(lt){if(lt.indexOf("$$$_")!=0){var at=ct.GetListeners(ot[lt],st);at&&ht.AddRange(at)}});return ht},p.prototype.GetListenersAndDescendants=function(vt){if(!vt||vt.length==0)throw new Error("GetDescendantListeners(...) requires an argument");var yt=this.GetFromCache(vt);if(yt){n.Core.IsDebugDefined;return yt}yt=this.GetListeners(this.GetTreeNode(vt),true),this.AddToCache(vt,yt);return yt},p.prototype.InvalidateCache=function(){n.Core.IsDebugDefined,this.itemsCache={}},p.prototype.AddToCache=function(pt,wt){n.Core.IsDebugDefined,this.itemsCache[pt+""]=wt},p.prototype.GetFromCache=function(bt){return this.itemsCache[bt+""]};return p}(),i.BindingDictionaryTree=f})(t=n.Binding||(n.Binding={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r=function(){function u(f){this.Element=f,this._pathCache={}}u.GetInstance=function(e){return e.$$observable_PathResolver||(e.$$observable_PathResolver=new u(e))},u.prototype.FindDataBinder=function(){if(this._binder)return this._binder;for(var o=this.Element;o;){if(o.$$observable_Binder)return this._binder=o.$$observable_Binder;o=o.parentNode}return this._binder},u.prototype.GetDataBinder=function(){var s=this.FindDataBinder();if(s)return s;throw new Error("Data binder not found");},u.prototype.ResolveAbsolutePath=function(h){var l=h.split("."),c,a;for(l[0]=="DataItem"&&l.shift(),c=this.Element;c;){if(c.$$observable_DataPath&&(a=c.$$observable_DataPath.split("."),l.unshift.apply(l,__spread(a))),l[0]=="@")return l;if(c.$$observable_Binder)break;else c=c.parentNode}throw new Error("Data path can not be resolved for: "+h);},u.prototype.CreateAbsoluteDataPath=function(v){var y=this._pathCache[v],p,w;if(y)return y;if(v&&v.charAt(0)=="@"){this._pathCache[v]=v;return v}p=this.ResolveAbsolutePath(v),w=p.join(".");return this._pathCache[v]=w};return u}();i.BindingElementPathResolver=r})(t=n.Binding||(n.Binding={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r=function(u){function f(){var e=u.call(this)||this;e._cachedDataSourceTypes={},e._recursions=0;return e}__extends(f,u),f.prototype.WriteLog=function(o,s){n.Core.IsDebugDefined&&(o.$$observable_Log||(o.$$observable_Log=[]),o.$$observable_Log.push(s))},f.prototype.SetElementValue=function(h,c,l){var w,b,k,v,a,p,y;if(this.WriteLog(h,"SetElementValue("+c+", "+l+")"),c=="options"&&h.tagName.toLowerCase()=="select"){h.innerHTML="",k=l;try{for(v=__values(k.ToArray()),a=v.next();!a.done;a=v.next())p=a.value,y=document.createElement("option"),y.innerHTML=p.Text,y.value=n.Type.TypeConverter.ToStringFormated(p.Value,h.getAttribute(n.AttrName.CalystoFormat)),h.appendChild(y),y.selected=!!p.Selected}catch(d){w={error:d}}finally{try{a&&!a.done&&(b=v.return)&&b.call(v)}finally{if(w)throw w.error;}}}else c=="enabled"||c=="disabled"?!l&&c=="enabled"||l&&c=="disabled"?(h.setAttribute("disabled","disabled"),h.disabled=true):(h.removeAttribute("disabled"),h.disabled=false):c=="visible"?h.style.display=l?"":"none":c=="invisible"?h.style.display=l?"none":"":c=="innerHTML"||c=="value"?(n.Type.TypeInspector.IsNullOrUndefined(l)?l="":typeof l!="string"&&(l=n.Type.TypeConverter.ToStringFormated(l)),h[c]=l):n.DataBinder.SetValue(h,c,l)},f.prototype.RemoveElementAndListeners=function(g){n.Event.Detach(g),n.Utility.Dom.RemoveNodeFromDom(g),g.$$observable_DataSourceListeners&&g.$$observable_DataSourceListeners.ForEach(function(nt){return nt.RemoveListener()})},f.prototype.CloneNodeSafe=function(tt){var it=tt.cloneNode(true);it.style.display="none";return it},f.prototype.BindDataToRepeater=function(rt,ut,ft){var kt,ti,dt,ii,bt,ri,fi=this,ot,ui,ct,et,st,gt,yt,lt,pt,at,ht,wt,vt,ni;if(rt.$$observable_DataPath=ut,this.WriteLog(rt,"BindDataToRepeater("+ut+", "+ft+")"),ot=i.BindingCache.GetRepeaterSetting(rt),ft&&ft.ToArray&&(ft=ft.ToArray()),ui=ft&&ft.length?ft.length:0,rt.style.minHeight=rt.offsetHeight+"px",$$calysto(rt).DescendantNodes().ToArray().ForEach(function(hi){return fi.RemoveElementAndListeners(hi)}),rt.innerHTML="",ct=[rt],ui>0){for(et=void 0,ot.header&&(rt.appendChild(et=this.CloneNodeSafe(ot.header)),et.$$observable_DataPath=ut,ct.push(et)),st=0;st<ft.length;st++)ht=ft[st],ot.separator&&st>0&&(rt.appendChild(et=this.CloneNodeSafe(ot.separator)),et.$$observable_DataPath=ut+"."+st,et.$$observable_ItemIndex=st,ct.push(et)),ot.alternating&&st%2==1?(rt.appendChild(et=this.CloneNodeSafe(ot.alternating)),et.$$observable_DataPath=ut+"."+st,et.$$observable_ItemIndex=st,ct.push(et)):ot.item&&(rt.appendChild(et=this.CloneNodeSafe(ot.item)),et.$$observable_DataPath=ut+"."+st,et.$$observable_ItemIndex=st,ct.push(et));ot.footer&&(rt.appendChild(et=this.CloneNodeSafe(ot.footer)),et.$$observable_DataPath=ut,ct.push(et))}else ot.nodata&&(et=void 0,rt.appendChild(et=this.CloneNodeSafe(ot.nodata)),et.$$observable_DataPath=ut,ct.push(et));gt=$$calysto(rt).Query("//["+i.Attributes.Uid+"]").ToArray();try{for(yt=__values(gt),lt=yt.next();!lt.done;lt=yt.next())ht=lt.value,this.WriteLog(ht,"Inside repeater, init listeners"),this.CreateViewListeners(ht),this.CreateDataListeners(ht)}catch(ei){kt={error:ei}}finally{try{lt&&!lt.done&&(ti=yt.return)&&ti.call(yt)}finally{if(kt)throw kt.error;}}try{for(pt=__values(gt),at=pt.next();!at.done;at=pt.next())if(ht=at.value,ht!=rt&&ht.$$observable_DataSourceListeners&&ht.$$observable_DataSourceListeners.Any())try{for(wt=(bt=void 0,__values(ht.$$observable_DataSourceListeners)),vt=wt.next();!vt.done;vt=wt.next())ni=vt.value,ni.CallbackFunc(ni.FullPath)}catch(oi){bt={error:oi}}finally{try{vt&&!vt.done&&(ri=wt.return)&&ri.call(wt)}finally{if(bt)throw bt.error;}}}catch(si){dt={error:si}}finally{try{at&&!at.done&&(ii=pt.return)&&ii.call(pt)}finally{if(dt)throw dt.error;}}ct.ForEach(function(ci){return ci.style.display=""}),rt.style.minHeight=""},f.prototype.GetUpperPath=function(li){var ai=li.split(".").ToArray();ai.RemoveAt(ai.length-1);return ai.join(".")},f.prototype.ResolveHandlerFunction=function(vi,yi){var ki,pi,di,wi,bi,gi;if(typeof vi=="function")return{Func:vi};if(vi.Contains("=>"))return{Func:n.Utility.Expressions.CompileLambdaExpression(vi)};for(ki=yi.CreateAbsoluteDataPath(vi),pi=ki.split(".");(di=pi.join("."))&&!n.Type.TypeInspector.IsFunction(wi=this.GetValue(di));)wi=null,pi.length>1?pi.splice(pi.length-2,1):pi.length>0&&pi.splice(0,1);if(!wi&&(bi=n.DataBinder.GetValue(window,vi),bi)){if(n.Type.TypeInspector.IsFunction(bi))return{Func:bi};throw new Error("Handler path is not function: "+vi);}if(!wi)throw new Error("Function is expected at "+ki+", but found: "+wi);gi=this.GetValue(this.GetUpperPath(di));return{Func:wi,HandlerContext:gi}},f.prototype.CreateHtmlEventContext=function(nr,tr,ir,rr,ur){return{Binder:this,Element:tr,DataSource:this.GetDataSource(),DataPath:ur,HandlerContext:nr,ListeningEventsNames:ir,Event:rr}},f.prototype.CreateViewListeners=function(fr){var er=this,sr,hr,or,cr;fr.$$observable_hasHtmlListenersAttached||(fr.$$observable_hasHtmlListenersAttached=true,fr.$$observable_Uid||(fr.$$observable_Uid=i.BindingCache.GetElementUid(fr)),sr=i.BindingElementPathResolver.GetInstance(fr),hr=fr.$$observable_ElementSetting=i.BindingCache.GetBindingElement(fr.$$observable_Uid).Settings,this.WriteLog(fr,"inside CreateHtmlListeners"),hr.ViewListeners&&hr.ViewListeners.ForEach(function(lr){er.WriteLog(fr,"Create HtmlListeners: "+lr.EventNames+", jsHandler: "+lr.JsHandler);var ar=er.ResolveHandlerFunction(lr.JsHandler,sr),vr=sr.CreateAbsoluteDataPath("DataItem");$$calysto(fr).On(lr.EventNames,function(yr,pr){return ar.Func(er.CreateHtmlEventContext(ar.HandlerContext,fr,lr.EventNames,pr,vr))})}),or=fr.tagName.toLowerCase(),cr=or=="input"||or=="select"||or=="textarea",hr.Bindings&&cr&&hr.Bindings.ForEach(function(wr){var br=sr.CreateAbsoluteDataPath(wr.DataSourcePath),kr=wr.EventNames,dr;kr&&kr.length!=0||(kr=fr.type=="checkbox"||fr.type=="radio"?["change"]:["change"]),er.WriteLog(fr,"Create Binding DomListeners: "+kr),wr.JsGetConvert&&(dr=er.ResolveHandlerFunction(wr.JsGetConvert,sr)),$$calysto(fr).On(kr,function(gr,nu){var tu=undefined,iu=false,ou,ru,fu,uu,eu;if(or=="select"&&wr.ElementPath=="options"){ou=er.GetValue(br),[].AddRange(gr.options).ForEach(function(su,hu){n.DataBinder.SetValue(ou,hu+".Selected",!!su.selected)}),er.NotifyPropertyChanged(br);return}if(or=="input"&&wr.ElementPath=="checked"){if(fr.name&&(fr.type=="radio"||fr.type=="checkbox")&&(ru=er.GetUpperPath(br),fu=er.GetValue(ru),n.Type.TypeInspector.IsArray(fu)||(ru=er.GetUpperPath(ru),fu=er.GetValue(ru)),n.Type.TypeInspector.IsArray(fu))){fr.type=="radio"?fu.ForEach(function(cu){return cu[wr.DataSourcePath]=false}):fr.type=="checkbox",er.SetValueSilent(br,fr.checked),er.NotifyPropertyChanged(ru);return}tu=fr[wr.ElementPath],iu=true}else if(wr.ElementPath=="enabled")tu=!fr.disabled,iu=true;else if(wr.ElementPath=="disabled")tu=!!fr.disabled,iu=true;else if(wr.ElementPath=="visible")tu=$$calysto(fr).WhereVisible(true).Any(),iu=true;else if(wr.ElementPath=="invisible")tu=!$$calysto(fr).WhereVisible(true).Any(),iu=true;else if(wr.ElementPath=="value")tu=fr[wr.ElementPath],iu=true;else throw new Error("Not supported: "+wr.ElementPath);iu&&(wr.JsGetConvert?tu=dr.Func(er.CreateHtmlEventContext(dr.HandlerContext,fr,kr||[],nu,br),tu):(uu=er._cachedDataSourceTypes[br],uu||(eu=er.GetValue(br),n.Type.TypeInspector.IsNullOrUndefined(eu)||(uu=n.Type.TypeDescriptor.FromValue(eu),er._cachedDataSourceTypes[br]=uu)),uu&&(tu=n.Type.TypeConverter.ChangeType(tu,uu))),er.SetValue(br,tu))})}))},f.prototype.CreateDataSourceContext=function(lu,au,vu,yu,pu){return{Binder:this,Element:au,DataSource:this.GetDataSource(),DataPath:yu,HandlerContext:lu,ListeningDataPaths:vu,Values:pu}},f.prototype.GetDataSourceValue=function(wu,bu){if(bu.EndsWith("ItemIndex")){for(var ku=wu;ku&&ku!=document;){if(ku.$$observable_ItemIndex==0||ku.$$observable_ItemIndex>0)return ku.$$observable_ItemIndex;ku=ku.parentNode}throw new Error("ItemIndex not found");}return u.prototype.GetValue.call(this,bu)},f.prototype.CreateDataListeners=function(du){var gu=this,rf,nf,tf;du.$$observable_hasDataListenersAttached||(du.$$observable_hasDataListenersAttached=true,du.$$observable_Uid||(du.$$observable_Uid=i.BindingCache.GetElementUid(du)),du.$$observable_DataSourceListeners||(du.$$observable_DataSourceListeners=[]),rf=du.$$observable_DataSourceListeners,nf=du.$$observable_ElementSetting=i.BindingCache.GetBindingElement(du.$$observable_Uid).Settings,this.WriteLog(du,"inside CreateDataSourceListeners"),tf=i.BindingElementPathResolver.GetInstance(du),nf.Sources&&nf.Sources.ForEach(function(uf){du.$$observable_DataPath=uf.DataSourcePath}),nf.DataListeners&&nf.DataListeners.ForEach(function(ff){var ef=ff.DataSourcePaths.Select(function(of){return tf.CreateAbsoluteDataPath(of)});ef.ForEach(function(sf){gu.WriteLog(du,"Create DataListener: "+sf);var hf=gu.ResolveHandlerFunction(ff.JsHandler,tf);rf.Add(gu.dsListeners.AddListener(sf,du,function(cf){if(!n.Utility.Dom.IsElementInDom(du)){gu.RemoveElementAndListeners(du);return}var lf=ef.Select(function(af){return gu.GetDataSourceValue(du,af)});return hf.Func.apply(hf,__spread([gu.CreateDataSourceContext(hf.HandlerContext,du,ef,cf,lf)],lf))}))})}),nf.Bindings&&nf.Bindings.ForEach(function(vf){var yf=tf.CreateAbsoluteDataPath(vf.DataSourcePath),pf;gu.WriteLog(du,"Create Binding DataSourceListener: "+yf),vf.JsSetConvert&&(pf=gu.ResolveHandlerFunction(vf.JsSetConvert,tf)),rf.Add(gu.dsListeners.AddListener(yf,du,function(wf){if(!n.Utility.Dom.IsElementInDom(du)){gu.RemoveElementAndListeners(du);return}var bf=gu.GetDataSourceValue(du,yf);vf.JsSetConvert&&(bf=pf.Func(gu.CreateDataSourceContext(pf.HandlerContext,du,[yf],wf,[bf]),bf)),gu.SetElementValue(du,vf.ElementPath,bf)}))}),nf.Repeaters&&nf.Repeaters.ForEach(function(kf){var df=tf.CreateAbsoluteDataPath(kf.DataSourcePath);gu.WriteLog(du,"Create Repeater DataSourceListener: "+df),rf.Add(gu.dsListeners.AddListener(df,du,function(){if(!n.Utility.Dom.IsElementInDom(du)){gu.RemoveElementAndListeners(du);return}var gf=gu.GetDataSourceValue(du,df);gu.BindDataToRepeater(du,df,gf)}))}))},f.prototype.EnsureRootElement=function(){var re,ee,ue,ie,oe,te,ne,fe;if(!this._rootElement){if(!this._rootSelector)throw new Error("Root selector not defined.");if(ie=$$calysto(this._rootSelector).Take(2).ToList(),ie.Count()>1)throw new Error("DataBind selector selects "+ie.Count()+" elements");if(this._rootElement=ie.FirstOrDefault(),!this._rootElement)throw new Error("DataBind root element not found: "+this._rootElement);this._rootElement.$$observable_Binder=this,this._rootElement.$$observable_DataPath="@",i.BindingCache.InitializeBindings(this._rootElement,(ue=this._factory)===null||ue===void 0?void 0:ue.GetSetup()),oe=$$calysto(this._rootElement).Query("*, //*").Query("["+n.Binding.Attributes.Uid+"=*]").Cast().ToArray();try{for(te=__values(oe),ne=te.next();!ne.done;ne=te.next())fe=ne.value,this.CreateDataListeners(fe),this.CreateViewListeners(fe)}catch(se){re={error:se}}finally{try{ne&&!ne.done&&(ee=te.return)&&ee.call(te)}finally{if(re)throw re.error;}}}},f.prototype.NotifyPropertyChanged=function(he){if(!he||he.length==0)throw new Error("NotifyPropertyChanged(...) requires an argument");if(this._recursions++,Math.abs(this._recursions)>100)throw Error("NotifyPropertyChanged recursion overflow");this.EnsureRootElement(),u.prototype.NotifyPropertyChanged.call(this,he),this._recursions--;return this},f.prototype.SetRootElement=function(ce){this._rootSelector=ce;return this},f.prototype.SetFactory=function(le){this._factory=le;var ae=le.GetRoot();ae&&(this._rootSelector="["+i.Attributes.Uid+"="+le.GetRoot()+"]");return this},f.prototype.DataBind=function(){this.NotifyPropertyChanged("@");return this};return f}(i.BindingDataSource);i.BindingObservable=r})(t=n.Binding||(n.Binding={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r=function(){function u(f){this._path=f}u.prototype.ToAppRelativeUrlPath=function(){var e;return(e=this._appRelative)!==null&&e!==void 0?e:this._appRelative=u.CreateAppRelativePath(this._path)},u.prototype.ToVirtualUrlPath=function(){var o;return(o=this._virtualPath)!==null&&o!==void 0?o:this._virtualPath=u.CombineToVirtualPath([u.GetBasePath(),this.ToAppRelativeUrlPath()])},u.CreateAppRelativePath=function(s){var h=s,l,c;if((l=s.lastIndexOf("/~/"))>=0&&(h=s.Substring(l+1)),h.StartsWith("~/"))return h;c=u.GetBasePath(),s.StartsWith(c,true)&&(h=s.Substring(c.length));return h.StartsWith("~/")?h:h.StartsWith("/")?"~"+h:"~/"+h},u.CombineToVirtualPath=function(a){var v=a.join("/").ReplaceAll("~/","/").ReplaceAll("\\","/").TrimEnd(["/"]);(String.IsNullOrEmpty(v)||v=="~")&&(v+="/");return v.replace(new RegExp("[/]{2,}","g"),"/")},u.GetBasePath=function(){var y=n.Core.Constants.UrlPathBase||"";return y=="/"?"":y.EndsWith("/")?y.TrimEnd(["/"]):y};return u}();i.CalystoVirtualPathHelper=r})(t=n.Web||(n.Web={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){function f(p,w){var b=[],k=$$calysto(p).SelectAttributesAll().First();for(var d in k)switch(d){case"data-val-required":b.push(new e(k[d]));break;case"data-val-email":b.push(new o(k[d]));break;case"data-val-length":b.push(new s(k[d],parseInt(p.getAttribute("data-val-length-min")),parseInt(p.getAttribute("data-val-length-max"))));break;case"data-val-regex":b.push(new h(k[d],p.getAttribute("data-val-regex-pattern")));break;case"data-val-range":b.push(new c(k[d],parseFloat(p.getAttribute("data-val-range-min")),parseFloat(p.getAttribute("data-val-range-max"))));break;case"data-val-minlength":b.push(new l(k[d],parseFloat(p.getAttribute("data-val-minlength-min"))));break;case"data-val-maxlength":b.push(new a(k[d],parseFloat(p.getAttribute("data-val-maxlength-max"))));break;case"data-val-fileextensions":b.push(new v(k[d],p.getAttribute("data-val-fileextensions-extensions")));break;case"data-val-equalto":b.push(new y(k[d],p.getAttribute("data-val-equalto-other"),w))}return b}u.GetValidators=f;var e=function(){function g(nt){this.ErrorText=nt}g.prototype.IsValid=function(tt){return!n.Type.TypeInspector.IsNullOrUndefined(tt)&&!String.IsNullOrWhiteSpace(tt+"")};return g}(),o=function(){function it(rt){this.ErrorText=rt}it.prototype.IsValid=function(ut){if(n.Type.TypeInspector.IsNullOrUndefined(ut))return true;var ft=ut+"";return new RegExp("[^@]+[@][^@]+").test(ft)};return it}(),s=function(){function et(ot,st,ht){this.ErrorText=ot,this.MinimumLength=st,this.MaximumLength=ht}et.prototype.IsValid=function(ct){if(n.Type.TypeInspector.IsNullOrUndefined(ct))return true;var lt=ct+"";return lt.length>=(this.MinimumLength||0)&&lt.length<=(this.MaximumLength||Number.MAX_VALUE)};return et}(),h=function(){function at(vt,yt){this.ErrorText=vt,this.RegexPattern=yt}at.prototype.IsValid=function(pt){if(n.Type.TypeInspector.IsNullOrUndefined(pt))return true;var wt=pt+"";return String.IsNullOrEmpty(wt)?true:new RegExp(this.RegexPattern).test(wt)};return at}(),c=function(){function bt(kt,dt,gt){this.ErrorText=kt,this.Minimum=dt,this.Maximum=gt}bt.prototype.IsValid=function(ni){if(n.Type.TypeInspector.IsNullOrUndefined(ni))return true;var ti=parseFloat(ni+"");return n.Type.TypeInspector.IsNumber(ti)?ti>=(this.Minimum||Number.MIN_VALUE)&&ti<=(this.Maximum||Number.MAX_VALUE):false};return bt}(),l=function(){function ii(ri,ui){this.ErrorText=ri,this.Length=ui}ii.prototype.IsValid=function(fi){if(n.Type.TypeInspector.IsNullOrUndefined(fi))return true;var ei=fi+"";return ei.length>=(this.Length||0)};return ii}(),a=function(){function oi(si,hi){this.ErrorText=si,this.Length=hi}oi.prototype.IsValid=function(ci){if(n.Type.TypeInspector.IsNullOrUndefined(ci))return true;var li=ci+"";return li.length<=(this.Length||Number.MAX_VALUE)};return oi}(),v=function(){function ai(vi,yi){this.ErrorText=vi,this.Extensions=yi}ai.prototype.IsValid=function(pi){var bi,wi,ki;if(n.Type.TypeInspector.IsNullOrUndefined(pi))return true;if(bi=pi+"",wi=bi.match(new RegExp("[\\w]+$")),wi&&wi[0]){ki=wi[0];return(","+this.Extensions+",").Contains(","+ki+",")}return false};return ai}(),y=function(){function di(gi,nr,tr){this.ErrorText=gi,this.OtherProperty=nr,this.Context=tr}di.prototype.IsValid=function(ir){var ur,fr=this.OtherProperty.ReplaceAll("*",""),rr,er;for(rr in this.Context.inputs)if(rr==fr||fr.charAt(0)=="."&&rr.EndsWith(fr)){er=(ur=this.Context.inputs[rr])===null||ur===void 0?void 0:ur.value;return n.Type.TypeInspector.AreValuesEqual(ir,er)}return false};return di}()})(r=i.Validators||(i.Validators={}))})(t=n.DataAnnotations||(n.DataAnnotations={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){function s(w){w.$$validationContainer||(w.$$validationContainer=w.tagName.toLowerCase()=="form"?w:$$calysto(w).AncestorNodes("form").First());return w.$$validationContainer}function h(b){var k=s(b);return u(k)}function u(d){var g=$$calysto(d).First(),nt=c(g);return new o(nt)}function c(tt){var rt=tt.$$validationGuid||(tt.$$validationGuid=n.Utility.Generators.GenerateLabel(20)),it=r[rt]||(r[rt]={});it.form=tt,it.errors=it.errors||[],it.inputsArr=$$calysto(tt).Query("//[data-val=true][name]").ToArray(),it.inputs=$$calysto(it.inputsArr).ToRawObject(function(ut){return ut.name}),it.spans=$$calysto("[data-valmsg-for]").ToRawObject(function(ft){return ft.getAttribute("data-valmsg-for")},function(et){return et}),it.summary=$$calysto("[data-valmsg-summary]").ToArray();return it}function l(ot){$$calysto(ot.inputsArr).Where(function(st){return!st.$$validationInitialized}).ForEach(function(ht){return ht.$$validationInitialized=true}).ForEach(function(ct){return ct.$$validationContext=ot}).OnInput(function(lt){ot.isInteractive&&(n.Core.IsDebugDefined,f(ot,lt),e(ot))})}function f(at,vt){var wt,kt,dt,gt,pt,yt,bt;n.Core.IsDebugDefined,at.errors.RemoveBy(function(ti){return ti.FormsNamePath==vt.name}),dt=vt.value===""?null:vt.value,gt=vt.$$validationValidators||(vt.$$validationValidators=i.Validators.GetValidators(vt,at).Reverse());try{for(pt=__values(gt),yt=pt.next();!yt.done;yt=pt.next())bt=yt.value,bt.IsValid(dt)||at.errors.Add({FormsNamePath:vt.name,ErrorText:bt.ErrorText})}catch(ni){wt={error:ni}}finally{try{yt&&!yt.done&&(kt=pt.return)&&kt.call(pt)}finally{if(wt)throw wt.error;}}n.Core.IsDebugDefined}function e(ii){var fi,si,ei=new n.Web.UI.Direct.CalystoMvcModelState,ui,ri,oi;ei.RootSelector=ii.form;try{for(ui=__values(ii.errors),ri=ui.next();!ri.done;ri=ui.next())oi=ri.value,ei.Errors.push(new n.KeyValue(oi.FormsNamePath,oi.ErrorText))}catch(hi){fi={error:hi}}finally{try{ri&&!ri.done&&(si=ui.return)&&si.call(ui)}finally{if(fi)throw fi.error;}}ei.Render()}var o=function(){function a(v){this.Context=v}a.prototype.Validate=function(){this.Context.errors.Clear();for(var y in this.Context.inputs)f(this.Context,this.Context.inputs[y]);return this},a.prototype.Render=function(){e(this.Context);return this},a.prototype.HasErrors=function(){return this.Context.errors.Any()},a.prototype.Interactive=function(p){this.Context.isInteractive=!!p,p&&l(this.Context);return this};return a}(),r;i.FindValidationService=h,i.UseValidationService=u,r={}})(t=n.DataAnnotations||(n.DataAnnotations={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){function o(){if(!e){e=true;var a=new n.Web.CalystoVirtualPathHelper("~/Engine/Src/Core/WebControls/Table/Table.css?v="+n.Core.Constants.ModuleVersion).ToVirtualUrlPath();n.ScriptLoader.LoadCSSFile(a)}}function s(y){o(),$$calysto(y).AddClass("calystoSortableTable").Where(function(p){return!p.$$tableIsSortable}).ForEach(function(w){w.$$tableIsSortable=true,h(w)})}function h(b){var k=$$calysto(b).Query("table tr:take(1)").Query(">td, >th").ForEach(function(d,g){return d.$$columnIndex=g}).ToArray();k.AsEnumerable().AsDomQuery().OnHover(function(nt){nt.style.cursor="pointer",nt.style.textDecoration="underline"},function(tt){tt.style.cursor="",tt.style.textDecoration=""}).OnClick(function(it){l(it,b,k)})}function c(rt){switch(rt){case f.Asc:return"sortasc";case f.Desc:return"sortdesc";default:return""}}function l(ut,ft,et){(ut.$$sortDirection||f.None)==f.None&&(ft.$$unsortedRows?ft.$$unsortedRows.ForEach(function(lt){var at;if((at=lt.parentNode)!==null&&at!==void 0)return at.appendChild(lt)}):ft.$$unsortedRows=$$calysto(ft).Query("table tr:skip(1)").ToArray()),ut.$$sortDirection=((ut.$$sortDirection||f.None)+1)%3,et.Where(function(vt){return vt!=ut}).ForEach(function(yt){return yt.$$sortDirection=f.None}),$$calysto(et).RemoveClass("sortasc").RemoveClass("sortdesc").Where(function(pt){return pt==ut}).ForEach(function(wt){return wt.className+=" "+c(wt.$$sortDirection)});var ot=$$calysto(ft).Query("table tr:skip(1)").Select(function(bt){var gt=$$calysto(bt).ChildNodes("td").Where(function(ii,ri){return ri==ut.$$columnIndex}).Select(function(ui){return n.Utility.Dom.GetInnerText(ui)}).FirstOrDefault(),kt=(gt||"").ReplaceAll(",",".").ReplaceAll(" ","").ReplaceAll(" ",""),dt=parseFloat(kt),ti=gt.toLowerCase(),ni=kt==""||kt==" "||kt==dt+""||kt.indexOf(dt+"")==0;return{tr:bt,str:ti,num:isNaN(dt)||ni&&isNaN(dt)?Number.MIN_VALUE:dt,isNum:ni}}).ToList().AsDomQuery(),ht=ot.All(function(fi){return fi.isNum}),st,ct=ut.$$sortDirection==f.Desc;st=(ut.$$sortDirection||0)==f.None?ft.$$unsortedRows:ot.OrderBy(function(ei){return ht?ei.num:ei.str},ct).Select(function(oi){return oi.tr}).ToArray(),st.ForEach(function(si){var hi;if((hi=si.parentNode)!==null&&hi!==void 0)return hi.appendChild(si)})}var e=false,f;(function(v){v[v.None=0]="None",v[v.Desc=1]="Desc",v[v.Asc=2]="Asc"})(f||(f={})),u.MakeSortable=s})(r=i.CalystoTable||(i.CalystoTable={}))})(t=n.WebControls||(n.WebControls={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){var f;(function(e){function h(l){switch(l){case"Message":return"black";case"Error":return"red";case"Warning":return"orange";case"Success":return"green";case"Info":return"blue";default:return"black"}}var s,o;(function(c){c[c.Message=0]="Message",c[c.Error=1]="Error",c[c.Warning=2]="Warning",c[c.Success=3]="Success",c[c.Info=4]="Info"})(s=e.Kind||(e.Kind={})),o=function(){function a(){this._messages=[]}a.prototype.AddMessage=function(v,y){this._messages.Add(new n.KeyValue(v,y));return this},a.prototype.GetMessagesTags=function(){var p=this,w=function(){var k,b,d,g,tt,nt,it;return __generator(this,function(rt){switch(rt.label){case 0:rt.trys.push([0,5,6,7]),k=__values(p._messages),b=k.next(),rt.label=1;case 1:if(!!b.done)return[3,4];d=b.value,g=h(d.Key);return[4,'<div class="calysto-html-builder-message-'+g+'" style="color:'+g+'">'+n.Utility.Html.HtmlEncode(d.Value)+"<\/div>"];case 2:rt.sent(),rt.label=3;case 3:b=k.next();return[3,1];case 4:return[3,7];case 5:tt=rt.sent(),nt={error:tt};return[3,7];case 6:try{b&&!b.done&&(it=k.return)&&it.call(k)}finally{if(nt)throw nt.error;}return[7];case 7:return[2]}})};return new n.CalystoEnumerable(function(){return n.CalystoEnumerator.From(w)})},a.prototype.GetHtmlElements=function(){return this.GetMessagesTags()},a.prototype.HasElements=function(){return this.GetHtmlElements().Any()},a.prototype.ToHtml=function(){return this.GetHtmlElements().ToStringJoined()};return a}(),e.CalystoHtmlBuilder=o})(f=u.Direct||(u.Direct={}))})(r=i.UI||(i.UI={}))})(t=n.Web||(n.Web={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){var f;(function(e){var o=function(){function s(h,c,l,a){this.Errors=[],this.Values=[],this.Raw=h||{},c&&(this.RootSelector=c),l&&(this.Errors=l),a&&(this.Values=a)}s.prototype.AddError=function(v,y){this.Errors.push(new n.KeyValue(n.Utility.Expressions.ParsePath(v),y))},s.prototype.SetValue=function(p,w){var b=n.Utility.Expressions.ParsePath(p),k=this.Values.Where(function(d){return d.Key==b}).pop();k?k.Value=w:this.Values.push(new n.KeyValue(b,w+"")),n.DataBinder.SetValue(this.Raw,b,w)},s.prototype.Query=function(g){var nt=n.Utility.Expressions.ParsePath(g);return $$calysto("[name="+nt+"]")},s.prototype.UseDirectQuery=function(tt,it){var rt;rt=this.RootSelector?$$calysto(this.RootSelector).Query("*, //*").Query(tt):$$calysto(tt),it(rt);return this},s.prototype.ClearErrors=function(){this.UseDirectQuery("input[name], textarea[name], select[name]",function(ut){return ut.RemoveClass("input-validation-error")}).UseDirectQuery("span[data-valmsg-for]",function(ft){return ft.SetInnerHtml(null).RemoveClass("field-validation-error").AddClass("field-validation-valid")}).UseDirectQuery("div[data-valmsg-summary]",function(et){return et.SetInnerHtml(null).RemoveClass("validation-summary-errors").AddClass("validation-summary-valid")})},s.prototype.RenderErrors=function(){var ot=this,st;this.Errors.AsEnumerable().GroupBy(function(ht){return ht.Key}).ToList().ForEach(function(ct){ot.UseDirectQuery("[name="+ct.Key+"]",function(lt){return lt.AddClass("input-validation-error")}),ot.UseDirectQuery("[data-valmsg-for="+ct.Key+"]",function(at){return at.AddClass("field-validation-error").AddChildren(ct.Select(function(vt){return"<span>"+n.Utility.Html.HtmlEncodeSimple(vt.Value)+"<\/span>"}).ToStringJoined("<br/>"))})}),this.Errors.Any()&&(st=this.Errors.Select(function(yt){return"<li>"+n.Utility.Html.HtmlEncodeSimple(yt.Value)+"<\/li>"}).ToStringJoined(),this.UseDirectQuery("div[data-valmsg-summary]",function(pt){return pt.AddChildren("<ul>"+st+"<\/ul>").RemoveClass("validation-summary-valid").AddClass("validation-summary-errors")}))},s.prototype.RenderValues=function(){var kt,dt,ni=function(ri){ti.UseDirectQuery("[name="+ri.Key+"]",function(ui){return ui.SetValueOrInnerHtml(ri.Value)})},ti=this,bt,wt,gt;try{for(bt=__values(this.Values),wt=bt.next();!wt.done;wt=bt.next())gt=wt.value,ni(gt)}catch(ii){kt={error:ii}}finally{try{wt&&!wt.done&&(dt=bt.return)&&dt.call(bt)}finally{if(kt)throw kt.error;}}},s.prototype.Render=function(){this.ClearErrors(),this.RenderErrors(),this.RenderValues()};return s}();e.CalystoMvcModelState=o})(f=u.Direct||(u.Direct={}))})(r=i.UI||(i.UI={}))})(t=n.Web||(n.Web={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){function u(){if(!r){r=true;var o=new n.Web.CalystoVirtualPathHelper("~/Engine/Src/Core/WebControls/Scroller/Scroller.css?v="+n.Core.Constants.ModuleVersion).ToVirtualUrlPath();n.ScriptLoader.LoadCSSFile(o)}}var r=false,f='<div class="calystoScrollerCtrl calystoScrollerY">\n\t\t\t<div class="calystoScrollerMarker"><\/div>\n\t\t<\/div>\n\t\t<div class="calystoScrollerCtrl calystoScrollerX">\n\t\t\t<div class="calystoScrollerMarker"><\/div>\n\t\t<\/div>',e=function(){function s(h){this.MinOpacity=10,this.MaxOpacity=100,this.firstInitDone=false,this.contentElWidth=-1,this.contentElHeight=-1,this.mainElWidth=-1,this.mainElHeight=-1,u(),this.mainEl=h}Object.defineProperty(s.prototype,"CurrentTop",{get:function(){return this._currentTop},set:function(c){this.SetScrollPosition(c,null)},enumerable:false,configurable:true}),Object.defineProperty(s.prototype,"CurrentLeft",{get:function(){return this._currentLeft},set:function(l){this.SetScrollPosition(null,l)},enumerable:false,configurable:true}),s.prototype.ScrollersAdjustContent=function(a,v){var y=-1*(a/this.maxMarkerTop)*(this.contentEl.scrollHeight-this.mainEl.clientHeight),p=-1*(v/this.maxMarkerLeft)*(this.contentEl.scrollWidth-this.mainEl.clientWidth);return this.SetScrollPosition(y,p)},s.prototype.SetScrollPosition=function(w,b){var k,d;typeof w=="number"&&(this.minContentTop=this.mainEl.clientHeight-this.contentEl.scrollHeight,w>0&&(w=0),w<this.minContentTop&&(w=this.minContentTop),w=Math.round(w),this._currentTop=w,this.contentEl.style.marginTop=w+"px",k=-1*this.contentEl.offsetTop/this.contentEl.scrollHeight*this.vSliderEl.offsetHeight,this.vMarkerEl.style.top=Math.round(k)+"px"),typeof b=="number"&&(this.minContentLeft=this.mainEl.clientWidth-this.contentEl.scrollWidth,b>0&&(b=0),b<this.minContentLeft&&(b=this.minContentLeft),b=Math.round(b),this._currentLeft=b,this.contentEl.style.marginLeft=b+"px",d=-1*this.contentEl.offsetLeft/this.contentEl.scrollWidth*this.hSliderEl.offsetWidth,this.hMarkerEl.style.left=Math.round(d)+"px");return{endH:b==0||b==this.minContentLeft,endV:w==0||w==this.minContentTop}},s.prototype.WheelAdjustSliderX=function(g,nt){var tt,it;this.showHorizontal&&(nt=nt||{},tt=0,"deltaX"in nt?tt=nt.deltaX:"wheelDeltaX"in nt&&(tt=-nt.wheelDeltaX),nt.deltaMode==1&&(tt*=30),it=this.contentEl.offsetLeft-tt,this.SetScrollPosition(null,it))},s.prototype.WheelAdjustSliderY=function(rt,ut){var ft,et,ot;(this.showVertical||(ut===null||ut===void 0?void 0:ut.shiftKey))&&(ut=ut||{},ft=0,"deltaY"in ut?ft=ut.deltaY:"wheelDeltaY"in ut&&(ft=-ut.wheelDeltaY),ut.deltaMode==1&&(ft*=30),ut.shiftKey?(et=this.contentEl.offsetLeft-ft,this.SetScrollPosition(null,et)):(ot=this.contentEl.offsetTop-ft,this.SetScrollPosition(ot,null)))},s.prototype.WheelAdjustSliders=function(st,ht){this.WheelAdjustSliderX(st,ht),this.WheelAdjustSliderY(st,ht)},s.prototype.CreateAnimator=function(ct,lt,at){var vt=this,yt,pt;this.accelerationAbort=false,yt=0,pt=(new n.Animator).AddValue(0,lt/3,function(wt,bt){if(vt.accelerationAbort)wt.Abort();else{var kt={};kt[at?"deltaY":"deltaX"]=yt-bt,at?vt.WheelAdjustSliderY(ct,kt):vt.WheelAdjustSliderX(ct,kt),yt=bt}}).Easing("easeOutQuart").Duration(1e3).Start()},s.prototype.CalculateVelocity=function(dt,gt){var ri=(new Date).getTime(),ii=new n.List(gt).Reverse().Take(10).ToList(),ni=ii.FirstOrDefault(),ti=ii.LastOrDefault();return ni&&ti&&ni.ev&&ti.ev&&ni.time&&ti.time?{deltaX:ti.ev.pageX-ni.ev.pageX,deltaY:ti.ev.pageY-ni.ev.pageX,velocityX:(ti.ev.pageX-ni.ev.pageX)/(ti.time-ni.time)*1e3||0,velocityY:(ti.ev.pageY-ni.ev.pageY)/(ti.time-ni.time)*1e3||0,items:gt===null||gt===void 0?void 0:gt.length}:undefined},s.prototype.HandleAcceleration=function(ui,fi){var ei=this.CalculateVelocity(ui,fi);ei&&(this.showVertical&&ei.velocityY&&Math.abs(ei.deltaY||0)>10&&this.CreateAnimator(ui,ei.velocityY,true),this.showHorizontal&&ei.velocityX&&Math.abs(ei.deltaX||0)>10&&this.CreateAnimator(ui,ei.velocityX,false))},s.prototype.InitElements=function(){var oi,si,hi,ci,li,ai;this.firstInitDone||(this.firstInitDone=true,this.contentEl=$$calysto(this.mainEl).ApplyStyle("overflow:hidden;position:relative;").ChildNodes().Where(function(vi){return vi.nodeType==1}).First(),$$calysto(this.mainEl).AddChildren(f)),li=this.contentEl.scrollWidth,this.contentEl.style.width=li+"px",this.hSliderEl=$$calysto(this.mainEl).Query("//.calystoScrollerX").SetOpacity(0).ApplyStyle("display","block").First(),this.hMarkerEl=$$calysto(this.hSliderEl).Query("//.calystoScrollerMarker").First(),this.hAR=this.mainEl.clientWidth/li,this.showHorizontal=this.hAR<1,ai=this.contentEl.scrollHeight,this.contentEl.style.height=ai+"px",this.vSliderEl=$$calysto(this.mainEl).Query("//.calystoScrollerY").SetOpacity(0).ApplyStyle("display","block").First(),this.vMarkerEl=$$calysto(this.vSliderEl).Query("//.calystoScrollerMarker").First(),this.vAR=this.mainEl.clientHeight/ai,this.showVertical=this.vAR<1,$$calysto(this.vSliderEl).SetOpacity(this.MinOpacity).ApplyStyle("display",this.showVertical?"block":"none"),$$calysto(this.hSliderEl).SetOpacity(this.MinOpacity).ApplyStyle("display",this.showHorizontal?"block":"none"),this.hMarkerEl.style.width=Math.round(this.hSliderEl.offsetWidth*this.hAR)+"px",this.maxMarkerLeft=((si=(oi=this.hMarkerEl)===null||oi===void 0?void 0:oi.parentNode)===null||si===void 0?void 0:si.clientWidth)-this.hMarkerEl.offsetWidth,this.vMarkerEl.style.height=Math.round(this.vSliderEl.offsetHeight*this.vAR)+"px",this.maxMarkerTop=((ci=(hi=this.vMarkerEl)===null||hi===void 0?void 0:hi.parentNode)===null||ci===void 0?void 0:ci.clientHeight)-this.vMarkerEl.offsetHeight},s.prototype.CopyEvent=function(yi){return yi?{pageX:yi.pageX,pageY:yi.pageY,clientX:yi.clientX,clientY:yi.clientX}:null},s.prototype.InitializeEvents=function(){var pi=this;$$calysto([this.hMarkerEl,this.vMarkerEl]).On(["mousedown","touchstart"],function(gi){pi.markerDragging=gi});var wi,bi="None",ki=function(){bi!="Showing"&&(bi="Showing",wi===null||wi===void 0?void 0:wi.Abort(),wi=$$calysto([pi.hSliderEl,pi.vSliderEl]).ToAnimator({opacity:pi.MaxOpacity}).Start())},di=function(){bi!="Hiding"&&(bi="Hiding",wi===null||wi===void 0?void 0:wi.Abort(),wi=$$calysto([pi.hSliderEl,pi.vSliderEl]).ToAnimator({opacity:pi.MinOpacity}).Start())};$$calysto(this.mainEl).ForEach(function(nr){$$calysto([pi.hSliderEl,pi.vSliderEl]).SetOpacity(pi.MinOpacity),pi.WheelAdjustSliders(nr,null)}).On(["hover","mouseover","mousemove","wheel"],function(){ki()}).On(["hout"],function(){di()}).On(["scroll","mousewheel","wheel","DOMMouseScroll"],function(tr,ir){var rr=false;if(pi.showVertical&&(ir.type=="wheel"||ir.type=="mousewheel")?rr=true:pi.showHorizontal&&(ir===null||ir===void 0?void 0:ir.shiftKey)?rr=true:pi.showHorizontal&&(Math.abs(ir===null||ir===void 0?void 0:ir.deltaX)>0||Math.abs(ir===null||ir===void 0?void 0:ir.wheelDeltaX)>0)&&(rr=true),rr){pi.WheelAdjustSliders(tr,ir);return false}return true}).On(["mousedown","touchstart"],function(ur,fr){fr.type=="touchstart"&&(fr=fr.touches[0]),pi.moveStatistics=[],pi.accelerationAbort=true,pi.startCondition={event:pi.CopyEvent(fr),contentLeft:pi.contentEl.offsetLeft,contentTop:pi.contentEl.offsetTop,vMarkerTop:pi.vMarkerEl.offsetTop,hMarkerLeft:pi.hMarkerEl.offsetLeft}}),$$calysto(document).On(["mouseup","touchend"],function(){pi.moveStatistics&&!pi.markerDragging&&pi.HandleAcceleration(pi.mainEl,pi.moveStatistics),pi.moveStatistics=null,pi.markerDragging=null,pi.startCondition=null}),$$calysto([document,this.mainEl]).On(["mousemove","touchmove"],function(er,or){var hr,cr;if(!pi.startCondition)return true;if(or.type=="touchmove"&&(or=or.touches[0]),ki(),pi.moveStatistics.push({time:(new Date).getTime(),ev:pi.CopyEvent(or)}),pi.markerDragging==pi.hMarkerEl){hr=Math.round(pi.startCondition.hMarkerLeft-(pi.startCondition.event.pageX-or.pageX)),pi.ScrollersAdjustContent(null,hr);return false}if(pi.markerDragging==pi.vMarkerEl){cr=Math.round(pi.startCondition.vMarkerTop-(pi.startCondition.event.pageY-or.pageY)),pi.ScrollersAdjustContent(cr,null);return false}if(!pi.markerDragging){var lr=pi.startCondition.event.pageY-or.pageY,ar=pi.startCondition.event.pageX-or.pageX,cr=Math.round(pi.startCondition.contentTop-lr),hr=Math.round(pi.startCondition.contentLeft-ar),sr=pi.SetScrollPosition(cr,hr);return Math.abs(ar)>10&&(sr===null||sr===void 0?void 0:sr.endH)?true:Math.abs(lr)>10&&(sr===null||sr===void 0?void 0:sr.endV)?true:false}return true})},s.prototype.Start=function(){var vr=this,yr;this.InitElements(),this.InitializeEvents(),yr=setInterval(function(){vr.contentEl&&vr.mainEl&&vr.contentEl.scrollHeight>0&&vr.contentEl.scrollWidth>0&&(vr.contentEl.scrollWidth!=vr.contentElWidth||vr.contentEl.scrollHeight!=vr.contentElHeight||vr.mainEl.clientWidth!=vr.mainElWidth||vr.mainEl.clientHeight!=vr.mainElHeight)&&(vr.contentElWidth=vr.contentEl.scrollWidth,vr.contentElHeight=vr.contentEl.scrollHeight,vr.mainElWidth=vr.mainEl.clientWidth,vr.mainElHeight=vr.mainEl.clientHeight,vr.InitElements())},2e3)},s.Create=function(pr){$$calysto(pr||".calystoScroller").Where(function(wr){return!wr.__calystoScroller}).ForEach(function(br){br.__calystoScroller=true}).ForEach(function(kr){var dr=new s(kr);dr.Start(),kr.__calystoScroller=dr})};return s}();i.CalystoScroller=e})(t=n.WebControls||(n.WebControls={}))}(Calysto||(Calysto={})),Calysto.TestTools.TestRunner.AddTest(function(){var n=[{Ime:"ante",Godine:[1,2,3,4]},{Ime:"ante2",Godine:[13,2,3,4]},{Ime:"ante",Godine:[5,43,4]}].AsEnumerable().SelectMany(function(i){return i.Godine}).ToArray(),t=["fsdagasd","fdder","ff","tt","oc","one","one","one","two","two","nemza","temza","aa","bb","cc"].AsEnumerable().OrderBy(function(r){return r.length},true).ThenBy(function(u){return u},true).ThenBy(function(f){return f.length},true).Skip(1).Take(4).ToStringJoined("; ");console.log("CalystoEnumerable test successful")}),Calysto.TestTools.TestRunner.AddTest(function(){var n=new Calysto.Dictionary,i,r,t,u;n.Add("dva","fasdf"),n.Add(1,3),n.Add(5,342352362344237623453734),n.Add(51,344237623453734),n.Add(true,344237623453734),n.Add(false,344237623453734),i=[n.Count(),n.GetValue(5),n.ContainsKey(51),n.ContainsKey("51"),n.GetKeys().join(","),n.GetValues().join(",")].join(";"),r="6;3.423523623442376e+23;true;false;dva,1,5,51,true,false;fasdf,3,3.423523623442376e+23,344237623453734,344237623453734,344237623453734",Calysto.TestTools.UnitTesting.Assert.AreEqual(r,i),t=new Calysto.Dictionary,t.Add("name","first").Add("last","lastname"),u=[t.Count(),t.GetValues().join(","),t.GetKeys().join(",")].join(";"),Calysto.TestTools.UnitTesting.Assert.AreEqual("2;first,lastname;name,last",u),console.log("Dictionary test successful")}),Calysto.TestTools.TestRunner.AddTest(function(){var n=[Calysto.Enum.GetNames(Calysto.Type.KnownType).join(","),Calysto.Enum.GetValues(Calysto.Type.KnownType).join(","),Calysto.Enum.GetValue(Calysto.Type.KnownType,"Boolean"),Calysto.Enum.GetValue(Calysto.Type.KnownType,"Number"),Calysto.Enum.GetName(Calysto.Type.KnownType,3),Calysto.Enum.GetName(Calysto.DayOfWeek,2),Calysto.Enum.GetValue(Calysto.DayOfWeek,"Monday"),Calysto.Enum.HasName(Calysto.DayOfWeek,"Monday"),Calysto.Enum.HasName(Calysto.DayOfWeek,"somename"),Calysto.Enum.HasName(Calysto.DayOfWeek,""),Calysto.Enum.HasValue(Calysto.DayOfWeek,3),Calysto.Enum.HasValue(Calysto.DayOfWeek,33),Calysto.Enum.HasValue(Calysto.DayOfWeek,NaN)].join(";");if(n!="String,Boolean,Decimal,Number,Integer,Array,Function,DateTime,Date,Any;1,2,3,4,5,6,7,8,9,10;2;4;Decimal;Tuesday;1;true;false;false;true;false;false")throw new Error("Error in Calysto.Enum tests, result: "+n);console.log("Enum tests successful")}),Calysto.TestTools.TestRunner.AddTest(function(){function n(t,i){var r=Calysto.Globalization.CultureInfo.CurrentCulture;Calysto.Globalization.CultureInfo.CurrentCulture=t||Calysto.Globalization.CultureInfo.USCulture,i(),Calysto.Globalization.CultureInfo.CurrentCulture=r}n(Calysto.Globalization.CultureInfo.USCulture,function(){var k=Calysto.Features.GetBrowser().KindName=="MSIE"&&Calysto.Features.GetBrowser().Version<=8,l,a,h,v,y,c,u,s,f,p,w,b,o;if(!k){for(u=new Calysto.List,Calysto.Collections.ForEachProperties(Calysto.Type.KnownType,function(it,rt){u.Add(it+":"+rt)}),l=u.ToStringJoined("; "),a="1:String; 2:Boolean; 3:Decimal; 4:Number; 5:Integer; 6:Array; 7:Function; 8:DateTime; 9:Date; 10:Any; String:1; Boolean:2; Decimal:3; Number:4; Integer:5; Array:6; Function:7; DateTime:8; Date:9; Any:10",Calysto.TestTools.UnitTesting.Assert.AreEqual(a,l),h=["s1","",null,"true",true,false,undefined,2.34,541e3,64,[3,4,2],document.documentElement.childNodes,function(){return 3},Calysto.DateTime.Now(),new Date,{custom:"fsdfsad"}],u=new Calysto.List,s=0;s<h.length;s++)try{u.Add(Calysto.Type.TypeDescriptor.FromValue(h[s]).NullableTypeName)}catch(tt){u.Add("unresolved")}for(v="String; String; Any?; String; Boolean; Boolean; Any?; Decimal; Decimal; Decimal; Array; Array; Function; DateTime; Date; unresolved",y=u.ToStringJoined("; "),Calysto.TestTools.UnitTesting.Assert.AreEqual(v,y),c=["s1","",null,"true",true,false,undefined,{value:2.34,calystoFormat:"N3"},{value:5.41345,calystoFormat:"n2"},{value:541e3,calystoFormat:"N4"},{value:541e3,calystoFormat:"C4"},{value:541e3,calystoFormat:"C4",culture:Calysto.Globalization.CultureInfo.HRCulture},64,[3,4,2],{value:Calysto.DateTime.ParseDateTime("18.5.2016. 22:44:26","dd.MM.yyyy. HH:mm:ss"),culture:Calysto.Globalization.CultureInfo.USCulture},{value:Calysto.DateTime.ParseDateTime("18.5.2016. 22:44:26","dd.MM.yyyy. HH:mm:ss"),culture:Calysto.Globalization.CultureInfo.HRCulture},{value:Calysto.DateTime.ParseDateTime("18.5.2016. 22:44:26","dd.MM.yyyy. HH:mm:ss"),calystoFormat:"dd.MM.yyyy. HH:mm:ss.ff"},{value:new Calysto.DateTime("2016-05-19 02:44:00"),calystoFormat:"MM/dd/yyyy HH:mm"},{custom:"fsdfsad"},(new Calysto.TimeSpan).AddDays(2).AddHours(28).AddMinutes(14).AddSeconds(156).AddMilliseconds(1463).AddTicks(234534)],u=new Calysto.List,s=0;s<c.length;s++)try{f=c[s],n(f&&f.culture?f.culture:null,function(){f&&(f.calystoFormat||f.culture)?u.Add(Calysto.Type.TypeConverter.ToStringFormated(f.value,f.calystoFormat)):u.Add(Calysto.Type.TypeConverter.ToStringFormated(f))})}catch(tt){u.Add("unresolved")}p=u.ToStringJoined("; "),w="s1; ; ; true; true; false; ; 2.340; 5.41; 541,000.0000; $541,000.0000; 541.000,0000 kn; 64; [3,4,2]; 5/18/2016 10:44:26 PM; 18.5.2016. 22:44:26; 18.05.2016. 22:44:26.00; 05/19/2016 02:44; unresolved; 76:20:31.997",Calysto.TestTools.UnitTesting.Assert.AreEqual(w,p),b=function(ut){function ft(){var et=ut!==null&&ut.apply(this,arguments)||this;et.Items=[];return et}__extends(ft,ut),ft.prototype.SetValue=function(ot){this.Items.push(ot)};return ft}(Calysto.BoxValue),o={},Calysto.DataBinder.SetValue(o,"prop1.prop2.prop3.prop4.prop5",234),Calysto.DataBinder.SetValue(o,"prop1.prop2.prop3.Value5",111);var e=new b,d=[Calysto.Type.TypeConverter.ChangeType("True","Boolean"),Calysto.Type.TypeConverter.ChangeType("true","Boolean"),Calysto.Type.TypeConverter.ChangeType("false","Boolean"),Calysto.Type.TypeConverter.ChangeType("False","Boolean"),Calysto.Type.TypeConverter.ChangeType("0","Boolean"),Calysto.Type.TypeConverter.ChangeType("1","Boolean"),Calysto.Type.TypeConverter.ChangeType(0,"Boolean"),Calysto.Type.TypeConverter.ChangeType(1,"Boolean"),Calysto.Type.TypeConverter.ChangeType(undefined,"Boolean?"),Calysto.Type.TypeConverter.ChangeType(undefined,"Integer",true),Calysto.Type.TypeConverter.ChangeType("","Decimal",true),Calysto.Type.TypeConverter.ChangeType("","Boolean",true),Calysto.Type.TypeConverter.ChangeType("","String",true),Calysto.Type.TypeConverter.ChangeType(null,"String",true),Calysto.Type.TypeConverter.ChangeType(undefined,"String?"),Calysto.Type.TypeConverter.ChangeType("-2.53","Decimal"),Calysto.Type.TypeConverter.ChangeType("-12.553","Number"),Calysto.Type.TypeConverter.ChangeType("-42.1234","Integer"),Calysto.Type.TypeConverter.ChangeType(-432.23432,"Decimal"),Calysto.Type.TypeConverter.ChangeType(-4435.53241,"Integer"),Calysto.Type.TypeConverter.ChangeType("[34,53,4325]","Array"),Calysto.DateTime.ParseDateTime("18.05.2016. 22:44:26.42","dd.MM.yyyy"),Calysto.DateTime.ParseDateTime("18.05.2016. 22:44:26.42","dd.MM.yyyy"),Calysto.DateTime.ParseDateTime("18.05.2016. 22:44:26.42","dd.MM.yyyy. HH:mm:ss.ff"),"valueTypeTest",Calysto.Type.TypeInspector.IsValueType(null),Calysto.Type.TypeInspector.IsValueType(""),Calysto.Type.TypeInspector.IsValueType(function(){}),Calysto.Type.TypeInspector.IsValueType({}),Calysto.Type.TypeInspector.IsValueType(2),Calysto.Type.TypeInspector.IsValueType(true),"containPropertyTest",Calysto.Type.TypeInspector.ContainsProperty({dva:43},"dva"),Calysto.Type.TypeInspector.ContainsProperty({dvatri:43},"dva"),"dataBinderTryGetValueTest",Calysto.DataBinder.TryGetValue({dva:2,trie:3},"dva2",e),Calysto.DataBinder.TryGetValue({dva:2,trie:{dva:2,trie:{dva:2,trie:3}}},"trie.trie.dva",e),Calysto.DataBinder.TryGetValue({dva:2,trie:3},"dva",e),Calysto.DataBinder.TryGetValue({},"dva",e),"temp1isnext",o,"trygetvalue11",Calysto.DataBinder.TryGetValue(o,"prop1.prop2.prop3.prop4.prop5",e),Calysto.DataBinder.TryGetValue(o,"prop1.prop2.prop3.Value5",e),Calysto.DataBinder.TryGetValue(o,"prop1.prop2",e),Calysto.DataBinder.TryGetValue(o,"prop1.prop2.",e),Calysto.DataBinder.TryGetValue(o,"prop1.prop4",e),"refOutArrStart",e.Items],g=Calysto.Json.Serialize(d);Calysto.TestTools.UnitTesting.Assert.AreEqual('[true,true,false,false,false,true,false,true,null,null,null,null,"",null,null,-2.53,-12.553,-42,-432.23432,-4435,["34","53","4325"],{"__calystotype":"Calysto_Date","Date":"2016-05-18T00:00:00.000"},{"__calystotype":"Calysto_Date","Date":"2016-05-18T00:00:00.000"},{"__calystotype":"Calysto_Date","Date":"2016-05-18T22:44:26.420"},"valueTypeTest",false,true,false,false,true,true,"containPropertyTest",true,false,"dataBinderTryGetValueTest",false,true,true,false,"temp1isnext",{"prop1":{"prop2":{"prop3":{"prop4":{"prop5":234},"Value5":111}}}},"trygetvalue11",true,true,true,true,false,"refOutArrStart",[2,2,234,111,{"prop3":{"prop4":{"prop5":234},"Value5":111}},{"prop3":{"prop4":{"prop5":234},"Value5":111}}]]',g),console.log("DataBinder.SetValue test successful"),console.log("DataBinder.TryGetValue test successful"),console.log("DateTime.Parse test successful"),console.log("Type.ChangeType test successful"),console.log("Type test successful")}})}),Calysto.TestTools.TestRunner.AddTest(function(){var s="this is my text and chars žćčđšĐŠŽĆČ?",i=Calysto.Utility.Encoding.RfcBase64.EncodeToBase64String(s),r,u,n,h,a,f,e,o;if(i!="dGhpcyBpcyBteSB0ZXh0IGFuZCBjaGFycyDFvsSHxI3EkcWhxJDFoMW9xIbEjD8=")throw new Error("Calysto.Utility.Encoding.RfcBase64.EncodeToBase64String() self test error. Result: "+i);if(r=Calysto.Utility.Encoding.RfcBase64.DecodeBase64StringToString(i),r!=s)throw new Error("Calysto.Utility.Encoding.RfcBase64.DecodeBase64StringToString() self test error. Result: "+r);if(u="http://sitežlkjđšžćč.com/?čščćžđaša fds žhsdf",n=Calysto.Utility.Html.UrlEncode(u),n!="http%3A%2F%2Fsite%C3%85%C2%BElkj%C3%84%C2%91%C3%85%C2%A1%C3%85%C2%BE%C3%84%C2%87%C3%84%C2%8D.com%2F%3F%C3%84%C2%8D%C3%85%C2%A1%C3%84%C2%8D%C3%84%C2%87%C3%85%C2%BE%C3%84%C2%91a%C3%85%C2%A1a%20fds%20%C3%85%C2%BEhsdf")throw new Error("Calysto.Utility.Html.UrlEncode() self test error. Result: "+n);if(h=Calysto.Utility.Html.UrlDecode(n),h!=u)throw new Error("Calysto.Utility.Html.UrlDecode() self test error. Result: "+n);var t="this is my žćčđšŽĆČĐŠ string",c=Calysto.Utility.Encoding.UTF8.GetBytes(t),l=Calysto.Utility.Encoding.UTF8.GetString(c);if(l!=t)throw new Error("Calysto.Utility.Encoding.UTF8.GetString() self test error. Result: "+l+", expected: "+t);if(a=(new Calysto.Utility.Encoding.CalystoBaseConverter).EncodeToBaseString(c,6),f=(new Calysto.Utility.Encoding.CalystoBaseConverter).DecodeBaseStringToString(a,6),f!=t)throw new Error("Calysto.Utility.Encoding.CalystoBaseConverter.DecodeBaseStringToString() self test error. Result: "+f+", expected: "+t);if(e=[Calysto.Utility.Path.GetQueryString("\\fasdfs\\hhdfg\\yerrre.cs?fsfs=twerew"),Calysto.Utility.Path.GetDirectoryName("\\fasdfs\\hhdfg\\yerrre.cs?fsfs=twerew"),Calysto.Utility.Path.GetFilePath("\\fasdfs\\hhdfg\\yerrre.cs?fsfs=twerew"),Calysto.Utility.Path.GetFileName("\\fasdfs\\hhdfg\\yerrre.cs?fsfs=twerew"),Calysto.Utility.Path.GetExtension("\\fasdfs\\hhdfg\\yerrre.cs?fsfs=twerew")].join(", "),o="?fsfs=twerew, \\fasdfs\\hhdfg, \\fasdfs\\hhdfg\\yerrre.cs, yerrre.cs, .cs",e!=o)throw new Error("Calysto.Utility.Path selftest error. Result: "+e+", expected: "+o);if(Calysto.Utility.CalystoTools.ByteArrayToLong(Calysto.Utility.CalystoTools.LongToByteArray(20042362354623561))!=20042362354623561)throw new Error("Selftest ByteArrayToLong failed");console.log("Utility test successful")}),Calysto.TestTools.TestRunner.AddTest(function(){var t=["hretygsadfewh/ghsd/.?gsadf".EndsWith("adf"),"hretygsadfewh/ghsd/.?gsadf".EndsWith("aDf",true),"hretygsadfewh/ghsd/.?gsadf".EndsWith("aDf"),"hretygshreadfewh/ghsd/.?gsadf".StartsWith("hre"),"hretygshreadfewh/ghsd/.?gsadf".StartsWith("hRe",true),"hretygshreadfewh/ghsd/.?gsadf".StartsWith("hRe"),"hretygsadfewh/ghsd/.?gsadf".Contains("gh"),"hretygsadfewh/ghsd/.?gsadf".Contains("G"),"hretygsadfewh/ghsd/.?gsadf".Contains("GH",true),"hretygsadfewh/ghsd/.?gsadf".GetHashCode(),"hretygsadfewh/ghsd/.?gsadf".Remove(4),"hretygsadfewh/ghsd/.?gsadf".Remove(324),"hretygsadfewh/ghsd/.?gsadf".Repeat(3),"hretygsadfewh/ghsd/.?gsadf".Repeat(0)].join("_"),n;if(t!="true_true_false_true_true_false_true_false_true_-914965447_hret_hretygsadfewh/ghsd/.?gsadf_hretygsadfewh/ghsd/.?gsadfhretygsadfewh/ghsd/.?gsadfhretygsadfewh/ghsd/.?gsadf_")throw new Error("Error in String test1, result: "+t);if(n=["testfunction(){reutrn false; {name1} was not {cars.1} {years.birth} {cars.2} hretygsadfewh/ghsd/.?gsadf}".FormatWith({name1:"John Bravo",years:{birth:22,school:8},cars:["ford","bmw","audi"]}),"hretygsadfewh/ghsd/.?gsadf".ReplaceAll("h","1"),"hretygsadfewh/ghsd/.?gsadf".TakeFirst(5),"hretygsadfewh/ghsd/.?gsadf".TakeFirst(5,"..."),"hretyy".TakeFirst(5,"..."),"hrety".TakeFirst(5,"..."),"hretyy".TakeFirst(4,"..."),"hretygsadfewh/ghsd/.?gsadf".TakeLast(5),"hretygsadfewh/ghsd/.?gsadf".TakeLast(5,"..."),"hretyg".TakeLast(7,"..."),"hretyg".TakeLast(6,"..."),"hretyg".TakeLast(5,"..."),"this is my word number one".TakeLast(15,"..."),"this is my word number one".TakeLast(15,"...",true),"this is my word number one".TakeFirst(15,"...",true),"this is my word number one".TakeFirst(14,"...",true),"this is my word number one".TakeFirst(16,"...",true),String.IsNullOrEmpty(),String.IsNullOrEmpty(""),String.IsNullOrEmpty("d"),String.IsNullOrEmpty("gsdf"),String.IsNullOrWhiteSpace(),String.IsNullOrWhiteSpace("false"),String.IsNullOrWhiteSpace(""),String.IsNullOrWhiteSpace(" "),String.IsNullOrWhiteSpace(" e"),String.IsNullOrWhiteSpace(" \r\n\t"),String.IsNullOrWhiteSpace("\t"),String.IsNullOrWhiteSpace("\t\n")].join("_"),n!="testfunction(){reutrn false; John Bravo was not bmw 22 audi hretygsadfewh/ghsd/.?gsadf}_1retygsadfew1/g1sd/.?gsadf_hrety_hr..._hr..._hr..._h..._gsadf_...df_hretyg_...tyg_...yg_...d number one_...number one_this is my..._this is my..._this is my..._true_true_false_false_true_false_true_true_false_true_true_true")throw new Error("Error in String test2, result: "+n);console.log("String test successful")}),Calysto.TestTools.TestRunner.AddTest(function(){function n(t,i){var r=Calysto.Globalization.CultureInfo.CurrentCulture;Calysto.Globalization.CultureInfo.CurrentCulture=t||Calysto.Globalization.CultureInfo.USCulture,i(),Calysto.Globalization.CultureInfo.CurrentCulture=r}n(Calysto.Globalization.CultureInfo.USCulture,function(){var e=[(-36324263299.49234).ToStringFormated("n6"),(-36324263299.49234).ToStringFormated("n8"),(-36324263299.49234).ToStringFormated("n7"),(-3.6324263299492343).ToStringFormated("n15"),(-3.6324263299492343).ToStringFormated("n12"),(-3.6324263299492343).ToStringFormated("n13"),(-3.6324263299492343).ToStringFormated("n10"),(-3.6324263299492343).ToStringFormated("n9"),(-3.6324263299492343).ToStringFormated("n3"),(-3.6324263299492343).ToStringFormated("n2"),(-3.6324263299492343).ToStringFormated("n1"),(-3.6324263299492343).ToStringFormated("n0"),(-3.6324263299492343).ToStringFormated("n6"),(-3.6324263299492343).ToStringFormated("n5"),3.6324263299492343.ToStringFormated("n5"),3.6324263299492343.ToStringFormated("n6"),3.6324263299492343.ToStringFormated("n3"),3.6324263299492343.ToStringFormated("n1"),3.6324263299492343.ToStringFormated("n0"),3.6324263299492343.ToStringFormated("n")],u=e.join(";"),f="-36,324,263,299.492350;-36,324,263,299.49234000;-36,324,263,299.4923400;-3.632426329949234;-3.632426329949;-3.6324263299492;-3.6324263299;-3.632426330;-3.632;-3.63;-3.6;-4;-3.632426;-3.63243;3.63243;3.632426;3.632;3.6;4;3.63";if(u!=f)throw new Error("Error in Number test1, result: "+u+", expected: "+f);console.log("Number test successful")})}),Calysto.TestTools.TestRunner.AddTest(function(){var n=new Calysto.QueryString("http://toolnix.com/widgetcontent?marker=1&balloon=0&width=400&height=200&mid=2004&sig=fsdaf"),t=n.GetUrl();if("http://toolnix.com/widgetcontent?marker=1&balloon=0&width=400&height=200&mid=2004&sig=fsdaf"!=t)throw new Error("Calysto.QueryString #1 selftest error. Result: "+t+", expected: http://toolnix.com/widgetcontent?marker=1&balloon=0&width=400&height=200&mid=2004&sig=fsdaf");if(n=new Calysto.QueryString("http://toolnix.com/widgetcontent"),t=n.GetUrl(),"http://toolnix.com/widgetcontent"!=t)throw new Error("Calysto.QueryString #2 selftest error. Result: "+t+", expected: http://toolnix.com/widgetcontent");if(n=new Calysto.QueryString("http://toolnix.com/widgetcontent?marker=1&balloon=0&width=400&height=200&mid=2004&#fasdf#fasdf"),n.SetValue("mmm",1043),n.RemoveValue("balloon"),t=n.GetUrl(),"http://toolnix.com/widgetcontent?marker=1&width=400&height=200&mid=2004&mmm=1043#fasdf#fasdf"!=t)throw new Error("Calysto.QueryString #3 selftest error. Result: "+t+", expected: http://toolnix.com/widgetcontent?marker=1&width=400&height=200&mid=2004&mmm=1043");if(n=new Calysto.QueryString("http://toolnix.com/widgetcontent?marker=1&balloon=0&width=400&height=200&mid=2004&#fasdf#fasdf"),n.SetValue("mmm",1043),n.RemoveValue("balloon"),t=n.GetUrl(),"http://toolnix.com/widgetcontent?marker=1&width=400&height=200&mid=2004&mmm=1043#fasdf#fasdf"!=t)throw new Error("Calysto.QueryString #4 selftest error. Result: "+t+", expected: http://toolnix.com/widgetcontent?marker=1&width=400&height=200&mid=2004&mmm=1043#fasdf#fasdf");if(n=new Calysto.QueryString("http://toolnix.com/widgetcontent?marker=1&balloon=0&width=400&height=200&mid=2004&"),n.SetValue("height",42353),t=n.GetUrl(),"http://toolnix.com/widgetcontent?marker=1&balloon=0&width=400&height=42353&mid=2004"!=t)throw new Error("Calysto.QueryString #5 selftest error. Result: "+t+", expected: http://toolnix.com/widgetcontent?marker=1&balloon=0&width=400&height=42353&mid=2004");console.log("QueryString test successful")}),Calysto.TestTools.TestRunner.AddTest(function(){var n="fasdg423675wefdfhuioyfasdyqpoeriu7234rfdsdhlkj6rfa234fdashasdf",e=new Calysto.Regex("fa").Matches(n).AsEnumerable().Select(function(o){return o.Value+", "+o.Success+", "+o.Index}).ToStringJoined(";"),t,i,r,u,f;if(e!="fa, true, 0;fa, true, 21;fa, true, 48")throw new Error("Calysto.Regex selftest #1 failed, res: "+e);if(t=new Calysto.Regex("fa").SelectMatches(n).Select(function(s){return s.Value+", "+s.Success+", "+s.Index}).ToStringJoined(";"),t!="fa, true, 0;fa, true, 21;fa, true, 48")throw new Error("Calysto.Regex selftest #2 failed, res: "+t);if(i=new Calysto.Regex("fa").SelectSegments(n).Select(function(h){return h.Value+", "+h.Success+", "+h.Index}).ToStringJoined(";"),i!="fa, true, 0;sdg423675wefdfhuioy, false, 2;fa, true, 21;sdyqpoeriu7234rfdsdhlkj6r, false, 23;fa, true, 48;234fdashasdf, false, 50")throw new Error("Calysto.Regex selftest #3 failed, res: "+i);if(r=new Calysto.Regex("fa").SelectSegments(n).Select(function(c){return c.Value}).ToStringJoined(";"),r!="fa;sdg423675wefdfhuioy;fa;sdyqpoeriu7234rfdsdhlkj6r;fa;234fdashasdf")throw new Error("Calysto.Regex selftest #4 failed, res: "+r);if(u=new Calysto.Regex("fa").SelectSegments(n).Select(function(l){return l.Value}).ToStringJoined(""),u!="fasdg423675wefdfhuioyfasdyqpoeriu7234rfdsdhlkj6rfa234fdashasdf")throw new Error("Calysto.Regex selftest #5 failed, res: "+u);if(f="pos-bottom-center, pos-bottom-center2".ReplaceAll("pos-","replacedText"),f!="replacedTextbottom-center, replacedTextbottom-center2")throw new Error("Calysto.Regex selftest #6 failed, res: "+f);console.log("Regex test successful")}),Calysto.TestTools.TestRunner.AddTest(function(){var l=Calysto.Features.GetBrowser().KindName=="MSIE"&&Calysto.Features.GetBrowser().Version<=8,t,i,o,s;if(!l){var a=Calysto.Json.Deserialize('{"msg":"hasdfs","files":[{"DataUrl":"","BlobIndex":0,"FileName":"img_1.gif","MimeType":"image/gif","Size":56591,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":1,"FileName":"img_2.gif","MimeType":"image/gif","Size":70622,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":2,"FileName":"img_3.gif","MimeType":"image/gif","Size":68342,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":3,"FileName":"img_4.gif","MimeType":"image/gif","Size":95296,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":4,"FileName":"img_5.gif","MimeType":"image/gif","Size":87117,"__calystotype":"Calysto222222_Blob"}]}'),n=new Calysto.Json.JsonNode(a),v=Calysto.Json.Serialize(n.Descendants(true).Skip(1).Take(2).ToArray());Calysto.TestTools.UnitTesting.Assert.AreEqual('[{"Property":"msg","Level":1,"Type":1,"Value":"hasdfs","Parent":{"Property":"@","Level":0,"Type":2,"Value":{"msg":"hasdfs","files":[{"DataUrl":"","BlobIndex":0,"FileName":"img_1.gif","MimeType":"image/gif","Size":56591,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":1,"FileName":"img_2.gif","MimeType":"image/gif","Size":70622,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":2,"FileName":"img_3.gif","MimeType":"image/gif","Size":68342,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":3,"FileName":"img_4.gif","MimeType":"image/gif","Size":95296,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":4,"FileName":"img_5.gif","MimeType":"image/gif","Size":87117,"__calystotype":"Calysto222222_Blob"}]}}},{"Property":"files","Level":1,"Type":3,"Value":[{"DataUrl":"","BlobIndex":0,"FileName":"img_1.gif","MimeType":"image/gif","Size":56591,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":1,"FileName":"img_2.gif","MimeType":"image/gif","Size":70622,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":2,"FileName":"img_3.gif","MimeType":"image/gif","Size":68342,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":3,"FileName":"img_4.gif","MimeType":"image/gif","Size":95296,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":4,"FileName":"img_5.gif","MimeType":"image/gif","Size":87117,"__calystotype":"Calysto222222_Blob"}],"Parent":{"Property":"@","Level":0,"Type":2,"Value":{"msg":"hasdfs","files":[{"DataUrl":"","BlobIndex":0,"FileName":"img_1.gif","MimeType":"image/gif","Size":56591,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":1,"FileName":"img_2.gif","MimeType":"image/gif","Size":70622,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":2,"FileName":"img_3.gif","MimeType":"image/gif","Size":68342,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":3,"FileName":"img_4.gif","MimeType":"image/gif","Size":95296,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":4,"FileName":"img_5.gif","MimeType":"image/gif","Size":87117,"__calystotype":"Calysto222222_Blob"}]}}}]',v,"#ref res55exp"),t=Calysto.Json.Serialize(n.Children(true).Take(2).ToArray()),i='[{"Property":"@","Level":0,"Type":2,"Value":{"msg":"hasdfs","files":[{"DataUrl":"","BlobIndex":0,"FileName":"img_1.gif","MimeType":"image/gif","Size":56591,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":1,"FileName":"img_2.gif","MimeType":"image/gif","Size":70622,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":2,"FileName":"img_3.gif","MimeType":"image/gif","Size":68342,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":3,"FileName":"img_4.gif","MimeType":"image/gif","Size":95296,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":4,"FileName":"img_5.gif","MimeType":"image/gif","Size":87117,"__calystotype":"Calysto222222_Blob"}]}},{"Property":"msg","Level":1,"Type":1,"Value":"hasdfs","Parent":{"Property":"@","Level":0,"Type":2,"Value":{"msg":"hasdfs","files":[{"DataUrl":"","BlobIndex":0,"FileName":"img_1.gif","MimeType":"image/gif","Size":56591,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":1,"FileName":"img_2.gif","MimeType":"image/gif","Size":70622,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":2,"FileName":"img_3.gif","MimeType":"image/gif","Size":68342,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":3,"FileName":"img_4.gif","MimeType":"image/gif","Size":95296,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":4,"FileName":"img_5.gif","MimeType":"image/gif","Size":87117,"__calystotype":"Calysto222222_Blob"}]}}}]',Calysto.TestTools.UnitTesting.Assert.AreEqual(i,t,"#ref res56exp");var r=n.Descendants(true).Where(function(nt){return nt.Index>0||nt.Index==0}).Select(function(tt){return tt}).Where(function(it){return!!it}),d=r.ToArray(),y=n.Descendants(true).Where(function(rt){return rt.Index>0||rt.Index==0}).Skip(2).Take(1).ToArray(),g=n.Descendants(true).ToArray(),u=[y],p=Calysto.Json.Serialize(u),f=Calysto.Json.Serialize(u,100);Calysto.TestTools.UnitTesting.Assert.AreEqual('[[{"Index":2,"Property":"2","Level":2,"Type":2,"Value":{"DataUrl":"","BlobIndex":2,"FileName":"img_3.gif","MimeType":"image/gif","Size":68342,"__calystotype":"Calysto222222_Blob"},"Parent":{"Property":"files","Level":1,"Type":3,"Value":[{"DataUrl":"","BlobIndex":0,"FileName":"img_1.gif","MimeType":"image/gif","Size":56591,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":1,"FileName":"img_2.gif","MimeType":"image/gif","Size":70622,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":2,"FileName":"img_3.gif","MimeType":"image/gif","Size":68342,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":3,"FileName":"img_4.gif","MimeType":"image/gif","Size":95296,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":4,"FileName":"img_5.gif","MimeType":"image/gif","Size":87117,"__calystotype":"Calysto222222_Blob"}],"Parent":{"Property":"@","Level":0,"Type":2,"Value":{"msg":"hasdfs","files":[{"DataUrl":"","BlobIndex":0,"FileName":"img_1.gif","MimeType":"image/gif","Size":56591,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":1,"FileName":"img_2.gif","MimeType":"image/gif","Size":70622,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":2,"FileName":"img_3.gif","MimeType":"image/gif","Size":68342,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":3,"FileName":"img_4.gif","MimeType":"image/gif","Size":95296,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":4,"FileName":"img_5.gif","MimeType":"image/gif","Size":87117,"__calystotype":"Calysto222222_Blob"}]}}}}]]',f,"#ref res11exp");var e=r.Last(),w=e.Ancestors(true).ToArray(),b=w.length;Calysto.TestTools.UnitTesting.Assert.AreEqual(3,b,"#ref cnt11"),o=e.Ancestors(false).ToArray(),s=o.length,Calysto.TestTools.UnitTesting.Assert.AreEqual(2,s,"#ref cnt13"),Calysto.TestTools.UnitTesting.Assert.AreEqual(p,f,"#ref res11");var h={a:new Calysto.DateTime("2016-07-02T11:08:25.244Z"),b:window.tqwefdhdasrtyqwer,c:null,d:parseInt(window.tqweyshasdfsg)},c=Calysto.Json.Serialize(h),k=Calysto.Json.Serialize(h,100);Calysto.TestTools.UnitTesting.Assert.AreEqual('{"a":{"__calystotype":"Calysto_Date","Date":"2016-07-02T11:08:25.244"},"b":null,"c":null,"d":null}',c,"#ref json1"),Calysto.TestTools.UnitTesting.Assert.AreEqual(c,k),console.log("JsonNode1 test successful")}}),Calysto.TestTools.TestRunner.AddTest(function(){var i={Ime:"janko",Prezime:"bobetko",Sub1:{Name:"sub1",Sub2:{Name:"sub2",One:"jedan",Size:25}},Age:150,List1:[{a:10},{a:20},{a:30}],List2:[1,2,3,4,5]},n=new Calysto.Json.JsonNode(i),r,u,f,e,t,o,s,h,c,l,a,v;Calysto.TestTools.UnitTesting.Assert.AreEqual('{"Property":"@","Level":0,"Type":2,"Value":{"Ime":"janko","Prezime":"bobetko","Sub1":{"Name":"sub1","Sub2":{"Name":"sub2","One":"jedan","Size":25}},"Age":150,"List1":[{"a":10},{"a":20},{"a":30}],"List2":[1,2,3,4,5]}}',JSON.stringify(n),"#reference tree1"),r=n.Children(true).ToArray(),Calysto.TestTools.UnitTesting.Assert.AreEqual('[{"Property":"@","Level":0,"Type":2,"Value":{"Ime":"janko","Prezime":"bobetko","Sub1":{"Name":"sub1","Sub2":{"Name":"sub2","One":"jedan","Size":25}},"Age":150,"List1":[{"a":10},{"a":20},{"a":30}],"List2":[1,2,3,4,5]}},{"Property":"Ime","Level":1,"Type":1,"Value":"janko","Parent":{"Property":"@","Level":0,"Type":2,"Value":{"Ime":"janko","Prezime":"bobetko","Sub1":{"Name":"sub1","Sub2":{"Name":"sub2","One":"jedan","Size":25}},"Age":150,"List1":[{"a":10},{"a":20},{"a":30}],"List2":[1,2,3,4,5]}}},{"Property":"Prezime","Level":1,"Type":1,"Value":"bobetko","Parent":{"Property":"@","Level":0,"Type":2,"Value":{"Ime":"janko","Prezime":"bobetko","Sub1":{"Name":"sub1","Sub2":{"Name":"sub2","One":"jedan","Size":25}},"Age":150,"List1":[{"a":10},{"a":20},{"a":30}],"List2":[1,2,3,4,5]}}},{"Property":"Sub1","Level":1,"Type":2,"Value":{"Name":"sub1","Sub2":{"Name":"sub2","One":"jedan","Size":25}},"Parent":{"Property":"@","Level":0,"Type":2,"Value":{"Ime":"janko","Prezime":"bobetko","Sub1":{"Name":"sub1","Sub2":{"Name":"sub2","One":"jedan","Size":25}},"Age":150,"List1":[{"a":10},{"a":20},{"a":30}],"List2":[1,2,3,4,5]}}},{"Property":"Age","Level":1,"Type":1,"Value":150,"Parent":{"Property":"@","Level":0,"Type":2,"Value":{"Ime":"janko","Prezime":"bobetko","Sub1":{"Name":"sub1","Sub2":{"Name":"sub2","One":"jedan","Size":25}},"Age":150,"List1":[{"a":10},{"a":20},{"a":30}],"List2":[1,2,3,4,5]}}},{"Property":"List1","Level":1,"Type":3,"Value":[{"a":10},{"a":20},{"a":30}],"Parent":{"Property":"@","Level":0,"Type":2,"Value":{"Ime":"janko","Prezime":"bobetko","Sub1":{"Name":"sub1","Sub2":{"Name":"sub2","One":"jedan","Size":25}},"Age":150,"List1":[{"a":10},{"a":20},{"a":30}],"List2":[1,2,3,4,5]}}},{"Property":"List2","Level":1,"Type":3,"Value":[1,2,3,4,5],"Parent":{"Property":"@","Level":0,"Type":2,"Value":{"Ime":"janko","Prezime":"bobetko","Sub1":{"Name":"sub1","Sub2":{"Name":"sub2","One":"jedan","Size":25}},"Age":150,"List1":[{"a":10},{"a":20},{"a":30}],"List2":[1,2,3,4,5]}}}]',JSON.stringify(r),"#reference d3"),u=n.Descendants(true).Where(function(y){return y.Level>=2}).ToArray(),Calysto.TestTools.UnitTesting.Assert.AreEqual(16,u.length,"#reference d2"),f=n.Descendants(false).ToArray(),Calysto.TestTools.UnitTesting.Assert.AreEqual(22,f.length,"#reference d5"),e=n.Descendants().Where(function(p){return p.Property=="Sub1"}).Select(function(w){return w.Value}).ToArray(),Calysto.TestTools.UnitTesting.Assert.AreEqual(1,e.length,"#reference d1"),t=n.Descendants(true).Where(function(b){return b.Level>=2}).First(),Calysto.TestTools.UnitTesting.Assert.AreEqual("Name",t.Property,"#reference d2a"),o=t.SelectChain("Nest.Tamo.@.Sub1.Sub2.Size.Next.Home").ToArray(),s=o.Select(function(k){return{Property:k.Property,Level:k.Level,Value:k.Value+""}}).ToArray(),Calysto.TestTools.UnitTesting.Assert.AreEqual("[]",JSON.stringify(s),"#reference chain22"),h=n.SelectChain("List1.2.a.c").ToArray(),Calysto.TestTools.UnitTesting.Assert.AreEqual('[{"Property":"List1","Level":1,"Type":3,"Value":[{"a":10},{"a":20},{"a":30}],"Parent":{"Property":"@","Level":0,"Type":2,"Value":{"Ime":"janko","Prezime":"bobetko","Sub1":{"Name":"sub1","Sub2":{"Name":"sub2","One":"jedan","Size":25}},"Age":150,"List1":[{"a":10},{"a":20},{"a":30}],"List2":[1,2,3,4,5]}}},{"Index":2,"Property":"2","Level":2,"Type":2,"Value":{"a":30},"Parent":{"Property":"List1","Level":1,"Type":3,"Value":[{"a":10},{"a":20},{"a":30}],"Parent":{"Property":"@","Level":0,"Type":2,"Value":{"Ime":"janko","Prezime":"bobetko","Sub1":{"Name":"sub1","Sub2":{"Name":"sub2","One":"jedan","Size":25}},"Age":150,"List1":[{"a":10},{"a":20},{"a":30}],"List2":[1,2,3,4,5]}}}},{"Property":"a","Level":3,"Type":1,"Value":30,"Parent":{"Index":2,"Property":"2","Level":2,"Type":2,"Value":{"a":30},"Parent":{"Property":"List1","Level":1,"Type":3,"Value":[{"a":10},{"a":20},{"a":30}],"Parent":{"Property":"@","Level":0,"Type":2,"Value":{"Ime":"janko","Prezime":"bobetko","Sub1":{"Name":"sub1","Sub2":{"Name":"sub2","One":"jedan","Size":25}},"Age":150,"List1":[{"a":10},{"a":20},{"a":30}],"List2":[1,2,3,4,5]}}}}}]',JSON.stringify(h),"#reference chain2"),c=t.Ancestors(true).ToArray(),Calysto.TestTools.UnitTesting.Assert.AreEqual('[{"Property":"Name","Level":2,"Type":1,"Value":"sub1","Parent":{"Property":"Sub1","Level":1,"Type":2,"Value":{"Name":"sub1","Sub2":{"Name":"sub2","One":"jedan","Size":25}},"Parent":{"Property":"@","Level":0,"Type":2,"Value":{"Ime":"janko","Prezime":"bobetko","Sub1":{"Name":"sub1","Sub2":{"Name":"sub2","One":"jedan","Size":25}},"Age":150,"List1":[{"a":10},{"a":20},{"a":30}],"List2":[1,2,3,4,5]}}}},{"Property":"Sub1","Level":1,"Type":2,"Value":{"Name":"sub1","Sub2":{"Name":"sub2","One":"jedan","Size":25}},"Parent":{"Property":"@","Level":0,"Type":2,"Value":{"Ime":"janko","Prezime":"bobetko","Sub1":{"Name":"sub1","Sub2":{"Name":"sub2","One":"jedan","Size":25}},"Age":150,"List1":[{"a":10},{"a":20},{"a":30}],"List2":[1,2,3,4,5]}}},{"Property":"@","Level":0,"Type":2,"Value":{"Ime":"janko","Prezime":"bobetko","Sub1":{"Name":"sub1","Sub2":{"Name":"sub2","One":"jedan","Size":25}},"Age":150,"List1":[{"a":10},{"a":20},{"a":30}],"List2":[1,2,3,4,5]}}]',JSON.stringify(c),"#reference anc1"),l=t.Ancestors(true).Reverse().Select(function(d){return d.Property}).ToStringJoined("."),Calysto.TestTools.UnitTesting.Assert.AreEqual("@.Sub1.Name",l,"#reference anc2"),a=new Calysto.Json.JsonNode(i.List1),v=a.Descendants(true).ToArray(),Calysto.TestTools.UnitTesting.Assert.AreEqual('[{"Property":"@","Level":0,"Type":3,"Value":[{"a":10},{"a":20},{"a":30}]},{"Index":0,"Property":"0","Level":1,"Type":2,"Value":{"a":10},"Parent":{"Property":"@","Level":0,"Type":3,"Value":[{"a":10},{"a":20},{"a":30}]}},{"Property":"a","Level":2,"Type":1,"Value":10,"Parent":{"Index":0,"Property":"0","Level":1,"Type":2,"Value":{"a":10},"Parent":{"Property":"@","Level":0,"Type":3,"Value":[{"a":10},{"a":20},{"a":30}]}}},{"Index":1,"Property":"1","Level":1,"Type":2,"Value":{"a":20},"Parent":{"Property":"@","Level":0,"Type":3,"Value":[{"a":10},{"a":20},{"a":30}]}},{"Property":"a","Level":2,"Type":1,"Value":20,"Parent":{"Index":1,"Property":"1","Level":1,"Type":2,"Value":{"a":20},"Parent":{"Property":"@","Level":0,"Type":3,"Value":[{"a":10},{"a":20},{"a":30}]}}},{"Index":2,"Property":"2","Level":1,"Type":2,"Value":{"a":30},"Parent":{"Property":"@","Level":0,"Type":3,"Value":[{"a":10},{"a":20},{"a":30}]}},{"Property":"a","Level":2,"Type":1,"Value":30,"Parent":{"Index":2,"Property":"2","Level":1,"Type":2,"Value":{"a":30},"Parent":{"Property":"@","Level":0,"Type":3,"Value":[{"a":10},{"a":20},{"a":30}]}}}]',JSON.stringify(v),"#reference m1"),console.log("JsonNode2 test successful")}),Calysto.TestTools.TestRunner.AddTest(function(){}),Calysto.TestTools.TestRunner.AddTest(function(){function n(t,i){var r=Calysto.Globalization.CultureInfo.CurrentCulture;Calysto.Globalization.CultureInfo.CurrentCulture=t||Calysto.Globalization.CultureInfo.USCulture,i(),Calysto.Globalization.CultureInfo.CurrentCulture=r}n(Calysto.Globalization.CultureInfo.USCulture,function(){var rt=Calysto.Features.GetBrowser().KindName=="MSIE"&&Calysto.Features.GetBrowser().Version<=8,e,o,s,h,c,l,a,v,y,p,w,b,u,k,d,g,nt,tt,it;if(!rt){var f=Calysto.Utility.Dom.ConvertToElementsArray('<div id="divForm1" style="background:whitesmoke;padding:10px;margin-top:10px;border:solid 5px red;;">\t\t<input type="text" calysto-id="Game.Name" name="GameName" value="the name of the game" />\t\t<input type="text" calysto-id="Store.Name" name="StoreName" value="store name" />\t\t<input type="text" calysto-id="Realization.IncomeSum1" calysto-getter="()=>Calysto.Type.NumberConverter.ToDecimal(this.value, -5)" name="ctl00$clientNavigation1$IncomeSum1">\t\t<input type="text" calysto-id="Realization.IncomeSum2" calysto-setter="(a1)=>this.value=a1.ToStringFormated(\'n2\')" name="ctl00$clientNavigation1$IncomeSum2">\t\t<input type="text" calysto-id="Realization.IncomeSum3" name="ctl00$clientNavigation1$IncomeSum3" calysto-format="N3">\t\t<input type="text" calysto-id="Realization.IncomeSum4" calysto-setter="(a1)=>this.value=a1.ToStringFormated(\'n2\')" calysto-getter="()=>Calysto.Type.NumberConverter.ToDecimal(this.value, -1)" name="ctl00$clientNavigation1$IncomeSum4">\t\t<div class="right" calysto-id="Realization.IncomeSum5" calysto-setter="(a1)=>this.innerHTML=a1.ToStringFormated(\'n2\')"><\/div>\t\t<select calysto-id="Realization.Color" name="TheColor">\t\t\t<option value="red">Red color<\/option>\t\t\t<option value="blue">Blue color<\/option>\t\t\t<option selected="selected">No color<\/option>\t\t<\/select>\t\t<select calysto-id="Realization.Height" name="TheHeight" multiple="multiple">\t\t\t<option value="1">One inch<\/option>\t\t\t<option value="2" selected="selected">Two inch<\/option>\t\t\t<option value="3" selected="selected">Three inch<\/option>\t\t\t<option value="4">Four inch<\/option>\t\t\t<option selected="selected" value="">No height<\/option>\t\t<\/select>\t\t<input type="radio" calysto-id="Income.Salary" name="ctl00$clientNavigation1$Salary1" value="1000" />\t\t<input type="radio" calysto-id="Income.Salary" name="ctl00$clientNavigation1$Salary1" value="2000" />\t\t<input type="radio" calysto-id="Income.Salary" name="ctl00$clientNavigation1$Salary1" value="3000" />\t\t<input type="radio" calysto-id="Income.Salary" name="ctl00$clientNavigation1$Salary1" value="4000" checked="checked" calysto-type="Decimal" />\t\t<input type="radio" calysto-id="Income.Salary" name="ctl00$clientNavigation1$Salary1" value="5000" />\t\t<input type="checkbox" calysto-id="Addition.Bonus1" name="ctl00$clientNavigation1$Addition1" value="5000" />\t\t<input type="checkbox" calysto-id="Addition.Bonus2" name="ctl00$clientNavigation1$Addition2" value="6000" checked="checked" />\t\t<input type="checkbox" calysto-id="Addition.Bonus3" name="ctl00$clientNavigation1$Addition3" value="7000" checked="checked" />\t\t<input type="checkbox" calysto-id="Addition.Bonus4" name="ctl00$clientNavigation1$Addition4" value="8000" /><\/div>'),u=$$calysto(f).CloneNodes().First(),ut=Calysto.Json.Serialize(Calysto.Forms.CalystoSerialize(u));Calysto.TestTools.UnitTesting.Assert.AreEqual('{"Game":{"Name":"the name of the game"},"Store":{"Name":"store name"},"Realization":{"IncomeSum1":-5,"IncomeSum2":"","IncomeSum3":"","IncomeSum4":-1,"Color":"No color","Height":["2","3",""]},"Income":{"Salary":4000},"Addition":{"Bonus2":"6000","Bonus3":"7000"}}',ut),e=Calysto.Json.Serialize(Calysto.Forms.MvcSerialize(u)),o='{"GameName":"the name of the game","StoreName":"store name","ctl00$clientNavigation1$Addition2":"6000","ctl00$clientNavigation1$Addition3":"7000","TheColor":"No color","TheHeight":["2","3",""]}',Calysto.TestTools.UnitTesting.Assert.AreEqual(o,e),s=Calysto.Json.Serialize(Calysto.Forms.FormSerialize(u)),h='{"GameName":"the name of the game","StoreName":"store name","ctl00$clientNavigation1$Addition2":"6000","ctl00$clientNavigation1$Addition3":"7000","TheColor":"No color","TheHeight":["2","3",""]}',Calysto.TestTools.UnitTesting.Assert.AreEqual(h,s),c='{"Game":{"Name":"game1"},"Store":{"Name":"store1"},"Realization":{"IncomeSum1":2,"IncomeSum2":-34.556,"IncomeSum3":"-23.63423","IncomeSum4":4,"Color":"blue","Height":["1","2","4"]},"Income":{"Salary":"2000"},"Addition":{"Bonus3":"7000","Bonus4":"8000"}}',u=$$calysto(f).CloneNodes().First(),Calysto.Forms.CalystoDeserialize(Calysto.Json.Deserialize(c),u),l=Calysto.Json.Serialize(Calysto.Forms.CalystoSerialize(u)),a='{"Game":{"Name":"game1"},"Store":{"Name":"store1"},"Realization":{"IncomeSum1":2,"IncomeSum2":-34.56,"IncomeSum3":"-23.63423","IncomeSum4":4,"Color":"blue","Height":["1","2","4"]},"Income":{"Salary":"2000"},"Addition":{"Bonus2":"6000","Bonus3":"7000","Bonus4":"8000"}}',Calysto.TestTools.UnitTesting.Assert.AreEqual(a,l),v=Calysto.Json.Serialize(Calysto.Forms.MvcSerialize(u)),y='{"GameName":"game1","StoreName":"store1","ctl00$clientNavigation1$IncomeSum3":"-23.63423","ctl00$clientNavigation1$Salary1":"2000","ctl00$clientNavigation1$Addition2":"6000","ctl00$clientNavigation1$Addition3":"7000","ctl00$clientNavigation1$Addition4":"8000","TheColor":"blue","TheHeight":["1","2","4"]}',Calysto.TestTools.UnitTesting.Assert.AreEqual(y,v),p=Calysto.Json.Serialize(Calysto.Forms.FormSerialize(u)),w='{"GameName":"game1","StoreName":"store1","ctl00$clientNavigation1$IncomeSum3":"-23.63423","ctl00$clientNavigation1$Salary1":"2000","ctl00$clientNavigation1$Addition2":"6000","ctl00$clientNavigation1$Addition3":"7000","ctl00$clientNavigation1$Addition4":"8000","TheColor":"blue","TheHeight":["1","2","4"]}',Calysto.TestTools.UnitTesting.Assert.AreEqual(w,p),b='{"Game":{"Name":"game1"},"Store":{"Name":"store1"},"Realization":{"IncomeSum1":2,"IncomeSum2":-34.556,"IncomeSum3":-23.63463,"IncomeSum4":4,"Color":"blue","Height":[1,2,4]},"Income":{"Salary":20.0034},"Addition":{"Bonus3":70.00643,"Bonus4":-8.000435}}',u=$$calysto(f).CloneNodes().First(),Calysto.Forms.CalystoDeserialize(Calysto.Json.Deserialize(b),u),k=Calysto.Json.Serialize(Calysto.Forms.CalystoSerialize(u)),d='{"Game":{"Name":"game1"},"Store":{"Name":"store1"},"Realization":{"IncomeSum1":2,"IncomeSum2":-34.56,"IncomeSum3":-23.635,"IncomeSum4":4,"Color":"blue","Height":["1","2","4"]},"Addition":{"Bonus2":"6000"}}',Calysto.TestTools.UnitTesting.Assert.AreEqual(d,k),g=Calysto.Json.Serialize(Calysto.Forms.MvcSerialize(u)),nt='{"GameName":"game1","StoreName":"store1","ctl00$clientNavigation1$Addition2":"6000","TheColor":"blue","TheHeight":["1","2","4"]}',Calysto.TestTools.UnitTesting.Assert.AreEqual(nt,g),tt=Calysto.Json.Serialize(Calysto.Forms.FormSerialize(u)),it='{"GameName":"game1","StoreName":"store1","ctl00$clientNavigation1$Addition2":"6000","TheColor":"blue","TheHeight":["1","2","4"]}',Calysto.TestTools.UnitTesting.Assert.AreEqual(it,tt),console.log("Forms test succesful")}})}),Calysto.TestTools.TestRunner.AddTest(function(){var i=new Calysto.List(["one","aa","nemza","two","temza","bb","cc"]).GroupBy("o=>o.length").SelectMany(function(r){return r.ToArray()}).Select("o=>o.length + ': ' + o").ToStringJoined(", "),n,t;if(i!="3: one, 3: two, 2: aa, 2: bb, 2: cc, 5: nemza, 5: temza")throw new Error("Self test failed in Calysto.List GroupBy test 1! Result: "+i);if(n=new Calysto.List(["one","two","nemza","temza","aa","bb","cc"]).OrderBy("o => o.length",true).ThenBy("o=>o",true).GroupBy("o=>o.length").Select("o=> o.Key + ', items: ' + o.ToArray().join('|')").ToStringJoined(", "),n!="5, items: temza|nemza, 3, items: two|one, 2, items: cc|bb|aa")throw new Error("Self test failed in Calysto.List test 1! Result: "+n);if(t=new Calysto.List([1,2,3,4,5]).Where("o=>o > 2").Select("(o, n) => new {item: o, index: n}").OrderBy("o=>o.index",true).Select("(o, n) => 'index: ' + n + ', value: ' + o.item").ToStringJoined("; "),t!="index: 0, value: 5; index: 1, value: 4; index: 2, value: 3")throw new Error("Self test failed in Calysto.List test 2! Result: "+t);}),Calysto.TestTools.TestRunner.AddTest(function(){var t=[{DataUrl:function(){},BlobIndex:1,FileName:"img_2.gif",MimeType:"image/gif",Size:70622,__calystotype:"Calysto22_Blob"},{DataUrl:function(){},BlobIndex:2,FileName:"img_2.gif",MimeType:"image/gif",Size:50622,__calystotype:"Calysto11_Blob"},{DataUrl:function(){return 3},BlobIndex:3,FileName:"img_3.gif",MimeType:"image/gif",Size:50622,__calystotype:"Calysto33_Blob"},{DataUrl:"",BlobIndex:4,FileName:"img_3.gif",MimeType:"image/gif",Size:70622,__calystotype:"Calysto222222_Blob"},{DataUrl:"",BlobIndex:5,FileName:"img_2.gif",MimeType:"image/gif",Size:70622,__calystotype:"Calysto222222_Blob"}],o=t.AsEnumerable().Cycle(20).ToArray(),s=t.AsEnumerable().Distinct(function(h){return h.DataUrl}).ToArray(),r=t.AsEnumerable().Cycle(100).Distinct(function(c){return c.DataUrl}).ToArray(),i,n,u,f,e;if(r.length!=4)throw new Error("Self test failed in Distinct test 01, result: "+r.length);if(i=t.AsEnumerable().Cycle(100).Distinct(function(l){return l}).ToArray(),i.length!=5)throw new Error("Self test failed in Distinct test 02, result: "+i.length);if(n=[2,3,4,5,6,null,-1,-6].AsEnumerable().Min(),n!=-6)throw new Error("Self test failed in Min test 01, result: "+n);if(u=[2,3,4,5,null,-1,-6].AsEnumerable().Max(),u!=5)throw new Error("Self test failed in Max test 01, result: "+n);if(f=[2,3,4,5,6,null,null,null,null,null,null,-1,-6].AsEnumerable().Average(),f!=1.8571428571428572)throw new Error("Self test failed in Average test 01, result: "+n);if(e=[2,3,4,5,6,null,null,null,null,null,null,-1,-6].AsEnumerable().Sum(),e!=13)throw new Error("Self test failed in Sum test 01, result: "+n);}),Calysto.TestTools.TestRunner.AddTest(function(){var t='{"msg":"hasdfs","files":[{"DataUrl":"","BlobIndex":0,"FileName":"img_1.gif","MimeType":"image/gif","Size":56591,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":1,"FileName":"img_2.gif","MimeType":"image/gif","Size":70622,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":2,"FileName":"img_3.gif","MimeType":"image/gif","Size":68342,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":3,"FileName":"img_4.gif","MimeType":"image/gif","Size":95296,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":4,"FileName":"img_5.gif","MimeType":"image/gif","Size":87117,"__calystotype":"Calysto222222_Blob"}]}',i,n;if(window.JSON){if(n=JSON.stringify(Calysto.Json.Deserialize(t)),n!=t)throw new Error("Self test failed in Calysto.JSON test 01! Result: "+n);if(i=JSON.parse(t),n=Calysto.Json.Serialize(i),n!=t)throw new Error("Self test failed in Calysto.JSON test 02! Result: "+n);}}),Calysto.TestTools.TestRunner.AddTest(function(){var t=[{name:"one",age:22,sub:{dva:22,tri:33,coll:[{nn:22},{nn:33},{nn:44}]}}].AsEnumerable().Select(function(r){return r}).Select("o => o.sub").Where("o => !!o").Where("o => !!o").SelectMany("o => o.coll").Where("o => o.nn > 1").Intersect([{kk:22},{kk:23},{kk:44}],"(o1, o2) => o1.nn == o2.kk").Where("o => !!o.nn").ForEach('(o, n) => o.addedProperty = "ter-" + n'),i=t.ToArray(),n=Calysto.Json.Serialize(i);if(n!='[{"nn":22,"addedProperty":"ter-0"},{"nn":44,"addedProperty":"ter-1"}]')throw new Error("Self test failed in Calysto.List test 03! Result: "+n);}),Calysto.TestTools.TestRunner.AddTest(function(){var ni=[{name:"one",age:22,sub:{dva:22,tri:33,coll:[{nn:22},{nn:33},{nn:44}]}}].AsEnumerable().Select(function(li){return li.sub}).Where(function(ai){return!!ai}).Where(function(vi){return!!vi}).SelectMany(function(yi){return yi.coll}).Where(function(pi){return pi.nn>1}).Intersect([{kk:22},{kk:23},{kk:44}],function(wi,bi){return wi.nn==bi.kk}).Where(function(ki){return!!ki.nn}).ForEach(function(di,gi){return di.addedProperty="ter-"+gi}),d=ni.ToArray(),i=Calysto.Json.Serialize(d),g,e,o,s,h,c,l,ct,a,v,f,t,yt,ei,p,w,b,k,r,dt,n;if(i!='[{"nn":22,"addedProperty":"ter-0"},{"nn":44,"addedProperty":"ter-1"}]')throw new Error("Self test failed in Calysto.List test 03! Result: "+i);if(g=d.AsEnumerable().ToDictionary(function(nr){return nr.nn},function(tr){return tr}).ToRawObject(),i=Calysto.Json.Serialize(g),i!='{"22":{"nn":22,"addedProperty":"ter-0"},"44":{"nn":44,"addedProperty":"ter-1"}}')throw new Error("Self test failed in Calysto.List test 04! Result: "+i);if(e=[[1,2,3,4],null,[8,7,5]].AsEnumerable().SelectMany(function(ir){return ir}).ToArray().join(";"),e!="1;2;3;4;8;7;5")throw new Error("Self test failed in SelectMay when collection is null, result: "+e);if(o=[1].AsEnumerable().Skip(1).Concat([3,4,5]).Concat([5,6]).ToArray(),o.length!=5)throw new Error("Self test failed in Calysto.List test Concat 1! Result: "+o.length);if(s=["one","aa","nemza","two","temza","bb","cc"].AsEnumerable().GroupBy(function(rr){return rr.length}).SelectMany(function(ur){return ur.ToArray()}).Select(function(fr){return fr.length+": "+fr}).ToStringJoined(", "),s!="3: one, 3: two, 2: aa, 2: bb, 2: cc, 5: nemza, 5: temza")throw new Error("Self test failed in Calysto.List GroupBy test 1! Result: "+s);if(h=["one","two","nemza","temza","aa","bb","cc"].AsEnumerable().OrderBy(function(er){return er.length},true).ThenBy(function(or){return or},true).GroupBy(function(sr){return sr.length}).Select(function(hr){return hr.Key+", items: "+hr.ToArray().join("|")}).ToStringJoined(", "),h!="5, items: temza|nemza, 3, items: two|one, 2, items: cc|bb|aa")throw new Error("Self test failed in Calysto.List test 1! Result: "+h);if(c=[1,2,3,4,5].AsEnumerable().Where(function(cr){return cr>2}).Select(function(lr,ar){return{item:lr,index:ar}}).OrderBy(function(vr){return vr.index},true).Select(function(yr,pr){return"index: "+pr+", value: "+yr.item}).ToStringJoined("; "),c!="index: 0, value: 5; index: 1, value: 4; index: 2, value: 3")throw new Error("Self test failed in Calysto.List test 2b! Result: "+c);var ti=[{Ordinal:11,ParentCategoryID:5,Name:"111"},{Ordinal:11,ParentCategoryID:5,Name:"222"},{Ordinal:11,ParentCategoryID:5,Name:"333"},{Ordinal:11,ParentCategoryID:5,Name:""},{Ordinal:11,ParentCategoryID:5,Name:undefined},{Ordinal:11,ParentCategoryID:5,Name:undefined},{Ordinal:24,ParentCategoryID:22,Name:"SomeName"},{Ordinal:24,ParentCategoryID:22,Name:"555"},{Ordinal:24,ParentCategoryID:55,Name:"666"},{Ordinal:88,ParentCategoryID:33,Name:"Mark"},{Ordinal:88,ParentCategoryID:55,Name:undefined},{Ordinal:11,ParentCategoryID:22,Name:undefined},{Ordinal:11,ParentCategoryID:33,Name:undefined},{Ordinal:11,ParentCategoryID:55,Name:"Anthon"},{Ordinal:24,ParentCategoryID:22,Name:undefined},{Ordinal:24,ParentCategoryID:33,Name:undefined},{Ordinal:24,ParentCategoryID:55,Name:"Clara"},{Ordinal:11,ParentCategoryID:55,Name:"Runna"},{Ordinal:11,ParentCategoryID:55,Name:"Inta"},{Ordinal:11,ParentCategoryID:55,Name:"333"},{Ordinal:11,ParentCategoryID:55,Name:"333"},{Ordinal:88,ParentCategoryID:22,Name:undefined},{Ordinal:88,ParentCategoryID:33,Name:undefined},{Ordinal:88,ParentCategoryID:55,Name:undefined}],nt=ti.AsEnumerable().OrderBy(function(wr){return wr.Ordinal},false).ThenBy(function(br){return br.ParentCategoryID},true).ThenBy(function(kr){return kr.Name},false).Skip(2).OrderBy(function(){return 1}).ThenBy(function(dr){return dr.ParentCategoryID},true).ThenBy(function(gr){return gr.Ordinal}),tt=nt.Select(function(nu){return nu.Ordinal+", "+nu.ParentCategoryID+", "+nu.Name}).ToStringJoined("|");if(tt!="11, 55, Anthon|11, 55, Inta|11, 55, Runna|24, 55, 666|24, 55, Clara|88, 55, undefined|88, 55, undefined|11, 33, undefined|24, 33, undefined|88, 33, undefined|88, 33, Mark|11, 22, undefined|24, 22, undefined|24, 22, 555|24, 22, SomeName|88, 22, undefined|11, 5, undefined|11, 5, undefined|11, 5, |11, 5, 111|11, 5, 222|11, 5, 333")throw new Error("Self test failed in Calysto.List test 3. Result: "+tt);if(l=nt.Count(),l!=22)throw new Error("Self test failed in Calysto.List test 5. Result: "+l);var i=["auto","autoo","aut","buton","1","2"].AsEnumerable().OrderBy(function(tu){return tu}).ToArray().join(", "),it=["auto","autoo","aut","buton","1","2","3"].AsEnumerable().OrderBy(function(iu){return iu}).ToArray().join(", "),rt=["auao","autoo","aut","buton","1","2","3"].AsEnumerable().OrderBy(function(ru){return ru}).ToArray().join(", "),ut=[undefined,1,NaN,null,"auto","autoo","aut","buton","1","2",3,NaN,undefined].AsEnumerable().OrderBy(function(uu){return uu}).ToArray().join(", ");if(i!="1, 2, aut, auto, autoo, buton")throw new Error("Self test failed in OrderBy test 1, result: "+i);if(it!="1, 2, 3, aut, auto, autoo, buton")throw new Error("Self test failed in OrderBy test 2, result: "+it);if(rt!="1, 2, 3, auao, aut, autoo, buton")throw new Error("Self test failed in OrderBy test 3, result: "+rt);if(ut!=", , , NaN, NaN, 1, 3, 1, 2, aut, auto, autoo, buton")throw new Error("Self test failed in OrderBy test 4, result: "+ut);var u="987654321".ToCharArray().AsEnumerable().Cycle(600).Select(function(fu,eu){return{ch:fu.charCodeAt(0),fromByte:eu%4}}).Take(100).OrderByDescending(function(ou){return ou.ch}).Select(function(su,hu){return{ch:su.ch,fromByte:su.fromByte,toByte:hu}}).ToList(),ft=u.Select(function(cu){return cu.ch+"_"+cu.fromByte+"_"+cu.toByte}).ToArray(),et=u.OrderBy(function(lu){return lu.ch}).ThenBy(function(au){return au.fromByte}).Select(function(vu){return vu.ch+"_"+vu.fromByte+"_"+vu.toByte}).ToArray(),ot=u.OrderBy(function(yu){return yu.ch}).ThenByDescending(function(pu){return pu.fromByte}).ThenByDescending(function(wu){return wu.toByte}).Select(function(bu){return bu.ch+"_"+bu.fromByte+"_"+bu.toByte}).ToArray(),st=u.OrderBy(function(ku){return ku.ch}).ThenBy(function(du){return du.fromByte}).ThenByDescending(function(gu){return gu.toByte}).Select(function(nf){return nf.ch+"_"+nf.fromByte+"_"+nf.toByte}).ToArray(),ht=u.OrderByDescending(function(tf){return tf.ch}).ThenByDescending(function(rf){return rf.fromByte}).ThenBy(function(uf){return uf.toByte}).Select(function(ff){return ff.ch+"_"+ff.fromByte+"_"+ff.toByte}).ToArray();if(ft.join(", ")!="57_0_0, 57_1_1, 57_2_2, 57_3_3, 57_0_4, 57_1_5, 57_2_6, 57_3_7, 57_0_8, 57_1_9, 57_2_10, 57_3_11, 56_1_12, 56_2_13, 56_3_14, 56_0_15, 56_1_16, 56_2_17, 56_3_18, 56_0_19, 56_1_20, 56_2_21, 56_3_22, 55_2_23, 55_3_24, 55_0_25, 55_1_26, 55_2_27, 55_3_28, 55_0_29, 55_1_30, 55_2_31, 55_3_32, 55_0_33, 54_3_34, 54_0_35, 54_1_36, 54_2_37, 54_3_38, 54_0_39, 54_1_40, 54_2_41, 54_3_42, 54_0_43, 54_1_44, 53_0_45, 53_1_46, 53_2_47, 53_3_48, 53_0_49, 53_1_50, 53_2_51, 53_3_52, 53_0_53, 53_1_54, 53_2_55, 52_1_56, 52_2_57, 52_3_58, 52_0_59, 52_1_60, 52_2_61, 52_3_62, 52_0_63, 52_1_64, 52_2_65, 52_3_66, 51_2_67, 51_3_68, 51_0_69, 51_1_70, 51_2_71, 51_3_72, 51_0_73, 51_1_74, 51_2_75, 51_3_76, 51_0_77, 50_3_78, 50_0_79, 50_1_80, 50_2_81, 50_3_82, 50_0_83, 50_1_84, 50_2_85, 50_3_86, 50_0_87, 50_1_88, 49_0_89, 49_1_90, 49_2_91, 49_3_92, 49_0_93, 49_1_94, 49_2_95, 49_3_96, 49_0_97, 49_1_98, 49_2_99")throw new Error("Self test failed in Calysto.OrderBy test 4. res1: "+ft.join(", "));if(et.join(", ")!="49_0_89, 49_0_93, 49_0_97, 49_1_90, 49_1_94, 49_1_98, 49_2_91, 49_2_95, 49_2_99, 49_3_92, 49_3_96, 50_0_79, 50_0_83, 50_0_87, 50_1_80, 50_1_84, 50_1_88, 50_2_81, 50_2_85, 50_3_78, 50_3_82, 50_3_86, 51_0_69, 51_0_73, 51_0_77, 51_1_70, 51_1_74, 51_2_67, 51_2_71, 51_2_75, 51_3_68, 51_3_72, 51_3_76, 52_0_59, 52_0_63, 52_1_56, 52_1_60, 52_1_64, 52_2_57, 52_2_61, 52_2_65, 52_3_58, 52_3_62, 52_3_66, 53_0_45, 53_0_49, 53_0_53, 53_1_46, 53_1_50, 53_1_54, 53_2_47, 53_2_51, 53_2_55, 53_3_48, 53_3_52, 54_0_35, 54_0_39, 54_0_43, 54_1_36, 54_1_40, 54_1_44, 54_2_37, 54_2_41, 54_3_34, 54_3_38, 54_3_42, 55_0_25, 55_0_29, 55_0_33, 55_1_26, 55_1_30, 55_2_23, 55_2_27, 55_2_31, 55_3_24, 55_3_28, 55_3_32, 56_0_15, 56_0_19, 56_1_12, 56_1_16, 56_1_20, 56_2_13, 56_2_17, 56_2_21, 56_3_14, 56_3_18, 56_3_22, 57_0_0, 57_0_4, 57_0_8, 57_1_1, 57_1_5, 57_1_9, 57_2_2, 57_2_6, 57_2_10, 57_3_3, 57_3_7, 57_3_11")throw new Error("Self test failed in Calysto.OrderBy test 4. res2: "+et.join(", "));if(ot.join(", ")!="49_3_96, 49_3_92, 49_2_99, 49_2_95, 49_2_91, 49_1_98, 49_1_94, 49_1_90, 49_0_97, 49_0_93, 49_0_89, 50_3_86, 50_3_82, 50_3_78, 50_2_85, 50_2_81, 50_1_88, 50_1_84, 50_1_80, 50_0_87, 50_0_83, 50_0_79, 51_3_76, 51_3_72, 51_3_68, 51_2_75, 51_2_71, 51_2_67, 51_1_74, 51_1_70, 51_0_77, 51_0_73, 51_0_69, 52_3_66, 52_3_62, 52_3_58, 52_2_65, 52_2_61, 52_2_57, 52_1_64, 52_1_60, 52_1_56, 52_0_63, 52_0_59, 53_3_52, 53_3_48, 53_2_55, 53_2_51, 53_2_47, 53_1_54, 53_1_50, 53_1_46, 53_0_53, 53_0_49, 53_0_45, 54_3_42, 54_3_38, 54_3_34, 54_2_41, 54_2_37, 54_1_44, 54_1_40, 54_1_36, 54_0_43, 54_0_39, 54_0_35, 55_3_32, 55_3_28, 55_3_24, 55_2_31, 55_2_27, 55_2_23, 55_1_30, 55_1_26, 55_0_33, 55_0_29, 55_0_25, 56_3_22, 56_3_18, 56_3_14, 56_2_21, 56_2_17, 56_2_13, 56_1_20, 56_1_16, 56_1_12, 56_0_19, 56_0_15, 57_3_11, 57_3_7, 57_3_3, 57_2_10, 57_2_6, 57_2_2, 57_1_9, 57_1_5, 57_1_1, 57_0_8, 57_0_4, 57_0_0")throw new Error("Self test failed in Calysto.OrderBy test 4. res3: "+ot.join(", "));if(st.join(", ")!="49_0_97, 49_0_93, 49_0_89, 49_1_98, 49_1_94, 49_1_90, 49_2_99, 49_2_95, 49_2_91, 49_3_96, 49_3_92, 50_0_87, 50_0_83, 50_0_79, 50_1_88, 50_1_84, 50_1_80, 50_2_85, 50_2_81, 50_3_86, 50_3_82, 50_3_78, 51_0_77, 51_0_73, 51_0_69, 51_1_74, 51_1_70, 51_2_75, 51_2_71, 51_2_67, 51_3_76, 51_3_72, 51_3_68, 52_0_63, 52_0_59, 52_1_64, 52_1_60, 52_1_56, 52_2_65, 52_2_61, 52_2_57, 52_3_66, 52_3_62, 52_3_58, 53_0_53, 53_0_49, 53_0_45, 53_1_54, 53_1_50, 53_1_46, 53_2_55, 53_2_51, 53_2_47, 53_3_52, 53_3_48, 54_0_43, 54_0_39, 54_0_35, 54_1_44, 54_1_40, 54_1_36, 54_2_41, 54_2_37, 54_3_42, 54_3_38, 54_3_34, 55_0_33, 55_0_29, 55_0_25, 55_1_30, 55_1_26, 55_2_31, 55_2_27, 55_2_23, 55_3_32, 55_3_28, 55_3_24, 56_0_19, 56_0_15, 56_1_20, 56_1_16, 56_1_12, 56_2_21, 56_2_17, 56_2_13, 56_3_22, 56_3_18, 56_3_14, 57_0_8, 57_0_4, 57_0_0, 57_1_9, 57_1_5, 57_1_1, 57_2_10, 57_2_6, 57_2_2, 57_3_11, 57_3_7, 57_3_3")throw new Error("Self test failed in Calysto.OrderBy test 4. res4: "+st.join(", "));if(ht.join(", ")!="57_3_3, 57_3_7, 57_3_11, 57_2_2, 57_2_6, 57_2_10, 57_1_1, 57_1_5, 57_1_9, 57_0_0, 57_0_4, 57_0_8, 56_3_14, 56_3_18, 56_3_22, 56_2_13, 56_2_17, 56_2_21, 56_1_12, 56_1_16, 56_1_20, 56_0_15, 56_0_19, 55_3_24, 55_3_28, 55_3_32, 55_2_23, 55_2_27, 55_2_31, 55_1_26, 55_1_30, 55_0_25, 55_0_29, 55_0_33, 54_3_34, 54_3_38, 54_3_42, 54_2_37, 54_2_41, 54_1_36, 54_1_40, 54_1_44, 54_0_35, 54_0_39, 54_0_43, 53_3_48, 53_3_52, 53_2_47, 53_2_51, 53_2_55, 53_1_46, 53_1_50, 53_1_54, 53_0_45, 53_0_49, 53_0_53, 52_3_58, 52_3_62, 52_3_66, 52_2_57, 52_2_61, 52_2_65, 52_1_56, 52_1_60, 52_1_64, 52_0_59, 52_0_63, 51_3_68, 51_3_72, 51_3_76, 51_2_67, 51_2_71, 51_2_75, 51_1_70, 51_1_74, 51_0_69, 51_0_73, 51_0_77, 50_3_78, 50_3_82, 50_3_86, 50_2_81, 50_2_85, 50_1_80, 50_1_84, 50_1_88, 50_0_79, 50_0_83, 50_0_87, 49_3_92, 49_3_96, 49_2_91, 49_2_95, 49_2_99, 49_1_90, 49_1_94, 49_1_98, 49_0_89, 49_0_93, 49_0_97")throw new Error("Self test failed in Calysto.OrderBy test 4. res5: "+ht.join(", "));ct=new Calysto.List(["word1 word2 word3","this is next","menu item three"]).Cycle(10).Select(function(ef,of){return{Key:of,Value:ef}}).SkipWhile(function(sf){return sf.Key<2}).TakeWhile(function(hf){return hf.Key<26}).Select(function(cf){return cf.Key+"_"+cf.Value}).ToStringJoined(),Calysto.TestTools.UnitTesting.Assert.AreEqual("2_menu item three3_word1 word2 word34_this is next5_menu item three6_word1 word2 word37_this is next8_menu item three9_word1 word2 word3",ct);var n=Calysto.DomQuery.FromHtml('<div class="search_v2" style="margin-right: 5px;" >\t\t<form id="form_search" name="search_main" onsubmit="return check_search_box_keyword()" action="/index.php" method="get">\t\t\t<input name="ctl" type="hidden" value=" ddfe nedgd search2iio" style="display: none" calysto-num="45"/>\t\t\t<label calysto-num="55" for="f_keywords">Upiši pojam...<\/label>\t\t\t<input name="f_keywords" id="f_keywords" type="text" style="width: 263px" onfocus="javascript:reset_search_style()" />\t\t\t<input calysto-num="25" class="mini_button" type="submit" value="Tražiiio" />\t\t\t<img alt="Beta" style="float: left; margin-top: -3px; padding-left: 5px;" />\t\t<\/form>\t<\/div>\t<div class="clear1" ><\/div>\t<div class="clear" ><\/div>'),ii=[n.Query("div:is(>>input[name='ctl'])").Count(),n.Query("div:not(>>input[name=ctl])").Count(),n.Query("//input[type=hidden]").Count(),n.Query("//input[type]").Count(),n.Query("//[type]").Count(),n.Query("//[value^=Tra]").Count(),n.Query("//[value$=io]").Count(),n.Query("//[value~=ddfe]").Count(),n.Query("//[calysto-num]").Count(),n.Query("//[calysto-num==25]").Count(),n.Query("//[calysto-num > 25]").Count(),n.Query("//[calysto-num <= 45]").Count(),n.Query("div:not(>input[name])").Count()],lt=ii.join(", ");if(lt!="1, 2, 1, 3, 3, 1, 2, 1, 3, 1, 2, 2, 3")throw new Error("error in Calysto.DomQuery attribute test, result: "+lt);if(a=n.Select(function(lf){return lf.tagName}).Where(function(af){return!!af}).ToStringJoined(", ").toLowerCase(),a!="div, div, div")throw new Error("error in Calysto.DomQuery test1, result: "+a);if(v=n.DescendantNodes().Query("form>label, a, IMG, input.mini_button").Select(function(vf){return vf.tagName+vf.id+vf.name+vf.className}).ToStringJoined(", ").toLowerCase(),v!="labelundefined, img, inputmini_button")throw new Error("self test failed in Calysto.DomQuery test2a, result: "+v);var at='<div><span id="col333" style="background-color:aliceblue">fdsa<\/span> <span><\/span>   <div id="dd1" style="overflow:hidden; border:solid 1px red; width:900px; height:65px; position:absolute; margin-top:0;; top:200px; left:200px; background:red; "> prvi<\/div>\t<div>drugi<\/div>\t<div hrEF="hadsfmojurlfasd">treci<p><a class="mmkk" href="http://www.dd.com/somemylink1">moj link<\/a><\/p><\/div>\t<div hrEF="hadsfmojurlfasd">treci<p><a class="mmkk" href="http://www.dd.com/somemylink2">moj link<\/a><\/p><\/div>\t<div hrEF="hadsfmojurlfasd">treci<p><a class="mmkk" href="http://www.dd.com/somemylink31">moj link<\/a><a class="mmkk" href="http://www.dd.com/somemylink32">moj link<\/a><a class="mmkk" href="http://www.dd.com/somemylink33">moj link<\/a><\/p><\/div>\t<div>cetvrti<\/div>\t<div id="hh">peti<\/div><\/div>',hi=Calysto.DomQuery.FromHtml(at),y=Calysto.DomQuery.FromSelector(document.documentElement).InsertChildren(at).ChildNodes().Take(1),vt=y.DescendantNodes().Query("div>>a:reverse:take(4):skip(1):reverse").SelectAttribute("hrEF").ToStringJoined(", ");if(vt!="http://www.dd.com/somemylink2, http://www.dd.com/somemylink31, http://www.dd.com/somemylink32")throw new Error("Self test failed in Calysto.DomQuery test3. Result: "+vt);if(f=$$calysto("#col333").SelectStyle("background-color").FirstOrDefault(),f!="rgb(240, 248, 255)"&&f!="aliceblue")throw new Error("Self test failed in Calysto.DomQuery test5. Result: "+f+", expected: rgb(240, 248, 255)");t=y.DescendantNodes().Query("#dd1"),yt=t.SelectStyle("height").FirstOrDefault(),t.ApplyStyleMap({width:"950px",opacity:"-=60",height:"+=500"});var ri=t.SelectStyle("height").FirstOrDefault(),ui=t.SelectStyle("width").FirstOrDefault(),fi=t.SelectStyle("opacity").FirstOrDefault(),pt=$$calysto([yt,ri,ui,fi]).ToStringJoined(", ");if(pt!="65, 565, 950, 40")throw new Error("Self test failed in Calysto.DomQuery test4. Result: "+pt);if(t.ToAnimator({height:"+=460",opacity:"-=10"}).Easing("easeInOutExpo").OnComplete(function(yf){var pf=yf.AsDomQuery(),bf=pf.SelectStyle("opacity").FirstOrDefault(),kf=pf.SelectStyle("height").FirstOrDefault(),wf=$$calysto([bf]).ToStringJoined(", ");if(wf!="30")throw new Error("Self test failed in Animator element style test. Result: "+wf);else console.log("Animator element style test successful")}).Start(),ei=(new Calysto.Animator).AddValue(100,500).OnComplete(function(df){var gf=df.Items().Select(function(ne){return ne.numCurrent}).pop();if(gf==500)console.log("Animator numeric value test successful");else throw new Error("Self test failed in Animator numeric value test. Result: "+gf);}).Start(),p=t.PreviousSiblings().Where(function(te){return te.nodeType!=3}).Count(),p!=2)throw new Error("Self test failed in Calysto.DomQuery test6. Result: "+p);if(w=t.NextSiblings().Where(function(ie){return ie.nodeType!=3}).Count(),w!=6)throw new Error("Self test failed in Calysto.DomQuery test7. Result: "+w);if(y.RemoveFromDom(),b="my text is this".TakeFirst(9,"..."),k="my text is this".TakeLast(9,"..."),b!="my tex...")throw new Error("Self test failed in String.TakeLast, result: "+b);if(k!="...s this")throw new Error("Self test failed in String.TakeFirst, result: "+k);r=Calysto.DomQuery.CreateElement("div").ApplyStyle("border:solid 1px blue; padding:5px;position:absolute;").AddAsChildrenTo(document.documentElement).AddChildren("<div style='position:absolute;border:solid 10px red;'>this is my div11<\/div>"),r.ChildNodes().ApplyStyle("border:solid 1px green; padding:5px;").InsertBefore(Calysto.DomQuery.CreateElement("div").ApplyStyle("border:15px solid red;").ForEach(function(re){return re.innerHTML="div 2"}),Calysto.DomQuery.CreateElement("div").ApplyStyle("border:15px solid red;").ForEach(function(ue){return ue.innerHTML="div 3"}),Calysto.DomQuery.CreateElement("div").ApplyStyle("border:25px solid red;").ForEach(function(fe){return fe.innerHTML="div 4"}),"<div>prvi div<\/div><div class='hhret435' style='border:solid 18px blue;width:200px;padding:5px;'>drugi div<\/div><div>third div11<\/div>","this is some text node",Calysto.DomQuery.CreateElement("div").ApplyStyle("border:5px solid red;width:auto;").ForEach(function(ee){return ee.innerHTML="div 5"}));var wt=r.DescendantNodes("div").ToArray(),bt=r.DescendantNodes().WhereStyle("border-top-width",function(oe){return oe==18}).ToArray(),kt=r.DescendantNodes().WhereStyle("width",function(se){return se==236}).ToArray(),oi=r.DescendantNodes().SelectStyle("box-sizing").Where(function(he){return he=="border-box"}).Any();if(r.RemoveFromDom(),wt.length!=8)throw new Error("Self test dd00 failed in Calysto.DomQuery, result: "+wt.length);if(bt.length!=1)throw new Error("Self test dd11 failed in Calysto.DomQuery, result: "+bt.length);if(dt=Calysto.Features.GetBrowser().KindName=="MSIE"&&Calysto.Features.GetBrowser().Version<=8,kt.length!=1&&!dt&&!oi)throw new Error("Self test dd12 failed in Calysto.DomQuery, result: "+kt.length);n=Calysto.DomQuery.CreateElement("div"),n.ApplyStyle("border:solid 1px blue; padding:5px;").AddChildren("<div style='position:absolute;border:solid 10px red;'>this is my div<\/div>").ChildNodes().ApplyStyle("border:solid 1px green; padding:5px;").InsertBefore(Calysto.DomQuery.CreateElement("div").ApplyStyle("border:5px solid red;").ForEach(function(ce){return ce.innerHTML="div 2"}),Calysto.DomQuery.CreateElement("div").ApplyStyle("border:5px solid red;").ForEach(function(le){return le.innerHTML="div 3"}),Calysto.DomQuery.CreateElement("div").ApplyStyle("border:5px solid red;").ForEach(function(ae){return ae.innerHTML="div 4"}),"<div>first div<\/div><div>second div<\/div><div>third div<\/div>","some text node 4325",Calysto.DomQuery.CreateElement("div").ApplyStyle("border:5px solid red;").ForEach(function(ve){return ve.innerHTML="div 5"})).ParentNodes().DescendantNodes().ApplyStyle("margin:5px;").Where(function(ye){return ye.childNodes&&ye.childNodes.length==1});var ci=n.Select(function(pe){return pe.innerHTML.replace(/<[^>]+>/g,"")}).FirstOrDefault(),si=n.DescendantNodes().Where(function(we){return we.nodeType==1}).Select(function(be){return be.nodeValue||be.innerHTML}).ToList(),gt=si.ToStringJoined(", ");if(gt!="div 2, div 3, div 4, first div, second div, third div, div 5, this is my div")throw new Error("SelfTest failed in test #html1, result: "+gt);console.log("DomQuery test successful")}),Calysto.TestTools.TestRunner.AddTest(function(){var n='{"OriginalFilename":"20.mp4","GuidFilename":"f553f4ac-0fda-486a-d501-f23afe25fb33.mp4","CreationDate":{"__calystotype":"Calysto_Date","Date":"2016-02-08 12:43:45.512"},"Size":405758,"Duration":5.534,"Description":"ywert","Items":[{"Url":"http://cms.24sata.hr/api/video-upload/get-media-id/","PostData":{"filename":"20.mp4","description":"ywert"},"ResponseXml":null,"Command":1,"FileID":null,"Extension":".mp4","Message":"The remote server returned an error: (403) Forbidden.","Path":null}],"FtpUploaders":[]}{"OriginalFilename":"120.mp4","GuidFilename":"f553f4ac-0fda-486a-d501-f23afe25fb33.mp4","CreationDate":{"__calystotype":"Calysto_Date","Date":"2016-02-08 12:43:45.512"},"Size":405758,"Duration":5.534,"Description":"ywert","Items":[{"Url":"http://cms.24sata.hr/api/video-upload/get-media-id/","PostData":{"filename":"20.mp4","description":"ywert"},"ResponseXml":null,"Command":1,"FileID":null,"Extension":".mp4","Message":"The remote server returned an error: (403) Forbidden.","Path":null}],"FtpUploaders":[]}{"OriginalFilename":"20.mp4","GuidFilename":"f553f4ac-0fda-486a-d501-f23afe25fb33.mp4","CreationDate":{"__calystotype":"Calysto_Date","Date":"2016-02-08 12:43:45.512"},"Size":405758,"Duration":5.534,"Description":"ywert","Items":[{"Url":"http://cms.24sata.hr/api/video-upload/get-media-id/","PostData":{"filename":"20.mp4","description":"ywert"},"ResponseXml":null,"Command":1,"FileID":null,"Extension":".mp4","Message":"The remote server returned an error: (403) Forbidden.","Path":null}],"FtpUploaders":[]}{"OriginalFilename":"120.mp4","GuidFilename":"f553f4ac-0fda-486a-d501-f23afe25fb33.mp4","CreationDate":{"__calystotype":"Calysto_Date","Date":"2016-02-08 12:43:45.512"},"Size":405758,"Duration":5.534,"Description":"ywert","Items":[{"Url":"http://cms.24sata.hr/api/video-upload/get-media-id/","PostData":{"filename":"20.mp4","description":"ywert"},"ResponseXml":null,"Command":1,"FileID":null,"Extension":".mp4","Message":"The remote server returned an error: (403) Forbidden.","Path":null}],"FtpUploaders":[]}{"OriginalFilename":"20.mp4","GuidFilename":"f553f4ac-0fda-486a-d501-f23afe25fb33.mp4","CreationDate":{"__calystotype":"Calysto_Date","Date":"2016-02-08 12:43:45.512"},"Size":405758,"Duration":5.534,"Description":"ywert","Items":[{"Url":"http://cms.24sata.hr/api/video-upload/get-media-id/","PostData":{"filename":"20.mp4","description":"ywert"},"ResponseXml":null,"Command":1,"FileID":null,"Extension":".mp4","Message":"The remote server returned an error: (403) Forbidden.","Path":null}],"FtpUploaders":[]}{"OriginalFilename":"120.mp4","GuidFilename":"f553f4ac-0fda-486a-d501-f23afe25fb33.mp4","CreationDate":{"__calystotype":"Calysto_Date","Date":"2016-02-08 12:43:45.512"},"Size":405758,"Duration":5.534,"Description":"ywert","Items":[{"Url":"http://cms.24sata.hr/api/video-upload/get-media-id/","PostData":{"filename":"20.mp4","description":"ywert"},"ResponseXml":null,"Command":1,"FileID":null,"Extension":".mp4","Message":"The remote server returned an error: (403) Forbidden.","Path":null}],"FtpUploaders":[]}{"OriginalFilename":"20.mp4","GuidFilename":"f553f4ac-0fda-486a-d501-f23afe25fb33.mp4","CreationDate":{"__calystotype":"Calysto_Date","Date":"2016-02-08 12:43:45.512"},"Size":405758,"Duration":5.534,"Description":"ywert","Items":[{"Url":"http://cms.24sata.hr/api/video-upload/get-media-id/","PostData":{"filename":"20.mp4","description":"ywert"},"ResponseXml":null,"Command":1,"FileID":null,"Extension":".mp4","Message":"The remote server returned an error: (403) Forbidden.","Path":null}],"FtpUploaders":[]}',r=new Calysto.Utility.StringCompressor,t=r.Compress(n),i;if(t==n)throw new Error("StringCompressor selftest error, compressed result: "+t);if(i=r.Decompress(t),i!=n)throw new Error("StringCompressor selftest error, decompressed result: "+i);console.log("StringCompressor test succesful")}),Calysto.TestTools.TestRunner.AddTest(function(){var i=new Calysto.Security.Cryptography.SimpleEncryptor("lozinka"),n=Calysto.Utility.Encoding.RfcBase64.EncodeToBase64String(i.Encrypt("this is my text čćžđš")),t;if(n!="LNnDGAHDGAFAkAEs5E8sAZMtkxl1IZNRdX4=")throw new Error("SimpleEncryptor.Encrypt() error, result: "+n);if(t=i.DecryptToString(Calysto.Utility.Encoding.RfcBase64.DecodeBase64StringToArray(n)),t!="this is my text čćžđš")throw new Error("SimpleEncryptor.Decrypt() error, result: "+t);console.log("SimpleEncryptor test succesful")}),Calysto.TestTools.TestRunner.AddTest(function(){var n=[Calysto.Validate.IsEmail("myname@mfsd"),Calysto.Validate.IsEmail("myname@mfsd.com"),Calysto.Validate.IsEmail("myname.me@mfsd"),Calysto.Validate.IsEmail("myname.me@mfsd.com"),"---",Calysto.Validate.CanConvertToNumber("gasdfg"),Calysto.Validate.CanConvertToNumber("gasdf432523"),Calysto.Validate.CanConvertToNumber("234.532"),Calysto.Validate.CanConvertToNumber("23,4532.63"),"---",Calysto.Validate.CanConvertToDecimal("234.532"),Calysto.Validate.ContainsNumber("f423gsda6234"),"---",Calysto.Validate.CanConvertToInteger("-432.652354"),Calysto.Validate.IsIPv4Address("4234"),Calysto.Validate.IsIPv4Address("234"),Calysto.Validate.IsIPv4Address("234.23.4.5"),Calysto.Validate.IsIPv4Address("234.23.4")];if(n.join(";")!="false;true;false;true;---;false;false;true;true;---;true;true;---;false;false;false;true;false")throw new Error("Validate error, result: "+n.join(";"));console.log("Validate test successful")}),Calysto.TestTools.TestRunner.AddTest(function(){function n(t,i){var r=Object.getOwnPropertyNames(t).Select(function(u){return u+":::"+t[u]}).ToStringJoined(";;;");if(r!=i)throw new Error("Uri error, expected: "+i+", result: "+r);}n(new Calysto.Uri("https://85.114.41.97/"),"Scheme:::https;;;Username:::;;;Password:::;;;Host:::85.114.41.97;;;Port:::;;;Path:::/;;;Query:::;;;Hash:::"),n(new Calysto.Uri("http://domena.com:43/nesto/dva/dru.aspx?qu=3&gr=3#dd=rel"),"Scheme:::http;;;Username:::;;;Password:::;;;Host:::domena.com;;;Port:::43;;;Path:::/nesto/dva/dru.aspx;;;Query:::?qu=3&gr=3;;;Hash:::#dd=rel"),n(new Calysto.Uri("http://domaena.com:233/../dva.aspx?a=10&b=22#dva"),"Scheme:::http;;;Username:::;;;Password:::;;;Host:::domaena.com;;;Port:::233;;;Path:::/../dva.aspx;;;Query:::?a=10&b=22;;;Hash:::#dva"),n(new Calysto.Uri("http://domain.com/?m=10"),"Scheme:::http;;;Username:::;;;Password:::;;;Host:::domain.com;;;Port:::;;;Path:::/;;;Query:::?m=10;;;Hash:::"),n(new Calysto.Uri("http://username:password@www.nesto.com:1233/mypath/bill.aspx?a=10&b=20#c=3&c=4"),"Scheme:::http;;;Username:::username;;;Password:::password;;;Host:::www.nesto.com;;;Port:::1233;;;Path:::/mypath/bill.aspx;;;Query:::?a=10&b=20;;;Hash:::#c=3&c=4"),n(new Calysto.Uri("/"),"Scheme:::;;;Username:::;;;Password:::;;;Host:::;;;Port:::;;;Path:::/;;;Query:::;;;Hash:::"),n(new Calysto.Uri("/some/path.aspx"),"Scheme:::;;;Username:::;;;Password:::;;;Host:::;;;Port:::;;;Path:::/some/path.aspx;;;Query:::;;;Hash:::"),n(new Calysto.Uri("?q=13&b=32"),"Scheme:::;;;Username:::;;;Password:::;;;Host:::;;;Port:::;;;Path:::;;;Query:::?q=13&b=32;;;Hash:::"),console.log("Uri test successful")}),Calysto.TestTools.TestRunner.AddTest(function(){var t=[],n=(new Calysto.MulticastDelegate).OnAdd(function(r){t.push("in_OnAdd"),r("ante",10,false)}).AsFunc({Prop1:true,Prop2:false}),i;if(n(function(u,f,e){t.push("Invocation"),t.push({name:u,age:f,isWhite:e})}),n.Invoke(function(o){return o("jura",22,true)}),n.Invoke(function(s){return s("karmen",55,false)}),n.Invoke(function(h){return h("junior",11,true)}),n.Invoke(),i=Calysto.Json.Serialize(t),i!='["in_OnAdd","Invocation",{"name":"ante","age":10,"isWhite":false},"Invocation",{"name":"jura","age":22,"isWhite":true},"Invocation",{"name":"karmen","age":55,"isWhite":false},"Invocation",{"name":"junior","age":11,"isWhite":true},"Invocation",{"name":null,"age":null,"isWhite":null}]')throw new Error("Error in Calysto.MulticastDelegate, result1: "+i);console.log("MulticastDelegate test successful")}),Calysto.TestTools.TestRunner.AddTest(function(){var t=Calysto.Globalization.CultureInfo.CurrentCulture,n;Calysto.Globalization.CultureInfo.CurrentCulture=Calysto.Globalization.CultureInfo.USCulture,n=Calysto.Resources.CalystoLang.ResourceProvider,Calysto.TestTools.UnitTesting.Assert.AreEqual("Invocation forbidden",n.GetString("MethodInvocationFobidden")),Calysto.TestTools.UnitTesting.Assert.AreEqual("Invocation forbidden",n.GetString("MethodInvocationFobidden",["en-US"])),Calysto.TestTools.UnitTesting.Assert.AreEqual("Nemate dozvolu za ovu akciju",n.GetString("MethodInvocationFobidden",["hr-HR"])),Calysto.TestTools.UnitTesting.Assert.ThrowsException(function(){return n.GetString("MethodInvocationFobidden",["nonexisting property"])}),Calysto.TestTools.UnitTesting.Assert.AreEqual("Please wait, page is reloading...",n.GetString("PageIsReloadingPleaseWait")),Calysto.TestTools.UnitTesting.Assert.AreEqual("Please wait, page is reloading...",n.GetString("PageIsReloadingPleaseWait",["en-US"])),Calysto.TestTools.UnitTesting.Assert.AreEqual("Molimo pričekajte, stranica se osvježava...",n.GetString("PageIsReloadingPleaseWait",["hr-HR"])),Calysto.TestTools.UnitTesting.Assert.ThrowsException(function(){return n.GetString("PageIsReloadingPleaseWait",["nonexisting property"])}),Calysto.Globalization.CultureInfo.CurrentCulture=t}),function(n){var t;(function(i){var r=this;n.TestTools.TestRunner.AddTest(function(){return __awaiter(r,void 0,void 0,function(){function u(f,e){return __awaiter(this,void 0,void 0,function(){function h(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return[2,new e(function(l){o.push("#1"),setTimeout(function(){return l("success1")},s)}).then(function(a){o.push("#2"),o.push(a);return a}).then(function(v){o.push("#3"),o.push(v);return new e(function(y){setTimeout(function(){o.push("#4"),y("success2222")},s)})}).then(function(p){o.push("#5"),o.push(p);return new e(function(w){setTimeout(function(){o.push("#6"),w("success1111")},s)})}).catch(function(b){o.push("#7"),o.push(b);return"dva"}).finally(function(){o.push("#8");return"amd"})]})})}function c(){return __awaiter(this,void 0,void 0,function(){var k;return __generator(this,function(d){switch(d.label){case 0:return[4,h()];case 1:k=d.sent(),o.push(k);return[2]}})})}var s,o;return __generator(this,function(){s=200,o=[],o.push("s0"),c(),o.push("s1"),setTimeout(function(){var g=o.ToStringJoined(", ");n.TestTools.UnitTesting.Assert.AreEqual("s0, #1, s1, s2, s3, #2, success1, #3, success1, #4, #5, success2222, #6, #8, success1111",g),console.log(f+" test successful")},s*3.5),o.push("s2"),setTimeout(function(){var nt=o.ToStringJoined(", ");n.TestTools.UnitTesting.Assert.AreEqual("s0, #1, s1, s2, s3, #2, success1, #3, success1, #4, #5, success2222",nt)},s*2.5),o.push("s3"),setTimeout(function(){var tt=o.ToStringJoined(", ");n.TestTools.UnitTesting.Assert.AreEqual("s0, #1, s1, s2, s3",tt)},s*.5);return[2,new e(function(it){setTimeout(function(){return it()},s*4)})]})})}return __generator(this,function(rt){switch(rt.label){case 0:return[4,u("CPromise",i.CPromise)];case 1:rt.sent();return[4,u("Promise",window.Promise)];case 2:rt.sent();return[2]}})})})})(t=n.Tasks||(n.Tasks={}))}(Calysto||(Calysto={}))