var __awaiter=this&&this.__awaiter||function(n,t,i,r){function u(f){return f instanceof i?f:new i(function(e){e(f)})}return new(i||(i=Promise))(function(o,s){function c(a){try{h(r.next(a))}catch(v){s(v)}}function l(y){try{h(r["throw"](y))}catch(p){s(p)}}function h(w){w.done?o(w.value):u(w.value).then(c,l)}h((r=r.apply(n,t||[])).next())})},$$calysto,Calysto;(function(n){var t;(function(i){class r{constructor(u){if(this.executor=u,this.executor){try{this.executor(e=>this.notifyResolved(e),o=>this.notifyRejected(o))}catch(f){this.notifyRejected(f)}}}notifyResolved(s){this._isResolved=!0;this._resolveValue=s,this.notifyNext()}notifyRejected(h){this._isRejected=!0;this._rejectValue=h,this.notifyNext()}notifyNext(){this._nextPromise&&!this._isNextNotified&&(this._isRejected&&this._nextPromise._onPreviousFailed?(this._isNextNotified=!0,this._nextPromise._onPreviousFailed(this._rejectValue),this._nextPromise.notifyNext()):this._isResolved&&this._nextPromise._onPreviousSuccess&&(this._isNextNotified=!0,this._nextPromise._onPreviousSuccess(this._resolveValue),this._nextPromise.notifyNext()))}then(c,l){let a=new r;a._onPreviousSuccess=v=>{try{if(v&&v.then){let w=v;w.then(b=>a._onPreviousSuccess(b),k=>a._onPreviousFailed(k));return}c||(c=d=>d);let p=c(v);if(p&&p.then){let g=p;g.then(nt=>{a.notifyResolved(nt)},tt=>{a.notifyRejected(tt)})}else a.notifyResolved(p)}catch(y){a.notifyRejected(y)}};a._onPreviousFailed=it=>{try{l||(l=ft=>{throw ft;});let ut=l(it);if(ut&&ut.then){let et=ut;et.then(ot=>{a.notifyResolved(ot)},st=>{a.notifyRejected(st)})}else a.notifyResolved(ut)}catch(rt){a.notifyRejected(rt)}},this._nextPromise=a,this.notifyNext();return a}catch(ht){return this.then(ct=>ct,ht||(lt=>lt))}finally(at){return this.then(at?vt=>{at();return vt}:yt=>yt,at?pt=>{at();throw pt;}:wt=>wt)}static resolve(bt){return new r(kt=>{kt(bt)})}static reject(dt){return new r((gt,ni)=>{ni(dt)})}}i.CPromise=r;window.Promise||(window.Promise=r)})(t=n.Tasks||(n.Tasks={}))})(Calysto||(Calysto={})),function(n){var t;(function(i){class r{get IsCancelled(){return this._isCancelled}Watchdog(u){this._timer=setTimeout(()=>{this.Cancel(),this._onError&&this._onError("Timeout")},u)}Cancel(){clearTimeout(this._timer);this._isCancelled=true}OnError(f){this._onError=f}NotifyError(e){this.Cancel();this._onError&&this._onError(e)}OnSuccess(o){this._onSuccess=o}NotifySuccess(s){this.Cancel();this._onSuccess&&this._onSuccess(s)}}i.TaskState=r})(t=n.Tasks||(n.Tasks={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){function f(o){return __awaiter(this,void 0,void 0,function*(){return new Promise(s=>{setTimeout(()=>s(!0),o)})})}function e(h){return __awaiter(this,void 0,void 0,function*(){return new Promise((c,l)=>{let a=new i.TaskState;a.OnError(v=>l(v));a.OnSuccess(y=>c(y)),h(a)})})}u.SleepAsync=f;u.RunAsync=e})(r=i.TaskUtility||(i.TaskUtility={}))})(t=n.Tasks||(n.Tasks={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){u.Arrows_ArrowBlackDown="~/Images/Arrows/ArrowBlackDown.png";u.Arrows_ArrowBlackUp="~/Images/Arrows/ArrowBlackUp.png",u.Arrows_ArrowWhiteDown="~/Images/Arrows/ArrowWhiteDown.png",u.Arrows_ArrowWhiteUp="~/Images/Arrows/ArrowWhiteUp.png",u.Pictures_facebook_icon="~/Images/Pictures/facebook-icon.png",u.Pictures_Google_Plus_icon="~/Images/Pictures/Google-Plus-icon.png",u.Pictures_NoPhoto100="~/Images/Pictures/NoPhoto100.gif",u.Pictures_NoPhoto200="~/Images/Pictures/NoPhoto200.gif",u.Pictures_NoPhoto300="~/Images/Pictures/NoPhoto300.gif",u.Pictures_NoPhoto50="~/Images/Pictures/NoPhoto50.gif",u.WindowButtons_btnClose="~/Images/WindowButtons/btnClose.gif",u.WindowButtons_btnCloseHover="~/Images/WindowButtons/btnCloseHover.gif",u.WindowButtons_btnCloseInactive="~/Images/WindowButtons/btnCloseInactive.gif",u.WindowButtons_btnMaximized="~/Images/WindowButtons/btnMaximized.gif",u.WindowButtons_btnMaximizedHover="~/Images/WindowButtons/btnMaximizedHover.gif",u.WindowButtons_btnMaximizedInactive="~/Images/WindowButtons/btnMaximizedInactive.gif",u.WindowButtons_btnMinimize="~/Images/WindowButtons/btnMinimize.gif",u.WindowButtons_btnMinimizeHover="~/Images/WindowButtons/btnMinimizeHover.gif",u.WindowButtons_btnMinimizeInactive="~/Images/WindowButtons/btnMinimizeInactive.gif",u.WindowButtons_btnResize="~/Images/WindowButtons/btnResize.gif",u.WindowButtons_btnResizeHover="~/Images/WindowButtons/btnResizeHover.gif",u.WindowButtons_btnResizeInactive="~/Images/WindowButtons/btnResizeInactive.gif",u.WindowButtons_btnToolClose="~/Images/WindowButtons/btnToolClose.gif",u.WindowButtons_btnToolCloseHover="~/Images/WindowButtons/btnToolCloseHover.gif",u.Horoscope_Icons_aquarius_128="~/Images/Horoscope/Icons/aquarius_128.png",u.Horoscope_Icons_aries_128="~/Images/Horoscope/Icons/aries_128.png",u.Horoscope_Icons_cancer_128="~/Images/Horoscope/Icons/cancer_128.png",u.Horoscope_Icons_capricorn_128="~/Images/Horoscope/Icons/capricorn_128.png",u.Horoscope_Icons_gemini_128="~/Images/Horoscope/Icons/gemini_128.png",u.Horoscope_Icons_leo_128="~/Images/Horoscope/Icons/leo_128.png",u.Horoscope_Icons_libra_128="~/Images/Horoscope/Icons/libra_128.png",u.Horoscope_Icons_pisces_128="~/Images/Horoscope/Icons/pisces_128.png",u.Horoscope_Icons_sagittarius_128="~/Images/Horoscope/Icons/sagittarius_128.png",u.Horoscope_Icons_scorpio_128="~/Images/Horoscope/Icons/scorpio_128.png",u.Horoscope_Icons_taurus_128="~/Images/Horoscope/Icons/taurus_128.png",u.Horoscope_Icons_virgo_128="~/Images/Horoscope/Icons/virgo_128.png",u.Horoscope_Signs_aquarius_zodiac_sign="~/Images/Horoscope/Signs/aquarius_zodiac_sign.png",u.Horoscope_Signs_aries_zodiac_sign="~/Images/Horoscope/Signs/aries_zodiac_sign.png",u.Horoscope_Signs_cancer_zodiac_sign="~/Images/Horoscope/Signs/cancer_zodiac_sign.png",u.Horoscope_Signs_capricorn_zodiac_sign="~/Images/Horoscope/Signs/capricorn_zodiac_sign.png",u.Horoscope_Signs_gemini_zodiac_sign="~/Images/Horoscope/Signs/gemini_zodiac_sign.png",u.Horoscope_Signs_leo_zodiac_sign="~/Images/Horoscope/Signs/leo_zodiac_sign.png",u.Horoscope_Signs_libra_zodiac_sign="~/Images/Horoscope/Signs/libra_zodiac_sign.png",u.Horoscope_Signs_pisces_zodiac_sign="~/Images/Horoscope/Signs/pisces_zodiac_sign.png",u.Horoscope_Signs_sagittarius_zodiac_sign="~/Images/Horoscope/Signs/sagittarius_zodiac_sign.png",u.Horoscope_Signs_scorpio_zodiac_sign="~/Images/Horoscope/Signs/scorpio_zodiac_sign.png",u.Horoscope_Signs_taurus_zodiac_sign="~/Images/Horoscope/Signs/taurus_zodiac_sign.png",u.Horoscope_Signs_virgo_zodiac_sign="~/Images/Horoscope/Signs/virgo_zodiac_sign.png",u.Icons_Ajax2Preloader_Ajax12TrailBlack="~/Images/Icons/Ajax2Preloader/Ajax12TrailBlack.gif",u.Icons_Ajax2Preloader_Ajax14FlowerBlack="~/Images/Icons/Ajax2Preloader/Ajax14FlowerBlack.gif",u.Icons_Ajax2Preloader_Ajax14TrailBlack="~/Images/Icons/Ajax2Preloader/Ajax14TrailBlack.gif",u.Icons_Ajax2Preloader_Ajax16ArcBlack="~/Images/Icons/Ajax2Preloader/Ajax16ArcBlack.gif",u.Icons_Ajax2Preloader_Ajax16ArrowsBlack="~/Images/Icons/Ajax2Preloader/Ajax16ArrowsBlack.gif",u.Icons_Ajax2Preloader_Ajax16DotBlack="~/Images/Icons/Ajax2Preloader/Ajax16DotBlack.gif",u.Icons_Ajax2Preloader_Ajax24DotBlack="~/Images/Icons/Ajax2Preloader/Ajax24DotBlack.gif",u.Icons_Ajax2Preloader_Ajax24DotBlue="~/Images/Icons/Ajax2Preloader/Ajax24DotBlue.gif",u.Icons_Ajax2Preloader_Ajax24DotRed="~/Images/Icons/Ajax2Preloader/Ajax24DotRed.gif",u.Icons_Ajax2Preloader_Ajax32SandClock="~/Images/Icons/Ajax2Preloader/Ajax32SandClock.png",u.Icons_Ajax2Preloader_FB_black_small="~/Images/Icons/Ajax2Preloader/FB_black_small.gif",u.Icons_Ajax2Preloader_skype_black2white="~/Images/Icons/Ajax2Preloader/skype_black2white.GIF",u.Icons_Ajax2Preloader_skype_blue2white="~/Images/Icons/Ajax2Preloader/skype_blue2white.GIF",u.Icons_Ajax2Preloader_skype_green2white="~/Images/Icons/Ajax2Preloader/skype_green2white.GIF",u.Icons_Ajax2Preloader_skype_red2white="~/Images/Icons/Ajax2Preloader/skype_red2white.GIF",u.Icons_Ajax2Preloader_skype_white2black="~/Images/Icons/Ajax2Preloader/skype_white2black.GIF",u.Icons_Smiley_angry="~/Images/Icons/Smiley/angry.gif",u.Icons_Smiley_applause="~/Images/Icons/Smiley/applause.gif",u.Icons_Smiley_bigGrin="~/Images/Icons/Smiley/bigGrin.gif",u.Icons_Smiley_bigHug="~/Images/Icons/Smiley/bigHug.gif",u.Icons_Smiley_confused="~/Images/Icons/Smiley/confused.gif",u.Icons_Smiley_cool="~/Images/Icons/Smiley/cool.gif",u.Icons_Smiley_crying="~/Images/Icons/Smiley/crying.gif",u.Icons_Smiley_dancing="~/Images/Icons/Smiley/dancing.gif",u.Icons_Smiley_devil="~/Images/Icons/Smiley/devil.gif",u.Icons_Smiley_dontTellAnyone="~/Images/Icons/Smiley/dontTellAnyone.gif",u.Icons_Smiley_happy="~/Images/Icons/Smiley/happy.gif",u.Icons_Smiley_hurryUp="~/Images/Icons/Smiley/hurryUp.gif",u.Icons_Smiley_kiss="~/Images/Icons/Smiley/kiss.gif",u.Icons_Smiley_laughing="~/Images/Icons/Smiley/laughing.gif",u.Icons_Smiley_notWorthy="~/Images/Icons/Smiley/notWorthy.gif",u.Icons_Smiley_party="~/Images/Icons/Smiley/party.gif",u.Icons_Smiley_rockOn="~/Images/Icons/Smiley/rockOn.gif",u.Icons_Smiley_rollingOnTheFloor="~/Images/Icons/Smiley/rollingOnTheFloor.gif",u.Icons_Smiley_sad="~/Images/Icons/Smiley/sad.gif",u.Icons_Smiley_surprise="~/Images/Icons/Smiley/surprise.gif",u.Icons_Smiley_thinking="~/Images/Icons/Smiley/thinking.gif",u.Icons_Smiley_thumbsDown="~/Images/Icons/Smiley/thumbsDown.gif",u.Icons_Smiley_tongue="~/Images/Icons/Smiley/tongue.gif",u.Icons_Smiley_winking="~/Images/Icons/Smiley/winking.gif",u.WindowButtons_Original_PNG_btnClose="~/Images/WindowButtons/Original_PNG/btnClose.png",u.WindowButtons_Original_PNG_btnCloseHover="~/Images/WindowButtons/Original_PNG/btnCloseHover.png",u.WindowButtons_Original_PNG_btnCloseInactive="~/Images/WindowButtons/Original_PNG/btnCloseInactive.png",u.WindowButtons_Original_PNG_btnMaximized="~/Images/WindowButtons/Original_PNG/btnMaximized.png",u.WindowButtons_Original_PNG_btnMaximizedHover="~/Images/WindowButtons/Original_PNG/btnMaximizedHover.png",u.WindowButtons_Original_PNG_btnMaximizedInactive="~/Images/WindowButtons/Original_PNG/btnMaximizedInactive.png",u.WindowButtons_Original_PNG_btnMinimize="~/Images/WindowButtons/Original_PNG/btnMinimize.png",u.WindowButtons_Original_PNG_btnMinimizeHover="~/Images/WindowButtons/Original_PNG/btnMinimizeHover.png",u.WindowButtons_Original_PNG_btnMinimizeInactive="~/Images/WindowButtons/Original_PNG/btnMinimizeInactive.png",u.WindowButtons_Original_PNG_btnResize="~/Images/WindowButtons/Original_PNG/btnResize.png",u.WindowButtons_Original_PNG_btnResizeHover="~/Images/WindowButtons/Original_PNG/btnResizeHover.png",u.WindowButtons_Original_PNG_btnResizeInactive="~/Images/WindowButtons/Original_PNG/btnResizeInactive.png",u.WindowButtons_Original_PNG_btnToolClose="~/Images/WindowButtons/Original_PNG/btnToolClose.png",u.WindowButtons_Original_PNG_btnToolCloseHover="~/Images/WindowButtons/Original_PNG/btnToolCloseHover.png",u.Icons_s32_aha_Apply="~/Images/Icons/s32/aha/Apply.png",u.Icons_s32_aha_Back="~/Images/Icons/s32/aha/Back.png",u.Icons_s32_aha_Cancel="~/Images/Icons/s32/aha/Cancel.png",u.Icons_s32_aha_Close="~/Images/Icons/s32/aha/Close.png",u.Icons_s32_aha_Danger="~/Images/Icons/s32/aha/Danger.png",u.Icons_s32_aha_Delete="~/Images/Icons/s32/aha/Delete.png",u.Icons_s32_aha_EditPage="~/Images/Icons/s32/aha/EditPage.png",u.Icons_s32_aha_Error="~/Images/Icons/s32/aha/Error.png",u.Icons_s32_aha_Forward="~/Images/Icons/s32/aha/Forward.png",u.Icons_s32_aha_GoDown="~/Images/Icons/s32/aha/GoDown.png",u.Icons_s32_aha_GoUp="~/Images/Icons/s32/aha/GoUp.png",u.Icons_s32_aha_Help="~/Images/Icons/s32/aha/Help.png",u.Icons_s32_aha_Info="~/Images/Icons/s32/aha/Info.png",u.Icons_s32_aha_No="~/Images/Icons/s32/aha/No.png",u.Icons_s32_aha_Ok="~/Images/Icons/s32/aha/Ok.png",u.Icons_s32_aha_Pencil="~/Images/Icons/s32/aha/Pencil.png",u.Icons_s32_aha_Picture="~/Images/Icons/s32/aha/Picture.png",u.Icons_s32_aha_Play="~/Images/Icons/s32/aha/Play.png",u.Icons_s32_aha_Refresh="~/Images/Icons/s32/aha/Refresh.png",u.Icons_s32_aha_Settings="~/Images/Icons/s32/aha/Settings.png",u.Icons_s32_aha_Show="~/Images/Icons/s32/aha/Show.png",u.Icons_s32_aha_Stop="~/Images/Icons/s32/aha/Stop.png",u.Icons_s32_aha_StopPlaying="~/Images/Icons/s32/aha/StopPlaying.png",u.Icons_s32_aha_Warning="~/Images/Icons/s32/aha/Warning.png",u.Icons_s32_aha_Wrong="~/Images/Icons/s32/aha/Wrong.png",u.Icons_s32_fatcow_film="~/Images/Icons/s32/fatcow/film.png",u.Icons_s16_silk_icons_accept="~/Images/Icons/s16/silk/icons/accept.png",u.Icons_s16_silk_icons_add="~/Images/Icons/s16/silk/icons/add.png",u.Icons_s16_silk_icons_anchor="~/Images/Icons/s16/silk/icons/anchor.png",u.Icons_s16_silk_icons_application="~/Images/Icons/s16/silk/icons/application.png",u.Icons_s16_silk_icons_application_edit="~/Images/Icons/s16/silk/icons/application_edit.png",u.Icons_s16_silk_icons_brick_edit="~/Images/Icons/s16/silk/icons/brick_edit.png",u.Icons_s16_silk_icons_cancel="~/Images/Icons/s16/silk/icons/cancel.png",u.Icons_s16_silk_icons_cross="~/Images/Icons/s16/silk/icons/cross.png",u.Icons_s16_silk_icons_date="~/Images/Icons/s16/silk/icons/date.png",u.Icons_s16_silk_icons_delete="~/Images/Icons/s16/silk/icons/delete.png",u.Icons_s16_silk_icons_disconnect="~/Images/Icons/s16/silk/icons/disconnect.png",u.Icons_s16_silk_icons_disk="~/Images/Icons/s16/silk/icons/disk.png",u.Icons_s16_silk_icons_error="~/Images/Icons/s16/silk/icons/error.png",u.Icons_s16_silk_icons_exclamation="~/Images/Icons/s16/silk/icons/exclamation.png",u.Icons_s16_silk_icons_eye="~/Images/Icons/s16/silk/icons/eye.png",u.Icons_s16_silk_icons_feed="~/Images/Icons/s16/silk/icons/feed.png",u.Icons_s16_silk_icons_help="~/Images/Icons/s16/silk/icons/help.png",u.Icons_s16_silk_icons_hourglass="~/Images/Icons/s16/silk/icons/hourglass.png",u.Icons_s16_silk_icons_lock_break="~/Images/Icons/s16/silk/icons/lock_break.png",u.Icons_s16_silk_icons_magifier_zoom_out="~/Images/Icons/s16/silk/icons/magifier_zoom_out.png",u.Icons_s16_silk_icons_magnifier="~/Images/Icons/s16/silk/icons/magnifier.png",u.Icons_s16_silk_icons_magnifier_zoom_in="~/Images/Icons/s16/silk/icons/magnifier_zoom_in.png",u.Icons_s16_silk_icons_male="~/Images/Icons/s16/silk/icons/male.png",u.Icons_s16_silk_icons_map="~/Images/Icons/s16/silk/icons/map.png",u.Icons_s16_silk_icons_page_add="~/Images/Icons/s16/silk/icons/page_add.png",u.Icons_s16_silk_icons_page_edit="~/Images/Icons/s16/silk/icons/page_edit.png",u.Icons_s16_silk_icons_page_white="~/Images/Icons/s16/silk/icons/page_white.png",u.Icons_s16_silk_icons_picture="~/Images/Icons/s16/silk/icons/picture.png",u.Icons_s16_silk_icons_pictures="~/Images/Icons/s16/silk/icons/pictures.png",u.Icons_s16_silk_icons_picture_add="~/Images/Icons/s16/silk/icons/picture_add.png",u.Icons_s16_silk_icons_plugin="~/Images/Icons/s16/silk/icons/plugin.png",u.Icons_s16_silk_icons_plugin_edit="~/Images/Icons/s16/silk/icons/plugin_edit.png",u.Icons_s16_silk_icons_stop="~/Images/Icons/s16/silk/icons/stop.png",u.Icons_s16_silk_icons_thumb_down="~/Images/Icons/s16/silk/icons/thumb_down.png",u.Icons_s16_silk_icons_thumb_up="~/Images/Icons/s16/silk/icons/thumb_up.png",u.Icons_s16_silk_icons_tick="~/Images/Icons/s16/silk/icons/tick.png",u.Icons_s16_silk_icons_time="~/Images/Icons/s16/silk/icons/time.png",u.Icons_s16_silk_icons_user="~/Images/Icons/s16/silk/icons/user.png",u.Icons_s16_silk_icons_zoom="~/Images/Icons/s16/silk/icons/zoom.png",u.Icons_s16_silk_icons_zoom_in="~/Images/Icons/s16/silk/icons/zoom_in.png",u.Icons_s16_silk_icons_zoom_out="~/Images/Icons/s16/silk/icons/zoom_out.png"})(r=i.Images||(i.Images={}))})(t=n.Resources||(n.Resources={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){i.AppConstants={EmailRegexPattern:"^[\\w\\.\\+\\-_']+[@][\\w\\+\\-_']+?[\\.][\\w\\.\\+\\-_']+$",BroadcastMethodName:"$broadcast-message$"}})(t=n.Constants||(n.Constants={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){u.XAjaxHeaderKey=`calysto-x-ajax`;u.XAjaxHeaderValue=`calysto-ajax`,u.XExceptionHeaderValue=`calysto-exception`,u.XTypeHeaderKey=`calysto-x-type`,u.XTypeHeaderBinaryFrameValue=`calysto-binary-frame`,u.XCalystoAjaxFormKey=`calysto-x-ajax-form`,u.XCalystoAjaxFormValue=`calysto-yes`,u.XCalystoAjaxLoadKey=`calysto-x-ajax-load`,u.XCalystoAjaxLoadValue=`calysto-yes`,u.XCalystoResponseContainerKey=`calysto-x-container`,u.XCalystoResponseContainerValue=`calysto-yes`})(r=i.WsjsHeaderConstants||(i.WsjsHeaderConstants={}))})(t=n.Constants||(n.Constants={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){i.PredefinedCultures={"en-US":{Name:"en-US",NativeName:"English (United States)",DisplayName:"English (United States)",EnglishName:"English (United States)",ThreeLetterISOLanguageName:"eng",ThreeLetterWindowsLanguageName:"ENU",TwoLetterISOLanguageName:"en",DateTimeFormat:{ShortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],AbbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],DayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],AbbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""],MonthNames:["January","February","March","April","May","June","July","August","September","October","November","December",""],FirstDayOfWeek:0,LongDatePattern:"dddd, MMMM d, yyyy",LongTimePattern:"h:mm:ss tt",MonthDayPattern:"MMMM d",ShortDatePattern:"M/d/yyyy",ShortTimePattern:"h:mm tt",GeneralLongTimePattern:"M/d/yyyy h:mm:ss tt",GeneralShortTimePattern:"M/d/yyyy h:mm tt"},NumberFormat:{CurrencySymbol:"$",NumberDecimalSeparator:".",NumberGroupSeparator:",",PerMilleSymbol:"‰",PercentSymbol:"%",CurrencyPositivePattern:0,CurrencyPositivePatternString:"{CurrencySymbol}{Value}"},Region:{CurrencyEnglishName:"US Dollar",CurrencyNativeName:"US Dollar",CurrencySymbol:"$",DisplayName:"United States",EnglishName:"United States",IsMetric:!1,ISOCurrencySymbol:"USD",Name:"US",NativeName:"United States",ThreeLetterISORegionName:"USA",ThreeLetterWindowsRegionName:"USA",TwoLetterISORegionName:"US"}},"hr-HR":{Name:"hr-HR",NativeName:"hrvatski (Hrvatska)",DisplayName:"Croatian (Croatia)",EnglishName:"Croatian (Croatia)",ThreeLetterISOLanguageName:"hrv",ThreeLetterWindowsLanguageName:"HRV",TwoLetterISOLanguageName:"hr",DateTimeFormat:{ShortestDayNames:["ne","po","ut","sr","če","pe","su"],AbbreviatedDayNames:["ned","pon","uto","sri","čet","pet","sub"],DayNames:["nedjelja","ponedjeljak","utorak","srijeda","četvrtak","petak","subota"],AbbreviatedMonthNames:["sij","vlj","ožu","tra","svi","lip","srp","kol","ruj","lis","stu","pro",""],MonthNames:["siječanj","veljača","ožujak","travanj","svibanj","lipanj","srpanj","kolovoz","rujan","listopad","studeni","prosinac",""],FirstDayOfWeek:1,LongDatePattern:"d. MMMM yyyy.",LongTimePattern:"H:mm:ss",MonthDayPattern:"d. MMMM",ShortDatePattern:"d.M.yyyy.",ShortTimePattern:"H:mm",GeneralLongTimePattern:"d.M.yyyy. H:mm:ss",GeneralShortTimePattern:"d.M.yyyy. H:mm"},NumberFormat:{CurrencySymbol:"kn",NumberDecimalSeparator:",",NumberGroupSeparator:".",PerMilleSymbol:"‰",PercentSymbol:"%",CurrencyPositivePattern:3,CurrencyPositivePatternString:"{Value} {CurrencySymbol}"},Region:{CurrencyEnglishName:"Croatian Kuna",CurrencyNativeName:"hrvatska kuna",CurrencySymbol:"kn",DisplayName:"Croatia",EnglishName:"Croatia",IsMetric:!0,ISOCurrencySymbol:"HRK",Name:"HR",NativeName:"Hrvatska",ThreeLetterISORegionName:"HRV",ThreeLetterWindowsRegionName:"HRV",TwoLetterISORegionName:"HR"}}}})(t=n.Constants||(n.Constants={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){u.CalystoId=`calysto-id`;u.CalystoValidatorMsgFor=`calysto-validator-msg-for`,u.CalystoSummaryMsgFor=`calysto-summary-msg-for`,u.CalystoErrorMsgFor=`calysto-error-msg-for`,u.CalystoType=`calysto-type`,u.CalystoGetter=`calysto-getter`,u.CalystoSetter=`calysto-setter`,u.CalystoFormat=`calysto-format`,u.CalystoValidationFn=`calysto-validation-fn`,u.CalystoBind=`calysto-bind`,u.CalystoBindEvents=`calysto-bind-events`,u.CalystoListen=`calysto-listen`,u.CalystoUid=`calysto-uid`,u.CalystoIsRepeater=`calysto-isrepeater`,u.CalystoIsGroup=`calysto-isgroup`,u.CalystoGetConvert=`calysto-getconvert`,u.CalystoSetConvert=`calysto-setconvert`,u.CalystoFormTarget=`calysto-form-target`,u.CalystoFormHandler=`calysto-form-handler`,u.CalystoFormMode=`calysto-form-mode`,u.CalystoFormDestination=`calysto-form-dest`,u.CalystoAppendVersion=`calysto-append-version`,u.CalystoSpinnerDelay=`calysto-spinner-delay`,u.CalystoTimeout=`calysto-timeout`,u.CalystoControllerAction=`calysto-controller-action`,u.CalystoScriptRun=`calysto-script-run`})(r=i.CalystoDomAttributes||(i.CalystoDomAttributes={}))})(t=n.Constants||(n.Constants={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){u.HandlerPath=`calysto-hndlaxd`;u.ScriptResourceRequest=`calysto-sclisx`,u.ElmahRequest=`calysto-exiaqn`,u.TypeServiceRequest=`calysto-tmoynd`,u.AjaxGetParamName=`calysto-ghqiu`})(r=i.CalystoAjaxHandlerConstants||(i.CalystoAjaxHandlerConstants={}))})(t=n.Constants||(n.Constants={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){u.RandomRFCTable64=`csIYaqGWdtJZ6mCS2iyO7nDT0gwM-1hxNeuK_brHX9pFV3jzP8oEUfvL!5lBR4kAQ`;u.StandardBase64RFC=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=`,u.JavaScriptRFCTable64=`0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_!-`,u.Table36JavaScriptRFC=`0123456789abcdefghijklmnopqrstuvwxyz`})(r=i.BaseXCharsTable||(i.BaseXCharsTable={}))})(t=n.Constants||(n.Constants={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){class r{get DataRows(){var u;return(u=this._dataRows)!==null&&u!==void 0?u:this._dataRows=this.Table.Rows.AsEnumerable().ToDictionary(f=>f[0])}GetDefaultSearchColumns(){return null}GetSearchColumns(e){if(typeof e=="string"){return[e]};if(e){return e};if(this.GetDefaultSearchColumns){let s=this.GetDefaultSearchColumns();if(s){return s}}let o=n.Globalization.CultureInfo.CurrentCulture.Name;e=[this.Table.Columns[1]];this.Table.Columns.Contains(o)&&e.unshift(o);return e}static FromJson(h){let c=new r;c.Table=h;return c}GetString(l,a){let y=this.DataRows.GetValueOrDefault(l),v=this.GetSearchColumns(a);if(y&&v){for(let p of v){let w=this.Table.Columns.indexOf(p);if(w<0){throw Error(`Resx column ${p} doesn't exist.`);}let b=y[w];if(!!b){return b}}throw Error(`Resx property ${l} with cell ${v.join(" | ")} not found.`);}throw Error(`Resx property ${l} not found.`);}}i.ResxExcelProvider=r})(t=n.Globalization||(n.Globalization={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){class r{static get Cancel(){return r.ResourceProvider.GetString("Cancel")}static get Close(){return r.ResourceProvider.GetString("Close")}static get Day(){return r.ResourceProvider.GetString("Day")}static get Error(){return r.ResourceProvider.GetString("Error")}static get Information(){return r.ResourceProvider.GetString("Information")}static get JavascriptEngineIsOutdatedInformation(){return r.ResourceProvider.GetString("JavascriptEngineIsOutdatedInformation")}static get Message(){return r.ResourceProvider.GetString("Message")}static get MethodInvocationFobidden(){return r.ResourceProvider.GetString("MethodInvocationFobidden")}static get Month(){return r.ResourceProvider.GetString("Month")}static get NewVersionFoundPageIsReloading(){return r.ResourceProvider.GetString("NewVersionFoundPageIsReloading")}static get No(){return r.ResourceProvider.GetString("No")}static get OK(){return r.ResourceProvider.GetString("OK")}static get Open(){return r.ResourceProvider.GetString("Open")}static get PageIsReloadingPleaseWait(){return r.ResourceProvider.GetString("PageIsReloadingPleaseWait")}static get PleaseConfirm(){return r.ResourceProvider.GetString("PleaseConfirm")}static get Question(){return r.ResourceProvider.GetString("Question")}static get Reload(){return r.ResourceProvider.GetString("Reload")}static get Save(){return r.ResourceProvider.GetString("Save")}static get Success(){return r.ResourceProvider.GetString("Success")}static get Today(){return r.ResourceProvider.GetString("Today")}static get Warning(){return r.ResourceProvider.GetString("Warning")}static get Week(){return r.ResourceProvider.GetString("Week")}static get Year(){return r.ResourceProvider.GetString("Year")}static get Yes(){return r.ResourceProvider.GetString("Yes")}}r.ResourceProvider=n.Globalization.ResxExcelProvider.FromJson({__calystotype:"Calysto_DataTable",TotalCount:null,TableName:"",Columns:["property","en-US","hr-HR"],Rows:[["Cancel","Cancel","Otkaži"],["Close","Close","Zatvori"],["Day","Day","Dan"],["Error","Error","Greška"],["Information","Information","Informacija"],["JavascriptEngineIsOutdatedInformation","Javascript engine is outdated.\r\nClick:\r\n    - Reload to reload page and new engine\r\n    - Cancel to keep the current page","Pronađena je novija verzija stranice.\nKliknite:\n    - Osvježi za osvježavanje i dohvat nove verzije\n    - Otkaži za zadržavanje na trenutnoj verziji"],["Message","Message","Poruka"],["Month","Month","Mjesec"],["NewVersionFoundPageIsReloading","New version found, page is reloading...","Pronađena je novija verzija, stranica se osvježava..."],["No","No","Ne"],["OK","OK","U redu"],["Open","Open","Otvori"],["PageIsReloadingPleaseWait","Please wait, page is reloading...","Molimo pričekajte, stranica se osvježava..."],["PleaseConfirm","Please confirm","Molimo potvrdite"],["Question","Question","Pitanje"],["Reload","Reload","Osvježi"],["Save","Save","Spremi"],["Success","Success","Uspješno"],["Today","Today","Danas"],["Warning","Warning","Upozorenje"],["Week","Week","Tjedan"],["Year","Year","Godina"],["Yes","Yes","Da"],["MethodInvocationFobidden","Invocation forbidden","Nemate dozvolu za ovu akciju"]]});i.CalystoLang=r})(t=n.Resources||(n.Resources={}))}(Calysto||(Calysto={})),function(n){let t;(function(i){function s(l){return(l||"").replace(o,"")}function f(a){return s(a+"").Split([".","[","]"])}function e(v,y,p){if(!v||!p||arguments.length!=3){throw new Error("Calysto.DataBinder.TryGetValue() requires 3 arguments");}for(var d=0,k=f(y),w=v,b;k.length>0&&(b=k.shift());){if(d++>u){throw new Error("Calysto.DataBinder.TryGetValue() recursion limit");}let nt=!1;if(r.test(b)&&(b=parseInt(b,10),nt=!0),w==null||w==undefined){return!1};try{if(nt&&n.Collections.HasInnerArray(w)){w=n.Collections.GetInnerArray(w)[b]}else if(b in w){w=w[b]}else return!1}catch(g){return!1}}p.SetValue(w);return!0}function h(tt,it){if(arguments.length<2){throw new Error("Calysto.DataBinder.GetValue() requires 2 arguments");}var rt=new n.BoxValue;e(tt,it,rt);return rt.GetValue()}function c(ut,ft,et){if(!ut||!ft||arguments.length<3){throw new Error("Calysto.DataBinder.SetValue() requires 3 arguments");}for(var lt=0,ct=f(ft),st,ot=ut,ht=ot;ct.length>0&&(st=ct.shift());){if(lt++>u){throw new Error("Calysto.DataBinder.SetValue() recursion limit");}let at=!1;r.test(st)&&(st=parseInt(st,10),at=!0);ct.length>0?(ht=at&&n.Collections.HasInnerArray(ot)?n.Collections.GetInnerArray(ot)[st]:ot[st],ot=ht?ht:ot[st]={}):at&&n.Collections.HasInnerArray(ot)?n.Collections.GetInnerArray(ot)[st]=et:ot[st]=et}}var r=new RegExp("^[\\d]+$"),o=new RegExp("^[\\@]+[\\.]*"),u=100;i.TryGetValue=e;i.GetValue=h,i.SetValue=c})(t=n.DataBinder||(n.DataBinder={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){function u(){return n.Constants.PredefinedCultures}class e{constructor(){this.ShortestDayNames=["Su","Mo","Tu","We","Th","Fr","Sa"];this.AbbreviatedDayNames=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],this.DayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],this.AbbreviatedMonthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""],this.MonthNames=["January","February","March","April","May","June","July","August","September","October","November","December",""],this.LongDatePattern="dddd, MMMM d, yyyy",this.LongTimePattern="h:mm:ss tt",this.MonthDayPattern="MMMM d",this.ShortDatePattern="M/d/yyyy",this.ShortTimePattern="h:mm tt",this.GeneralLongTimePattern="M/d/yyyy h:mm:ss tt",this.GeneralShortTimePattern="M/d/yyyy h:mm tt"}}class o{constructor(){this.CurrencySymbol="$";this.NumberDecimalSeparator=".",this.NumberGroupSeparator=",",this.PerMilleSymbol="‰",this.PercentSymbol="%",this.CurrencyPositivePattern=0,this.CurrencyPositivePatternString="{CurrencySymbol}{Value}"}}class s{constructor(){this.CurrencyEnglishName="US Dollar";this.CurrencyNativeName="US Dollar",this.CurrencySymbol="$",this.DisplayName="United States",this.EnglishName="United States",this.IsMetric=false,this.ISOCurrencySymbol="USD",this.Name="en-US",this.NativeName="United States",this.ThreeLetterISORegionName="USA",this.ThreeLetterWindowsRegionName="USA",this.TwoLetterISORegionName="US"}}let f;class r{constructor(){this.Name="en-US";this.NativeName="English (United States)",this.DisplayName="English (United States)",this.EnglishName="English (United States)",this.ThreeLetterISOLanguageName="eng",this.ThreeLetterWindowsLanguageName="ENU",this.TwoLetterISOLanguageName="en",this.DateTimeFormat=new e,this.NumberFormat=new o,this.Region=new s}static get Cultures(){return u()}static get USCulture(){return u()["en-US"]}static get HRCulture(){return u()["hr-HR"]}static get CurrentCulture(){return f||n.Core.Constants.CurrentCulture||r.USCulture}static set CurrentCulture(h){if(h&&h.Name&&(r===null||r===void 0?void 0:r.Cultures[h.Name])){f=h}else throw Error("Invalid culture provided.");}}i.CultureInfo=r})(t=n.Globalization||(n.Globalization={}))}(Calysto||(Calysto={})),function(n){class t{static get Constants(){return __calystoeueinhywsx||{}}static get IsDebugDefined(){return n.Core.Constants.IsDebugDefined}static get IsLocallyHosted(){return n.Core.Constants.IsLocallyHosted}static get IsTddSpecific(){return n.Core.Constants.IsTddSpecific}static RegisterGlobalNs(i){n.DataBinder.SetValue(window,i,{})}static ExportGlobal(r,u,f){if(!u&&typeof r=="function"&&(u=r.name,!u)){let o=r+"",e=o.match("function[\\s]+([^\\(\\)]+)");e&&(u=e[1])}if(!u){throw new Error("ExportGlobal error: path can not be empty.");}if(!f&&n.DataBinder.GetValue(window,u)){throw new Error('ExportGlobal error: path "'+u+'" aready exists in window.');}else n.DataBinder.SetValue(window,u,r)}}n.Core=t}(Calysto||(Calysto={})),function(n){n.AttrName=n.Constants.CalystoDomAttributes}(Calysto||(Calysto={})),function(n){class t{constructor(){}SetValue(r){this._value=r;this._hasValue=true}GetValue(){return this._value}GetValueOrDefault(u){return this.HasValue()?this.GetValue():u}HasValue(){return!!this._hasValue}RemoveValue(){this._value=undefined;this._hasValue=false}}n.BoxValue=t;class i extends t{constructor(){super();this.OnSetValue=(new n.MulticastDelegate).OnAdd(f=>{this.HasValue()&&f(this.GetValue())}).AsFunc(this)}SetValue(e){this._value=e;this._hasValue=true,this.OnSetValue.Invoke(o=>o(e))}}n.BoxValueObservable=i}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){function f(p,w){if(!(w>0)){throw new Error("Invalid finalLength in Calysto.Utility.Generators.GetRndCharsFromTable(...)");}let b=p.length;if(!(b>0)){throw new Error("Invalid tlen in Calysto.Utility.Generators.GetRndCharsFromTable(...)");}let k=[];while(b>0&&k.length<w){k.push(p.charAt(Math.floor(Math.random()*b)))};return k.join("")}function e(d,g=true,nt=true,tt=true,it=true,rt=true){let ft=[],ut="";g&&ft.push(f(o+s,1));nt&&(ut+=o),tt&&(ut+=s),it&&(ut+=h),rt&&(ut+=c),ft.push(f(ut,d));return ft.join("")}function l(et){return e(et,!0,!0,!0,!0,!1)}function a(ot){return e(ot,!0,!0,!0,!0,!0)}function v(st){return f(h,st)}function y(ht){return e(ht,!0,!0,!0,!0,!1)}const o="abcdefghijklmnopqrstuvwxyz",s="ABCDEFGHIJKLMNOPQRSTUVWXYZ",h="0123456789",c="!@#$%^&*()_+=-~/][><.,?>:;'}{";u.GeneratePassword=l;u.GenerateStrongPassword=a,u.GenerateNumericPassword=v,u.GenerateLabel=y})(r=i.Generators||(i.Generators={}))})(t=n.Utility||(n.Utility={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){function u(o,s){return s?s(o):o}function f(h,c,l){var p=h.Select(w=>({item:w,sortKey:u(w,c),typeNum:0,typeStr:"notset"})).Select(b=>{let d=b.sortKey;var k;if(d===undefined){k=r.Undefined}else if(d===null){k=r.Null}else if(d.constructor==Date){k=r.Date}else switch(typeof d){case"string":k=r.String;break;case"number":k=isNaN(d)?r.NaN:r.Number;break;case"boolean":k=r.Boolean;break;default:k=r.Object}b.typeNum=k;b.typeStr=k+"";return b}),a=[],y={},v;p.ForEach(g=>{let nt=y[g.typeStr];nt||(y[g.typeStr]=nt=[],nt.typeNum=g.typeNum,a.push(nt));nt.push(g)});a.sort((tt,it)=>tt.typeNum<it.typeNum?-1:tt.typeNum>it.typeNum?1:0),a.ForEach(rt=>rt.sort((ut,ft)=>ut.sortKey<ft.sortKey?-1:ut.sortKey>ft.sortKey?1:0)),v=[],a.ForEach(et=>et.ForEach(ot=>v.push(ot.item))),l&&v.reverse();return v}let r;(function(e){e[e.Undefined=1]="Undefined";e[e.Null=2]="Null",e[e.NaN=3]="NaN",e[e.Boolean=4]="Boolean",e[e.Number=5]="Number",e[e.Date=6]="Date",e[e.String=7]="String",e[e.Object=8]="Object"})(r||(r={}));i.SortArray=f})(t=n.ArraySorter||(n.ArraySorter={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){function r(h,c){var l=h[c];if(n.Type.TypeInspector.IsNumber(l)){return l};throw new Error("enum name not found: "+c);}function u(a){var v=[];n.Collections.ForEachOwnProperties(a,(y,p)=>{typeof p=="number"&&v.push(p)});return v}function f(w,b){var k=w[b];return n.Type.TypeInspector.IsString(k)?!0:!1}function e(d,g){var nt=d[g];return n.Type.TypeInspector.IsNumber(nt)?!0:!1}function o(tt,it){var rt=tt[it];if(n.Type.TypeInspector.IsString(rt)){return rt};throw new Error("enum value not found: "+it);}function s(ut){var ft=[];n.Collections.ForEachOwnProperties(ut,(et,ot)=>{typeof ot=="string"&&ft.push(ot)});return ft}i.GetValue=r;i.GetValues=u,i.HasValue=f,i.HasName=e,i.GetName=o,i.GetNames=s})(t=n.Enum||(n.Enum={}))}(Calysto||(Calysto={})),function(n){class t{constructor(u){if(typeof u!="function"){throw new Error("GetEnumerator is not function");}this._getEnumerator=u}GetEnumerator(){if(this._getEnumerator){return this._getEnumerator()};throw new Error("GetEnumerator is not defined");}AsEnumerable(){return this}AsIterableIterator(){let f=this,e=new n.BoxValue,o=function*(){let s=f.GetEnumerator();while(s.YieldNext(e)){yield s.Current}};return o()}ToArray(){for(var c=[],l=this.GetEnumerator(),h=new n.BoxValue;l.YieldNext(h)&&h.HasValue();){c.push(h.GetValue()),h.RemoveValue()};return c}AsDomQuery(){return new n.DomQuery(()=>this.GetEnumerator())}ToList(){return new n.List(this.ToArray())}Count(){return this.ToArray().length}ToDictionary(a,v){typeof a!="function"&&(a=n.Utility.Expressions.CompileLambdaExpression(a));typeof v!="function"&&(v=n.Utility.Expressions.CompileLambdaExpression(v));var y=new n.Dictionary;this.ForEach(p=>y.Add(a(p),v(p)));return y}ToRawObject(w,b){typeof w!="function"&&(w=n.Utility.Expressions.CompileLambdaExpression(w));typeof b!="function"&&(b=n.Utility.Expressions.CompileLambdaExpression(b));var k={};this.ForEach(d=>k[w(d)+""]=b(d));return k}ToStringJoined(g){var nt=this.ToArray();return nt.join(g||"")}ForEach(tt){var rt,it;for(typeof tt=="string"&&(tt=n.Utility.Expressions.CompileLambdaNoReturnCheck(tt)),rt=this.ToArray(),it=0;it<rt.length;it++){tt(rt[it],it)};return t.From(rt)}Skip(ut){return t.From(()=>function*(ft){let et=-1;for(let ot of ft.AsIterableIterator()){if(++et<ut){continue}else yield ot}}(this))}Take(st){return t.From(()=>function*(ht){let ct=-1;for(let lt of ht.AsIterableIterator()){if(++ct<st){yield lt}else break}}(this))}Single(){var at=this.Take(2).ToArray();if(at.length==1){return at[0]};if(at.length==0){throw new Error("Error in .Single(), sequence contains no elements");}else throw new Error("Error in .Single(), sequence contains more than single element");}Exact(vt){if(!(vt>=0)){throw new Error("Exact(count) requires count parameter >= 0");}var yt=this.ToArray();if(yt.length!=vt){throw new Error("Error in .Exact(), sequence contains "+yt.length+" elements. Required is "+vt+" elements.");}return t.From(yt)}Sum(pt){var wt=null;this.Select(pt||(bt=>bt)).ForEach(kt=>{n.Type.TypeInspector.IsNumber(kt)&&(wt=(wt||0)+kt)});return wt}Average(dt){var gt=null,ni=0;this.Select(dt||(ti=>ti)).ForEach(ii=>{n.Type.TypeInspector.IsNumber(ii)&&(gt=(gt||0)+ii,ni++)});return ni>0?gt/ni:0}Min(ri){var ui=null;this.Select(ri||(fi=>fi)).ForEach(ei=>{(n.Type.TypeInspector.IsNumber(ei)||n.Type.TypeInspector.IsDate(ei))&&(ui==null||ei<ui)&&(ui=ei)});return ui}Max(oi){var si=null;this.Select(oi||(hi=>hi)).ForEach(ci=>{(n.Type.TypeInspector.IsNumber(ci)||n.Type.TypeInspector.IsDate(ci))&&(si==null||ci>si)&&(si=ci)});return si}Concat(li){return t.From(()=>function*(ai){for(let vi of ai.AsIterableIterator()){yield vi};for(let yi of li.AsEnumerable().AsIterableIterator()){yield yi}}(this))}Intersect(pi,wi,bi=false){if(!pi||!wi){throw new Error("Intersect(secondSource, predicate) requires secondSource and predicate parameters");}var ki=pi.ToArray();typeof wi=="string"&&(wi=n.Utility.Expressions.CompileLambdaExpression(wi));return this.Where(di=>!bi==ki.Where(gi=>wi(di,gi)).Any())}Except(nr,tr){return this.Intersect(nr,tr,!0)}Join(ir,rr,ur,fr){let er=ir.AsEnumerable().ToDictionary(or=>ur(or));return this.Select(sr=>{let hr=new n.BoxValue,cr=new n.BoxValue;er.TryGetValue(rr(sr),cr)&&hr.SetValue(fr(sr,cr.GetValue()));return hr}).Where(lr=>lr.HasValue()).Select(ar=>ar.GetValue())}TakeWhile(vr){if(!vr){throw new Error("TakeWhile(predicate) requires predicate");}typeof vr!="function"&&(vr=n.Utility.Expressions.CompileLambdaExpression(vr));return t.From(()=>function*(yr){let pr=-1;for(let wr of yr.AsIterableIterator()){if(vr(wr,++pr)){yield wr}else break}}(this))}SkipWhile(br){if(!br){throw new Error("SkipWhile(predicate) requires predicate");}typeof br!="function"&&(br=n.Utility.Expressions.CompileLambdaExpression(br));return t.From(()=>function*(kr){let dr=!1,gr=-1;for(let nu of kr.AsIterableIterator()){if(dr){yield nu}else if(br(nu,++gr)){continue}else{dr=!0;yield nu}}}(this))}Reverse(){return new t(()=>{var tu=this.ToArray();tu.reverse();return n.CalystoEnumerator.From(tu)})}FirstOrDefault(iu){var ru=this.Take(1).ToArray();return ru.length==1?ru.pop():iu}First(){var uu=this.Take(1).ToArray();if(uu.length==1){return uu[0]};throw new Error("Error in .First(), sequence contains no elements");}LastOrDefault(fu){var eu=this.ToArray();return eu.length>0?eu[eu.length-1]:fu}Last(){var ou=this.ToArray();if(ou.length>0){return ou[ou.length-1]};throw new Error("Error in .Last(), sequence contains no elements");}Any(su){typeof su!="function"&&(su=n.Utility.Expressions.CompileLambdaExpression(su));su=su||(()=>true);var hu=this.Where(su).Take(1).ToArray();return hu.length==1}All(cu){return!this.Where((lu,au)=>!cu(lu,au)).Any()}Where(vu){typeof vu!="function"&&(vu=n.Utility.Expressions.CompileLambdaExpression(vu));return t.From(()=>function*(yu){let pu=-1;for(let wu of yu.AsIterableIterator()){if(vu(wu,++pu)){yield wu}else continue}}(this))}Select(bu){typeof bu!="function"&&(bu=n.Utility.Expressions.CompileLambdaExpression(bu));return t.From(()=>function*(ku){let du=-1;for(let gu of ku.AsIterableIterator()){yield bu(gu,++du)}}(this))}Cast(){return this}SelectMany(nf){typeof nf!="function"&&(nf=n.Utility.Expressions.CompileLambdaExpression(nf));return t.From(()=>function*(tf){let rf=nf||(uf=>uf);for(let ff of tf.AsIterableIterator()){if(ff){let ef=rf(ff);if(ef){let of=t.From(ef);for(let sf of of.AsIterableIterator()){yield sf}}}}}(this))}Distinct(hf){typeof hf!="function"&&(hf=n.Utility.Expressions.CompileLambdaExpression(hf));return t.From(()=>function*(cf){let af=hf||(vf=>vf),lf=new Set;for(let yf of cf.AsIterableIterator()){let pf=af(yf);if(!lf.has(pf)){lf.add(pf);yield yf}}}(this))}Cycle(wf){if(!wf){throw new Error("Cycle requires take parameter");}return t.From(()=>function*(bf){let kf=0,df=!1;do for(let gf of bf.AsIterableIterator()){if(kf<wf){yield gf;kf++}else{df=!0;break}}while(!df&&kf>0&&kf<wf)}(this))}GroupBy(ne){typeof ne!="function"&&(ne=n.Utility.Expressions.CompileLambdaExpression(ne));let te=new n.Dictionary,ie=this.ToArray();for(let re of ie){let ue=ne(re),fe;te.ContainsKey(ue)?fe=te.GetValue(ue):te.Add(ue,fe=[]);fe.push(re)}return te.GetItems().AsEnumerable().Select(ee=>new r(ee.Key,()=>ee.Value.AsEnumerable().GetEnumerator()))}OrderBy(oe,se=false){typeof oe!="function"&&(oe=n.Utility.Expressions.CompileLambdaExpression(oe));let he=this.GroupBy(oe).ToArray();var ce=he.OrderBy(le=>le.Key,se);return new i(()=>ce.AsEnumerable().GetEnumerator())}OrderByDescending(ae){typeof ae!="function"&&(ae=n.Utility.Expressions.CompileLambdaExpression(ae));return this.OrderBy(ae,!0)}static From(ve){return new t(()=>n.CalystoEnumerator.From(ve))}static Range(ye,pe){return t.From(function*(){let we=0;while(we<pe){yield ye;ye++;we++}})}static Repeat(be,ke){return t.From(function*(){let de=0;while(de<ke){yield be;de++}})}}n.CalystoEnumerable=t;class r extends t{constructor(ge,no){super(no);this.Key=ge}}class i extends t{constructor(to){super(()=>this.GetFlatEnumerable().GetEnumerator());this.getGroupsEnumerator=to}GetFlatEnumerable(){return this.GetGroupsEnumerable().SelectMany(io=>io)}GetGroupsEnumerable(){return new t(this.getGroupsEnumerator)}ThenBy(ro,uo=false){let fo=new t(this.getGroupsEnumerator).SelectMany(eo=>eo.OrderBy(ro,uo).GetGroupsEnumerable());return new i(()=>fo.GetEnumerator())}ThenByDescending(oo){return this.ThenBy(oo,!0)}}}(Calysto||(Calysto={})),function(n){var t;(function(i){function r(){for(var y,d,p,b,w=[],k=0;k<arguments.length;k++){if(y=arguments[k],y==undefined){continue}else if(y.GetEnumerator&&y.ToArray){for(d=y.ToArray(),p=0;p<d.length;p++){b=r(d[p]),w.AddRange(b)}}else if(y.tagName&&y.nodeType||y.nodeType==n.Utility.Dom.NodeTypeEnum.TEXT_NODE){w.push(y)}else if(y.length>=0){if(typeof y=="string"){w.push(y)}else for(p=0;p<y.length;p++){b=r(y[p]),w.AddRange(b)}}else w.push(y)};return w}function o(g,nt,tt){if(typeof g=="string"){throw new Error("ForEach does not accept string");}if(g&&g.length>0){for(var it=0;it<g.length;it++){nt.call(tt,g[it],it)}}}function s(rt,ut,ft){if(rt&&rt.length>0){for(var et=0;et<rt.length;et++){ut.call(ft,rt[et],et)}}}function h(ot,st,ht){if(typeof ot!="string"){throw new Error("ForEachChars requires string argument");}if(ot&&ot.length>0){for(var ct=0;ct<ot.length;ct++){st.call(ht,ot.charAt(ct),ct)}}}function u(lt,at){var yt=[],vt;if(lt){for(vt in lt){(!at||lt.hasOwnProperty(vt))&&yt.push(vt)}};return yt}function c(pt){return u(pt,!0)}function l(wt,bt,kt){var gt,dt;if(wt){gt=0;for(dt in wt){bt.call(kt,dt,wt[dt],gt++)}}}function a(ni,ti,ii){var ui,ri;if(ni){ui=0;for(ri in ni){ni.hasOwnProperty(ri)&&ti.call(ii,ri,ni[ri],ui++)}}}function e(fi){return fi&&f in fi}function v(ei){return e(ei)?ei[f]:undefined}i.SelectFlatten=r;i.ForEach=o,i.ForEachNodeList=s,i.ForEachChars=h,i.GetProperties=u,i.GetOwnProperties=c,i.ForEachProperties=l,i.ForEachOwnProperties=a;let f="InnerArray";i.HasInnerArray=e;i.GetInnerArray=v})(t=n.Collections||(n.Collections={}))}(Calysto||(Calysto={}));Array.prototype.RemoveAt||function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(n){for(var t=0;t<this.length;t++){if(this[t]===n){return t}};return-1}),Array.prototype.SkipTake=function(i,r){return this.slice(i,i+r)},Array.prototype.ForEach=function(u){typeof u=="string"&&(u=Calysto.Utility.Expressions.CompileLambdaNoReturnCheck(u)),Calysto.Collections.ForEach(this,u);return this},Array.prototype.Where=function(f,e){typeof f=="string"&&(f=Calysto.Utility.Expressions.CompileLambdaExpression(f));var o=[];for(let s=0;s<this.length;s++){if(f(this[s],s)&&(o.push(this[s]),e&&o.length>=e)){return o}};return o},Array.prototype.Select=function(h){typeof h=="string"&&(h=Calysto.Utility.Expressions.CompileLambdaExpression(h));var c=[];Calysto.Collections.ForEach(this,(l,a)=>{c.push(h(l,a))});return c},Array.prototype.Reverse=function(){this.reverse();return this},Array.prototype.OrderBy=function(v,y){typeof v=="string"&&(v=Calysto.Utility.Expressions.CompileLambdaExpression(v));return Calysto.ArraySorter.SortArray(this,v,y)},Array.prototype.RemoveAt=function(p){this.splice(p,1);return this},Array.prototype.Remove=function(w){var b=this.indexOf(w);return b==0||b>0?this.RemoveAt(b):this},Array.prototype.RemoveBy=function(k){typeof k=="string"&&(k=Calysto.Utility.Expressions.CompileLambdaExpression(k));for(let d=this.length-1;d>=0;d--){k(this[d],d)&&this.splice(d,1)};return this},Array.prototype.Contains=function(g){let nt=this.indexOf(g);return nt>0||nt===0},Array.prototype.AsEnumerable=function(){return Calysto.CalystoEnumerable.From(this.slice(0))},Array.prototype.ToArray=function(){return this.slice(0)},Array.prototype.Any=function(){return this.length>0},Array.prototype.Add=function(tt){this.push(tt);return this},Array.prototype.AddRange=function(it){for(var rt=0;it&&rt<it.length;rt++){this.push(it[rt])};return this},Array.prototype.InsertRange=function(ut,ft){for(var et=ft.length;et>0;et--){this.splice(ut,0,ft[et-1])};return this},Array.prototype.Clear=function(){this.splice(0,this.length);return this},Array.prototype.ToStringJoined=function(ot){return this.join(arguments.length>0?ot:"")}}(),function(){var n,t;if(!window.Symbol){let r=function(){};r.iterator={},window.Symbol=r}class i{constructor(){this._kvArr=[]}get size(){return this._kvArr.length}has(u){return this._kvArr.Where(f=>f.key===u,1).Any()}get(e){return this._kvArr.Where(o=>o.key===e,1).Select(s=>s.value).pop()}set(h,c){let l=this._kvArr.Where(a=>a.key===h,1).pop();l?l.value=c:this._kvArr.push({key:h,value:c});return this}add(v,y){return this.set(v,y||true)}delete(p){let w=this.get(p);this._kvArr.RemoveBy(b=>b.key==p);return!!w}clear(){this._kvArr.Clear()}*keys(){for(let k of this._kvArr){yield k.key}}*entries(){for(let d of this._kvArr){yield[d.key,d.value]}}}((t=(n=window.Map)===null||n===void 0?void 0:n.prototype)===null||t===void 0?void 0:t.entries)||(window.Set=i,window.Map=i)}(Calysto||(Calysto={})),Math.trunc||(Math.trunc=n=>isFinite(n)&&!isNaN(n)?parseInt((n+"").split(".")[0],10):n),typeof Blob=="undefined"||Blob.prototype.SaveFileAs||(Blob.prototype.SaveFileAs=function(n){var i=this,t;navigator&&navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(i,n||i.filename):(t=document.createElement("a"),t.style.position="absolute",t.style.opacity="0",t.href=window.URL.createObjectURL(i),t.download=n||i.filename,document.body.appendChild(t),t.click(),t.parentNode&&t.parentNode.removeChild(t))}),Boolean.prototype.ToStringFormated||(Boolean.prototype.ToStringFormated=function(){return this==true?"true":"false"}),Date.FromLocalISOTString||function(){Date.now=function(){return(new Date).getTime()};var n=function(i,r){for(i+="";i.length<r;){i="0"+i};return i},t=function(u,f){for(u+="";u.length<f;){u=u+"0"};return u};Date.ToLocalISOTString=e=>n(e.getFullYear(),4)+"-"+n(e.getMonth()+1,2)+"-"+n(e.getDate(),2)+"T"+n(e.getHours(),2)+":"+n(e.getMinutes(),2)+":"+n(e.getSeconds(),2)+"."+t(e.getMilliseconds(),3),Date.FromLocalISOTString=function(s){var h=s.match(new RegExp("[\\d]+","g")),c=new Date(0);h&&(c.setFullYear(parseInt(h[0])),c.setMonth(parseInt(h[1])-1),c.setDate(parseInt(h[2])),c.setHours(parseInt(h[3])),c.setMinutes(parseInt(h[4])),c.setSeconds(parseInt(h[5])),c.setMilliseconds(parseInt(t(h[6]||"",3).substr(0,3))||0));return c}}(),typeof Error!="undefined"&&(Error.prototype.AppendErrorDetails=function(n,t){var i=[],r=[];if(n){try{typeof n=="string"?i.push(n):"length"in n?Calysto.Collections.ForEach(n,f=>i.push(f)):Calysto.Collections.ForEachProperties(n,(e,o)=>{e=="errorHtml"?r.push(o):e=="errorDescription"?i.push(o):i.push(e+": "+o)})}catch(u){}}this.CalystoException={Message:this.message,Details:i.join("\r\n"),HtmlDetails:r.join("<br/>"),IsServerError:!!t};return this}),Function.prototype.BindContext||(Function.prototype.BindContext=function(n){if(arguments.length!=1){throw new Error("BindContext(...) requires 1 argument exactly, current arguments: "+arguments.length);}var t=this,i=n||this||null;return function(){return t.apply(i,arguments)}}),function(n){var t;(function(i){var r;(function(u){function e(h){let c=(h+"").match(new RegExp("return[\\s]+[\\w]+\\.([\\w\\.\\[\\]_@]+)"));if(c&&c[1]){return c[1]};throw new Error("Invalid path expression: "+h);}function f(l,a){var b=typeof l,v,p;if(l){if(b=="function"){if(n.Core.IsDebugDefined&&a&&(v=(l+"").substr(0,1e3),!(v.indexOf("return")>0)&&!(v.indexOf("=>")>0))){throw Error("Invalid lambda, missing return in: "+v);}return l}if(b=="string"){try{if(l==""){return function(tt){return tt}};if((p=l.indexOf("=>"))>0){var d=l.substr(0,p),y=l.substr(p+2),w=d.match(new RegExp("[\\w$@_]+","ig"))||[],k;return(k=y.match(new RegExp("^[\\s]*new[\\s]+(\\{[\\w\\W]*)$")))?new Function(w.join(","),"return "+k[1]+";"):new RegExp("^[\\s]*\\{").test(y)?new Function(w.join(","),y+";"):new Function(w.join(","),"return "+y+";")}}catch(g){throw new Error(g+"\r\nin "+l);}}}else return function(nt){return nt};throw new Error("Unsupported expression in Calysto.Utility.Expressions.CompileLambdaExpression("+l+")");}function o(it){return f(it,true)}function s(rt){return f(rt,false)}u.ParsePath=e,u.CompileLambdaExpression=o,u.CompileLambdaNoReturnCheck=s})(r=i.Expressions||(i.Expressions={}))})(t=n.Utility||(n.Utility={}))}(Calysto||(Calysto={})),RegExp.Escape||function(){var n=new RegExp("[ \\\\\\*\\+\\?\\|\\,\\^\\$\\.\\#\\(\\)\\{\\}\\[\\]]","g");RegExp.Escape=function(t){return t.replace(n,"\\$&")}}(),function(n){var t;(function(i){function r(u,f,e,o){for(var s in f){(!o||f.hasOwnProperty(s))&&(!e&&s in u||(u[s]=f[s]))};return u}i.Extend=r})(t=n.Utility||(n.Utility={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){let r;(function(u){u[u.String=1]="String",u[u.Boolean=2]="Boolean",u[u.Decimal=3]="Decimal",u[u.Number=4]="Number",u[u.Integer=5]="Integer",u[u.Array=6]="Array",u[u.Function=7]="Function",u[u.DateTime=8]="DateTime",u[u.Date=9]="Date",u[u.Any=10]="Any"})(r=i.KnownType||(i.KnownType={}))})(t=n.Type||(n.Type={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){function f(b,k,d){if(i.TypeInspector.IsNumber(b)){return b};isNaN(k)||i.TypeInspector.IsNullOrUndefined(k)&&(k=null),d=d||n.Globalization.CultureInfo.CurrentCulture.NumberFormat.NumberDecimalSeparator;var tt=new RegExp("[\\-]*[ ]*[ \\.\\,]?[\\d]+[\\d\\.\\,]*"),g=(b+"").match(tt),it=g&&g[0]?g[0]:"",rt=it.replace(new RegExp(RegExp.Escape(d=="."?",":"."),"ig"),"").replace(new RegExp(RegExp.Escape(d),"ig"),".").replace(new RegExp("[ ]*","ig"),""),nt=parseFloat(rt);return!isNaN(nt)&&isFinite(nt)?nt:k}function e(ut,ft,et){return f(ut,ft,et)}function o(ot,st,ht){return f(ot,st,ht)}function s(ct,lt){i.TypeInspector.IsNullOrUndefined(lt)&&(lt=NaN);var at=e(ct,lt);return!isNaN(at)&&isFinite(at)?at>0?Math.floor(at):Math.ceil(at):lt}function h(vt,yt){return i.TypeInspector.IsBoolean(vt)?vt:vt=="true"||vt=="True"?true:vt=="false"||vt=="False"?false:vt>0?true:vt===0?false:i.TypeInspector.IsNullOrUndefined(yt)?null:yt}function c(pt,wt){if(i.TypeInspector.IsNullOrUndefined(pt)){if(!i.TypeInspector.IsNullOrUndefined(wt)){return wt+""}}else return pt+"";return""}u.ToNumberOrDefault=e,u.ToDecimal=o,u.ToInteger=s,u.ToBoolean=h,u.ToString=c})(r=i.NumberConverter||(i.NumberConverter={}))})(t=n.Type||(n.Type={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){function e(s,h){return i.TypeInspector.IsNullOrUndefined(s)?"":s&&s.ToStringFormated?s.ToStringFormated(h):f(s,"String")}function f(c,l,a){var p,y;if(l=="Int"){throw new Error("Int is not supported, use Integer instead");}let v=typeof l=="string"?i.TypeDescriptor.FromTypeName(l,a):l;if(!v.IsValidKnownType){throw new Error("Invalid destType: "+l);}if(i.TypeInspector.IsNullOrUndefined(c)||v.KnownTypeName!=i.KnownType.String&&c===""){if(v.IsNullable){return null};throw new Error("Error in ChangeType(). Can not convert null to "+l);}let w=i.TypeDescriptor.FromValue(c);if(w.UnderlayingTypeName==v.UnderlayingTypeName){return c};switch(v.KnownTypeName){case i.KnownType.String:return w.KnownTypeName==i.KnownType.String?c:i.TypeInspector.IsNullOrUndefined(c)?"":c.ToStringFormated?c.ToStringFormated():c&&c.join?"["+c.join(",")+"]":c+"";case i.KnownType.Boolean:if(w.KnownTypeName==i.KnownType.Boolean){return c};if(c===true||c=="true"||c=="True"||c=="1"){return true};if(c===false||c=="false"||c=="False"||c=="0"){return false};if(typeof c=="number"){return c===0?false:true};throw new Error("Can not create boolean from: "+c);case i.KnownType.Decimal:case i.KnownType.Number:case i.KnownType.Integer:if(!i.TypeInspector.IsNumber(c)){let k=new RegExp("^[\\+\\-]*[\\s]*[\\d\\,\\.]+$");if(!k.test(c+"")){throw new Error("Can not create number from: "+c);}}if(p=i.NumberConverter.ToDecimal(c),i.TypeInspector.IsNumber(p)){return v.KnownTypeName==i.KnownType.Integer?parseInt(p):p};throw new Error("Can not create number from: "+c);case i.KnownType.DateTime:case i.KnownType.Date:if(typeof c=="string"){try{if(y=n.DateTime.ParseDateTime(c,undefined,true),!y){throw new Error("Can not create DateTime from "+c);}return y&&v.KnownTypeName==i.KnownType.Date?y.ToSystemDate():y}catch(b){}}throw new Error("Can not create DateTime from "+c);case i.KnownType.Function:return n.Utility.Expressions.CompileLambdaExpression(c);case i.KnownType.Array:return c.Trim(["[","]"]).Split([","]).Select(d=>d.Trim())}throw new Error("Can not create "+l+" from "+c);}function o(g,nt,tt){try{tt.SetValue(f(g,nt));return true}catch(it){}return false}u.ToStringFormated=e,u.ChangeType=f,u.TryChangeType=o})(r=i.TypeConverter||(i.TypeConverter={}))})(t=n.Type||(n.Type={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){class r{get UnderlayingTypeName(){return this._typeName}get KnownTypeName(){return i.KnownType[this._typeName]}get IsNullable(){return!!this._isNullable}get NullableTypeName(){return this.UnderlayingTypeName+(this.IsNullable?"?":"")}get IsValidKnownType(){return!!this.KnownTypeName}static ResolveKnownTypeFromValue(u){if(i.TypeInspector.IsNullOrUndefined(u)){return i.KnownType.Any};if(i.TypeInspector.IsString(u)){return i.KnownType.String};if(i.TypeInspector.IsBoolean(u)){return i.KnownType.Boolean};if(i.TypeInspector.IsNumber(u)){return i.KnownType.Decimal};if(i.TypeInspector.IsArrayOrDomArray(u)){return i.KnownType.Array};if(i.TypeInspector.IsFunction(u)){return i.KnownType.Function};if(i.TypeInspector.IsDateTime(u)){return i.KnownType.DateTime};if(i.TypeInspector.IsDate(u)){return i.KnownType.Date};throw new Error("Can not reslove KnownType from value "+u);}static FromTypeName(f,e){let o=new r;if(o._isNullable=e===true,o._typeName=f,(f||"").indexOf("?")>0){let s=(f||"").TrimEnd([" ","?"]);o._typeName=s,o._isNullable=true}return o}static FromValue(h,c){return r.FromTypeName(i.KnownType[r.ResolveKnownTypeFromValue(h)],c||i.TypeInspector.IsNullOrUndefined(h))}}i.TypeDescriptor=r})(t=n.Type||(n.Type={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){function f(nt,tt){if(nt&&nt.length>0){for(var it=0;it<nt.length;it++){if(!tt(nt[it])){return false}};return true}return false}function v(rt,ut){return rt&&ut&&rt[ut]!==undefined}function e(){return f(arguments,ft=>typeof ft=="boolean")}function o(){return f(arguments,et=>typeof et!="number"||isNaN(et)||isFinite(et))}function s(){return f(arguments,ot=>typeof ot=="string")}function h(){return f(arguments,st=>st&&st.push&&st.pop&&(st.length>0||st.length===0))}function c(){return f(arguments,ht=>{var ct=typeof ht;return ht&&(ct=="object"||ct=="function")&&!(ct.tagName&&ct.nodeType)&&(ht.length>0||ht.length===0)&&!l(ht)})}function y(){return h.apply(null,arguments)||c.apply(null,arguments)}function l(){return f(arguments,function(lt){return typeof lt=="function"&&"call"in lt&&"apply"in lt})}function a(){return arguments.length==0?true:f(arguments,function(at){return at===null||typeof at=="undefined"?true:typeof at=="number"&&(isNaN(at)||!isFinite(at))?true:false})}function p(){return s.apply(null,arguments)||o.apply(null,arguments)||e.apply(null,arguments)}function w(vt){return vt&&vt.constructor==n.DateTime}function b(yt){return yt&&yt.constructor==Date}function k(){for(var pt,wt=0;wt<arguments.length;wt++){if(pt=arguments[wt],!a(pt)){return pt}}}function d(bt,kt){return bt===kt?true:window.JSON?JSON.stringify(bt)===JSON.stringify(kt):false}function g(dt){if(dt===null||dt===void 0?void 0:dt.__$$hash){return dt===null||dt===void 0?void 0:dt.__$$hash};let gt=JSON.stringify(dt);typeof gt!="string"&&(gt=dt+"");try{dt.__$$hash=gt}catch(ni){}return gt}u.ContainsProperty=v,u.IsBoolean=e,u.IsNumber=o,u.IsString=s,u.IsArray=h,u.IsDomArray=c,u.IsArrayOrDomArray=y,u.IsFunction=l,u.IsNullOrUndefined=a,u.IsValueType=p,u.IsDateTime=w,u.IsDate=b,u.Coalesce=k,u.AreValuesEqual=d,u.CalculateHashCode=g})(r=i.TypeInspector||(i.TypeInspector={}))})(t=n.Type||(n.Type={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){function f(){var l=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new RegExp("[xy]","g"),function(v){var y=(l+Math.random()*16)%16|0;l=Math.floor(l/16);return(v=="x"?y:y&7|8).toString(16)})}function u(p,w){if(p=n.Type.TypeInspector.IsNumber(p)?p:0,w=n.Type.TypeInspector.IsNumber(w)?w:1,p>w){throw new Error("Invalid range in Calysto.Mathm.Random(...)");}return Math.random()*(w-p)+p}function e(b,k){return Math.floor(u(n.Type.TypeInspector.IsNumber(b)?b:0,n.Type.TypeInspector.IsNumber(k)?k:100))}function r(d,g,nt){if(!(nt==0||nt>0)){throw new Error("Missing decimalPlaces");}var tt=Math.pow(10,nt);return Math[d](g*tt)/tt}function o(it,rt){return r("floor",it,rt)}function s(ut,ft){return r("ceil",ut,ft)}function h(et,ot){return r("round",et,ot)}function c(st,ht){return r("trunc",st,ht)}i.NewGuid=f,i.Random=u,i.RandomInt=e,i.DecimalFloor=o,i.DecimalCeil=s,i.DecimalRound=h,i.DecimalTrunc=c})(t=n.Mathm||(n.Mathm={}))}(Calysto||(Calysto={})),Number.prototype.ToStringFormated||(Number.prototype.ToStringFormated=function(n){let t=this;if(isFinite(t)&&!isNaN(t)){let f=0,r=0,s=false,e=false,i;if(n){if(i=n.toLowerCase().match(new RegExp("([NnCc])([\\d]*)"))){if(e=true,i[1]=="c"&&(s=true),f=r=!i[2]?2:parseInt(i[2],10),i[3]&&(r=parseInt(i[3])),r>15){throw new Error("Number format, allowed maxDecPlaces is 15, current: "+r);}}else if(n.indexOf("#")>=0&&(i=n.match(new RegExp("([\\,\\.]*)([\\#]*)([0]*)([\\,\\.]+)([0]*)([\\#]*)$")))){let v=i[1];e=!!v;let y=i[4];f=(i[5]||"").length,r=f+(i[6]||"").length}else throw new Error("Unsupported number format in Number.ToStringFormated("+n+")");}else r=15;let h=Calysto.Mathm.DecimalRound(t,r),a=h<0,c=(Math.abs(h)+"").split("."),o=c[0],u=c[1]||"";while(u.length<f){u+="0"};if(u&&(u=Calysto.Globalization.CultureInfo.CurrentCulture.NumberFormat.NumberDecimalSeparator+u),e){let b=o.split(""),p=[],w;while(w=b.pop()){(p.length+1)%4==0&&p.unshift(Calysto.Globalization.CultureInfo.CurrentCulture.NumberFormat.NumberGroupSeparator),p.unshift(w)};o=p.join("")}let l=(a?"-":"")+o+u;return s?Calysto.Globalization.CultureInfo.CurrentCulture.NumberFormat.CurrencyPositivePatternString.replace("{CurrencySymbol}",Calysto.Globalization.CultureInfo.CurrentCulture.NumberFormat.CurrencySymbol).replace("{Value}",l):l}throw new Error("NaN or undefined number can not be formated to string");}),function(){function t(d,g,nt,tt){if(!d){return d};var it=i;g&&(it="("+n(g)+")+"),arguments.length<4&&(tt=true),arguments.length<3&&(nt=true),tt&&nt?it="(^"+it+")|("+it+"$)":tt?it+="$":nt&&(it="^"+it);return d.replace(new RegExp(it,"g"),"")}function r(li,ai,vi,yi){for(var nr=ai-(yi||"").length,gi=0,wi=[],bi,tr=new RegExp("([\\w]+)|([^\\w]+)","ig"),ki=[],pi,di;pi=tr.exec(li);){ki.push(pi)};for(vi&&ki.reverse(),di=0;di<ki.length;di++){if(pi=ki[di],gi+=pi[0].length,pi[2]){bi=(bi||"")+pi[0];continue}else if(gi>nr){break}else bi&&(wi.push(bi),bi=null),wi.push(pi[0])};yi&&wi.push(yi),vi&&wi.reverse();return wi.join("")}var n=function(u){var e,f;if(typeof u=="string"){return RegExp.Escape(u)};for(e=[],f=0;f<u.length;f++){e.push(RegExp.Escape(u[f]))};return e.join("|")},i;String.IsNullOrEmpty=function(){var o,s,h;if(arguments.length==0){return true};for(o=0;o<arguments.length;o++){if(s=arguments[o],h=typeof s,!s||h!="string"&&h!="object"||!(s.length>0)){return true}};return false},String.IsNullOrWhiteSpace=function(){var l,c,a;if(arguments.length==0){return true};for(l=0;l<arguments.length;l++){if(c=arguments[l],a=typeof c,!c||a!="string"&&a!="object"||!(c.length>0)||new RegExp("^[\\s]+$").test(c)){return true}};return false},String.prototype.ToCharArray=function(){for(var y=this+"",p=[],v=0;v<y.length;v++){p.push(y.charAt(v))};return p},String.prototype.Equals=function(w,b){var k=this+"";if(k===w){return true};if(b){k&&(k=k.toLowerCase()),w&&(w=w.toLowerCase());return k===w}return false},i="("+n([" ","\r","\n","\t"])+")+",String.prototype.Trim=function(rt){var ut=this+"";return rt?t(ut,rt,true,true):ut.replace(new RegExp("(^[\\s]+)|([\\s]+$)","g"),"")},String.prototype.TrimStart=function(ft){var et=this+"";return ft?t(et,ft,true,false):et.replace(new RegExp("(^[\\s]+)","g"),"")},String.prototype.TrimEnd=function(ot){var st=this+"";return ot?t(st,ot,false,true):st.replace(new RegExp("([\\s]+$)","g"),"")},String.prototype.EndsWith=function(ht,ct){var lt=this+"",at;if(!lt||!ht){return false};at=new RegExp(n(ht)+"$",ct?"ig":"g");return at.test(lt)},String.prototype.StartsWith=function(vt,yt){var pt=this+"",wt;if(!pt||!vt){return false};if(yt){wt=new RegExp("^"+n(vt),yt?"ig":"g");return wt.test(pt)}return pt.indexOf(vt)==0},String.prototype.Contains=function(bt,kt){var dt=this+"",gt,ni;if(!dt||!bt){return false};if(kt){gt=new RegExp(n(bt),kt?"ig":"g");return gt.test(dt)}ni=dt.indexOf(bt);return ni>=0},String.prototype.Substring=function(ti,ii){var ri=this+"",ui;if(!ri){return ri};ui=ri.length-ti;return(ii||0)>ui?ri.substr(ti):ri.substr(ti,ii)},String.prototype.Remove=function(fi){var ei=this+"";return ei&&ei.length>0&&fi>=0?ei.substr(0,fi):""},String.prototype.Repeat=function(oi){for(var ci=this+"",si=[],hi=0;hi<oi;hi++){si.push(ci)};return si.join("")},String.prototype.TakeFirst=function(ir,rr,ur){var fr=this+"";return!fr||ir>fr.length?fr:ur?r(fr,ir,false,rr):fr.substr(0,ir-(rr?rr.length:0))+(rr||"")},String.prototype.TakeLast=function(er,or,sr){var hr=this+"";return!hr||er>hr.length?hr:sr?r(hr,er,true,or):(or||"")+hr.substr(hr.length-er+(or?or.length:0),er)},String.prototype.Split=function(cr,lr){var ar=this+"";return ar?ar.split(new RegExp(n(cr),lr?"ig":"g")):[]},String.prototype.ReplaceAll=function(vr,yr,pr){var wr=this+"",br;if(!wr){return wr};br=new RegExp(n(vr),pr?"ig":"g");return wr.replace(br,yr)},String.prototype.ToNumber=function(){return Calysto.Type.NumberConverter.ToDecimal(this+"")},String.prototype.ToFunc=function(kr){return kr?Calysto.Utility.Expressions.CompileLambdaNoReturnCheck(this+""):Calysto.Utility.Expressions.CompileLambdaExpression(this+"")},String.prototype.GetHashCode=function(){for(var tu,nu=this+"",dr=0,gr=0;gr<(nu||"").length;gr++){tu=nu.charCodeAt(gr),dr=(dr<<5)-dr+tu};return dr&dr},String.prototype.FormatWith=function(iu,ru="{",uu="}"){var fu=this+"";return iu?fu.replace(new RegExp("("+RegExp.Escape(ru||"{")+"([\\w_\\-\\.]+)"+RegExp.Escape(uu||"}")+")","g"),function(eu,ou,su){var hu=Calysto.DataBinder.GetValue(iu,su);if(hu==undefined){throw new Error("Exception in String.FormatWith(), "+ou+" property not found.");}return hu}):fu},String.prototype.FormatWith2=function(cu,lu="{{",au="}}"){return(this+"").FormatWith(cu,lu,au)},String.prototype.FormatWith3=function(vu,yu="{{{",pu="}}}"){return(this+"").FormatWith(vu,yu,pu)},String.prototype.AsEnumerable=function(){return new Calysto.CalystoEnumerable(()=>Calysto.CalystoEnumerator.From(this+""))},String.prototype.ToHtml=function(wu){return Calysto.Utility.Html.StringToHtml(this+"",wu)},String.prototype.ToNullIfEmpty=function(bu){let ku=this+"";bu&&(ku=ku.Trim());return String.IsNullOrWhiteSpace(ku)?null:ku}}(),function(n){class t{constructor(r){this.Ticks=r||0,this.TotalSeconds=Math.floor(r/1e3),this.Hours=Math.floor(this.Ticks/36e5),this.Minutes=Math.floor(this.TotalSeconds/60)%60,this.Seconds=this.TotalSeconds%60,this.Milliseconds=Math.floor(this.Ticks)%1e3}}class i{constructor(){this._token=new RegExp("[H]{1,2}|[h]{1,2}|[m]{1,2}|[s]{1,2}|[f]{1,3}","g"),this._ticks=0}static GetTicks(u,f,e,o,s){return 864e5*(u||0)+36e5*(f||0)+6e4*(e||0)+1e3*(o||0)+(s||0)}static Create(h,c,l,a,v){var y=new n.TimeSpan;y._ticks=n.TimeSpan.GetTicks(h,c,l,a,v);return y}static Frommilliseconds(p){return(new n.TimeSpan).AddMilliseconds(p)}static FromTicks(w){return(new n.TimeSpan).AddMilliseconds(w)}static FromSeconds(b){return(new n.TimeSpan).AddSeconds(b)}static FromMinutes(k){return(new n.TimeSpan).AddMinutes(k)}static FromHours(d){return(new n.TimeSpan).AddHours(d)}static FromDays(g){return(new n.TimeSpan).AddDays(g)}AddTicks(nt){var tt=new n.TimeSpan;tt._ticks=this._ticks+nt;return tt}AddDays(it){return this.AddTicks(n.TimeSpan.GetTicks(it))}AddHours(rt){return this.AddTicks(n.TimeSpan.GetTicks(0,rt))}AddMinutes(ut){return this.AddTicks(n.TimeSpan.GetTicks(0,0,ut))}AddSeconds(ft){return this.AddTicks(n.TimeSpan.GetTicks(0,0,0,ft))}AddMilliseconds(et){return this.AddTicks(et)}Totalmilliseconds(){return this._ticks}TotalSeconds(){return this._ticks/1e3}TotalMinutes(){return this._ticks/6e4}TotalHours(){return this.TotalMinutes()/60}TotalDays(){return this.TotalHours()/24}ToParts(){return new t(this._ticks)}pad(ot,st=2){for(ot=String(ot),st=st||2;ot.length<st;){ot="0"+ot};return ot}FormatTime(ht,ct){var lt=this.pad(Math.floor(ht)%1e3,3),at=Math.floor(ht/1e3),vt=Math.floor(ht/36e5),yt=Math.floor(at/60)%60,pt=at%60,wt={H:vt,HH:this.pad(vt),m:yt,mm:this.pad(yt),s:pt,ss:this.pad(pt),f:String(lt).substr(0,1),ff:String(lt).substr(0,2),fff:String(lt).substr(0,3)};return ct.replace(this._token,function(bt){return bt in wt?wt[bt]:""})}ToStringFormated(dt){return this.FormatTime(this._ticks,dt||"HH:mm:ss.fff")}}n.TimeSpan=i}(Calysto||(Calysto={})),function(n){let u;(function(f){f[f.Sunday=0]="Sunday",f[f.Monday=1]="Monday",f[f.Tuesday=2]="Tuesday",f[f.Wednesday=3]="Wednesday",f[f.Thursday=4]="Thursday",f[f.Friday=5]="Friday",f[f.Saturday=6]="Saturday"})(u=n.DayOfWeek||(n.DayOfWeek={}));let i;(function(e){function o(k,d){for(k=String(k),d=d||2;k.length<d;){k="0"+k};return k}function y(g,nt,tt){var ht,ft;nt=nt||n.Globalization.CultureInfo.CurrentCulture.DateTimeFormat.GeneralLongTimePattern,nt.slice(0,4)=="UTC:"&&(nt=nt.slice(4),tt=true),ft=(g+"").match(a),ft&&ft.length>0&&(ht=(ft[0]||"").replace(v,""));var it=tt?"getUTC":"get",rt=g[it+"Date"](),ct=g[it+"Day"](),et=g[it+"Month"](),lt=g[it+"FullYear"](),ut=g[it+"Hours"](),at=g[it+"Minutes"](),vt=g[it+"Seconds"](),ot=g[it+"Milliseconds"](),ot=o(Math.floor(ot)%1e3,3),st=tt?0:g.getTimezoneOffset(),yt={dddd:h.DayNames[ct],ddd:h.AbbreviatedDayNames[ct],dd:o(rt),d:rt,MMMM:h.MonthNames[et],MMM:h.AbbreviatedMonthNames[et],MM:o(et+1),M:et+1,yy:String(lt).slice(2),yyyy:lt,h:ut%12||12,hh:o(ut%12||12),H:ut,HH:o(ut),m:at,mm:o(at),s:vt,ss:o(vt),f:String(ot).substr(0,1),ff:String(ot).substr(0,2),fff:ot,t:ut<12?"A":"P",tt:ut<12?"AM":"PM",K:(st>0?"-":"+")+o(Math.floor(Math.abs(st)/60))+":"+o(Math.abs(st)%60),Z:tt?"UTC":ht,S:["th","st","nd","rd"][rt%10>3||rt>=10&&rt<=20?0:rt%10]};return nt.replace(l,function(pt){return pt in yt?yt[pt]:pt.slice(1,pt.length-1)})}function s(bt,kt,dt,gt){for(var ni of gt){if(ni in dt){return n.Type.TypeInspector.IsNumber(dt[ni])?dt[ni]:NaN}};return 0}function b(ri,ui,fi,ei){var ci,ai;if(n.Type.TypeInspector.IsDate(ri)){fi.SetValue(new t(ri));return true}if(n.Type.TypeInspector.IsDateTime(ri)){fi.SetValue(ri);return true}let si=ri||"";if(ui){var li=ui.split(new RegExp("[^\\w]+")),yi=si.split(new RegExp("[^\\d]+")),hi={};for(let wi=0;wi<li.length;wi++){let bi=yi[wi];((ci=li[wi])===null||ci===void 0?void 0:ci.StartsWith("f"))&&(bi=c(bi,3)),hi[li[wi]]=parseInt(bi)}if(ai=[s(si,ui,hi,["yyyy","yy"]),s(si,ui,hi,["MM","M"]),s(si,ui,hi,["dd","d"]),s(si,ui,hi,["HH","H"]),s(si,ui,hi,["mm","m"]),s(si,ui,hi,["ss","s"]),s(si,ui,hi,["fff","ff","f"])],ai.Where(ki=>ki==NaN).Any()){if(ei){throw new Error("Error parsing date from: "+si+", to format: "+ui);}else return false};try{fi.SetValue(n.DateTime.Create.apply(null,ai));return true}catch(pi){if(ei){throw pi;}}return false}let oi=si.match(p);if(oi){fi.SetValue(n.DateTime.Create(parseInt(oi[1],10),parseInt(oi[2],10),parseInt(oi[3],10),parseInt(oi[4],10),parseInt(oi[5],10),parseInt(oi[6],10),parseInt(c(oi[7]||"",3).substr(0,3),10)));return true}if(oi=si.match(w),oi){fi.SetValue(n.DateTime.Create(parseInt(oi[3],10),parseInt(oi[2],10),parseInt(oi[1],10),parseInt(oi[4],10),parseInt(oi[5],10),parseInt(oi[6],10),parseInt(c(oi[7]||"",3).substr(0,3),10)));return true}let vi;if((vi=new Date(Date.parse(si)))&&!isNaN(vi.getFullYear())){fi.SetValue(new n.DateTime(vi));return true}if(ei){throw new Error("Can not parse DateTime from "+si);}return false}var l=new RegExp('d{1,4}|M{1,4}|yy(?:yy)?|[H]{1,2}|[h]{1,2}|[m]{1,2}|[s]{1,2}|[f]{1,3}|[t]{1,2}|[LloKSZT]|"[^"]*"|\'[^\']*',"g"),a=new RegExp("\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]d{4})?)\b","g"),v=new RegExp("[^-+dA-Z]","g"),h;e.Format=y;var p=new RegExp("([\\d]+)-([\\d]+)-([\\d]+)[T\\s]+([\\d]*)[:]*([\\d]*)[:]*([\\d]*)[\\.]*([\\d]*)([\\+ \\:\\d\\w]*)"),w=new RegExp("([\\d]+).([\\d]+).([\\d]+)[\\.]*[T\\s]+([\\d]*)[:]*([\\d]*)[:]*([\\d]*)[\\.]*([\\d]*)([\\+ \\:\\d\\w]*)"),c=function(ti,ii){for(ti+="";ti.length<ii;){ti=ti+"0"};return ti};e.TryParseExact=b,e.masks={"default":"ddd MMM dd yyyy HH:mm:ss",shortDate:"M/d/yy",mediumDate:"MMM d, yyyy",longDate:"MMMM d, yyyy",fullDate:"dddd, MMMM d, yyyy",shortTime:"h:mm tt",mediumTime:"h:mm:ss tt",longTime:"h:mm:ss tt K",isoDate:"yyyy-MM-dd",isoTime:"HH:mm:ss",isoDateTime:"yyyy-MM-dd HH:mm:ss.fff",iso3DateTime:"yyyy-MM-ddTHH:mm:ss.fff",iso6DateTime:"yyyy-MM-ddTHH:mm:ss.ffffff",isoUtcDateTime:"UTC:yyyy-MM-dd HH:mm:ss.fff"},h=n.Globalization.CultureInfo.CurrentCulture.DateTimeFormat})(i=n.DateFormat||(n.DateFormat={}));class r{constructor(di){this.Year=di.getFullYear(),this.Month=di.getMonth()+1,this.Day=di.getDate(),this.DayOfWeek=di.getDay(),this.Hour=di.getHours(),this.Minute=di.getMinutes(),this.Second=di.getSeconds(),this.Millisecond=di.getMilliseconds(),this.Ticks=di.getTime()}}n.DateTimeParts=r;class t{constructor(gi){this._typeName="DateTime",gi?typeof gi=="string"?this._dateItem=Date.FromLocalISOTString(gi):gi.constructor==t?this._dateItem=gi._dateItem:gi.constructor==Date&&(this._dateItem=gi):this._dateItem=new Date(0),n.Core.IsDebugDefined&&(this._isoDateStr=Date.ToLocalISOTString(this._dateItem),this._currCultureStr=this._dateItem.ToStringFormated())}ToStringFormated(nr){return i.Format(this._dateItem,nr)}ToShortDateString(){return this.ToStringFormated(n.Globalization.CultureInfo.CurrentCulture.DateTimeFormat.ShortDatePattern)}toString(){return this.ToStringFormated("yyyy-MM-dd HH:mm:ss.fff K")}DayOfWeek(){return this._dateItem.getDay()}DatePart(){var tr=this.ToParts();return n.DateTime.Create(tr.Year,tr.Month,tr.Day)}TimePart(){var ir=this.ToParts();return n.TimeSpan.Create(0,ir.Hour,ir.Minute,ir.Second,ir.Millisecond)}ToParts(){return new r(this._dateItem)}AddHours(rr){return new n.DateTime(new Date(this._dateItem.getTime()+rr*36e5))}AddMinutes(ur){return new n.DateTime(new Date(this._dateItem.getTime()+ur*6e4))}AddSeconds(fr){return new n.DateTime(new Date(this._dateItem.getTime()+fr*1e3))}AddMiliseconds(er){return new n.DateTime(new Date(this._dateItem.getTime()+er))}AddDays(or){return new n.DateTime(new Date(this._dateItem.getTime()+or*864e5))}AddMonths(sr){var cr=this._dateItem.getFullYear()*12+this._dateItem.getMonth()+sr,lr=cr/12,ar=cr%12,hr=new Date(this._dateItem.getTime());hr.setMonth(ar),hr.setFullYear(lr);return new n.DateTime(hr)}AddYears(vr){var pr=this._dateItem.getFullYear()+vr,yr=new Date(this._dateItem.getTime());yr.setFullYear(pr);return new n.DateTime(yr)}ToSystemDate(){let wr=this._dateItem?this._dateItem.getTime():0;return new Date(wr)}ToDateTime(){return new t(this._dateItem)}static Now(){return new n.DateTime(new Date)}static Create(br,kr,dr,gr,nu,tu,iu){if(arguments.length>2&&n.Type.TypeInspector.IsNumber(br,kr,dr)){return new n.DateTime(new Date(br||1700,(kr||1)-1,dr||1,gr||0,nu||0,tu||0,iu||0))};throw new Error("Can not create DateTime");}static TryParseDateTime(ru,uu,fu){return uu?i.TryParseExact(ru,uu,fu):i.TryParseExact(ru,n.Globalization.CultureInfo.CurrentCulture.DateTimeFormat.GeneralLongTimePattern,fu)||i.TryParseExact(ru,n.Globalization.CultureInfo.CurrentCulture.DateTimeFormat.ShortDatePattern,fu)?true:false}static TryParseDate(eu,ou,su){if(t.TryParseDateTime(eu,ou,su)){su.SetValue(su.GetValue().DatePart());return true}return false}static ParseDateTime(hu,cu,lu){let au=new n.BoxValue;if(t.TryParseDateTime(hu,cu,au)){return au.GetValue()};if(lu){throw Error("Error in ParseDateTime, can not parse: "+hu);}return undefined}static ParseDate(vu,yu,pu){let wu=new n.BoxValue;if(t.TryParseDate(vu,yu,wu)){return wu.GetValue()};if(pu){throw Error("Error in ParseDate, can not parse: "+vu);}return undefined}}n.DateTime=t}(Calysto||(Calysto={})),Date.prototype.ToStringFormated=function(n){return Calysto.DateFormat.Format(this,n)},Date.prototype.ToDateTime=function(){return new Calysto.DateTime(this)},Date.prototype.ToSystemDate=function(){return new Date(this)},Date.prototype.ToDateTime=function(){return new Calysto.DateTime(this)},function(n){class t{constructor(r,u){this.Key=r,this.Value=u}}n.KeyValue=t;class i{constructor(){this._map=new Map}AsEnumerable(){return n.CalystoEnumerable.From(()=>function*(f){for(let e of f._map.entries()){yield new t(e[0],e[1])}}(this))}GetItems(){return this.AsEnumerable().ToArray()}ToRawObject(o){var s={};this.GetItems().ForEach(h=>{let c=h.Key+"";if(o&&s[c]!=undefined){throw new Error("Duplicated key: "+h.Key);}s[c]=h.Value});return s}Clear(){this._map.clear()}RemoveKey(l){this._map.delete(l)}GetValues(){return this.AsEnumerable().Select(a=>a.Value).ToArray()}GetKeys(){return this.AsEnumerable().Select(v=>v.Key).ToArray()}Count(){return this._map.size}ContainsKey(y){return!!this._map.has(y)}AddKeyValue(p){return this.Add(p.Key,p.Value)}Add(w,b){if(this._map.has(w)){throw Error("Duplicated key: "+w);}this._map.set(w,b);return this}SetValue(k,d){this._map.set(k,d);return this}TryGetValue(g,nt){if(this._map.has(g)){nt.SetValue(this._map.get(g));return true}return false}GetValue(tt){var it=new n.BoxValue;if(this.TryGetValue(tt,it)){return it.GetValue()};throw new Error("Key not found: "+tt);}GetValueOrDefault(rt,ut){var ft=new n.BoxValue;return this.TryGetValue(rt,ft)?ft.GetValue():ut}}n.Dictionary=i}(Calysto||(Calysto={})),function(n){function r(st){var ht=-1;return new t(ct=>{if(st.length>0&&++ht<st.length){ct.SetValue(st[ht]);return true}return false})}function i(lt){let at;return new t(vt=>{if(at=lt.next(),at&&!at.done){vt.SetValue(at.value);return true}return false})}function u(yt){let pt,wt;return new t(bt=>{if(wt||(wt=yt()),pt=wt.next(),pt&&!pt.done){bt.SetValue(pt.value);return true}return false})}function f(kt){if(kt&&n.Type.TypeInspector.IsString(kt)){var dt=-1;return new t(gt=>{if(kt.length>0&&++dt<kt.length){gt.SetValue(kt.charAt(dt));return true}return false})}throw new Error("CalystoEnumerator can not be created from source: "+kt);}class t{constructor(e){this.fnYieldNext=e}YieldNext(o){if(this.fnYieldNext(o)){this.current=o.GetValue();return true}return false}GetNext(){let s=new n.BoxValue;this.YieldNext(s);return s}MoveNext(){return this.YieldNext(new n.BoxValue)}get Current(){return this.current}static FromYieldFunc(h){if(h&&n.Type.TypeInspector.IsFunction(h)){return new t(h)};throw new Error("CalystoEnumerator can not be created from fnYieldNext: "+h);}static From(c){var l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et;if(c){if(typeof c=="string"){return f(c)};if(((a=(l=c)===null||l===void 0?void 0:l.GetEnumerator)===null||a===void 0?void 0:a.apply)&&"GetEnumerator"in c){return c.GetEnumerator()};if(((y=(v=c)===null||v===void 0?void 0:v.YieldNext)===null||y===void 0?void 0:y.apply)&&((w=(p=c)===null||p===void 0?void 0:p.MoveNext)===null||w===void 0?void 0:w.apply)&&"Current"in c){return c};if(n.Type.TypeInspector.IsArrayOrDomArray(c)){return r(c)};if((d=(k=(b=c)===null||b===void 0?void 0:b.next)===null||k===void 0?void 0:k.apply)===null||d===void 0?void 0:d.apply){return i(c)};if(typeof c=="function"){if((it=(tt=(nt=(g=c)===null||g===void 0?void 0:g.prototype)===null||nt===void 0?void 0:nt.next)===null||tt===void 0?void 0:tt.apply)===null||it===void 0?void 0:it.apply){return u(c)};let ot=c();if((ut=(rt=ot===null||ot===void 0?void 0:ot.next)===null||rt===void 0?void 0:rt.apply)===null||ut===void 0?void 0:ut.apply){return i(ot)};if(((ft=ot===null||ot===void 0?void 0:ot.YieldNext)===null||ft===void 0?void 0:ft.apply)&&((et=ot===null||ot===void 0?void 0:ot.MoveNext)===null||et===void 0?void 0:et.apply)&&"Current"in ot){return ot}}}throw new Error("CalystoEnumerator can not be created from source: "+c);}}n.CalystoEnumerator=t}(Calysto||(Calysto={})),function(n){var t;(function(i){function o(nt){if(window.navigator&&navigator.mimeTypes){for(var tt=0;tt<navigator.mimeTypes.length;tt++){if((navigator.mimeTypes[tt].type+"").indexOf(nt)>0){return true}}};return false}function l(){f||(f={value:o("x-shockwave-flash")});return f.value}function a(){e||(e={value:o("x-silverlight")});return e.value}function s(it){var rt=it.split("."),ut=rt.shift();rt.length>0&&(ut+="."+rt.join(""));return ut||""}function v(){var ft=navigator.userAgent||"",lt=navigator.vendor||"",ot=null,et=null,st=null,ht=null,vt=null,yt=null,at,ct;(ft.Contains("Bot",true)||ft.Contains("Crawler",true))&&(vt=true),ft.Contains("Mobile",true)&&(st=true),yt=navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,ft.Contains("iPad")?(ht=true,et=r.iPad,ot=ft.match("Version\\/([\\d\\.]+)")):ft.Contains("iPod")?(st=true,et=r.iPod,ot=ft.match("Version\\/([\\d\\.]+)")):ft.Contains("iPhone")?(st=true,et=r.iPhone,ot=ft.match("Version\\/([\\d\\.]+)")):ft.Contains("IEMobile")?(st=true,et=r.IEMobile,ot=ft.match("IEMobile\\/([\\d\\.]+)")):ft.Contains("Nokia")?(st=true,et=r.NokiaMobile,ot=ft.match("Version\\/([\\d\\.]+)")):ft.Contains("PlayBook")||ft.Contains("BlackBerry")||ft.Contains("BB10")?(et=r.BlackBerry,(ht=ft.Contains("Tablet"))||(st=ft.Contains("Mobile"))):(ot=ft.match("MSIE ([\\d\\.]+)"))?et=r.MSIE:("msMaxTouchPoints"in navigator||"msManipulationViewsEnabled"in navigator)&&(ot=ft.match("rv:([\\d\\.]+)"))?et=r.MSIE:"msManipulationViewsEnabled"in navigator&&(ot=ft.match("Edge[\\/]([\\d\\.]+)"))?et=r.MSEdge:(ot=ft.match(" Edg[\\/]([\\d\\.]+)"))?et=r.ChromiumEdge:ft.Contains("MSIE")?et=r.MSIE:ft.Contains("Android")?((ot=ft.match("Version\\/([\\d\\.]+)"))||(ot=ft.match("Android ([\\d\\.]+)")),ft.Contains("Tablet")||screen.width>900&&screen.width>screen.height?(ht=true,et=r.AndroidTablet):(st=true,et=r.AndroidMobile)):lt.Contains("Opera")||ft.Contains("OPR/")||ft.Contains("Opera")?(et=r.Opera,ot=ft.match("(OPR|Opera)\\/([\\d\\.]+)"),ot&&(ot=[ot[0],ot[2]])):lt.Contains("Google")?(ot=ft.match("(OPR|Opera)\\/([\\d\\.]+)"))?et=r.Opera:(et=r.Chrome,ot=ft.match("Chrome\\/([\\d\\.]+)")):lt.Contains("Apple")?(et=r.Safari,ot=ft.match("Version\\/([\\d\\.]+)")):(ot=ft.match("Firefox\\/([\\d\\.]+)"))?et=r.Firefox:ft.Contains("Firefox")?et=r.Firefox:ft.Contains("Mobile")?(st=true,et=r.MobilePhone):ft.Contains("Chrome")?et=r.Chrome:ft.Contains("Safari")&&(et=r.Safari),at=null,ct=ot?ot[1]:"",ct&&(at=parseFloat(s(ct))),st&&ht&&(st=false);return{Found:!!(et&&et>0),KindName:r[et||0],Kind:et||0,Version:at||0,VersionString:ct,IsCrawler:!!vt,IsMobile:!!st,IsTablet:!!ht,IsDesktop:!st&&!ht,HasTouch:!!yt}}function y(){return h||(h=v())}function p(pt){switch(pt){case 10:return"Windows 10";case 6.3:return"Windows 8.1";case 6.2:return"Windows 8";case 6.1:return"Windows 7";case 6:return"Windows Vista";case 5.2:return"Windows XP Professional x64";case 5.1:return"Windows XP";case 4.9:return"Windows ME";case 5:return"Windows 2000";case 4.1:return"Windows 98";case 4:return"Windows NT 4.0";default:return null}}function w(wt){switch(wt){case 4.21:return"iPhone 4";case 7:return"iPhone 5";case 8:return"iPhone 6";default:return null}}function b(){var dt=navigator.userAgent||"",bt=null,kt=null;dt.Contains("Windows Phone")?(kt=u.WindowsPhone,bt=dt.match(new RegExp("Windows Phone( OS | )([\\d\\.]+)")),bt&&(bt=[bt[0],bt[2]])):dt.Contains("Windows")?(kt=u.Windows,bt=dt.match(new RegExp("Windows NT ([\\d\\.]+)"))):dt.Contains("Mac")?(kt=u.Macintosh,bt=dt.match(new RegExp("(OS |OS X )([\\d_]+)")),bt&&bt[2]&&(bt=[bt[0],bt[2].replace(new RegExp("_","g"),".")])):dt.Contains("Android")?(kt=u.Android,bt=dt.match(new RegExp("Android ([\\d\\.]+)"))):dt.Contains("Linux")&&(kt=u.Linux);var gt=null,ni=bt?bt[1]:"",ti=null,ii=null;ni&&(gt=parseFloat(s(ni)),kt==u.Windows?ti=p(gt):kt==u.Macintosh&&(ii=w(gt)));return{Found:!!(kt&&kt>0),KindName:n.Enum.GetName(u,kt||0),Kind:kt||0,Version:gt||0,VersionString:ni,WinName:ti,iPhoneVersion:ii,IsWindows:kt==u.Windows,IsAndroid:kt==u.Android,IsLinux:kt==u.Linux,IsMacintosh:kt==u.Macintosh}}function k(){return c||(c=b())}var f,e,h,c;let r;(function(d){d[d.Unknown=0]="Unknown",d[d.Firefox=1]="Firefox",d[d.Chrome=2]="Chrome",d[d.Safari=3]="Safari",d[d.Opera=4]="Opera",d[d.MSIE=5]="MSIE",d[d.Bot=6]="Bot",d[d.MobileBot=7]="MobileBot",d[d.iPhone=8]="iPhone",d[d.AndroidMobile=9]="AndroidMobile",d[d.NokiaMobile=10]="NokiaMobile",d[d.WapPhone=11]="WapPhone",d[d.MobilePhone=12]="MobilePhone",d[d.IEMobile=13]="IEMobile",d[d.iPad=14]="iPad",d[d.AndroidTablet=15]="AndroidTablet",d[d.iPod=16]="iPod",d[d.BlackBerry=17]="BlackBerry",d[d.MSEdge=18]="MSEdge",d[d.ChromiumEdge=19]="ChromiumEdge"})(r=i.BrowserKindEnum||(i.BrowserKindEnum={}));let u;(function(g){g[g.Unknown=0]="Unknown",g[g.Windows=1]="Windows",g[g.Macintosh=2]="Macintosh",g[g.Android=3]="Android",g[g.Linux=4]="Linux",g[g.WindowsPhone=5]="WindowsPhone"})(u=i.OSKindEnum||(i.OSKindEnum={})),i.HasFlash=l,i.HasSilverlight=a,i.GetBrowser=y,i.GetOS=k})(t=n.Features||(n.Features={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){function r(o,s,h,c,l,a){if(!o){throw Error("cookieName is required");}var v=h?new Date(Math.round(Date.now()+1e3*h)):null,y=encodeURIComponent(o+"")+"="+encodeURIComponent(s+"")+(v?"; expires="+v.toUTCString():"")+(c?"; domain="+c:"")+("; path="+(l?l:"/"))+(a?"; secure":"");document.cookie=y}function u(p){var k="",d=document.cookie.indexOf(encodeURIComponent(p)+"="),w,b;p&&d>=0&&(w=d+(encodeURIComponent(p)+"=").length,b=document.cookie.indexOf(";",w),k=b>=0?decodeURIComponent(document.cookie.substring(w,b)):decodeURIComponent(document.cookie.substring(w)));return k||""}function f(){for(var nt,tt,it=document.cookie.split(";"),rt=[],g=0;g<it.length;g++){nt=it[g].replace(new RegExp("(^[\\s]+)|([\\s]$)","ig"),""),nt&&(tt=nt.split("="),rt.push({Name:decodeURIComponent(tt[0]),Value:decodeURIComponent(tt[1])}))};return rt}function e(ut,ft){return r(ut,"",Date.now()/-1e3,ft)}i.SetCookieValue=r,i.GetCookieValue=u,i.GetCookies=f,i.DeleteCookie=e})(t=n.CookieUtility||(n.CookieUtility={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){function e(it){var rt,ut;it.indexOf("on")==0&&(it=it.substr(2));switch(it){case"hover":it="mouseover";break;case"hout":it="mouseout";break;case"enterKey":case"escKey":return true}rt=document.createElement(f[it]||"div"),it="on"+it,ut=it in rt,ut||(rt.setAttribute(it,"return;"),ut=typeof rt[it]=="function"),rt=null;return ut}function r(ft,et,ot,st){et=et||"",et.indexOf("on")==0&&(et=et.substr(2));var ht=et.split(".");return{element:ft,eventFullName:et,type:ht.shift(),namespaces:ht,callbackFunc:ot,removeEvent:()=>{},useCapture:!!st,passive:false}}function o(ct,lt,at,vt){var yt=r(ct,lt,at,vt);if(!yt.element){throw new Error("element is required");}if(!yt.type){throw new Error("eventFullName is required");}if(!yt.callbackFunc){throw new Error("callbackMethod is required");}if(yt.element.$$calysto_EventsArr||(yt.element.$$calysto_EventsArr=[]),yt.element.$$calysto_EventsArr.push(yt),yt.removeEvent=()=>{yt.element.$$calysto_EventsArr.Remove(yt),yt.element.$$calysto_EventsArr.Any()||delete yt.element.$$calysto_EventsArr,u(yt)},yt.element.addEventListener){yt.element.addEventListener(yt.type,yt.callbackFunc,yt.useCapture)}else if(yt.element.attachEvent){yt.element.attachEvent("on"+yt.type,yt.callbackFunc,yt.useCapture)}else throw new Error("Attaching event is not supported");return yt}function s(pt,wt,bt,kt){if(!wt){return pt.$$calysto_EventsArr};var dt=r(pt,wt,bt,kt);return dt.element.$$calysto_EventsArr?dt.element.$$calysto_EventsArr.Where(gt=>(!dt.type||dt.type==gt.type)&&(!dt.callbackFunc||dt.callbackFunc==gt.callbackFunc)&&(dt.namespaces.length==0||dt.namespaces.AsEnumerable().All(function(ni){return gt.namespaces.Contains(ni)}))):[]}function h(ti,ii,ri,ui){var fi=s(ti,ii,ri,ui),ei;fi&&fi.ForEach(oi=>oi.removeEvent()),ei=r(ti,ii,ri,ui),u(ei)}function u(si){if(si.element.removeEventListener){si.element.removeEventListener(si.type,si.callbackFunc,si.useCapture)}else if(si.element.detachEvent){si.element.detachEvent("on"+si.type,si.callbackFunc,si.useCapture)}else throw new Error("Dettaching event is not supported");}function c(hi){return hi.target||hi.srcElement}function l(ci,li){!li||(ci.preventDefault&&ci.preventDefault(),ci.stopPropagation&&ci.stopPropagation()),ci.returnValue=!li,ci.cancelBubble=!!li}function a(ai){return{offsetX:"offsetX"in ai?ai.offsetX:"layerX"in ai?ai.layerX:NaN,offsetY:"offsetY"in ai?ai.offsetY:"layerY"in ai?ai.layerY:NaN}}function v(vi){if(!window.attachEvent){if(!!window.addEventListener){return vi.button===0}}else return vi.button===0||vi.button===1;return false}function y(yi){return yi.button===2}function p(pi){if(!window.attachEvent){if(!!window.addEventListener){return pi.button===1}}else return pi.button===4;return false}function w(wi){return wi&&(wi.button===0||wi.button>0)}function b(bi){return bi&&(bi.keyCode==10||bi.keyCode==13)}function k(ki){return ki&&ki.ctrlKey?true:false}function d(di){return di&&di.shiftKey?true:false}function g(gi){return gi&&gi.keyCode==27}function nt(nr,tr,ir){tr=tr||window.event;var rr=(ir?tr.fromElement:tr.toElement)||tr.relatedTarget;return nr!=rr&&!n.Utility.Dom.IsDescendant(rr,nr)?true:false}function tt(ur,fr){var er,or,sr,hr;if(typeof fr=="string"){if(er=fr,er.indexOf("on")==0&&(er=er.substr(2)),ur.dispatchEvent){if(er.Contains("mouse")||er.Contains("click")){or=document.createEvent("MouseEvent"),or.initEvent(er,false,true),ur.dispatchEvent(or);return}if(er.Contains("key")){sr=document.createEvent("KeyboardEvent"),sr.initEvent(er,false,true),ur.dispatchEvent(sr);return}hr=document.createEvent("Event"),hr.initEvent(er,false,true),ur.dispatchEvent(hr);return}if(ur.fireEvent){ur.fireEvent("on"+er);return}}else{if(ur.dispatchEvent){ur.dispatchEvent(fr);return}if(ur.fireEvent){ur.fireEvent("on"+fr.type);return}}throw new Error("Not supported dispatchEvent: "+fr);}var f={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};i.IsSupported=e,i.Attach=o,i.Detach=h,i.GetTarget=c,i.StopPropagation=l,i.GetOffsetToTarget=a,i.IsLeftMouseButton=v,i.IsRightMouseButton=y,i.IsMiddleMouseButton=p,i.IsAnyMouseButton=w,i.IsEnterKey=b,i.IsCtrlKey=k,i.IsShiftKey=d,i.IsEscKey=g,i.IsHoverChanged=nt,i.DispatchEvent=tt})(t=n.Event||(n.Event={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){function c(nt,tt=""){for(var it=new RegExp("\\<[^\\>]+\\>");nt.match(it)!=null;){nt=nt.replace(it,tt||"")};return nt}function l(rt){if(rt){let ut=rt.lastIndexOf("_");if(ut>0){return rt.substr(ut+1)};let ft=rt.lastIndexOf("$");return ft>0?rt.substr(ft+1):rt}return undefined}function a(et){return encodeURIComponent(n.Utility.Encoding.Utf8CharsEncoder.EncodeUTF8(et))}function v(ot){return n.Utility.Encoding.Utf8CharsEncoder.DecodeUTF8(decodeURIComponent(ot))}function y(st){return st.replace(new RegExp("<","g"),"&lt;").replace(new RegExp(">","g"),"&gt;")}function p(ht){return ht.replace(new RegExp("&lt;","g"),"<").replace(new RegExp("&gt;","g"),">")}function h(ct){if(!ct){return""};if(!o){let lt=[];for(let at in f){lt.push("("+RegExp.Escape(at)+")")};o=lt.join("|")}return ct.replace(new RegExp(o,"g"),vt=>f[vt])}function w(yt){if(!yt){return""};if(!e){e={};let pt=[];for(let wt in f){e[f[wt]]=wt,pt.push("("+RegExp.Escape(f[wt])+")")};s=pt.join("|")}return yt.replace(new RegExp(s,"g"),bt=>e[bt])}function b(kt,dt){if(String.IsNullOrEmpty(kt)){return kt};kt=kt.ReplaceAll("\r\n","\n").ReplaceAll("\r","");return dt?kt.Split("\n").Select(gt=>h(gt)).ToStringJoined("<br/>"):kt.ReplaceAll("\n","<br/>")}function d(ni){return ni.replace(new RegExp('([\\\\\x00-\x1f\\"])',"g"),(ti,ii)=>{var ri=k[ii];if(ri){return ri};ri=ii.charCodeAt();return"\\u00"+Math.floor(ri/16).toString(16)+(ri%16).toString(16)})}function g(ui,fi="Full"){if(ui=new n.Regex(n.Regex.Escape("/*")+"[\\w\\W]*?"+n.Regex.Escape("*/")).Replace(ui," "),fi=="Full"){ui=new n.Regex("[\\s]+").Replace(ui," "),ui=new n.Regex(`[ ]*([\;\{\}\,]+)[ ]*`).Replace(ui,"$1");let ei=new RegExp(`\{[^\}]+\}`,"ig"),oi=new RegExp(`[ ]*([\:])[ ]*`,"ig");ui=ui.replace(ei,si=>si.replace(oi,":"));return ui.TrimStart()}return ui}u.RemoveHtmlTags=c,u.ExtractAspNameOrId=l,u.UrlEncode=a,u.UrlDecode=v,u.HtmlEncodeSimple=y,u.HtmlDecodeSimple=p;let f={"&":"&amp;","'":"&#39;",'"':"&quot;","<":"&lt;",">":"&gt;","\r":"&#13","\n":"&#10"},o,e,s;u.HtmlEncode=h,u.HtmlDecode=w,u.StringToHtml=b;const k={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};u.JavaScriptStringEncode=d,u.Minify=g})(r=i.Html||(i.Html={}))})(t=n.Utility||(n.Utility={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){var e,o;let f=n.Constants.BaseXCharsTable,s;(function(v){function y(w){var k,d,b;for(w=w.replace(new RegExp("\r\n","g"),"\n"),k="",d=0;d<w.length;d++){b=w.charCodeAt(d),b<128?k+=String.fromCharCode(b):b>127&&b<2048?(k+=String.fromCharCode(b>>6|192),k+=String.fromCharCode(b&63|128)):(k+=String.fromCharCode(b>>12|224),k+=String.fromCharCode(b>>6&63|128),k+=String.fromCharCode(b&63|128))};return k}function p(g){for(var it="",nt=0,tt=0,rt=0,ut=0;nt<g.length;){tt=g.charCodeAt(nt),tt<128?(it+=String.fromCharCode(tt),nt++):tt>191&&tt<224?(rt=g.charCodeAt(nt+1),it+=String.fromCharCode((tt&31)<<6|rt&63),nt+=2):(rt=g.charCodeAt(nt+1),ut=g.charCodeAt(nt+2),it+=String.fromCharCode((tt&15)<<12|(rt&63)<<6|ut&63),nt+=3)};return it}v.EncodeUTF8=y,v.DecodeUTF8=p})(s=u.Utf8CharsEncoder||(u.Utf8CharsEncoder={}));let h;(function(ft){function et(st){for(var ct=s.EncodeUTF8(st),lt=[],ht=0;ht<ct.length;ht++){lt.push(ct.charCodeAt(ht))};return lt}function ot(at){for(var yt=[],vt=0;vt<at.length;vt++){yt.push(String.fromCharCode(at[vt]))};return s.DecodeUTF8(yt.join(""))}ft.GetBytes=et,ft.GetString=ot})(h=u.UTF8||(u.UTF8={}));class c{constructor(pt=f.JavaScriptRFCTable64){this.charsTable=pt}ConvertBytes(wt,bt,kt){for(var ui,ni=[],gt=0,dt=0,ti=Math.pow(2,kt)-1,ri=false,ii=0;ii<wt.length;ii++){for(ui=wt[ii],ri?gt=gt<<bt:ri=true,gt=gt|ui,dt+=bt;dt>=kt;){ni.push(gt>>dt-kt&ti),dt-=kt}};while(dt>=kt){ni.push(gt>>dt-kt&ti),dt-=kt};while(dt>0&&bt>kt){ni.push(gt<<kt-dt&ti),dt-=kt};return ni}Convert(fi,ei,oi){var si,ci,li,vi;if(!ei||ei!=8&&(ei<1||ei>6)){throw Error(ei+" is invalid value. fromBits can be in range [1-6] or 8");}if(!oi||oi!=8&&(oi<1||oi>6)){throw Error(oi+" is invalid value. toBits can be in range [1-6] or 8");}if(si=this.ConvertBytes(fi,ei,oi),this.charsTable!=f.StandardBase64RFC){return si};if(ei==8&&oi==6){if(fi.length%3>0){for(ci=3-fi.length%3,li=this.charsTable.length-1;ci>0;){ci--,si.push(li)}}}else if(ei==6&&oi==8){for(var li=this.charsTable.length-1,hi=0,ai=fi.length;hi<ai&&fi[ai-1-hi]==li;){hi++};vi=si.length-hi,si=si.slice(0,vi)}return si}EncodeToBaseString(yi,pi){var bi,ki,wi;for(typeof yi=="string"&&(yi=h.GetBytes(yi)),bi=this.Convert(yi,8,pi),ki=[],wi=0;wi<bi.length;wi++){ki.push(this.charsTable.charAt(bi[wi]))};return ki.join("")}DecodeBaseStringToArray(di,gi){for(var tr=[],nr=0;nr<di.length;nr++){tr.push(this.charsTable.indexOf(di.charAt(nr)))};return this.Convert(tr,gi,8)}DecodeBaseStringToString(ir,rr){return h.GetString(this.DecodeBaseStringToArray(ir,rr))}}u.CalystoBaseConverter=c;class a{constructor(){this.converter=new c}EncodeToHexString(ur){return this.converter.EncodeToBaseString(ur,4)}DecodeHexStringToArray(fr){return this.converter.DecodeBaseStringToArray(fr,4)}DecodeHexStringToString(er){return this.converter.DecodeBaseStringToString(er,4)}}u.HEX=new a;class l{constructor(or){this.converter=new c(or)}EncodeToBase64String(sr){return this.converter.EncodeToBaseString(sr,6)}DecodeBase64StringToArray(hr){return this.converter.DecodeBaseStringToArray(hr,6)}DecodeBase64StringToString(cr){return this.converter.DecodeBaseStringToString(cr,6)}}u.RfcBase64=new l(f.StandardBase64RFC),u.CalystoBase64=new l(f.JavaScriptRFCTable64),u.Base64RndEncoder=new l(((o=(e=n.Core)===null||e===void 0?void 0:e.Constants)===null||o===void 0?void 0:o.RandomRFCTable64)||f.RandomRFCTable64)})(r=i.Encoding||(i.Encoding={}))})(t=n.Utility||(n.Utility={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){function s(hr){return hr?(hr||"").replace(new RegExp("(^[\\s]+)|([\\s]+$)","ig"),""):hr}function yt(cr){return typeof cr=="string"?cr:cr.id?cr.id:cr.id=n.Utility.Generators.GenerateLabel(20)}function pt(lr){var ar=lr;return!!(ar&&ar.parentNode&&ar.offsetWidth>0&&ar.offsetHeight>0&&ar.style&&ar.style.display!="none")}function wt(vr){for(var yr=vr;yr&&yr!=document&&(yr=yr.offsetParent||yr.parentNode););return yr==document}function bt(pr,wr){var br=pr;if(!br||!wr||br==wr){return false};while(br&&br!=wr){try{br=br.parentNode}catch(kr){return false}}return br==wr}function kt(dr){var gr=dr,nu;if(!gr){return""};nu="innerText"in gr?gr.innerText:"innerHTML"in gr?n.Utility.Html.RemoveHtmlTags(gr.innerHTML,""):"nodeValue"in gr?gr.nodeValue:gr.value||"";return nu+""}function dt(tu,iu){return tu&&tu.tagName&&tu.tagName.toLowerCase()==iu.toLowerCase()?true:false}function o(){if(!h){var ru=document.createElement("div");ru.innerHTML="<div id='calystoViewportSizeDiv' style='position:fixed;top:0;left:0;bottom:0;right:0;z-index:-10000000;'><\/div>",h=ru.childNodes[0],(document.body||document.documentElement).appendChild(h)}return h}function e(uu){var fu=uu,ou,eu;if(fu.getBoundingClientRect){return fu.getBoundingClientRect()};ou=uu,eu={left:0,top:0,bottom:0,right:0,width:fu.offsetWidth,height:fu.offsetHeight};do if(eu.left+=(fu.offsetLeft||0)-(fu.scrollLeft||0),eu.top+=(fu.offsetTop||0)-(fu.scrollTop||0),fu.style&&(fu.style.position=="fixed"||d(fu).position=="fixed")){break}else fu=fu.offsetParent||fu.parentNode;while(fu);return eu}function gt(su){var hu=e(su),cu=tt();return{left:hu.left+cu.scrollLeft,top:hu.top+cu.scrollTop,width:hu.width,height:hu.height}}function ni(lu){let vu=[],au=lu,yu=0,pu=0;while(au=au.parentNode){if(yu=au.scrollTop,pu=au.scrollTop,au.scrollTop>0||au.scrollTop>0){vu.push(au);continue}if(++au.scrollTop,au.scrollTop==yu+1){--au.scrollTop,vu.push(au);continue}if(--au.scrollTop,au.scrollTop==yu-1){++au.scrollTop,vu.push(au);continue}if(++au.scrollLeft,au.scrollLeft==pu+1){--au.scrollLeft,vu.push(au);continue}if(--au.scrollLeft,au.scrollLeft==pu-1){++au.scrollLeft,vu.push(au);continue}}return vu}function tt(){return{scrollLeft:Math.max(document.body.scrollLeft,document.documentElement.scrollLeft,window.pageXOffset||0),scrollTop:Math.max(document.body.scrollTop,document.documentElement.scrollTop,window.pageYOffset||0),scrollWidth:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),scrollHeight:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight),clientWidth:o().offsetWidth,clientHeight:o().offsetHeight}}function ti(bu,ku){var du=e(bu),gu=e(o()),nf=du.top>=gu.top&&du.top<=gu.top+gu.height,tf=du.top+du.height>=gu.top&&du.top+du.height<=gu.top+gu.height,rf=du.left>=gu.left&&du.left<=gu.left+gu.width,uf=du.left+du.width>=gu.left&&du.left+du.width<=gu.left+gu.width,ff,ef;if(ku){ff=du.width<=gu.width?rf||uf:rf&&!uf||!rf&&uf||!rf&&!uf&&du.left<gu.left&&du.left+du.width>gu.left,ef=du.height<=gu.height?nf||tf:nf&&!tf||!nf&&tf||!nf&&!tf&&du.top<gu.top&&du.top+du.height>gu.top;return ff&&ef}return nf&&tf&&rf&&uf}function ii(of){var sf=e(of),hf=e(o());return{left:sf.left-hf.left,top:sf.top-hf.top,bottom:hf.top+hf.height-(sf.top+sf.height),right:hf.left+hf.width-(sf.left+sf.width)}}function it(cf,lf){var af=lf.match(new RegExp("(rect|margins)[\\(][\\s]*([\\d\\+\\-px\\%]+)[\\s]+([\\d\\+\\-px\\%]+)[\\s]+([\\d\\+\\-px\\%]+)[\\s]+([\\d\\+\\-px\\%]+)[\\s]*[\\)]"));af=af||[];return{match:af,useMargins:af&&af[1]=="margins",top:parseFloat(af[2])||0,right:af[3]?parseFloat(af[3]):cf.offsetWidth,bottom:af[4]?parseFloat(af[4]):cf.offsetHeight,left:parseFloat(af[5])||0}}function rt(vf){return it(vf,g(vf,"clip").StyleValue)}function ri(yf,pf){var bf=rt(yf),wf,kf;typeof pf=="string"?(kf=pf.match(new RegExp("[\\d\\+\\-px\\%]+","g")),kf=kf||[],wf={top:kf[0],right:kf[1],bottom:kf[2],left:kf[3],useMargins:pf.indexOf("margins")>=0}):wf=pf;return wf.useMargins?{top:f(bf.top,wf.top),right:yf.offsetWidth-f(bf.right,wf.right),bottom:yf.offsetHeight-f(bf.bottom,wf.bottom),left:f(bf.left,wf.left)}:{top:f(bf.top,wf.top),right:f(bf.left,wf.right),bottom:f(bf.top,wf.bottom),left:f(bf.left,wf.left)}}function ui(){throw new Error("Not implemeted: SetClip()");}function ut(df,gf){return!!(df&&df.className&&gf&&(" "+df.className+" ").indexOf(" "+gf+" ")>=0)}function ft(ne,te){te&&ne&&(y(ne,te),ne.className=s(ne.className+" "+te))}function y(ie,re){var fe,ue;if(re&&ie){for(fe=re.split(" "),ue=0;ue<fe.length;ue++){(re=fe[ue])&&(ie.className=s((" "+ie.className+" ").replace(new RegExp(" "+re+" ","g")," ")))}}}function fi(ee,oe){ee&&(ee.className=s(oe)||"")}function ei(se,he){se&&"className"in se&&he&&(ut(se,he)?y(se,he):ft(se,he))}function p(ce){for(var ve=new RegExp("(([\\w]*)-([a-z]))|([^\\-]+)","g"),le,ae="";(le=ve.exec(ce))!=null;){ae+=(le[2]||"")+(le[3]||"").toUpperCase()+(le[4]||"")};return ae}function oi(ye){for(var be=new RegExp("(([a-z]*)([A-Z]))|([\\w\\-]+)","g"),pe,we="";(pe=be.exec(ye))!=null;){we+=(pe[2]||"")+((pe[3]||"")!=""?"-"+(pe[3]||"").toLowerCase():"")+(pe[4]||"")};return we}function et(ke,de){if(ke&&ke.style){let ge=typeof de=="string"?parseFloat(de):de;ge<0?ge=0:ge>1&&(ge=ge/100),ge>1&&(ge=1),"opacity"in ke.style&&(ke.style.opacity=ge+""),"filter"in ke.style&&(ke.style.filter="alpha(opacity="+ge*100+")")}}function ot(no){var to=NaN,io;no&&no.style&&("opacity"in no.style?to=parseFloat(no.style.opacity)*100:"filter"in no.style&&(io=no.style.filter.match(new RegExp("opacity[\\s\\=]+([\\d]+)")),io&&(to=parseFloat(io[1]))));return typeof to=="number"&&to>=0&&to<100?to:100}function w(ro){let uo=[];return ro&&ro.style&&l(ro.style.zIndex,uo)?uo[0]:NaN}function si(fo){let eo=fo,oo=NaN;while(eo&&eo.ownerDocument&&!n.Type.TypeInspector.IsNumber(oo=w(eo))){eo=eo.parentNode};return oo}function c(so,ho){if(ho=="opacity"||ho=="zoom"||ho=="zIndex"){return""};var co;return so&&typeof so=="string"&&(co=so.match(new RegExp("(px|%)$","ig")))&&co&&co[1]?co[1]:typeof ho=="string"&&st.test(ho)?"px":""}function l(lo,ao){var vo,yo;if(lo&&typeof lo=="string"?(yo=lo.match(new RegExp("^[\\*\\-\\+\\=]*?([\\-]{0,1}[\\d\\.]+)(px|%)?$")),yo&&(vo=parseFloat(yo[1]))):vo=lo,n.Type.TypeInspector.IsNumber(vo)){ao.push(vo);return true}return false}function a(po,wo){var bo=[];if(l(po,bo)){return bo.pop()};if(n.Type.TypeInspector.IsNumber(wo)){return wo};throw new Error("Can not extract number from: "+po);}function b(ko){return!!ko&&typeof ko=="string"&&ko.indexOf("=")==1}function k(go){return!!go&&typeof go=="string"&&go.indexOf("%")>0}function v(ns,ts){return typeof ns=="string"?ns.replace(new RegExp("^([\\-]?[\\.\\d]+)(px|%)?$","i"),"$1"+ts):isNaN(ns)?"auto":ts?Math.round(ns)+""+ts:ns+""}function f(is,rs){var us,es,fs;if(typeof rs=="string"){if(b(rs)){if(us=a(rs.substr(2)),es=false,typeof is=="string"&&(es=k(is),is=parseFloat(is)),k(rs)&&(es||(us=is*us/100)),fs=rs?rs.match(new RegExp("^[\\+\\-\\*]\\=")):null,fs&&fs[0]){switch(fs[0]){case"+=":is+=us;break;case"-=":is-=us;break;case"*=":is*=us}}return is}return a(rs)}return rs}function d(os){return os.ownerDocument&&os.ownerDocument.defaultView&&os.ownerDocument.defaultView.getComputedStyle?os.ownerDocument.defaultView.getComputedStyle(os):window.getComputedStyle?window.getComputedStyle(os):os.currentStyle?os.currentStyle:os.style}function g(ss,hs){var vs=p(hs),cs=undefined,ls=NaN,ps,ws=false,as,ys;if(hs=="opacity"){ls=ot(ss),cs=ls+""}else if(vs=="zIndex"){ls=w(ss),cs=ls+""}else if(hs.indexOf("client")==0||hs.indexOf("offset")==0||hs.indexOf("scroll")==0){if(as=ss[vs],typeof as=="string"){cs=as,ls=a(as)}else if(n.Type.TypeInspector.IsNumber(as)){ls=as,cs=as+""}else throw new Error("Extracting number is not supported");}else cs=ss.style[vs],(!cs||hs.indexOf("color")>=0||cs=="auto"||cs=="initial"||cs=="inherit")&&(cs=d(ss)[vs]),ys=[],l(cs,ys)&&(ws=true,ls=Math.round(ys.pop()),ps=c(cs,hs));if(n.Type.TypeInspector.IsNumber(ls)&&cs=="auto"){switch(vs){case"height":ls=ss.clientHeight;break;case"width":ls=ss.clientWidth}}return{Element:ss,Name:hs,NumericValue:ls,IsNumber:ws,Units:ps,StyleValue:cs+"",StyleName:vs}}function hi(bs,ks,ds,gs){var rh,th,nh,ih;if(bs&&bs.style){if(rh=p(ks),b(ds)){ih=g(bs,ks),nh=f(ih.NumericValue,ds),th=v(nh,gs||ih.Units)}else if(typeof ds=="string"){let fh=c(ds,ks);th=v(ds,fh)}else{let eh=gs||c(ds,ks);nh=ds,th=v(ds,eh)}if(ks=="opacity"){et(bs,nh)}else if(ks.indexOf("offset")!=0){if(ks.indexOf("client")==0||ks.indexOf("scroll")==0){bs[ks]=nh}else try{bs.style[rh]=th}catch(uh){}}}}function ci(oh,sh){return oh&&oh.getAttributeNode?oh.getAttributeNode(sh):null}function li(hh,ch){return hh&&hh.getAttribute?hh.getAttribute(ch):null}function ht(lh,ah,vh){lh&&lh.setAttribute&&lh.setAttribute(ah,vh)}function ct(yh,ph){yh&&yh.removeAttribute&&yh.removeAttribute(ph)}function ai(wh,bh){if(wh){if(wh.hasAttribute){return wh.hasAttribute(bh)};if(wh.getAttribute){return!(wh.getAttribute(bh)==null)}}return false}function vi(kh,dh){kh&&(dh?(ct(kh,"disabled"),kh.disabled=false):(ht(kh,"disabled","disabled"),kh.disabled=true))}function yi(gh){return gh&&gh.parentNode&&gh.cloneNode?gh.cloneNode(true):gh}function pi(nc){nc&&nc.parentNode&&nc.parentNode.removeChild(nc)}function nt(tc,ic){var rc,uc;if(tc&&tc.parentNode){if(ic&&ic.length>0){for(rc=ic.length-1;rc>=0;rc--){uc=ic[rc],uc&&tc.parentNode&&(tc.parentNode.insertBefore(uc,tc),tc=uc)}}}else throw new Error("InsertBefore failed, no parentNode");}function wi(fc,ec){nt(fc,ec),fc&&fc.parentNode&&fc.parentNode.removeChild(fc)}function bi(oc,sc){var cc,hc;if(oc&&oc.parentNode){if(sc&&sc.length>0){for(cc=0;cc<sc.length;cc++){hc=sc[cc],hc&&oc.parentNode&&(oc.parentNode.insertBefore(hc,oc),oc.parentNode.insertBefore(oc,hc),oc=hc)}}}else throw new Error("InsertAfter failed, no parentNode");}function ki(lc,ac){var yc,vc;if(lc&&lc.childNodes&&lc.nodeType==1){for(vc=lc.childNodes.length-1;vc>=0;vc--){yc=lc.childNodes[vc],yc&&yc.parentNode&&yc.parentNode.removeChild(yc)};if(ac&&ac.length>0){for(vc=0;vc<ac.length;vc++){lc.appendChild(ac[vc])}}}}function lt(pc,wc){var bc,kc;if(pc&&pc.childNodes&&pc.nodeType==1&&wc&&wc.length>0){for(bc=0;bc<wc.length;bc++){kc=wc[bc],kc&&pc.appendChild(kc)}}}function di(dc,gc){dc&&dc.childNodes&&(dc.childNodes.length>0?nt(dc.childNodes[0],gc):lt(dc,gc))}function gi(...nl){var il,nl,tl;if(arguments.length==0){return[]};for(il=[],nl=n.Collections.SelectFlatten(arguments),tl=0;tl<nl.length;tl++){il.AddRange(nr(nl[tl]))};return il}function nr(rl){var ol,fl,sl,ul,el;if(n.Type.TypeInspector.IsNullOrUndefined(rl)){return[]};if(typeof rl=="number"&&(rl=rl+""),typeof rl=="string"){if(String.IsNullOrWhiteSpace(rl)){return[]};for(ol=document.createElement("div"),ol.innerHTML=rl,fl=[],ul=0;ul<ol.childNodes.length;ul++){sl=ol.childNodes[ul],fl.push(sl)};for(ul=0;ul<fl.length;ul++){el=fl[ul],el&&el.parentNode&&el.parentNode.removeChild(el)};return fl}if(rl.childNodes){return[rl]};throw new Error("Invalid type in ConvertSingleToElementsArray");}function tr(hl,cl,ll){var al=hl,pl,dl,gl;if(al&&al.parentNode&&al.parentNode.clientHeight>0&&al.parentElement.clientWidth>0){pl=true,al.parentNode.style.overflow="hidden",(ll||pl)&&((al.tagName||"").toLowerCase()=="img"&&(al.removeAttribute("width"),al.removeAttribute("height"),al.style.width="",al.style.height=""),al.style.margin="");var wl=al.__initialWidth||al.offsetWidth||al.clientWidth,bl=al.__initialHeight||al.offsetHeight||al.clientHeight,kl=wl/bl||1,yl=wl,vl=bl;(ll&&(yl<al.parentElement.clientWidth||vl<al.parentElement.clientHeight)||pl&&(yl>al.parentElement.clientWidth||vl>al.parentElement.clientHeight))&&(yl=al.parentElement.clientWidth,vl=yl/kl,(cl&&vl<al.parentElement.clientHeight||!cl&&vl>al.parentElement.clientHeight)&&(vl=al.parentElement.clientHeight,yl=vl*kl)),al.style.position="relative",al.style.top="0",al.style.left="0",al.style.bottom="0",al.style.right="0",al.style.padding="0",al.style.margin="0",yl=Math.ceil(yl),vl=Math.ceil(vl),dl=Math.floor((al.parentNode.clientWidth-yl)/2),gl=Math.floor((al.parentNode.clientHeight-vl)/2),al.style.marginTop=gl+"px",al.style.marginLeft=dl+"px",al.style.width=yl+"px",al.style.height=vl+"px"}}function ir(na){return na&&na.style?na.style.transform||na.style.msTransform||na.style.webkitTransform:""}var h,st;class at{constructor(){this._currDeltaY=0,this._currDeltaX=0}HandleScroll(rr,ur){if(ur.deltaY||ur.deltaX){let fr=ur.deltaY||0,er=ur.deltaX||0;if(ur.shiftKey){let or=fr;fr=er,er=or}switch(ur.deltaMode){case 0:this._currDeltaY+=fr,this._currDeltaX+=er;break;case 1:this._currDeltaY+=fr*20,this._currDeltaX+=er*20;break;case 2:this._currDeltaY+=fr*window.screen.height,this._currDeltaX+=er*window.screen.height}Math.abs(this._currDeltaY)>10&&(rr.scrollTop+=this._currDeltaY,this._currDeltaY=0),Math.abs(this._currDeltaX)>10&&(rr.scrollLeft+=this._currDeltaX,this._currDeltaX=0)}}}u.ScrollHandler=at;let vt;(function(sr){sr[sr.ELEMENT_NODE=1]="ELEMENT_NODE",sr[sr.ATTRIBUTE_NODE=2]="ATTRIBUTE_NODE",sr[sr.TEXT_NODE=3]="TEXT_NODE",sr[sr.CDATA_SECTION_NODE=4]="CDATA_SECTION_NODE",sr[sr.ENTITY_REFERENCE_NODE=5]="ENTITY_REFERENCE_NODE",sr[sr.ENTITY_NODE=6]="ENTITY_NODE",sr[sr.PROCESSING_INSTRUCTION_NODE=7]="PROCESSING_INSTRUCTION_NODE",sr[sr.COMMENT_NODE=8]="COMMENT_NODE",sr[sr.DOCUMENT_NODE=9]="DOCUMENT_NODE",sr[sr.DOCUMENT_TYPE_NODE=10]="DOCUMENT_TYPE_NODE",sr[sr.DOCUMENT_FRAGMENT_NODE=11]="DOCUMENT_FRAGMENT_NODE",sr[sr.NOTATION_NODE=12]="NOTATION_NODE"})(vt=u.NodeTypeEnum||(u.NodeTypeEnum={})),u.TrimSpaces=s,u.EnsureElementId=yt,u.IsElementVisible=pt,u.IsElementInDom=wt,u.IsDescendant=bt,u.GetInnerText=kt,u.HasTagName=dt,u.GetViewportDiv=o,u.GetElementScreenPosition=e,u.GetElementPagePosition=gt,u.GetScrollableAncestors=ni,u.GetPageDimensions=tt,u.IsElementInViewport=ti,u.GetElementToViewportPosition=ii,u.ParseClip=it,u.GetClip=rt,u.CalculateClip=ri,u.SetClip=ui,u.HasClass=ut,u.AddClass=ft,u.RemoveClass=y,u.SetClass=fi,u.ToggleClass=ei,u.ConvertCssNameToCamel=p,u.ConvertCssNameFromCamel=oi,u.SetOpacity=et,u.GetOpacity=ot,u.GetZIndex=w,u.GetZIndexNested=si,st=new RegExp("top|left|bottom|right|width|height|size|radius|padding|margin","i"),u.ExtractUnits=c,u.TryExtractStyleNumericValue=l,u.ExtractNumericValue=a,u.IsIncrementValue=b,u.IsPercent=k,u.CreateStyleValue=v,u.CalculateNumericValue=f,u.GetComputedStyleDeclaration=d,u.GetComputedStyle=g,u.SetStyleValue=hi,u.GetAttributeNode=ci,u.GetAttribute=li,u.SetAttribute=ht,u.RemoveAttribute=ct,u.HasAttribute=ai,u.SetEnabled=vi,u.CloneNodeIfHasParent=yi,u.RemoveNodeFromDom=pi,u.InsertBefore=nt,u.ReplaceWith=wi,u.InsertAfter=bi,u.ReplaceChildrenWith=ki,u.AddChildren=lt,u.InsertChildren=di,u.ConvertToElementsArray=gi,u.CenterElementIntoParent=tr,u.SelectTransform=ir})(r=i.Dom||(i.Dom={}))})(t=n.Utility||(n.Utility={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){function f(l){var a;return l&&(a=l.indexOf("?"))>=0?l.substr(0,a):l}function e(v){var y;return v&&(y=v.indexOf("?"))>=0?v.substr(y):""}function o(p){var w;return p&&(w=p.indexOf("?"))>=0?p.substr(0,w):p}function s(b){var k;return b&&(b=f(b))&&(k=b.lastIndexOf("."))>=0?b.substr(k):""}function h(d){var g;return d&&(d=f(d))&&((g=d.lastIndexOf("/"))>=0||(g=d.lastIndexOf("\\"))>=0)?d.substr(0,g):d}function c(nt){var tt;return nt&&(nt=f(nt))&&((tt=nt.lastIndexOf("/"))>=0||(tt=nt.lastIndexOf("\\"))>=0)?nt.substr(tt+1):nt}u.GetQueryString=e,u.GetFilePath=o,u.GetExtension=s,u.GetDirectoryName=h,u.GetFileName=c})(r=i.Path||(i.Path={}))})(t=n.Utility||(n.Utility={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){function f(c,l){var a,v,y;if(window.Blob){return new window.Blob(c,{type:l})};if(a=window,v=a.BlobBuilder||a.WebKitBlobBuilder||a.MozBlobBuilder||a.MSBlobBuilder,v){y=new v,y.append(c);return y.getBlob(l)}throw new Error("Blob is not supported");}function e(p,w){var b,k,nt,ot;w=w||"";var d=1024,tt=atob(p),it=tt.length,rt=Math.ceil(it/d),ut=new Array(rt);for(b=0;b<rt;++b){var g=b*d,ft=Math.min(g+d,it),et=new Array(ft-g);for(k=g,nt=0;k<ft;++nt,++k){et[nt]=tt[k].charCodeAt(0)};ot=new Uint8Array(et),ut[b]=ot}return f(ut,w)}function o(st,ht){for(var ct,at,vt,yt,pt=st.split(";"),lt=0;lt<pt.length;lt++){ct=pt[lt],ct.StartsWith("data:")?vt=ct.substr(5):ct.StartsWith("base64,")&&(yt=ct.substr(7))};at=e(yt,vt),at.filename=ht;return at}function s(wt,bt){var kt=new FileReader;kt.onload=function(dt){for(var ii,ri,ni=new Uint8Array(dt.currentTarget.result),ti=[ni.length],gt=0;gt<ni.length;gt++){ti[gt]=String.fromCharCode(ni[gt])};ii=ti.join(""),ri=btoa(ii),bt(ri)},kt.readAsArrayBuffer(wt)}function h(ui,fi){var ei=new FileReader;ei.onload=function(oi){fi(oi.currentTarget.result,ui.name||ui.filename)},ei.readAsDataURL(ui)}u.CreateBlob=f,u.Base64ToBlob=e,u.DataUrlToBlob=o,u.BlobToBase64Async=s,u.BlobToDataUrlAsync=h})(r=i.Blob||(i.Blob={}))})(t=n.Utility||(n.Utility={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){function f(h,c,l){var a=h,v;if(a!=null&&a.type){try{(!c||c<0)&&(c=0),(arguments.length<3||l>a.value.length)&&(l=a.value.length),a.setSelectionRange?(a.focus(),a.setSelectionRange(c,l)):a.createTextRange&&(a.focus(),a.caret?(v=a.caret,v.moveStart("textedit",-1),v.moveEnd("textedit",-1)):v=a.createTextRange(),v.moveEnd("character",l),v.moveStart("character",c),v.select())}catch(y){}}}function o(p,w){f(p,w,w)}function e(b){var k=b,d;if(k==null||!k.type){return null};try{if(k.createTextRange&&k.caret){d=k.caret.duplicate(),d.moveStart("textedit",-1);return d.text.length}if(k.selectionStart||k.selectionStart==0){return k.selectionStart}}catch(g){}return null}function s(nt){var tt=nt,it;if(tt==null||!tt.type){return null};try{if(tt.selectionEnd){return{start:tt.selectionStart,end:tt.selectionEnd}};if(tt.createTextRange&&tt.caret&&(it=e(tt),typeof it=="number")){return{start:it-tt.caret.text.length,end:it}}}catch(rt){}return null}u.SetInputSelectionRange=f,u.SetCaretPosition=o,u.GetCaretPosition=e,u.GetInputSelectionRange=s})(r=i.Caret||(i.Caret={}))})(t=n.Utility||(n.Utility={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){function a(g){var nt=g,tt=nt.requestFullscreen||nt.msRequestFullscreen||nt.mozRequestFullScreen||nt.webkitRequestFullscreen||nt.webkitRequestFullScreen||nt.webkitEnterFullScreen||nt.webkitEnterFullscreen;tt&&tt.apply(nt)}function v(){f&&f.apply(document)}function s(){var rt=document;return rt.fullscreenElement||rt.msFullscreenElement||rt.mozFullScreenElement||rt.webkitFullscreenElement||rt.webkitCurrentFullScreenElement||rt.webkitDisplayingFullscreen}function y(){return!!s()}function h(){var ut=document;return!!(ut.fullscreenEnabled||ut.msFullscreenEnabled||ut.mozFullScreenEnabled||ut.webkitFullscreenEnabled||"webkitIsFullScreen"in ut)}function p(){return window.parent?!!(f&&h()):!!f}function k(ft){if(!c){c=true;var et=document;w.ForEach(ot=>n.Event.Attach(et,ot,()=>{l.ForEach(st=>st(et))}))}l.push(ft)}function d(ht){if(!e){e=true;var ct=document;b.ForEach(lt=>n.Event.Attach(ct,lt,()=>{o.ForEach(at=>at(ct))}))}o.push(ht)}var f,e,o;u.RequestFullScreen=a,f=(()=>{var it=document;return it.cancelFullscreen||it.msExitFullscreen||it.msCancelFullscreen||it.mozCancelFullScreen||it.webkitExitFullscreen||it.webkitExitFullScreen||it.webkitCancelFullscreen||it.webkitCancelFullScreen})(),u.CancelFullScreen=v,u.GetFullScreenElement=s,u.IsInFullscreen=y,u.IsIframeFullscreenEnabled=h,u.IsSupported=p;var w=["MSFullscreenChange","webkitfullscreenchange","mozfullscreenchange","fullscreenchange"],b=["MSFullscreenError","webkitfullscreenerror","mozfullscreenerror","fullscreenerror"],c=false,l=[];u.OnFullscreenChanged=k,e=false,o=[],u.OnFullscreenError=d})(r=i.FullScreen||(i.FullScreen={}))})(t=n.Utility||(n.Utility={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){function f(o,s){var h,l,c;if(!(o>0||o===0)){throw new Error("LongToByteArray argument may not be negative");}for(h=[],l=0;l<8;l++){if(c=o&255,s&&Math.pow(2,l*8)>o){(c>0||h.length==0)&&h.push(c);break}else h.push(c),o=(o-c)/256};return h}function e(a){for(var v=0,y=a.length-1;y>=0;y--){v=v*256+a[y]};return v}u.LongToByteArray=f,u.ByteArrayToLong=e})(r=i.CalystoTools||(i.CalystoTools={}))})(t=n.Utility||(n.Utility={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){let r;(function(f){f[f.Fit=0]="Fit",f[f.Crop=1]="Crop",f[f.Exact=2]="Exact",f[f.Stretch=3]="Stretch"})(r=i.ResizeModeEnum||(i.ResizeModeEnum={}));class u{constructor(){this.Width=500,this.Height=500,this.Mode="Fit",this.Overscan=0}Resize(e){var s=e.width,o=e.height,l=e.width/e.height,a=this.Width,v=this.Height,h,c,y,p;if(this.Mode=="Stretch"?(s=this.Width,o=this.Height):this.Mode=="Exact"||this.Mode=="Fit"?(s=this.Width,o=s/l,o>this.Height&&(o=this.Height,s=o*l),this.Mode=="Fit"&&(a=s,v=o)):this.Mode=="Crop"&&(s=Math.min(e.width,this.Width),o=s/l,o<this.Height&&(o=Math.min(e.height,this.Height),s=o*l),a=Math.min(s,this.Width),v=Math.min(o,this.Height)),o+=this.Overscan,s+=this.Overscan,h=document.createElement("canvas"),c=h.getContext("2d"),!c){throw new Error("Can not create 2d context");}h.width=a,h.height=v,this.BackColor&&this.BackColor!="transparent"&&(c.fillStyle=this.BackColor,c.fillRect(0,0,h.width,h.height)),y=(a-s)/2,p=(v-o)/2,c.drawImage(e,y,p,s,o);return h.toDataURL(this.OutputMime||"image/png")}}i.ImageResize=u})(t=n.Graphics||(n.Graphics={}))}(Calysto||(Calysto={})),function(n){class t{constructor(i){this.urlStr=i,this.items=[],i&&this.ParseImpl(i)}GetInnerUri(){return this.uri||(this.uri=new n.Uri)}GetQuery(){for(var f,r=[],u=0;u<this.items.length;u++){f=this.items[u],r.push(encodeURIComponent(f.name)+"="+encodeURIComponent(f.value))};return r.length>0?"?"+r.join("&"):""}GetUrl(){this.uri=this.uri||new n.Uri,this.uri.Query=this.GetQuery();return this.uri.GetAbsoluteUri()}Clear(){this.items=[]}FindItem(e,o=false){if(o){return this.items.Where(h=>h.name==e)};var s=e.toLowerCase();return this.items.Where(c=>c.lowerName==s)}SetValue(l,a){if(l){var v=this.FindItem(l).pop(),y=l.toLowerCase();v?(v.lowerName=y,v.name=l,v.value=n.Type.TypeInspector.IsNullOrUndefined(a)?"":a+""):(v={lowerName:y,name:l,value:n.Type.TypeInspector.IsNullOrUndefined(a)?"":a+""},this.items.push(v))}return this}RemoveValue(p){if(p){var w=p.toLowerCase();this.items=this.items.Where(b=>b.lowerName!=w)}return this}GetValue(k){var d=this.FindItem(k).pop();return d?d.value:null}ParseImpl(g){var tt,it,nt;if(this.uri=new n.Uri(g),tt=(this.uri.Query||"").Trim(["?"]),tt){for(it=tt.split("&"),nt=0;nt<it.length;nt++){var rt=it[nt].split("="),ut=decodeURIComponent(rt[0]),ft=decodeURIComponent(rt[1]);this.SetValue(ut,ft)}}return this}}n.QueryString=t}(Calysto||(Calysto={})),function(n){var t;(function(i){function r(s){let c=s.tagName.toLowerCase(),h=document.createElement(c);for(let l=0;l<s.attributes.length;l++){h.setAttribute(s.attributes[l].name,s.attributes[l].value)};h.text=h.textContent=s.textContent||s.text,n.Utility.Dom.ReplaceWith(s,[h]);return h}function u(a,v){var y=document.createElement("script");y.type="text/javascript",y.src=a,y.async=!!v,(document.getElementsByTagName("head")[0]||document.body||document.documentElement).appendChild(y);return y}function f(p){var w=document.createElement("script");w.type="text/javascript",w.text=w.textContent=p,(document.getElementsByTagName("head")[0]||document.body||document.documentElement).appendChild(w);return w}function e(b){var k=document.createElement("link");k.rel="stylesheet",k.type="text/css",k.href=b,(document.getElementsByTagName("head")[0]||document.body||document.documentElement).appendChild(k);return k}function o(d){var g=document.createElement("style");g.type="text/css",g.text=g.textContent=d,(document.getElementsByTagName("head")[0]||document.body||document.documentElement).appendChild(g);return g}i.ReloadScriptNode=r,i.LoadJSFile=u,i.LoadJS=f,i.LoadCSSFile=e,i.LoadCSS=o})(t=n.ScriptLoader||(n.ScriptLoader={}))}(Calysto||(Calysto={})),function(n){class i{constructor(u){this.onTimeout=u,this.sleepMs=0,this.items=[],u&&this.OnTimeout(u)}IsRunning(){return!!this.timeoutId}Abort(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null);return this}Start(f){this.Abort(),this.timeoutId=setTimeout(()=>{clearTimeout(this.timeoutId),this.timeoutId=null;for(var e=0;e<this.items.length;e++){this.items[e](this)}},f>0?f:0);return this}OnTimeout(o){this.items.push(o);return this}}n.Timer=i;class t{constructor(s){this.timeoutMs=s,this._expires=0}Start(){this._expires=Date.now()+this.timeoutMs;return this}Abort(){this._expires=0;return this}IsBussy(){return this._expires>Date.now()}IsBussyOrStart(){if(this.IsBussy()){return true};this.Start();return false}}n.BussyTimer=t;class r{constructor(h=300){this._timer=new t(h)}IsDoubleclicked(){return this._timer.IsBussyOrStart()}}n.MouseTimer=r}(Calysto||(Calysto={})),function(n){let t;(function(r){r[r.Scheme=0]="Scheme",r[r.Host=1]="Host",r[r.Port=2]="Port",r[r.Path=3]="Path",r[r.Query=4]="Query",r[r.Hash=5]="Hash"})(t||(t={}));class i{constructor(u){this.Scheme="",this.Username="",this.Password="",this.Host="",this.Port="",this.Path="",this.Query="",this.Hash="",u&&this.ParseUrl(u)}CloneUri(f,e=t.Hash){let o=new n.Uri;f<=t.Scheme&&e>=t.Scheme&&(o.Scheme=this.Scheme),f<=t.Host&&e>=t.Host&&(o.Username=this.Username,o.Password=this.Password,o.Host=this.Host),f<=t.Port&&e>=t.Port&&(o.Port=this.Port),f<=t.Path&&e>=t.Path&&(o.Path=this.Path),f<=t.Query&&e>=t.Query&&(o.Query=this.Query),f<=t.Hash&&e>=t.Hash&&(o.Hash=this.Hash);return o}BuildUri(){let s=[];String.IsNullOrEmpty(this.Scheme)||s.push(this.Scheme+":"),String.IsNullOrEmpty(this.Host)||(s.push("//"),String.IsNullOrEmpty(this.Username)||(s.push(this.Username),String.IsNullOrEmpty(this.Password)||s.push(":"+this.Password),String.IsNullOrEmpty(this.Username)&&String.IsNullOrEmpty(this.Password)||s.push("@")),String.IsNullOrEmpty(this.Host)||s.push(this.Host),this.Port&&s.push(":"+this.Port)),String.IsNullOrEmpty(this.Path)||s.push(this.Path),String.IsNullOrEmpty(this.Query)||(this.Query.StartsWith("?")||s.push("?"),s.push(this.Query)),String.IsNullOrEmpty(this.Hash)||(this.Hash.StartsWith("#")||s.push("#"),s.push(this.Hash));return s.join("")}GetSchemeHost(){return this.CloneUri(t.Scheme,t.Port).BuildUri()}GetSchemeHostPath(){return this.CloneUri(t.Scheme,t.Path).BuildUri()}GetAbsoluteUri(){return this.CloneUri(t.Scheme).BuildUri()}GetPathQueryHash(){return this.CloneUri(t.Path).BuildUri()}ParseUrl(h){if(h){var c=h.match(new RegExp("(([\\w]+)\\:)?((//)(([^\\:@]+)(:([^\\:@]+))?@)?([^/\\:]+)(:([\\d]+))?)?(/[^\\?\\#]*)?(\\?[^\\#]+)?(\\#[\\w\\W]+)?"));c&&(this.Scheme=c[2]||"",this.Username=c[6]||"",this.Password=c[8]||"",this.Host=c[9]||"",this.Port=c[11]||"",this.Path=c[12]||"",this.Query=c[13]||"",this.Hash=c[14]||"")}}}n.Uri=i}(Calysto||(Calysto={})),function(n){var t;(function(i){function f(a){var v=n.Constants.AppConstants.EmailRegexPattern;a+="";return!!(a&&a.match(new RegExp(v)))}function u(y){y+="";return!!(y&&y.match(new RegExp("^[\\-]*[ ]*[ \\.\\,]?[\\d]+[\\d\\.\\,]*$")))}function e(p){return u(p)}function o(w){w+="";return!!(w&&w.match(new RegExp("^[\\- ]?[\\d]+$")))}function s(b){b+="";return!!(b&&b.match(new RegExp("[\\- ]?[ \\.\\,]?[\\d]+[\\d\\.\\,]*")))}function h(k,d){let g=new n.BoxValue;return n.DateFormat.TryParseExact(k,d||n.Globalization.CultureInfo.CurrentCulture.DateTimeFormat.ShortDatePattern,g)}function c(nt,tt){let it=new n.BoxValue;return n.DateFormat.TryParseExact(nt,tt||n.Globalization.CultureInfo.CurrentCulture.DateTimeFormat.GeneralLongTimePattern,it)}function r(rt){var ut=parseFloat(rt);return isFinite(ut)&&ut>0&&ut<256||ut===0}function l(ft){var et=ft.match(new RegExp("^([\\d]+)\\.([\\d]+)\\.([\\d]+)\\.([\\d]+)$"));return!!(et&&r(et[1])&&r(et[2])&&r(et[3])&&r(et[4]))}i.IsEmail=f,i.CanConvertToNumber=u,i.CanConvertToDecimal=e,i.CanConvertToInteger=o,i.ContainsNumber=s,i.CanConvertToDate=h,i.CanConvertToDateTime=c,i.IsIPv4Address=l})(t=n.Validate||(n.Validate={}))}(Calysto||(Calysto={})),function(n){class t{constructor(i,r=false){this.ignoreCase=false,this.regexPattern=i||"",this.ignoreCase=r}static Escape(u){return RegExp.Escape(u)}CreateRegex(f=false){return new RegExp(this.regexPattern,(this.ignoreCase?"i":"")+(f?"g":""))}CreateMatchSegment(e,o,s){var h,c;typeof e=="string"?(h=[e],h.index=o||0,h.success=!!s):h=e,c=h[0]||"";return{Success:!!(arguments.length>2?s:c),Index:arguments.length>1?o:h?h.index:-1,Length:c.length,Value:c,Groups:h}}IsMatch(l){return this.CreateRegex(false).test(l)}SelectMatches(a,v,y){return new n.CalystoEnumerable(()=>{!!v&&v>0&&(a=a.substr(v||0)),!!y&&y>0&&(a=a.substr(0,y||0));var w=this.CreateRegex(true),p;return n.CalystoEnumerator.FromYieldFunc(b=>{if((p=w.exec(a))&&p[0]){b.SetValue(this.CreateMatchSegment(p));return true}return false})})}SelectSegments(k,d,g){return new n.CalystoEnumerable(()=>{!!d&&d>0&&(k=k.substr(d||0)),!!g&&g>0&&(k=k.substr(0,g||0));var et=this.CreateRegex(true),ft,nt=0,it,ut=0,tt=[],rt;return n.CalystoEnumerator.FromYieldFunc(ot=>{while(tt.length>0){ot.SetValue(tt.shift());return true}if(nt>=k.length){return false};for((ft=et.exec(k))&&ft[0]&&(rt=this.CreateMatchSegment(ft),rt.Index>nt&&(it=k.substr(nt,rt.Index-nt),ut=it.length,tt.push(this.CreateMatchSegment(it,nt,false)),nt+=ut),tt.push(rt),nt=rt.Index+rt.Length);tt.length>0;){ot.SetValue(tt.shift());return true}if(it=k.substr(nt),ut=it.length,ut>0&&(tt.push(this.CreateMatchSegment(it,nt,false)),nt+=ut),tt.length>0){ot.SetValue(tt.shift());return true}return false})})}Matches(st,ht,ct){return this.SelectMatches(st,ht,ct).ToArray()}Match(lt){var at=this.CreateRegex(false).exec(lt);return at?this.CreateMatchSegment(at):null}Replace(vt,yt){if(!vt){return vt};let pt=this.CreateRegex(true);return vt.replace(pt,yt)}}n.Regex=t}(Calysto||(Calysto={})),function(n){class t{constructor(){this.disabledPrefix="-calysto-disabled-rule-",this.sheets=[]}Sheets(){if(!this.sheets){var i=n.ScriptLoader.LoadCSS("");i.disabled=true,this.sheets=[i.sheet]}return this.sheets}SelectRules(r){var u=this.disabledPrefix+(r=="*"?"":r);return this.Sheets().AsEnumerable().SelectMany(f=>f.cssRules).Where(e=>!!e.selectorText).Select(o=>{o.selectorArray||(o.selectorArray=o.selectorText.split(",").AsEnumerable().Select(s=>s.Trim()).ToArray(),o.selectorDic=o.selectorArray.AsEnumerable().ToDictionary(h=>h,()=>true));return o}).Where(c=>r?c.selectorDic.ContainsKey(r)||c.selectorDic.ContainsKey(u):true)}GetIndex(l,a){for(var v=0;v<l.length;v++){if(l[v]==a){return v}};return-1}DeleteRule(y){y.parentStyleSheet&&y.parentStyleSheet.deleteRule(this.GetIndex(y.parentStyleSheet.cssRules,y))}RecreateRule(p){var w=p.parentStyleSheet;if(w){var k=p.style.cssText,d=this.GetIndex(w.cssRules,p),b=p.selectorArray.join(", ");b&&w.insertRule(b+"{"+k+"}",d)}}SplitSelectors(g){this.SelectRules(g).ForEach(nt=>{nt.selectorArray.AsEnumerable().ForEach(tt=>{nt.selectorDic=null,nt.selectorArray=[tt],this.RecreateRule(nt)}),this.DeleteRule(nt)});return this}AddSelector(it,rt){rt&&this.SelectRules().Where(ut=>ut.selectorDic.ContainsKey(it)&&!ut.selectorDic.ContainsKey(rt)).ForEach(ft=>{ft.selectorArray.push(rt),this.RecreateRule(ft),this.DeleteRule(ft)});return this}RemoveSelector(et){this.SelectRules(et).ForEach(ot=>{ot.selectorArray=ot.selectorArray.Where(st=>st!=et),this.RecreateRule(ot),this.DeleteRule(ot)});return this}AddRule(ht,ct){var at=this.Sheets(),lt=at[at.length-1];lt.addRule?lt.addRule(ht,ct):lt.insertRule&&lt.insertRule(ht+"{"+ct+"}",lt.cssRules.length);return this}RemoveRules(vt){this.SelectRules(vt).ForEach(yt=>{yt.parentStyleSheet&&yt.parentStyleSheet.deleteRule(this.GetIndex(yt.parentStyleSheet.cssRules,yt))});return this}DisableRules(pt){this.SelectRules(pt).ForEach(wt=>{wt.selectorArray=wt.selectorArray.Select(bt=>pt&&bt!=pt?bt:bt.indexOf(this.disabledPrefix)==0?bt:this.disabledPrefix+(bt=="*"?"":bt)),this.RecreateRule(wt),this.DeleteRule(wt)});return this}EnableRules(kt){var dt=this.disabledPrefix+(kt=="*"?"":kt);this.SelectRules(kt).ForEach(gt=>{gt.selectorArray=gt.selectorArray.Select(ni=>kt?ni==dt?kt:ni:ni.replace(this.disabledPrefix,"")||"*"),this.RecreateRule(gt),this.DeleteRule(gt)});return this}ToCssText(ti){return this.SelectRules().Select(ii=>ii.cssText).ToStringJoined(ti||"")}static GetCurrent(){document.styleSheets.length==0&&n.ScriptLoader.LoadCSS("");var ri=new t;ri.sheets=[];for(let ui=0;ui<document.styleSheets.length;ui++){ri.sheets.push(document.styleSheets[ui])};return ri}}n.CalystoStyleSheet=t}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){class f{constructor(){this.__calystotype="Calysto_Blob"}}u.JsonBlob=f;class e{constructor(){this.__calystotype="Calysto_Date"}}u.JsonDateTime=e;class o{constructor(){this.__calystotype="Calysto_Function"}}u.JsonFunction=o,u.escapeeChars={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"}})(r=i.Infrastructure||(i.Infrastructure={}))})(t=n.Json||(n.Json={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){class f{constructor(e=false){this.parts=[],this.blobs=[],this.indexes=[],this.isAsync=false,this.escapee=u.escapeeChars,this.SerializeFunctions=false,this.parts=[],this.blobs=[],this.indexes=[],this.isAsync=!!e}Write(o){this.parts.push(o)}isArray(s){return s&&typeof s.pop=="function"}isDate(h){return h&&typeof h.getFullYear=="function"}encodeString(c){var l=c.replace(new RegExp('([\\\\\x00-\x1f\\"])',"g"),(a,v)=>{var y=this.escapee[v];if(y){return y};y=v.charCodeAt();return"\\u00"+Math.floor(y/16).toString(16)+(y%16).toString(16)});this.Write('"'+l+'"')}encodeArray(p,w){this.Write("[");for(var g,nt=p.length,k,d,b=0;b<nt;b++){k=p[b],d=typeof k,d=="undefined"||(d!="function"||this.SerializeFunctions)&&(g&&this.Write(","),k===null?this.Write("null"):this.serializeWithCalysto(k,w-1),g=true)};this.Write("]")}createJsonDateTime(tt){var it=new u.JsonDateTime;it.Date=Date.ToLocalISOTString(tt);return it}serializeDate(rt){this.Write((new f).Serialize(this.createJsonDateTime(rt)))}createJsonFunction(ut){let ft=new u.JsonFunction;ft.Function=ut+"";return ft}serializeFunction(et){this.Write((new f).Serialize(this.createJsonFunction(et)))}createBlob(ot){if(!this.isAsync){throw new Error("Blob type serialization requires async serializer mode");}var st=this.blobs.length+100+Math.random()+"";this.blobs.push({UID:st,BLOB:ot});return st}serializeBlob(ht){this.Write(this.createBlob(ht))}asyncSerializeBlobs(ct){var lt,at;if(ct.blobsCopy&&ct.blobsCopy.length>0&&(lt=ct.blobsCopy[++ct.currentIndex])){at=new u.JsonBlob,at.FileName=lt.BLOB.name||lt.BLOB.filename||"",at.MimeType=lt.BLOB.type,at.Size=lt.BLOB.size,ct.useBlobIndex?(at.BlobIndex=ct.currentIndex,ct.json=ct.json.replace(lt.UID,(new f).Serialize(at)),this.asyncSerializeBlobs(ct)):n.Utility.Blob.BlobToDataUrlAsync(lt.BLOB,vt=>{at.DataUrl=vt,ct.json=ct.json.replace(lt.UID,(new f).Serialize(at)),this.asyncSerializeBlobs(ct)})}else ct.onComplete(ct.json,ct.pureBlobs)}serializeWithJsonStringify(yt){var pt=new RegExp("^[\\d]{4}[\\-][\\d]{2}[\\-][\\d]{2}T[\\d]{2}[\\:][\\d]{2}[\\:][\\d]{2}[\\.][\\d]{3}Z$");return JSON.stringify(yt,(wt,bt)=>{var dt,kt;let gt=typeof bt;if(gt=="undefined"||bt==null){return null};if(gt=="function"){return this.SerializeFunctions?this.createJsonFunction(bt):bt};if(bt.constructor==window.FileList){for(dt=[],kt=0;kt<bt.length;kt++){dt.push(bt[kt])};return dt}return bt.constructor==window.File?this.createBlob(bt):bt.constructor==window.Blob?this.createBlob(bt):bt.constructor==n.DateTime?this.createJsonDateTime(bt.ToSystemDate()):this.isDate(bt)?this.createJsonDateTime(bt):typeof bt=="string"&&pt.test(bt)?this.createJsonDateTime(new Date(bt)):typeof bt=="number"?isFinite(bt)?bt:null:this.isArray(bt)?bt:bt&&bt.ToArray?bt.ToArray():bt})}serializeWithCalysto(ni,ti){var ii=ni,ei,ui,ri;let fi=typeof ii;if(fi=="undefined"||ii===null){return this.Write("null")};if(this.isArray(ii)){return ti<1?this.Write("[...]"):this.encodeArray(ii,ti-1)};if(ii.constructor==n.DateTime){return this.serializeDate(ii.ToSystemDate())};if(ii.constructor==window.FileList){this.encodeArray(ii,ti-1)}else{if(ii.constructor==window.File||ii.constructor==window.Blob){return this.serializeBlob(ii)};if(this.isDate(ii)){return this.serializeDate(ii)};if(fi=="function"){return this.SerializeFunctions?this.serializeFunction(ii):null};if(typeof ii=="string"){return this.encodeString(ii)};if(typeof ii=="number"){return this.Write(isFinite(ii)?String(ii):"null")};if(typeof ii=="boolean"){return this.Write(String(ii))};if("ToArray"in ii){return this.serializeWithCalysto(ii.ToArray(),ti-1)};if(ti<1){return this.Write("{...}")};this.Write("{");for(ui in ii){try{if(!ii.hasOwnProperty(ui)){continue};ri=ii[ui]}catch(oi){continue}(typeof ri!="function"||this.SerializeFunctions)&&(ei&&this.Write(","),this.serializeWithCalysto(ui,ti-1),this.Write(":"),ri===null||typeof ri=="undefined"||ri==NaN?this.Write("null"):this.serializeWithCalysto(ri,ti-1),ei=true)}return this.Write("}")}}serializeObject(si,hi){if(window.JSON&&!hi){return this.serializeWithJsonStringify(si)};this.serializeWithCalysto(si,hi);return this.parts.join("")}SerializeAsync(ci,li,ai,vi){var pi=this.serializeObject(ci,li),yi=[];ai&&this.blobs.length>0&&n.Collections.ForEach(this.blobs,wi=>yi.push(wi.BLOB)),this.asyncSerializeBlobs({currentIndex:-1,json:pi,pureBlobs:yi,blobsCopy:this.blobs.slice(0),useBlobIndex:ai,onComplete:vi})}Serialize(bi,ki=100){return this.serializeObject(bi,ki)}}u.CalystoJsonSerializer=f})(r=i.Infrastructure||(i.Infrastructure={}))})(t=n.Json||(n.Json={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){class f{constructor(e,o){this.json=e,this.blobsArray=o,this.index=-1,this.escapee=u.escapeeChars}Error(s){throw new Error("JSON Error: "+s+", position: "+this.index+", json: "+this.json);}Next(h){h&&h!==this.currchar&&this.Error("Expected '"+h+"' instead of '"+this.currchar+"'"),this.currchar=this.json.charAt(this.index),this.index++;return this.currchar}Number(){let c="";for(this.currchar=="-"&&(c="-",this.Next("-"));this.currchar>="0"&&this.currchar<="9";){c+=this.currchar,this.Next()};if(this.currchar=="."){for(c+=".";this.Next()&&this.currchar>="0"&&this.currchar<="9";){c+=this.currchar}};if(this.currchar=="e"||this.currchar=="E"){for(c+=this.currchar,this.Next(),(this.currchar=="-"||this.currchar=="+")&&(c+=this.currchar,this.Next());this.currchar>="0"&&this.currchar<="9";){c+=this.currchar,this.Next()}};let l=+c;if(isFinite(l)){return l};this.Error("Bad number");return null}String(){var y,p,a="",v;if(this.currchar=='"'){while(this.Next()){if(this.currchar=='"'){this.Next();return a}if(this.currchar=="\\"){if(this.Next(),this.currchar=="u"){for(v=0,p=0;p<4;p+=1){if(y=parseInt(this.Next(),16),!isFinite(y)){break};v=v*16+y}a+=String.fromCharCode(v)}else if(this.currchar&&typeof this.escapee[this.currchar]=="string"){a+=this.escapee[this.currchar]}else break}else a+=this.currchar}}this.Error("Bad string");return}White(){while(this.currchar&&this.currchar<=" "){this.Next()}}Word(){switch(this.currchar){case"t":this.Next("t"),this.Next("r"),this.Next("u"),this.Next("e");return true;case"f":this.Next("f"),this.Next("a"),this.Next("l"),this.Next("s"),this.Next("e");return false;case"n":this.Next("n"),this.Next("u"),this.Next("l"),this.Next("l");return null}this.Error("Unexpected '"+this.currchar+"'");return}Array(){let w=[];if(this.currchar=="["){if(this.Next("["),this.White(),this.currchar=="]"){this.Next("]");return w}while(this.currchar){if(w.push(this.Value()),this.White(),this.currchar=="]"){this.Next("]");return w}this.Next(","),this.White()}}this.Error("Bad array");return}Object(){var b,k={};if(this.currchar=="{"){if(this.Next("{"),this.White(),this.currchar=="}"){this.Next("}");return k}while(this.currchar){if(b=this.String(),this.White(),this.Next(":"),Object.hasOwnProperty.call(k,b)&&this.Error("Duplicate key '"+b+"'"),k[b]=this.Value(),this.White(),this.currchar=="}"){this.Next("}");return k}this.Next(","),this.White()}}this.Error("Bad object");return}Value(){this.White();switch(this.currchar){case"{":var d=this.Object();d=i.fnJsonPostConvertObject(d,this.blobsArray);return d;case"[":return this.Array();case'"':return this.String();case"-":return this.Number();default:return this.currchar>="0"&&this.currchar<="9"?this.Number():this.Word()}}Parse(){var g;this.index=0,this.currchar=" ",g=this.Value(),this.White(),this.currchar&&this.Error("Syntax error");return g}}u.CalystoJsonReader=f})(r=i.Infrastructure||(i.Infrastructure={}))})(t=n.Json||(n.Json={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){function u(s,h){if(typeof s=="string"&&!!s){return window.JSON?JSON.parse(s,(c,l)=>l?r(l,h):l):new i.Infrastructure.CalystoJsonReader(s,h).Parse()}}function r(a,v){if(!a){return a};switch(a.__calystotype){case"Calysto_Date":return Date.FromLocalISOTString(a.Date);case"Calysto_Blob":let p=a;if(p.DataUrl){return n.Utility.Blob.DataUrlToBlob(p.DataUrl,p.FileName)};if(p.BlobIndex===0||p.BlobIndex>0){var y=(v||[]).Where(w=>w.blobIndex==p.BlobIndex).pop();if(!y){throw new Error("Blob not found at index: "+p.BlobIndex);}return y}return p;case"Calysto_Function":return n.Utility.Expressions.CompileLambdaNoReturnCheck(a.Function);default:return a}}function f(b,k,d,g){new i.Infrastructure.CalystoJsonSerializer(true).SerializeAsync(b,k,d,g)}function e(nt,tt=100){return new i.Infrastructure.CalystoJsonSerializer(false).Serialize(nt,tt)}function o(it,rt){return u(it,rt)}i.fnJsonPostConvertObject=r,n.Core.ExportGlobal(r,"fnJsonPostConvertObject"),i.SerializeAsync=f,i.Serialize=e,i.Deserialize=o})(t=n.Json||(n.Json={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){let r;(function(o){o[o.PrimitiveValue=1]="PrimitiveValue",o[o.KeyValue=2]="KeyValue",o[o.ArrayValue=3]="ArrayValue"})(r=i.NodeTypeEnum||(i.NodeTypeEnum={}));const f="@",e=new RegExp("^[\\d]+$");class u{constructor(s,h,c){typeof c=="number"?(this.Index=c,this.Property=c+""):this.Property=typeof c=="string"?c:f,this.Level=h?h.Level+1:0,this.Type=this.ResolveType(s),this.Value=s,h&&(this.Parent=h)}ResolveType(l){let a=typeof l;return a=="undefined"||l===null||a=="function"||a=="string"||a=="number"||a=="boolean"?r.PrimitiveValue:l&&typeof l.pop=="function"||"ToArray"in l?r.ArrayValue:r.KeyValue}Children(v=false){return new n.CalystoEnumerable(()=>n.CalystoEnumerator.From(function*(y){if(v){yield y};if(y.Type==r.ArrayValue){let p=-1;while(++p<y.Value.length){yield new u(y.Value[p],y,p)}}else if(y.Type==r.KeyValue){let w=-1,b=n.Collections.GetOwnProperties(y.Value);while(++w<b.length){yield new u(y.Value[b[w]],y,b[w])}}}(this)))}Descendants(k=false){return new n.CalystoEnumerable(()=>n.CalystoEnumerator.From(function*(d){if(k){yield d};for(let g of d.Children().AsIterableIterator()){yield g;for(let nt of g.Descendants().AsIterableIterator()){yield nt}}}(this)))}Ancestors(tt=false){return new n.CalystoEnumerable(()=>n.CalystoEnumerator.From(function*(it){if(tt){yield it};let rt=it;while(!!(rt=rt.Parent)){yield rt}}(this)))}Root(){let ut=this;while(ut.Parent&&(ut=ut.Parent));return ut}SelectChain(ft){return new n.CalystoEnumerable(()=>n.CalystoEnumerator.From(function*(et){let ht=ft.split("."),ot=et,st;while(!!(st=ht.shift())){if(ot){if(st==f){ot=ot.Root();yield ot}else if(st===""){if(ot=ot.Parent,!ot){break}else yield ot}else if(ot=ot.Children().Where(ct=>ct.Property==st).FirstOrDefault(),!ot){break}else yield ot}else break}}(this)))}}i.JsonNode=u})(t=n.Json||(n.Json={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){function e(l,a){for(var v,b,y,k=n.Utility.CalystoTools.ByteArrayToLong(new Uint8Array(l.slice(0,f))),tt=n.Utility.Encoding.UTF8.GetString(new Uint8Array(l.slice(f,f+k))),d=n.Json.Deserialize(tt),g="",nt=[],p=f+k,w=0;w<d.Items.length;w++){v=d.Items[w],b=new Uint8Array(l.slice(p,p+v.Size)),v.IsJson?g=n.Utility.Encoding.UTF8.GetString(b):(y=n.Utility.Blob.CreateBlob([b],v.MimeType),y.filename=v.FileName,y.blobIndex=v.BlobIndex,nt.push(y)),p+=v.Size};a(n.Json.Deserialize(g,nt))}function s(it,rt){if(it&&window.ArrayBuffer&&it.constructor==ArrayBuffer){e(it,rt)}else if(typeof it=="string"){rt(n.Json.Deserialize(it))}else if(it&&window.Blob&&it.constructor==Blob){var ut=new FileReader;ut.onload=function(ft){e(ft.currentTarget.result,rt)},ut.readAsArrayBuffer(it)}else throw new Error("Current binaryData type is not supported");}function h(et,ot){var lt={Items:[]},ht,at,st,yt;for(ot=ot||[],st=0;st<ot.length;st++){ht=ot[st],lt.Items.push({Size:ht.size,FileName:ht.filename,MimeType:ht.type,BlobIndex:ht.blobIndex||st,IsJson:false})};at=n.Utility.Encoding.UTF8.GetBytes(et),lt.Items.push({Size:at.length,FileName:null,MimeType:"application/json",BlobIndex:null,IsJson:true});var pt=n.Json.Serialize(lt),vt=n.Utility.Encoding.UTF8.GetBytes(pt),wt=n.Utility.CalystoTools.LongToByteArray(vt.length).slice(0,4),ct=[];for(ct.push(new Uint8Array(wt)),ct.push(new Uint8Array(vt)),st=0;st<ot.length;st++){ct.push(ot[st])};ct.push(new Uint8Array(at)),yt=n.Utility.Blob.CreateBlob(ct,"application/octet-stream");return yt}function c(bt,kt){n.Json.SerializeAsync(bt,100,true,(dt,gt)=>{kt(new o(dt||"",gt||[]))})}var f=4;u.DeserializeAsync=s,u.SerializeAsync=c;class o{constructor(ni,ti){this.Json=ni,this.Blobs=ti}ToBinaryData(){return h(this.Json,this.Blobs)}}u.BinaryFrameItem=o})(r=i.BinaryFrame||(i.BinaryFrame={}))})(t=n.Json||(n.Json={}))}(Calysto||(Calysto={})),function(n){function l(at){switch(at){case"error":return n.Resources.CalystoLang.Error;case"warning":return n.Resources.CalystoLang.Warning;case"info":return n.Resources.CalystoLang.Information;case"question":return n.Resources.CalystoLang.Question;case"success":return n.Resources.CalystoLang.Success;default:return n.Resources.CalystoLang.Message}}function e(vt){switch(vt){case"success":return"fa-check-circle";case"error":return"fa-times-circle";case"warning":return"fa-exclamation-triangle";case"info":return"fa-info-circle";case"question":return"fa-question-circle";default:return""}}function a(yt){switch(yt){case"success":return"calystoWindowIconGreen";case"error":return"calystoWindowIconRed";case"warning":return"calystoWindowIconOrange";case"info":return"calystoWindowIconBlue";case"question":return"calystoWindowIconOrange";default:return""}}let s;(function(p){p.destroy="destroy",p.hide="hide"})(s=n.CloseMode||(n.CloseMode={}));let i;(function(w){w.XClose="XClose",w.Yes="Yes",w.No="No",w.Cancel="Cancel",w.Close="Close"})(i=n.DialogButton||(n.DialogButton={}));let r;(function(b){b[b.Windows=0]="Windows",b[b.Modern=1]="Modern"})(r||(r={}));let h=`<div class="themeAero calystoDialogControl calystoDialogModal">
	<div class="calystoDialogMask"></div>
	<div class="calystoDialogBoxContainer">
		<div class="calystoDialogBox">
				
			<div class="calystoWindow">
				<div class="calystoWindowTitle">
					
					<div class="calystoWindowTitleText element1">Alert</div>

					<label class="calystoWindowXMark fa fa-close" style="display: none;">
						<button class="calystoXCloseButton" calysto_button_name="${i.XClose}" style="position: absolute; width: 1px; height: 1px; opacity: 0;"></button>
					</label>
				</div>
				<div class="calystoTopContainer element2" style="display:none">
					<div class="calystoWindowTd1">
						<div class="calystoWindowIcon fa fa-info-circle" style="display:none"></div>
					</div>
					<div class="calystoWindowTitleText">Alert</div>
				</div>
				<div class="calystoWindowContent" style="min-width: 250px; min-height: 50px;">
					<table class="calystoWindowTable1 calystoWindowInnerContent" cellpadding="0" cellspacing="0">
						<tbody>
							<tr>
								<td class="calystoWindowTd1 element3">
									<div class="calystoWindowIcon fa fa-info-circle" style="display:none"></div>
								</td>
								<td class="calystoWindowTd2">
								</td>
							</tr>
						</tbody>
					</table>
				</div>
				<div class="calystoWindowButtons calystoThemeContainer" style="display:none"></div>
			</div>
		
		</div>
	</div>
</div>`,f;(function(k){function tt(){for(let ut of[document.documentElement,document.body]){if(ut.scrollHeight>ut.clientHeight||ut.scrollWidth>ut.clientWidth){return ut}};return undefined}function it(){if(!nt){nt=true,$$calysto(document.body).RemoveClass(g),d=null;let ft=tt();if(ft){d={};let et=ft.clientWidth,ot=ft.clientHeight;$$calysto(document.body).AddClass(g);let st=ft.clientWidth,ht=ft.clientHeight;st>et&&(d.paddingRight=document.body.style.paddingRight||"",document.body.style.paddingRight=st-et+"px"),ht>ot&&(d.paddingBottom=document.body.style.paddingBottom||"",document.body.style.paddingBottom=ht-ot+"px")}}}function rt(){(nt=false,d)&&($$calysto(document.body).RemoveClass(g),document.body.style.paddingRight=d.paddingRight||"",document.body.style.paddingBottom=d.paddingBottom||"")}let g="calystoOverflowHidden",nt=false,d;k.CreateOverflow=it,k.RemoveOverflow=rt})(f||(f={}));let c;(function(ct){ct.info="info",ct.error="error",ct.warning="warning",ct.question="question",ct.success="success",ct.none="none"})(c=n.DialogIcon||(n.DialogIcon={}));let t;(function(lt){lt[lt.Alert=0]="Alert",lt[lt.Panel=1]="Panel"})(t=n.DialogMode||(n.DialogMode={})),n.GetFAIconClass=e;let v=1e6,u=[],o=false;class y{constructor(){this._closeMode="destroy",this._viewMode=t.Alert,this._designMode=r.Windows,this.OnButtonClick=(new n.MulticastDelegate).AsFunc(this),this.OnShown=(new n.MulticastDelegate).AsFunc(this),this.OnClosing=(new n.MulticastDelegate).AsFunc(this),this.OnClosed=(new n.MulticastDelegate).AsFunc(this),this._buttons=[],this.Initialize()}Initialize(){var bt=document.createElement("div"),wt;bt.innerHTML=h,this._dialogControlEl=bt.childNodes[0],this._dialogControlEl.__calystoDialog=this,wt=$$calysto(this._dialogControlEl),this._dialogControlEl.style.zIndex=v+++"",this._maskEl=wt.Query("//.calystoDialogMask").First(),this._dialogBoxContainerEl=wt.Query("//.calystoDialogBoxContainer").First(),this._dialogBoxEl=wt.Query("//.calystoDialogBox").First(),this._windowEl=wt.Query("//.calystoWindow").First();let pt=$$calysto(this._windowEl);this._xButtonEl=pt.Query("//.calystoWindowXMark").First(),this._titleEl=pt.Query("//.calystoWindowTitle").First(),this._contentEl=pt.Query("//.calystoWindowContent").First(),this._innerContentEl=pt.Query("//.calystoWindowInnerContent").First(),this._tdContentEl=pt.Query("//.calystoWindowTd2").First(),this._buttonsEl=pt.Query("//.calystoWindowButtons").First(),this._topContainer=pt.Query("//.calystoTopContainer").First()}GetDialogEl(){return this._dialogControlEl}GetContentEl(){return this._contentEl}PrefferedWidth(kt){$$calysto(this._dialogBoxEl).ApplyStyle(`width:100%;max-width:${kt}px;`);return this}Set(dt){dt(this);return this}DesignMode(gt){this._designMode=gt,$$calysto(this._windowEl).AddClass("calystoWindow2",gt==r.Modern);return this}RenderTitle(ni){let ti=false;this._viewMode==t.Panel?ti=false:this._designMode==r.Windows?ti=!String.IsNullOrWhiteSpace(ni):this._designMode==r.Modern&&(ti=!String.IsNullOrWhiteSpace(this._titleText)),$$calysto(this._dialogControlEl).Query("//.calystoWindowTitleText").SetProperty("innerHTML",ni||"").SetVisible(ti);return this}Title(ii){this._titleText=ii;return this.RenderTitle(ii)}Icon(ri){this._iconName=ri,this._titleText||this.RenderTitle(l(ri));let ui=!!this._iconName&&this._iconName!="none";$$calysto(this._windowEl).AddClass("calystoShowIcon",ui);let fi="calystoWindowIcon fa "+e(this._iconName)+" "+a(this._iconName);$$calysto(this._windowEl).Query("//.calystoWindowTd1/div").SetVisible(ui).SetClass(fi);return this}CloseMode(ei){this._closeMode=ei;return this}fnButtonClickHandler(oi,si){let hi=typeof oi=="string"?oi:oi.getAttribute("calysto_button_name");hi==i.XClose?this.Close():this.OnButtonClick.Invoke(ci=>ci(this,hi,si))}HideButtons(){$$calysto([this._buttonsEl,this._xButtonEl]).SetVisible(false);return this}ButtonXClose(){return this.Button(i.XClose)}Button(li,ai){let vi={name:li,isDefault:!!ai,isRendered:false};this._buttons.push(vi),vi.isRendered=true;let yi;vi.name==i.XClose?yi=$$calysto(this._dialogControlEl).Query("//.calystoWindowXMark").SetVisible(true).Query("/button").First():$$calysto(this._buttonsEl).SetVisible(true).AddChildren(yi=n.DomQuery.CreateElement("button").AddClass("calystoBtn").SetAttribute("calysto_button_name",vi.name).SetInnerHtml(vi.name).First()),vi.isDefault&&(this._focusButtonEl=yi),$$calysto(yi).OnClick((pi,wi)=>this.fnButtonClickHandler(pi,wi));return this}AppendContent(bi){bi&&bi.nodeType>0||typeof bi=="string"&&bi.match(new RegExp("(<[^>/\\s]+/>)|(<\/[^>/\\s]+>)"))?$$calysto(this._tdContentEl).AddChildren(bi):$$calysto(this._tdContentEl).AddChildren(n.DomQuery.CreateElement("pre").AddClass("calystoWindowPre").SetInnerHtml(n.Utility.Html.HtmlEncodeSimple(bi)));return this}Content(ki){this._tdContentEl.innerHTML="";return this.AppendContent(ki)}MaskOpacity(di){$$calysto(this._maskEl).SetOpacity(di);return this}Background(gi){$$calysto(this._windowEl).ApplyStyle("background",gi);return this}Close(){this.OnClosing.Invoke(nr=>nr(this)),this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null),u.Remove(this),$$calysto(this._dialogControlEl).RemoveClass("showDialog").Sleep(400,tr=>{tr.SetVisible(false),this._closeMode=="destroy"&&tr.RemoveFromDom(),this.OnClosed.Invoke(ir=>ir(this)),u.Any()||this._viewMode!=t.Panel||f.RemoveOverflow()})}AutoClose(rr){rr>0&&setTimeout(()=>this.Close(),rr);return this}fnFixPosition(){var er;if(this._viewMode!=t.Panel&&this._viewMode==t.Alert){var ur=10,or=n.Utility.Dom.GetViewportDiv(),fr=or.clientWidth-ur*2,hr=Math.min(fr,400),sr=or.clientHeight-ur*2-this._titleEl.offsetHeight-this._buttonsEl.offsetHeight-this._topContainer.offsetHeight;this._contentEl.style.overflowX=this._innerContentEl.offsetWidth>fr?"scroll":"",this._contentEl.style.overflowY=this._innerContentEl.offsetHeight>sr?"scroll":"",this._contentEl.style.maxWidth=fr+"px",this._contentEl.style.maxHeight=sr+"px",this._contentEl.style.minWidth=hr+"px",this._windowEl.style.maxWidth=fr+"px",er=Math.round((or.clientHeight-2*ur-this._dialogBoxEl.offsetHeight)*.2),er>ur||(er=ur),this._dialogBoxEl.style.top=er+"px"}}fnFirstTimeInit(){if(!this._initDone){if(this._initDone=true,(document.body||document.documentElement).appendChild(this._dialogControlEl),this._viewMode==t.Panel){$$calysto(this._titleEl).SetVisible(false),this._topContainer.style.display="none",this._dialogBoxEl.style.padding="20px 5px",this._dialogBoxContainerEl.style.overflowY="scroll",this._dialogBoxContainerEl.style.overflowX="auto",this._dialogBoxContainerEl.style.bottom="0",setTimeout(()=>{this._dialogBoxContainerEl.scrollTop=0,this._dialogBoxContainerEl.scrollLeft=0},1)}else if(this._viewMode==t.Alert){var cr=new n.Utility.Dom.ScrollHandler;$$calysto([this._dialogBoxContainerEl]).On(["scroll","mousewheel","wheel","DOMMouseScroll"],(lr,ar)=>{cr.HandleScroll(this._contentEl,ar);return false})}}}fnShowWorker(){this.fnFirstTimeInit(),this._intervalId||this._viewMode!=t.Alert||(this._intervalId=setInterval(()=>this.fnFixPosition(),1e3)),$$calysto(this._dialogControlEl).SetVisible(true),setTimeout(()=>$$calysto(this._dialogControlEl).AddClass("showDialog"),5);let vr=Date.now(),yr=setInterval(()=>{this.fnFixPosition(),Date.now()-vr>400&&clearInterval(yr)},10);this._focusButtonEl&&this._focusButtonEl.focus(),this.OnShown.Invoke(pr=>pr(this))}CloseOnMaskClick(){if(this._closeOnMaskAssigned){return this};this._closeOnMaskAssigned=true,$$calysto([this._maskEl,this._dialogBoxContainerEl,this._windowEl]).OnMouseDown((wr,br)=>{if(n.Event.IsLeftMouseButton(br)&&n.Event.GetTarget(br)==wr){this.fnButtonClickHandler(i.XClose,br);return false}return undefined});return this}CloseOnEscKey(){this._closeOnEscKey=true;return this}ViewMode(kr){this._viewMode=kr;return this}Show(){o||(o=true,n.Page.OnEscKey(()=>{let dr=u[u.length-1];dr&&dr._closeOnEscKey&&dr.fnButtonClickHandler(i.XClose,{})})),this.fnShowWorker(),u.push(this),this._viewMode==t.Panel&&f.CreateOverflow();return this}}n.Dialog=y}(Calysto||(Calysto={})),function(n){var t;(function(i){function u(v){return $$calysto(v).AncestorNodes().Select(y=>y.__calystoDialog).Where(p=>!!p).FirstOrDefault()}function f(){if(!n.Page.IsPageReloading&&!n.Page.IsVersionExpiredVisible){n.Page.IsVersionExpiredVisible=true;return(new n.Dialog).Content(n.Resources.CalystoLang.JavascriptEngineIsOutdatedInformation).Icon("warning").Button(n.Resources.CalystoLang.Reload).Button(n.Resources.CalystoLang.Cancel).ButtonXClose().OnButtonClick((w,b)=>{n.Page.IsVersionExpiredVisible=false,w.Close(),b==n.Resources.CalystoLang.Reload&&(document.documentElement.className+=" calystoAjaxLoading",(new n.Dialog).Content(n.Resources.CalystoLang.PageIsReloadingPleaseWait).Icon("info").Show(),n.Page.IsPageReloading=true,setTimeout(()=>window.location.reload(true),1))}).Show()}}function e(k,d){return(new n.Dialog).Title(d).Icon("info").Content(k).ButtonXClose().CloseOnEscKey()}function r(g,nt,tt){return(new n.Dialog).Title(tt).Icon(nt||"info").Content(g).ButtonXClose().Button(n.Resources.CalystoLang.Close).CloseOnEscKey().OnButtonClick(it=>{it.Close()})}function o(rt,ut){return(new n.Dialog).Title(ut).Icon("question").Content(rt).ButtonXClose().CloseOnEscKey().CloseOnMaskClick()}function s(ft,et,ot){return r(ft,et,ot)}function h(st,ht){return r(st,"error",ht)}function c(ct,lt){return r(ct,"warning",lt)}function l(at,vt){return r(at,"success",vt)}function a(){return(new n.Dialog).CloseOnEscKey().CloseOnMaskClick().ViewMode(n.DialogMode.Panel)}i.FindDialog=u,i.ShowVersionExpired=f,i.CreateInformation=e,i.CreateConfirm=o,i.CreateAlert=s,i.CreateError=h,i.CreateWarning=c,i.CreateSuccess=l,i.CreatePanel=a})(t=n.Dialog||(n.Dialog={}))}(Calysto||(Calysto={})),function(n){let t;(function(f){f.center="center",f.right="right",f.left="left"})(t=n.NotifyHPosition||(n.NotifyHPosition={}));let i;(function(e){e.bottom="bottom",e.top="top"})(i=n.NotifyVPosition||(n.NotifyVPosition={}));let r=2e6;class u{constructor(o){this.VPosition="top",this.HPosition="center",this.Icon="info",this.PrefferedWidth=500,this.AutoCloseMs=3e3,this._template=`<div class= 'calystoNotify2 hiddeNotifBox' >
	<div class='calystoNotifyInner'>
		<div class='calystoNotifyContent'>
			<table cellpadding='0' cellspacing='0'>
				<tr>
					<td class='tdIcon'><span class='calystoNotifyIcon'></span></td>
					<td class='calystoTextContent' style='width:100%'></td>
					<td class='tdBtnClose'><span class='calystoCloseBtn fa fa-times'></span></td>
				</tr>
			</table>
		</div>
	</div>
</div>`,this.Text=o}Set(s){s(this);return this}EnsureContainer(){let h=".calystoNotifyContainer."+this.VPosition+"."+this.HPosition;if(this._containerEl=$$calysto(h).FirstOrDefault(),!this._containerEl){let c=h.ReplaceAll("."," ").Trim();this._containerEl=n.DomQuery.CreateElement("div").AddClass(c).AddAsChildrenTo(document.body).FirstOrDefault(),this._containerEl.style.zIndex=r+""}}EnsureNotif(){if(!this._notifBoxEl){let l=n.DomQuery.FromHtml(this._template);this._notifBoxEl=l.FirstOrDefault(),this._notifInnerEl=l.Query("//.calystoNotifyInner").FirstOrDefault(),this._notifContentEl=l.Query("//.calystoNotifyContent").AddClass(this.Icon).FirstOrDefault(),this._notifTextEl=l.Query("//.calystoTextContent").FirstOrDefault();let a="fa "+n.GetFAIconClass(this.Icon);this._notifIconEl=l.Query("//.calystoNotifyIcon").AddClass(a).FirstOrDefault(),this._notifCloseBtnEl=l.Query("//.calystoCloseBtn").FirstOrDefault(),this._notifCloseBtnEl.onclick=()=>this.Hide()}}Show(){setTimeout(()=>{this.EnsureContainer(),this.EnsureNotif(),this._containerEl.style.maxWidth=this.PrefferedWidth+"px",this._notifTextEl.innerHTML=this.Text,this.VPosition=="top"?$$calysto(this._containerEl).InsertChildren(this._notifBoxEl):this.VPosition=="bottom"&&$$calysto(this._containerEl).AddChildren(this._notifBoxEl),this._notifBoxEl.style.height="1px",$$calysto(this._notifBoxEl).RemoveClass("hiddeNotifBox"),this._notifBoxEl.style.height=this._notifInnerEl.offsetHeight+"px",this.AutoCloseMs>0&&setTimeout(()=>this.Hide(),this.AutoCloseMs)},1);return this}Hide(){setTimeout(()=>{$$calysto(this._notifBoxEl).AddClass("hiddeNotifBox").Sleep(1500,v=>v.RemoveFromDom())},1)}static Create(y,p="info",w=3e3,b="top",k="center"){return new n.Notification(y).Set(d=>d.Icon=p).Set(g=>g.AutoCloseMs=w).Set(nt=>nt.VPosition=b).Set(tt=>tt.HPosition=k)}}n.Notification=u}(Calysto||(Calysto={})),function(n){var t;(function(i){let r;(function(u){u[u.Continue=100]="Continue",u[u.SwitchingProtocols=101]="SwitchingProtocols",u[u.Processing=102]="Processing",u[u.EarlyHints=103]="EarlyHints",u[u.OK=200]="OK",u[u.Created=201]="Created",u[u.Accepted=202]="Accepted",u[u.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",u[u.NoContent=204]="NoContent",u[u.ResetContent=205]="ResetContent",u[u.PartialContent=206]="PartialContent",u[u.MultiStatus=207]="MultiStatus",u[u.AlreadyReported=208]="AlreadyReported",u[u.IMUsed=226]="IMUsed",u[u.Ambiguous=300]="Ambiguous",u[u.MultipleChoices=300]="MultipleChoices",u[u.Moved=301]="Moved",u[u.MovedPermanently=301]="MovedPermanently",u[u.Found=302]="Found",u[u.Redirect=302]="Redirect",u[u.RedirectMethod=303]="RedirectMethod",u[u.SeeOther=303]="SeeOther",u[u.NotModified=304]="NotModified",u[u.UseProxy=305]="UseProxy",u[u.Unused=306]="Unused",u[u.RedirectKeepVerb=307]="RedirectKeepVerb",u[u.TemporaryRedirect=307]="TemporaryRedirect",u[u.PermanentRedirect=308]="PermanentRedirect",u[u.BadRequest=400]="BadRequest",u[u.Unauthorized=401]="Unauthorized",u[u.PaymentRequired=402]="PaymentRequired",u[u.Forbidden=403]="Forbidden",u[u.NotFound=404]="NotFound",u[u.MethodNotAllowed=405]="MethodNotAllowed",u[u.NotAcceptable=406]="NotAcceptable",u[u.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",u[u.RequestTimeout=408]="RequestTimeout",u[u.Conflict=409]="Conflict",u[u.Gone=410]="Gone",u[u.LengthRequired=411]="LengthRequired",u[u.PreconditionFailed=412]="PreconditionFailed",u[u.RequestEntityTooLarge=413]="RequestEntityTooLarge",u[u.RequestUriTooLong=414]="RequestUriTooLong",u[u.UnsupportedMediaType=415]="UnsupportedMediaType",u[u.RequestedRangeNotSatisfiable=416]="RequestedRangeNotSatisfiable",u[u.ExpectationFailed=417]="ExpectationFailed",u[u.MisdirectedRequest=421]="MisdirectedRequest",u[u.UnprocessableEntity=422]="UnprocessableEntity",u[u.Locked=423]="Locked",u[u.FailedDependency=424]="FailedDependency",u[u.UpgradeRequired=426]="UpgradeRequired",u[u.PreconditionRequired=428]="PreconditionRequired",u[u.TooManyRequests=429]="TooManyRequests",u[u.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",u[u.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",u[u.InternalServerError=500]="InternalServerError",u[u.NotImplemented=501]="NotImplemented",u[u.BadGateway=502]="BadGateway",u[u.ServiceUnavailable=503]="ServiceUnavailable",u[u.GatewayTimeout=504]="GatewayTimeout",u[u.HttpVersionNotSupported=505]="HttpVersionNotSupported",u[u.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",u[u.InsufficientStorage=507]="InsufficientStorage",u[u.LoopDetected=508]="LoopDetected",u[u.NotExtended=510]="NotExtended",u[u.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired"})(r=i.HttpStatusCode||(i.HttpStatusCode={}))})(t=n.Net||(n.Net={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){class r{constructor(u){this.url=u,this.timeoutMs=9e4,this.responseType="text",this.async=true,n.Core.Constants.WebClientGlobalTimeout>0&&(this.timeoutMs=n.Core.Constants.WebClientGlobalTimeout)}static IsCrossdomain(f){if(f&&(f.indexOf("//")==0&&(f=location.protocol+f),f.indexOf("http")==0)){var e=location.protocol+"//"+location.hostname;return f.indexOf(e)!=0}return false}static GetXMLHttpRequest(o){var h,s;if(window.XMLHttpRequest){return new XMLHttpRequest};if(r.IsCrossdomain(o)&&window.XDomainRequest){return new window.XDomainRequest};if(window.ActiveXObject){for(h=["Microsoft.XMLHTTP","Msxml2.XMLHTTP","Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.4.0","Msxml2.XMLHTTP.3.0"],s=0;s<h.length;s++){try{return new window.ActiveXObject(h[s])}catch(c){}}}return null}SetTimeout(l){this.timeoutMs=l;return this}SetUrl(a){this.url=a;return this}SetAsync(v){this.async=!!v}CreateData(y,p,w,b){return{content:p,fileName:b,uploadType:w||"text/plain",httpMethod:y||"GET",formData:false}}CreateNameValue(k,d){return{name:k+"",value:d+""}}UploadDictionary(g){var nt=[];n.Collections.ForEachOwnProperties(g,(tt,it)=>nt.push(encodeURIComponent(tt+"")+"="+encodeURIComponent(it+""))),this.data=this.CreateData("POST",nt.join("&"),"application/x-www-form-urlencoded");return this}UploadString(rt){this.data=this.CreateData("POST",rt,"text/plain");return this}UploadJson(ut){this.data=this.CreateData("POST",ut,"application/json");return this}UploadData(ft){this.data=this.CreateData("POST",ft,"multipart/form-data"),this.data.formData=true;return this}UploadHtmlForm(et,ot){if(window.FormData){let st=new FormData(et);if(ot){for(let ht of ot){st.append(ht.Key,ht.Value)}};this.data=this.CreateData(et.method,st,et.enctype),this.data.formData=true}else{let ct=n.Forms.FormSerialize(et);if(ot){for(let lt of ot){ct[lt.Key]=lt.Value}};this.UploadDictionary(ct)}return this}UploadFile(at,vt){this.data=this.CreateData("POST",at,"multipart/form-data",vt||at.name);return this}SetResponseType(yt){this.responseType=yt||"";return this}AddRequestHeader(pt,wt){this.headers||(this.headers=[]),this.headers.push(this.CreateNameValue(pt,wt));return this}Abort(){this.isAborted=true,this.xhr&&(this.xhr.abort(),this.xhr=null);return this}Start(){var kt,gt,dt,bt;if(this.isAborted||this.isStarted){return this};if(this.isStarted=true,this.xhr=r.GetXMLHttpRequest(this.url),kt=this,this.xhr.onabort=function(){console.log({abort:kt.xhr.getAllResponseHeaders()})},gt=NaN,dt=false,this.timeoutMs>0&&(gt=setTimeout(()=>{if(!dt){dt=true,kt.xhr.abort();var ni=kt.GetLiistenersItem("OnTimeout");ni&&ni.callbacks.ForEach(ti=>ti(kt,{type:"timeout",bubles:false}))}},this.timeoutMs)),n.Collections.ForEachOwnProperties(this.listeners,(ii,ri)=>{var ui=ri.isUpload?kt.xhr.upload:kt.xhr;ui&&(ri.fullName=="OnLoad"?ui.onreadystatechange=fi=>{if(ui.readyState==4&&!dt){fi=fi||{type:"load"},dt=true,clearTimeout(gt);var ei=kt.GetLiistenersItem("OnLoad");ei&&ei.callbacks.ForEach(oi=>oi(kt,fi))}}:ui["on"+ri.eventName]=si=>{if(!dt){si=si||{type:ri.eventName},(si.type=="abort"||si.type=="error"||si.type=="timeout")&&(dt=true);var hi=kt.GetLiistenersItem(ri.fullName);hi&&hi.callbacks.ForEach(ci=>ci(kt,si))}})}),bt=this.data||{},bt.formSubmit){bt.formSubmit.action=this.url,bt.formSubmit.submit();return this}if(this.xhr.open(bt.httpMethod||"GET",this.url,this.async),this.xhr.timeout=this.timeoutMs,bt.uploadType&&(window.FormData?this.xhr.contentType=bt.uploadType:this.xhr.setRequestHeader("Content-Type",bt.uploadType)),bt.fileName&&this.xhr.setRequestHeader("x-calysto-filename",bt.fileName),this.responseType&&(this.xhr.responseType=this.responseType),this.headers&&this.headers.ForEach(li=>this.xhr.setRequestHeader(li.name,li.value)),"content"in bt){let ai=bt.content;typeof ai=="function"&&(ai=ai()),this.xhr.send(ai)}else this.xhr.send();return this}GetResponseText(){return this.xhr?this.xhr.responseText:""}GetResponse(){if(this.xhr){return this.xhr.response}}GetLiistenersItem(vi){return this.listeners[vi]}AddCallback(yi,pi){var wi,bi,ki;if(this.isStarted){throw new Error("Request started, can't assign callback: "+yi);}this.listeners||(this.listeners={}),wi=this.GetLiistenersItem(yi),wi||(bi=yi.StartsWith("OnUpload"),ki=bi?yi.substr(8).toLowerCase():yi.substr(2).toLowerCase(),wi={isUpload:bi,eventName:ki,fullName:yi,callbacks:[]},this.listeners[yi]=wi),wi.callbacks.push(pi);return this}OnUploadAbort(di){return this.AddCallback("OnUploadAbort",di)}OnUploadError(gi){return this.AddCallback("OnUploadError",gi)}OnUploadLoad(nr){return this.AddCallback("OnUploadLoad",nr)}OnUploadProgress(tr){return this.AddCallback("OnUploadProgress",tr)}OnUploadTimeout(ir){return this.AddCallback("OnUploadTimeout",ir)}OnReadyStateChange(rr){return this.AddCallback("OnReadyStateChange",rr)}OnAbort(ur){return this.AddCallback("OnAbort",ur)}OnError(fr){return this.AddCallback("OnError",fr)}OnLoad(er){return this.AddCallback("OnLoad",er)}OnProgress(or){return this.AddCallback("OnProgress",or)}OnTimeout(sr){return this.AddCallback("OnTimeout",sr)}}i.WebClient=r})(t=n.Net||(n.Net={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){function r(f){console.log(Date.now(),f)}class u{constructor(e){this.virtualPath=e,this.OnOpen=(new n.MulticastDelegate).AsFunc(this),this.OnClose=(new n.MulticastDelegate).AsFunc(this),this.OnError=(new n.MulticastDelegate).AsFunc(this),this.OnMessage=(new n.MulticastDelegate).AsFunc(this),this.isSending=false}Open(o){if(n.Core.IsDebugDefined&&r("#WebSocket: "+(this.ws?this.ws.readyState:"not initialized")),this.ws&&this.ws.readyState==WebSocket.OPEN){o&&o(this)}else if(!this.ws||this.ws.readyState!=WebSocket.CONNECTING){var s=this.virtualPath;s.indexOf("//")>0||(s=(window.location.protocol=="https:"?"wss:":"ws:")+"//"+window.location.host+this.virtualPath);try{this.ws=new WebSocket(s),this.ws.binaryType="arraybuffer"}catch(h){}this.ws.onmessage=c=>{c.data&&this.OnMessage.Any()&&n.Json.BinaryFrame.DeserializeAsync(c.data,l=>{n.Core.IsDebugDefined&&r({"#SOCKET_RECEIVED":l}),this.OnMessage.Invoke(a=>a(l))})},this.ws.onclose=()=>{n.Core.IsDebugDefined&&r("#WebSocket closed"),this.OnClose.Invoke(v=>v())},this.ws.onerror=()=>{n.Core.IsDebugDefined&&r("#WebSocket error"),this.OnError.Invoke(y=>y("#WebSocket error"))},this.ws.onopen=()=>{n.Core.IsDebugDefined&&r("#WebSocket opened"),this.OnOpen.Invoke(p=>p()),o&&o(this)}}}SendWorker(){var w;this.sendQueue&&(w=this.sendQueue.shift())?(this.isSending=true,n.Json.BinaryFrame.SerializeAsync(w,b=>{n.Core.IsDebugDefined&&r({"#SOCKET_SEND":w});var k=b.ToBinaryData();this.ws.send(k),this.SendWorker()})):this.isSending=false}Send(d){this.sendQueue||(this.sendQueue=[]),this.sendQueue.push(d),this.isSending||this.Open(()=>this.SendWorker());return this}IsOpened(){return!!(this.ws&&this.ws.readyState==WebSocket.OPEN)}Close(){this.ws&&this.ws.close();return this}}i.CalystoWebSocket=u})(t=n.Net||(n.Net={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){class f{constructor(){this.OnAbort=(new n.MulticastDelegate).OnInvoke(s=>{this.SetValue("OnAbort",s)}).OnAdd(h=>this.TryInvokeValue("OnAbort",h)).AsFunc(this),this.OnError=(new n.MulticastDelegate).OnInvoke(c=>{this.SetValue("OnError",c)}).OnAdd(l=>this.TryInvokeValue("OnError",l)).AsFunc(this),this.OnProgress=(new n.MulticastDelegate).OnInvoke(a=>{this.SetValue("OnProgress",a)}).OnAdd(v=>this.TryInvokeValue("OnProgress",v)).AsFunc(this),this.OnEnd=(new n.MulticastDelegate).OnInvoke(()=>{this.SetValue("OnEnd",true)}).OnAdd(y=>this.TryInvokeValue("OnEnd",y)).AsFunc(this),this._values={}}Abort(){this.OnAbort.Invoke(p=>p("abort"));return this}SetValue(w,b){this._values[w]=b}TryInvokeValue(k,d){k in this._values&&d(this._values[k])}}u.AjaxServiceClientBase=f;class e extends f{constructor(){super(...arguments),this.OnSuccess=(new n.MulticastDelegate).OnInvoke(()=>{this.SetValue("OnSuccess",true)}).OnAdd(g=>this.TryInvokeValue("OnSuccess",g)).AsFunc(this),this.OnResponse=(new n.MulticastDelegate).OnInvoke(nt=>{this.SetValue("OnResponse",nt)}).OnAdd(tt=>this.TryInvokeValue("OnResponse",tt)).AsFunc(this)}}u.AjaxServiceClientVoid=e;class o extends f{constructor(){super(...arguments),this.OnSuccess=(new n.MulticastDelegate).OnInvoke(it=>{this.SetValue("OnSuccess",it)}).OnAdd(rt=>this.TryInvokeValue("OnSuccess",rt)).AsFunc(this),this.OnResponse=(new n.MulticastDelegate).OnInvoke(ut=>{this.SetValue("OnResponse",ut)}).OnAdd(ft=>this.TryInvokeValue("OnResponse",ft)).AsFunc(this)}}u.AjaxServiceClientWithReturn=o})(r=i.WebService||(i.WebService={}))})(t=n.Net||(n.Net={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(){})(r=i.WebService||(i.WebService={}))})(t=n.Net||(n.Net={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){class f{constructor(e,o){this.settings=e,this.Socket=o,this.OnBroadcastMessage=(new n.MulticastDelegate).AsFunc(this),this.OnError=(new n.MulticastDelegate).AsFunc(this),this._pendingCallbacks=new n.Dictionary,this.Socket.OnMessage(s=>this.HandleSocketMessage(s))}HandleSocketMessage(h){let l=h.Method==n.Constants.AppConstants.BroadcastMethodName,c=null;if(!l&&h.ReferenceGuid){let v=new n.BoxValue;this._pendingCallbacks.TryGetValue(h.ReferenceGuid,v)&&(this._pendingCallbacks.RemoveKey(h.ReferenceGuid),c=v.GetValue())}let a=this.ProcessResponse(c,h);if(!a){if(h.JavaScriptLO&&!h.IsJavaScriptLODone){h.IsJavaScriptLODone=true;let y=n.ScriptLoader.LoadJS(h.JavaScriptLO);setTimeout(()=>y.parentNode.removeChild(y),200)}l&&this.OnBroadcastMessage.Invoke(p=>p(h.ReturnedValue)),c&&(c.OnResponse.Invoke(w=>w(h)),c.OnSuccess.Invoke(b=>b(h.ReturnedValue)),c.OnEnd.Invoke())}}ProcessResponse(k,d){if(d.IsEngineExpired){this.Socket.Close(),u.EngineExpired();return true}if(n.Page.IsPageReloading){return true};if(d.EchoMsg=="EchoServerRequest"){this.Socket.Send({ReferenceGuid:d.ReferenceGuid,EchoMsg:"EchoClientResponse"});return true}if(d.ExceptionMessage&&!d.IsExceptionMessageDone){if(d.IsExceptionMessageDone=true,k===null||k===void 0?void 0:k.OnError.Any()){if(k.OnError.Invoke(g=>g(d.ExceptionMessage)),n.Core.IsDebugDefined){throw new Error("Socket Error: "+d.ExceptionMessage).AppendErrorDetails(d.ExceptionDetails,true);}}else if(this.OnError.Any()){if(this.OnError.Invoke(nt=>nt(d.ExceptionMessage)),n.Core.IsDebugDefined){throw new Error("Socket Error: "+d.ExceptionMessage).AppendErrorDetails(d.ExceptionDetails,true);}}else throw new Error(d.ExceptionMessage).AppendErrorDetails(d.ExceptionDetails,true);return true}return false}OnMethodReturn(tt,it){this._pendingCallbacks.Add(tt,it)}}u.WebSocketSession=f})(r=i.WebService||(i.WebService={}))})(t=n.Net||(n.Net={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){function o(p){n.Core.IsDebugDefined&&console.log(Date.now(),p)}function s(){n.Page&&n.Page.OnVersionExpired&&n.Page.OnVersionExpired.Any&&n.Page.OnVersionExpired.Any()?n.Page.OnVersionExpired.Invoke(w=>w()):n.Page.IsPageReloading||(document.documentElement.className+=" calystoAjaxLoading",n.Page.IsPageReloading=true,n.Notification.Create(n.Resources.CalystoLang.NewVersionFoundPageIsReloading,"warning",NaN,"top","center").Show(),setTimeout(()=>window.location.reload(true),1e3))}function l(b,k){return(b||"").replace("__calysto_method_name__",k.method||"").replace("__calysto_ss__",k.sstate?"1":"0").replace("__calysto_culture__",n.Globalization.CultureInfo.CurrentCulture.Name).replace("__calysto_current_url__",n.Utility.Encoding.Base64RndEncoder.EncodeToBase64String(window.location.pathname+window.location.search))}function a(d,g,nt){for(var it,rt={},tt=0;tt<nt.length;tt++){if(it=g[tt],typeof it=="undefined"){it=null}else if(typeof it=="function"){throw new Error("Argument "+nt[tt]+" can not be an function in "+d+"("+nt.join(", ")+")");}rt[nt[tt]]=it}return rt}function v(){if(window.event&&"isTrusted"in window.event){if(event&&event.isTrusted&&(event.target||event.srcElement)){n.Core.IsDebugDefined&&console.log("web service method invoked by user event: "+event.type);return true}if(n.Core.IsDebugDefined){throw new Error("Event is null, not invoked in user event.");}}return false}function h(ut,ft){let et=ut.xhr,ot="";try{ot=et.getResponseHeader("Content-type")}catch(ct){}ot||(ot=et.contentType||(et.response||{}).type||"");var ht=et.getResponseHeader(n.Constants.WsjsHeaderConstants.XTypeHeaderKey),st=Object.assign(Object.assign({},ft),{isErrorStatus:et.status<200||et.status>=300,contentType:ot,isHtml:(ot||"").indexOf("text/html")>=0,isJson:(ot||"").indexOf("application/json")>=0,calystoType:ht});switch(et.responseType){case"arraybuffer":st.arrayBuffer=et.response;break;case"blob":st.blob=et.response;break;case"":case"text":st.respTxt=et.responseText;break;default:throw new Error("ResponseType not supported: "+et.responseType);}return st}function e(lt,at){if(lt.calystoType==n.Constants.WsjsHeaderConstants.XTypeHeaderBinaryFrameValue){n.Json.BinaryFrame.DeserializeAsync(lt.arrayBuffer,yt=>{lt.responseContainer=yt,at()})}else if(lt.respTxt=n.Utility.Encoding.UTF8.GetString(new Uint8Array(lt.arrayBuffer)),lt.isHtml){lt.errorText="Blob download failed",lt.errorHtml=lt.respTxt,at()}else if(lt.isJson){try{lt.responseContainer=n.Json.Deserialize(lt.respTxt)}catch(vt){lt.errorText="Blob download failed",lt.errorDescription=lt.respTxt}at()}else lt.errorText="Blob download failed",lt.errorDescription=lt.respTxt,at()}function c(pt,wt){if(wt.fnResponseContainerCallback(pt),pt.IsEngineExpired){wt.fnResponseEndCallback(),s();return}if(n.Page.IsPageReloading){wt.fnResponseEndCallback();return}if(pt.ExceptionMessage&&!pt.IsExceptionMessageDone){pt.IsExceptionMessageDone=true,wt.fnResponseEndCallback(),wt.fnErrorCallback(pt.ExceptionMessage,pt.ExceptionDetails,true);return}if(pt.JavaScriptLO&&!pt.IsJavaScriptLODone){pt.IsJavaScriptLODone=true;let bt=n.ScriptLoader.LoadJS(pt.JavaScriptLO);setTimeout(()=>bt.parentNode.removeChild(bt),200)}pt.IsSuccessful&&wt.fnReturnValueCallback(pt.ReturnedValue),wt.fnResponseEndCallback()}function f(kt){n.Core.IsDebugDefined&&o({AJAX_RESPONSE:kt.responseContainer}),kt.errorText?(kt.fnResponseEndCallback(),kt.fnErrorCallback(kt.errorText,{errorDescription:kt.errorDescription,errorHtml:kt.errorHtml},false)):kt.responseContainer&&kt.responseContainer.Type=="IWebServiceResponseContainer"?c(kt.responseContainer,kt):(kt.fnResponseEndCallback(),kt.fnReturnValueCallback(kt.responseContainer||kt.errorText))}function y(dt,gt){var ni,ii,ti;if(dt.xhr.status==0){gt.fnResponseEndCallback();return}let ri=dt.xhr.getResponseHeader("location");if(ri){location.assign(ri);return}if(ni=h(dt,gt),ni.isErrorStatus){ni.errorText="Ajax response error #2 - error status received",ni.errorDescription="xhr.status: "+dt.xhr.status+"\r\nxhr.statusText: "+dt.xhr.statusText+"\r\nxhr.resposeText:\r\n",ii=function(){ni.isHtml?ni.errorHtml=ni.respTxt:ni.errorDescription+=ni.respTxt,f(ni)},ni.respTxt?ii():ni.arrayBuffer?(ni.respTxt=n.Utility.Encoding.UTF8.GetString(new Uint8Array(ni.arrayBuffer)),ii()):ni.blob&&(ti=new FileReader,ti.onload=function(fi){ni.respTxt=n.Utility.Encoding.UTF8.GetString(new Uint8Array(fi.currentTarget.result)),ii()},ti.readAsArrayBuffer(ni.blob))}else if(ni.arrayBuffer){e(ni,function(){f(ni)})}else if(ni.blob){ti=new FileReader,ti.onload=function(ei){ni.arrayBuffer=ei.currentTarget.result,e(ni,function(){f(ni)})},ti.readAsArrayBuffer(ni.blob)}else{try{ni.isJson&&(ni.responseContainer=n.Json.Deserialize(ni.respTxt))}catch(ui){ni.errorText="Ajax response error #1 - invalid JSON string",ni.errorDescription=ui+"\r\nRESPONSE:\r\n"+ni.respTxt}f(ni)}}u.Log=o,u.EngineExpired=s,u.CreateUrl=l,u.CreateArgsObj=a,u.IsTriggeredByUserAction=v,u.CreateFullStateObj=h,u.ReadArrayBuffer=e,u.ProcessResponseContainer=c,u.ProcessResponse=f,u.AjaxResponseReceivedHandler=y})(r=i.WebService||(i.WebService={}))})(t=n.Net||(n.Net={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){class f{constructor(e,o){if(this.namespace=e,this.vpath=n.Utility.Encoding.Base64RndEncoder.DecodeBase64StringToString(o),this.ns=n.DataBinder.GetValue(window,e),this.ns){throw new Error("Ajax namespace is already registered: "+e);}this.ns={},n.DataBinder.SetValue(window,e,this.ns)}RegisterAjaxMethod(s){if(this.ns[s.method]){throw new Error("Ajax method is already registered: "+s.method);}let h=this,c=function(){let b=arguments,l=new u.AjaxServiceClientWithReturn;if(s.reque&&!u.IsTriggeredByUserAction()){return l};let v=u.CreateArgsObj(s.method,b,s.argNames||[]),a=false;l.OnAbort(()=>{a=true});let y=false,p=function(){y||(y=true,s.silent||n.Page.OnEndResponse.Invoke(nt=>nt()),l.OnEnd.Invoke())},k=function(){s.silent||n.Page.OnBeginRequest.Invoke(tt=>tt())},d=it=>l.OnSuccess.Invoke(rt=>rt(it)),g=ut=>l.OnResponse.Invoke(ft=>ft(ut)),w=(et,ot,st)=>{if(l.OnError.Any()){if(l.OnError.Invoke(ht=>ht(et)),n.Core.IsDebugDefined){throw new Error(et).AppendErrorDetails(ot,st);}}else throw new Error(et).AppendErrorDetails(ot,st);};a||n.Json.BinaryFrame.SerializeAsync(v,ct=>{if(n.Core.IsDebugDefined&&u.Log({AJAX_SEND:ct.Json,BLOBS:ct.Blobs,method:s.method+"("+(s.argNames||[]).join(", ")+")",jsObject:v}),!a){let lt=new n.Net.WebClient("");l.OnAbort(()=>lt.Abort());let at=u.CreateUrl(h.vpath,s);if(s.post||ct.Blobs.length>0||ct.Json.length>1e3){at=at.replace("__calysto_json_arg__",""),lt.AddRequestHeader(n.Constants.WsjsHeaderConstants.XTypeHeaderKey,n.Constants.WsjsHeaderConstants.XTypeHeaderBinaryFrameValue);let bt=ct.ToBinaryData();if(bt&&bt.size>0){lt.UploadData(bt)}else throw Error("Invalid blob, can not continue.");}else{let kt=n.Utility.Encoding.Base64RndEncoder.EncodeToBase64String(ct.Json);at=at.replace("__calysto_json_arg__","&"+n.Constants.CalystoAjaxHandlerConstants.AjaxGetParamName+"="+kt)}lt.url=at,lt.timeoutMs=s.timeoutMs||lt.timeoutMs,lt.AddRequestHeader(n.Constants.WsjsHeaderConstants.XAjaxHeaderKey,n.Constants.WsjsHeaderConstants.XAjaxHeaderValue),lt.responseType=typeof ArrayBuffer!="undefined"?"arraybuffer":"text";let vt=(dt,gt)=>{if(gt.type=="timeout"){p(),w("Ajax request timeout.");return}u.AjaxResponseReceivedHandler(lt,{fnResponseContainerCallback:g,fnReturnValueCallback:d,fnErrorCallback:w,fnResponseEndCallback:p})},yt=(ni,ti,ii)=>{let ri={};ri.IsComputable=!!ti.lengthComputable,ri.IsUpload=!!ii,ri.Loaded=ti.loaded,ri.Total=ti.total,ti.total>0&&(ri.Percent=ti.loaded/ti.total*100,ri.Percent>100&&(ri.Percent=100),l.OnProgress.Invoke(ui=>ui(ri)))},pt=(fi,ei)=>yt(fi,ei,false),wt=(oi,si)=>yt(oi,si,true);if(lt.OnLoad(vt),lt.OnError(vt),lt.OnTimeout(vt),lt.OnAbort(vt),lt.OnProgress(pt),lt.OnUploadProgress(wt),!a){if(k(),!lt.async){throw new Error("Sync ajax request is not supported for web service");}lt.Start()}}});return l};if(s.method in h.ns){throw new Error("WebService error, method "+s.method+" already exists in destination object.");}else h.ns[s.method]=c;return this}}u.WebAjaxServiceHelper=f})(r=i.WebService||(i.WebService={}))})(t=n.Net||(n.Net={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){function e(y,p,w,b){return function(){let k=arguments;if(p.reque&&!u.IsTriggeredByUserAction()){return null};let nt=u.CreateArgsObj(p.method,k,p.argNames||[]),d=n.Mathm.NewGuid(),tt=u.CreateUrl(b,p).replace("__calysto_json_arg__",""),g=new u.AjaxServiceClientWithReturn;w.OnMethodReturn(d,g),w.Socket.Send({Method:p.method,ReferenceGuid:d,RequestObj:{IsSocketWebClient:true,AjaxQueryString:tt,AjaxArgs:nt}});return g}}class f{constructor(o,s){if(this.namespace=o,this.methods=[],this.ns=n.DataBinder.GetValue(window,o),this.ns){throw new Error("Socket session type is already registered: "+o);}this.vpath=n.Utility.Encoding.Base64RndEncoder.DecodeBase64StringToString(s);let h=this;this.ns=function(){let l=new n.Net.CalystoWebSocket(u.CreateUrl(h.vpath,{method:"$"}).replace("__calysto_json_arg__","")),c=new u.WebSocketSession({method:"RequestReceived"},l);for(let a of h.methods){c[a.method]=e(h,a,c,h.vpath)};return c},n.DataBinder.SetValue(window,o,this.ns)}RegisterSocketMethod(v){this.methods.push(v);return this}}u.WebSocketSessionHelper=f})(r=i.WebService||(i.WebService={}))})(t=n.Net||(n.Net={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){function f(o,s){return new u.WebAjaxServiceHelper(o,s)}function e(h,c){return new u.WebSocketSessionHelper(h,c)}u.CreateAjax=f,u.CreateSocket=e})(r=i.WebService||(i.WebService={}))})(t=n.Net||(n.Net={}))}(Calysto||(Calysto={})),function(n){class t{ForRemoval(){return this.doCountExecutions&&this.executedCount>=this.executionsMax}}class i{constructor(){this._asFuncCached=new Map,this.items=[],this.onAddHandlers=[],this.onInvokeHandlers=[]}OnAdd(r){this.onAddHandlers.push(r);return this}OnInvoke(u){this.onInvokeHandlers.push(u);return this}Add(f,e){var o=new t;o.delegate=f,o.executedCount=0,e&&e>0&&(o.doCountExecutions=true,o.executionsMax=e),this.items.push(o),this.onAddHandlers.ForEach(s=>s(f));return this}Remove(h){let c=this.items.Where(l=>l.delegate==h);c.ForEach(a=>this.items.Remove(a));return this}AddOnce(v){return this.Add(v,1)}AddCount(y,p){return this.Add(p,y)}Invoke(w){for(let k of this.onInvokeHandlers){w?w(k):k()};let b=false;for(let d of this.items){d.ForRemoval()?b=true:(w?w(d.delegate):d.delegate(),d.executedCount++)};b&&(this.items=this.items.Where(g=>!g.ForRemoval()))}Any(){return this.items.Any()}Count(){return this.items.length}Clear(){this.items.Clear();return this}AsFunc(nt){if(!this._asFuncCached.has(nt)){var it=this,tt=function(rt){it.Add(rt);return nt};Object.defineProperty(tt,"MCD",{get:()=>it}),this.CopyFunction(tt,"Invoke"),this.CopyFunction(tt,"Any"),this._asFuncCached.set(nt,tt)}return this._asFuncCached.get(nt)}CopyFunction(ut,ft){ut[ft]=this[ft].BindContext(this)}}n.MulticastDelegate=i}(Calysto||(Calysto={})),function(n){var t;(function(i){function s(y){for(let p of u){!p.IsExecuted&&p.MinReadyState<=y&&(p.IsExecuted=true,p.Func())}}function c(){if(window.document&&document.body){switch(document.readyState){case"interactive":setTimeout(()=>s(r.Interactive),e);break;case"complete":setTimeout(()=>s(r.Complete),e);return}}clearTimeout(h),h=setTimeout(c,e)}function l(w,b){var k=new a;k.Func=w,k.MinReadyState=b,u.push(k),u=u.OrderBy(d=>d.MinReadyState),c()}var u,f,o;let r;(function(v){v[v.Loading=2]="Loading",v[v.Interactive=3]="Interactive",v[v.Complete=4]="Complete"})(r||(r={}));class a{}u=[];let h,e=window.FormData?10:200;i.IsPageReloading=false,i.IsVersionExpiredVisible=false,i.OnLoadComplete=(new n.MulticastDelegate).OnAdd(g=>{l(g,r.Complete)}).AsFunc(n.Page),i.OnLoading=(new n.MulticastDelegate).AsFunc(n.Page),f=0,i.OnBeginRequest=(new n.MulticastDelegate).Add(()=>{++f==1&&i.OnLoading.Invoke(nt=>nt(true))}).AsFunc(n.Page),i.OnEndResponse=(new n.MulticastDelegate).Add(()=>{--f<1&&(f=0,i.OnLoading.Invoke(tt=>tt(false)))}).AsFunc(n.Page),i.OnInteractive=(new n.MulticastDelegate).OnAdd(it=>{l(it,r.Interactive)}).Add(()=>{var rt=window.Sys;typeof rt!="undefined"&&rt.WebForms&&rt.WebForms.PageRequestManager&&(rt.WebForms.PageRequestManager.getInstance().add_beginRequest(()=>i.OnBeginRequest.Invoke(ut=>ut())),rt.WebForms.PageRequestManager.getInstance().add_endRequest(()=>i.OnEndResponse.Invoke(ft=>ft()))),i.OnEndResponse.Invoke(et=>et())}).AsFunc(n.Page),i.OnUnhandledException=(new n.MulticastDelegate).AsFunc(n.Page),i.OnVersionExpired=(new n.MulticastDelegate).AsFunc(n.Page),o=false,i.OnEscKey=(new n.MulticastDelegate).OnAdd(()=>{o||(o=true,n.Event.Attach(document,"keydown",ot=>{n.Event.IsEscKey(ot)&&i.OnEscKey.Invoke(st=>st())}))}).AsFunc(n.Page)})(t=n.Page||(n.Page={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){var f;(function(e){function o(){(function(a,v,y){var b=(n.Globalization.CultureInfo.CurrentCulture.Name||"").replace("-","_"),p,w=a.getElementsByTagName(v)[0];a.getElementById(y)||(p=a.createElement(v),p.id=y,p.src="//connect.facebook.net/"+(b||"en_US")+"/sdk.js",p.async="async",w&&w.parentNode&&w.parentNode.insertBefore(p,w))})(document,"script","facebook-jssdk")}function s(){return __awaiter(this,void 0,void 0,function*(){return n.Tasks.TaskUtility.RunAsync(k=>__awaiter(this,void 0,void 0,function*(){for(k.Watchdog(15e3),k.OnError(()=>k.NotifySuccess(null)),o();!k.IsCancelled;){let d=window.FB;if(d&&d.init&&d.Event&&d.Event.subscribe){k.NotifySuccess(d);return}yield n.Tasks.TaskUtility.SleepAsync(100)}}))})}class h{constructor(nt){this._fbInstance=nt}get FB(){return this._fbInstance}}class c{InitEngine(){return __awaiter(this,void 0,void 0,function*(){return n.Tasks.TaskUtility.RunAsync(tt=>__awaiter(this,void 0,void 0,function*(){let it=yield s();it?(this.Data=new h(it),tt.NotifySuccess(true)):tt.NotifySuccess(false)}))})}InitApp(rt){return __awaiter(this,void 0,void 0,function*(){return n.Tasks.TaskUtility.RunAsync(ut=>{this.Data.FB.__fbInitDone!=rt&&(this.Data.FB.__fbInitDone=rt,this.Data.FB.init({appId:rt,xfbml:true,status:true,cookie:true,version:"v4.0"})),ut.NotifySuccess(true)})})}Login(ft){return __awaiter(this,void 0,void 0,function*(){return n.Tasks.TaskUtility.RunAsync(et=>{et.Watchdog(12e4);let ot=(ft||"").split(",").AsEnumerable().Select(st=>st.Trim()).Concat(["public_profile","email"]).Where(ht=>!!ht).Distinct().ToStringJoined(",");n.Core.IsDebugDefined&&console.log("fb#before-login"),this.Data.FB.login(ct=>{this.Data.StatusReponse=ct,ct.status=="connected"?(n.Core.IsDebugDefined&&console.log("fb#login-success"),et.NotifySuccess(true)):(n.Core.IsDebugDefined&&console.log("fb#login-failed"),this.Error=ct.status,et.NotifySuccess(false))},{enable_profile_selector:true,return_scopes:true,scope:ot})})})}LoadProfile(){return __awaiter(this,void 0,void 0,function*(){n.Core.IsDebugDefined&&console.log("fb#before-LoadProfile1");return n.Tasks.TaskUtility.RunAsync(lt=>{n.Core.IsDebugDefined&&console.log("fb#before-LoadProfile2");try{this.Data.FB.api("/me",{fields:"id,name,gender,email,birthday,verified,picture,locale,link,first_name,last_name,age_range,hometown,photos"},vt=>{n.Core.IsDebugDefined&&console.log("fb#loaded-LoadProfile"),this.Data.Profile=vt,lt.NotifySuccess(true)})}catch(at){this.Error=at,lt.NotifySuccess(false)}})})}LoadPicture(){return __awaiter(this,void 0,void 0,function*(){n.Core.IsDebugDefined&&console.log("fb#before-LoadPicture1");return n.Tasks.TaskUtility.RunAsync(yt=>{n.Core.IsDebugDefined&&console.log("fb#before-LoadPicture2");try{this.Data.FB.api("/me/picture",{redirect:false,height:300,width:300},wt=>{this.Data.Picture=wt,yt.NotifySuccess(true)})}catch(pt){this.Error=pt,yt.NotifySuccess(false)}})})}LoadPermissions(){return __awaiter(this,void 0,void 0,function*(){n.Core.IsDebugDefined&&console.log("fb#before-LoadPermissions1");return n.Tasks.TaskUtility.RunAsync(bt=>{n.Core.IsDebugDefined&&console.log("fb#before-LoadPermissions2");try{this.Data.FB.api("/me/permissions",dt=>{this.Data.Permissions=dt,bt.NotifySuccess(true)})}catch(kt){this.Error=kt,bt.NotifySuccess(false)}})})}}e.FacebookPromise=c})(f=u.Facebook||(u.Facebook={}))})(r=i.Social||(i.Social={}))})(t=n.Page||(n.Page={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){var f;(function(e){function s(){(function(y,p,w){var b,k=y.getElementsByTagName(p)[0];y.getElementById(w)||(b=y.createElement(p),b.id=w,b.src="https://apis.google.com/js/platform.js",b.async="async",k&&k.parentNode&&k.parentNode.insertBefore(b,k))})(document,"script","google-platform")}function h(){return __awaiter(this,void 0,void 0,function*(){return n.Tasks.TaskUtility.RunAsync(d=>__awaiter(this,void 0,void 0,function*(){for(d.Watchdog(15e3),d.OnError(()=>d.NotifySuccess(false)),s();!d.IsCancelled;){let g=window.gapi;if(g&&g.load){d.NotifySuccess(true);return}yield n.Tasks.TaskUtility.SleepAsync(100)}}))})}function c(nt){return{Id:nt.getId(),Name:nt.getName(),GivenName:nt.getGivenName(),FamilyName:nt.getFamilyName(),ImageUrl:nt.getImageUrl(),Email:nt.getEmail()}}function a(tt){return tt?o+" "+tt:o}class l{}let o="https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/plus.me";class v{InitEngine(){return __awaiter(this,void 0,void 0,function*(){return n.Tasks.TaskUtility.RunAsync(it=>__awaiter(this,void 0,void 0,function*(){it.OnError(()=>it.NotifySuccess(false));let rt=yield h();rt?(this.Data=new l,it.NotifySuccess(true)):it.NotifySuccess(false)}))})}InitApp(ut,ft,et){return __awaiter(this,void 0,void 0,function*(){return n.Tasks.TaskUtility.RunAsync(ot=>{if(ot.Watchdog(15e3),ot.OnError(()=>ot.NotifySuccess(false)),window.gapi&&gapi.load&&gapi.auth2&&gapi.auth2.init){ot.NotifySuccess(true);return}gapi.load("client:auth2",{callback:function(){gapi.client.init({apiKey:ut,clientId:ft,scope:a(et)}).then(function(st){n.Core.IsDebugDefined&&console.log({"google#success_LoadAuth2":st}),ot.NotifySuccess(true)},function(ht){n.Core.IsDebugDefined&&console.log(ht),ot.NotifyError()})},onerror:function(ct){ot.NotifyError(ct)}})})})}Login(){return __awaiter(this,void 0,void 0,function*(){return n.Tasks.TaskUtility.RunAsync(lt=>{lt.Watchdog(12e4),lt.OnError(()=>lt.NotifySuccess(false)),n.Core.IsDebugDefined&&console.log({"google#Login":this.Data}),gapi.auth2.getAuthInstance().signIn().then(at=>{n.Core.IsDebugDefined&&console.log({"google#success-Login":at}),this.Data.GoogleUser=at,this.Data.Data={AuthResponse:at.getAuthResponse(),GrantedScopes:at.getGrantedScopes(),isSignedIn:at.isSignedIn(),UserId:at.getId()},lt.NotifySuccess(true)},vt=>{lt.NotifyError(vt)})})})}LoadProfile(){return __awaiter(this,void 0,void 0,function*(){return n.Tasks.TaskUtility.RunAsync(yt=>{yt.Watchdog(15e3),yt.OnError(()=>yt.NotifySuccess(false)),n.Core.IsDebugDefined&&console.log({"google#LoadProfile":this.Data}),this.Data.BasicProfile=c(this.Data.GoogleUser.getBasicProfile()),yt.NotifySuccess(true)})})}}e.GooglePromise=v})(f=u.Google||(u.Google={}))})(r=i.Social||(i.Social={}))})(t=n.Page||(n.Page={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){class f{constructor(e){this.trackingId=e,this.gtag("js",new Date),n.ScriptLoader.LoadJSFile("https://www.googletagmanager.com/gtag/js?id="+e,true)}gtag(){let o=window.dataLayer=window.dataLayer||[];o.push(arguments)}HitPageView(s){s?this.gtag("config",this.trackingId,{page_path:s}):this.gtag("config",this.trackingId);return this}}u.AnalyticsService=f})(r=i.Google||(i.Google={}))})(t=n.Page||(n.Page={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){function c(a=300){s=arguments.length==0?300:a,o=true,f||(f=(new n.Timer).OnTimeout(()=>{e?n.Utility.Dom.AddClass(document.documentElement,"calystoAjaxLoading"):n.Utility.Dom.RemoveClass(document.documentElement,"calystoAjaxLoading")})),h||(h=true,n.Page.OnLoading(v=>{e=v,o&&f.Abort().Start(e?s:1)}))}function l(){f&&(o=false,e=false,f.Abort().Start(1))}let e=false,s=300,o=false,f,h=false;u.Enable=c,u.Disable=l})(r=i.Preloader||(i.Preloader={}))})(t=n.Page||(n.Page={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){function o(c,l){var v,p,a,w,b,k;if(c&&!(c.indexOf("Blocked a frame with origin")>=0)&&!(c.indexOf("null is not an object (evaluating 'elt.parentNode')")>=0)){v=n.Net.WebClient.GetXMLHttpRequest(f),v.open("POST",f,true),v.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),v.setRequestHeader(n.Constants.WsjsHeaderConstants.XAjaxHeaderKey,n.Constants.WsjsHeaderConstants.XExceptionHeaderValue);var nt=(document.documentElement.innerHTML||"").substr(0,100),d=l,y="";try{p=$$calysto(document.documentElement).Query("//input, //select, //textarea").Select(tt=>({tagName:tt.tagName,type:tt.type,calystoId:tt.getAttribute(n.AttrName.CalystoId),id:tt.id,name:tt.name,value:tt.value})).ToArray(),y=n.Json.Serialize(p,50)}catch(g){n.Core.IsDebugDefined&&console.error(g),y="*error, values can no be serialized*"}a={location:{},screen:{},navigator:{}},n.Collections.ForEachProperties(location,function(it,rt){try{a.location[it]=rt}catch(ut){}}),n.Collections.ForEachProperties(screen,function(ft,et){try{a.screen[ft]=et}catch(ot){}}),n.Collections.ForEachProperties(navigator,function(st,ht){try{a.navigator[st]=ht}catch(ct){}}),w={calystoExObj:true,errMsg:c,errDetails:d,url:window.location.href,cookie:document.cookie,userAgent:navigator.userAgent,location:n.Json.Serialize(a.location),screen:n.Json.Serialize(a.screen),navigator:n.Json.Serialize(a.navigator),inputValues:y},n.Core.IsDebugDefined,b=n.Json.Serialize(w),k=n.Utility.Encoding.Base64RndEncoder.EncodeToBase64String(b),v.send(k)}}function s(lt,at){try{f&&o(lt,at)}catch(vt){if(n.Core.IsDebugDefined){try{console.error(vt)}catch(yt){}}}}function h(pt){var kt,bt;let wt={};try{kt=pt&&pt.error&&pt.error.CalystoException?pt.error.CalystoException:undefined,wt.IsServerError=!!(kt&&kt.IsServerError),bt=[],wt.IsServerError?(wt.Message=kt.Message,bt.push(kt.Details),wt.HtmlDetails=kt.HtmlDetails||""):(pt=pt||window.event)&&(wt.Message=pt.message,wt.FileName=pt.filename,wt.LineNo=pt.lineno,wt.ColNo=pt.colno,pt.error&&(wt.Message=pt.error.message||pt.message,pt.message&&wt.Message!=pt.message&&bt.push(pt.message),pt.error.description&&pt.error.description!=wt.Message&&bt.push(pt.error.description)),bt.push("filename: "+pt.filename),bt.push("lineno: "+pt.lineno),pt.colno!=null&&bt.push("colno: "+pt.colno),pt.error&&(wt.Stack=(pt.error||{}).stack,wt.Stack&&bt.push("stack:\r\n"+wt.Stack),pt.error&&kt&&(bt.push("-----------------------------"),bt.push("CalystoException.Message:"),bt.push(kt.Message),bt.push("CalystoException.Details:"),bt.push(kt.Details),wt.HtmlDetails=kt.HtmlDetails||""))),wt.Details=bt.join("\r\n")}catch(dt){}return wt}function e(gt){var ni,ti;try{if(ni=h(gt),!ni||!ni.Message){return};if(ni&&!ni.IsServerError&&ni.FileName&&ni.Message&&ni.Stack){try{n.Page.Diagnostic.ElmahLog(ni.Message,ni.Details)}catch(ii){}}try{n.Page.OnUnhandledException.Invoke(fi=>fi(ni.Message))}catch(ri){}if(n.Core.IsDebugDefined){try{ti=n.Dialog.CreateError(ni.Message+"\r\n\r\n"+ni.Details,"DEBUG MODE - "+(ni.IsServerError?"Server Exception":"Unhandled JS Exception")).Show(),ni.HtmlDetails&&ti.AppendContent(ni.HtmlDetails)}catch(ri){}}}catch(ui){}}var f=(n.Core.Constants.ServerDiagnosticUrl||"").replace("=","://");u.ElmahLog=s,typeof ErrorEvent!="undefined"?window.addEventListener?window.addEventListener("error",e,true):window.attachEvent&&window.attachEvent("onerror",e,true):window.onerror=function(ei,oi,si,hi){e({colno:hi||null,lineno:si,filename:oi,message:ei,type:"error"})}})(r=i.Diagnostic||(i.Diagnostic={}))})(t=n.Page||(n.Page={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){function f(){r||(r=true,n.Event.Attach(window,"popstate",h=>e(h.state)))}function u(c){var l={isCalystoState:true,url:window.location.href,pathname:window.location.pathname,search:window.location.search,hash:window.location.hash,title:document.title,stateArray:c};l&&l.isCalystoState&&window.history.replaceState&&(f(),window.history.replaceState(l,l.title,l.url))}function e(a){if(a&&a.isCalystoState&&a.stateArray&&window.history.replaceState){document.title=a.title;for(let v=0;v<a.stateArray.length;v++){let y=a.stateArray[v];y.selector&&$$calysto(y.selector).SetInnerHtml(y.html)}}}function o(){window.location.hash="!x"+Date.now()+"-"+Math.floor(Math.random()*1e6)}function s(p){let w=[];for(let k=0;k<p.length;k++){let d=p[k].selector;if(!d){throw new Error("Error in AjaxHistory, selector is null");}w.push({selector:d,html:$$calysto(d).SelectInnerHtml().FirstOrDefault()})}u(w);for(let g=0;g<p.length;g++){$$calysto(p[g].selector).SetInnerHtml(p[g].html)};o();let b=[];for(let nt=0;nt<p.length;nt++){let tt=p[nt].selector;b.push({selector:tt,html:$$calysto(tt).SelectInnerHtml().FirstOrDefault()})}u(b)}let r=false;i.PushState=s})(t=n.AjaxHistory||(n.AjaxHistory={}))}(Calysto||(Calysto={})),function(n){function t(e){return(e||"uid")+(Math.random()+"").substr(2)+Date.now()}function i(o){return n.Json.Serialize(o)}function u(s){try{return n.Json.Deserialize(s)}catch(h){return null}}const r="__EchoTestMethod";class f{constructor(c){this._listenersArr=[],this._funcBag={},this._uniqueUID=c||t("uid"),this._funcBag[r]=l=>"received: "+l,this.AddDistinctListener(window.parent),this.AddDistinctListener(window.opener),n.Event.Attach(window,"message",a=>this.HandleMessageEvent(a))}AddDistinctListener(v){if(v&&v!=window){for(var y=0;y<this._listenersArr.length;y++){if(this._listenersArr[y]==v){return}};this._listenersArr.push(v)}}EncapsulateFunc(p){if(p){for(var b=0,w;b++<50&&(!(w=t("fn"))||this._funcBag[w]););this._funcBag[w]=p;return w}return null}RegisterMethod(k,d){if(typeof k!="string"){throw Error("PostMessage.RegisterMethod argument funcName is not string");}if(typeof d!="function"){throw Error("PostMessage.RegisterMethod argument funcRef is not function");}if(this._funcBag[k]){throw new Error("Method is already registerd in PostMessage.RegisterMethod: "+k);}this._funcBag[k]=d;return this}InvokeMethod(g,nt,tt,it){for(var ut,ft=[g,nt,tt],et=["destinationUID","funcName","arg"],rt=0;rt<ft.length;rt++){if(typeof ft[rt]=="function"){throw Error("PostMessage.InvokeMethod argument "+et[rt]+" can not be function");}}if(it&&typeof it!="function"){throw Error("PostMessage.InvokeMethod argument callbackFunc is not function");}for(rt=0;rt<this._listenersArr.length;rt++){(ut=this._listenersArr[rt])&&ut!=window&&ut.postMessage(i({senderUID:this._uniqueUID,destinationUID:g,funcName:nt,argument:tt,callbackFuncName:this.EncapsulateFunc(it)}),"*")};return this}Echo(ot,st,ht){return this.InvokeMethod(ot,r,st,ht)}HandleMessageEvent(ct){var lt,at,vt;if(ct&&ct.data&&ct.type=="message"&&typeof ct.data=="string"&&(lt=u(ct.data))&&lt.senderUID&&lt.destinationUID&&(n.Core.IsDebugDefined,lt.destinationUID=="*"||lt.destinationUID==this._uniqueUID)){if(this.AddDistinctListener(ct.source),lt.funcName&&(at=this._funcBag[lt.funcName])){if(vt=at(lt.argument,ct),lt.isCallback){delete this._funcBag[lt.funcName]}else if(ct&&ct.source&&lt.callbackFuncName){let yt=i({senderUID:this._uniqueUID,destinationUID:lt.senderUID,funcName:lt.callbackFuncName,isCallback:true,argument:vt});ct.source.postMessage(yt,"*")}}else throw new Error("Error in PostMessage, function not registered: "+lt.funcName);}}static FindIframe(pt){for(var kt=document.getElementsByTagName("iframe"),wt,bt=0;bt<kt.length;bt++){if((wt=kt[bt])&&(wt.contentWindow==pt.source||wt.contentWindow==pt)){return wt}};return null}}n.PostMessage=f}(Calysto||(Calysto={})),function(n){var t;(function(i){function u(k){var ot,g,rt,nt,ut,ft,it;if(!(k&&k.tagName&&k.type)){return{}};var st=k.name,ht=k.tagName.toUpperCase(),ct=k.type.toLowerCase(),d=null,et=k.getAttribute(n.AttrName.CalystoGetter);if(et){ot=n.Utility.Expressions.CompileLambdaExpression(et),d=ot.call(k,k)}else switch(ht){case"INPUT":switch(ct){case"checkbox":case"radio":if(k.checked){d=k.value!="on"||k.getAttribute("value")?k.value:true}else return{};break;case"file":if(d=[],k.files&&k.files[0]){for(g=0;g<k.files.length;g++){d.push(k.files[g])}};break;default:d=k.value}break;case"TEXTAREA":d=k.value;break;case"SELECT":switch(k.type){case"select":case"select-one":d=k.value;break;case"select-multiple":for(d=[],nt=0;nt<k.options.length;nt++){(rt=k.options[nt])&&rt.selected&&d.push(rt.value)}}}let tt=k.getAttribute(n.AttrName.CalystoType);if(tt){let lt=n.Type.TypeDescriptor.FromTypeName(tt);if(!lt.IsValidKnownType){throw new Error("Forms serializer error, invalid toType: "+tt);}ut=function(vt){var yt=k.getAttribute(n.AttrName.CalystoFormat);if(vt&&yt&&(lt.KnownTypeName==n.Type.KnownType.Date||lt.KnownTypeName==n.Type.KnownType.DateTime)){let pt=new n.BoxValue;n.DateTime.TryParseDateTime(vt,yt,pt)&&(vt=pt.GetValue())}vt=n.Type.TypeConverter.ChangeType(vt,tt,true);return vt};let at=n.Type.TypeDescriptor.FromValue(d);if(at.KnownTypeName!=lt.KnownTypeName){if(n.Type.TypeInspector.IsArray(d)){for(ft=[],it=0;it<d.length;it++){ft.push(ut(d[it]))};d=ft}else d=ut(d)}}return{Element:k,Name:st,Value:d,HasValue:!n.Type.TypeInspector.IsNullOrUndefined(d)}}function f(wt){var kt,gt,dt,bt;if(!wt){return[]};for(kt=$$calysto(wt).Query("*, //*").Query("input, textarea, select").ToArray(),dt=[],bt=0;bt<kt.length;bt++){(gt=u(kt[bt])).HasValue&&dt.push(gt)};return dt}function o(ni,ti){if(!ni.getAttribute(n.AttrName.CalystoType)){var ii=n.Type.TypeDescriptor.FromValue(ti);ii.IsValidKnownType&&ni.setAttribute(n.AttrName.CalystoType,ii.NullableTypeName)}}function r(ri,ui){var hi,ci,oi,li,ai,yi,vi,ei,si;let fi=ri;if(o(fi,ui),hi=fi.getAttribute(n.AttrName.CalystoSetter),hi){ci=n.Utility.Expressions.CompileLambdaNoReturnCheck(hi),ci.call(fi,ui);return true}oi="",fi.type&&(oi=fi.type.toLowerCase()),n.Type.TypeInspector.IsNullOrUndefined(ui)&&(ui=""),li=fi.tagName.toUpperCase();switch(li){case"TEXTAREA":fi.value=ui;break;case"INPUT":switch(oi){case"checkbox":case"radio":fi.checked=fi.value!="on"||fi.getAttribute("value")?fi.value+""==ui+"":ui===true||ui==="true"||ui==="True";break;default:fi.value=n.Type.TypeConverter.ToStringFormated(ui,fi.getAttribute(n.AttrName.CalystoFormat))}break;case"SELECT":switch(oi){case"select":case"select-one":case"select-multiple":try{if(ui&&"Items"in ui){ai=ui.Items,ei=fi,ei.innerHTML="",yi=ai.ForEach(wi=>{let bi=document.createElement("option");bi.innerHTML=wi.Text,bi.value=wi.Value,ei.appendChild(bi),bi.selected=!!wi.Selected;return bi});break}}catch(pi){}if(oi=="select-multiple"){for(n.Type.TypeInspector.IsNullOrUndefined(ui)?ui=[]:n.Type.TypeInspector.IsArray(ui)||(ui=[ui]),vi=ui,ei=fi,si=0;si<ei.options.length;si++){ei.options[si].selected=vi.Where(ki=>ki+""==ei.options[si].value).Any()}}else fi.value=n.Type.TypeConverter.ToStringFormated(ui,fi.getAttribute(n.AttrName.CalystoFormat));break;default:throw new Error(`Type ${oi} not supported.`);}break;default:if("innerHTML"in fi){fi.innerHTML=n.Type.TypeConverter.ToStringFormated(ui,fi.getAttribute(n.AttrName.CalystoFormat))}else return false}return true}function s(di){$$calysto(di||document.documentElement).Query("*, //*").Query("input, select, textarea, ["+n.AttrName.CalystoSetter+"=*]").ForEach(gi=>{var tr,nr,ir;gi.disabled||gi.readOnly||(tr=gi.getAttribute(n.AttrName.CalystoSetter),nr=gi.tagName.toLowerCase(),tr?(ir=n.Utility.Expressions.CompileLambdaNoReturnCheck(tr),ir.call(gi,"")):nr=="textarea"?gi.value="":nr=="input"?gi.type=="radio"||gi.type=="checkbox"?gi.checked=false:gi.type=="button"||gi.type=="submit"||(gi.value=""):nr.indexOf("select")==0&&(gi.value="",gi.selectedIndex=0))})}function h(rr,ur,fr){var hr=f(rr||document.documentElement),cr,or,sr,er;let lr={};for(cr=fr||{},or=0;or<hr.length;or++){if(sr=hr[or].Name,sr){if(lr[sr]){continue}}else continue;lr[sr]=true,er=hr[or].Value,ur&&n.Type.TypeInspector.IsString(er)&&(er=(er||"").Trim()),n.Type.TypeInspector.IsNullOrUndefined(er)||String.IsNullOrEmpty(er)||(cr[sr]=er)}return cr}function c(ar,vr,yr){ar=ar||{},$$calysto(vr||document.documentElement).Query("[name=*], //[name=*]").ForEach(pr=>{var wr;if(pr&&(wr=pr.name)&&(yr||wr in ar)&&!r(pr,ar[wr])){throw new Error("Element with name="+wr+" is not valid for data binding");}})}function e(br,kr,dr){var iu=f(br||document.documentElement),ru,nu,tu,gr;let uu={};for(ru=dr||{},nu=0;nu<iu.length;nu++){if(tu=iu[nu].Name,tu){if(uu[tu]){continue}}else continue;uu[tu]=true,gr=iu[nu].Value,kr&&n.Type.TypeInspector.IsString(gr)&&(gr=(gr||"").Trim()),n.Type.TypeInspector.IsNullOrUndefined(gr)||String.IsNullOrEmpty(gr)||n.DataBinder.SetValue(ru,tu,gr)}return ru}function l(fu,eu,ou){fu=fu||{},$$calysto(eu||document.documentElement).Query("*, //*").ForEach(su=>{var hu;if(su&&(hu=su.name)&&!!hu){let cu=new n.BoxValue,lu=n.DataBinder.TryGetValue(fu,hu,cu);if((ou||lu)&&!r(su,cu.GetValue())){throw new Error("Element with name="+hu+" is not valid for data binding");}}})}function a(au,vu,yu){let wu=$$calysto(au||document.documentElement).Query("["+n.AttrName.CalystoId+"=*], //["+n.AttrName.CalystoId+"=*]").Query("input, textarea, select, ["+n.AttrName.CalystoGetter+"=*]").Distinct().ToArray(),pu=yu||{};for(let bu=0;bu<wu.length;bu++){let gu=wu[bu],nf,ku,du,tf=!!gu.getAttribute(n.AttrName.CalystoIsGroup),uf=tf||!!yu;if(nf=u(gu),!!yu||nf.HasValue){if(ku=gu.getAttribute(n.AttrName.CalystoId),du=nf.Value,!ku){continue}}else continue;vu&&typeof du=="string"&&(du=(du||"").Trim());let rf=new n.BoxValue;if(!uf&&n.DataBinder.TryGetValue(pu,ku,rf)){throw new Error("Error in CalystoSerialize, property "+ku+" already exists.");}tf?n.DataBinder.SetValue(pu,ku,[rf.GetValue()]):n.DataBinder.SetValue(pu,ku,du)}return pu}function v(ff,ef,of){ff&&$$calysto(ef||document.documentElement).Query("["+n.AttrName.CalystoId+"=*], //["+n.AttrName.CalystoId+"=*]").Distinct().ForEach(sf=>{let hf=sf.getAttribute(n.AttrName.CalystoId),cf=new n.BoxValue;if(hf&&n.DataBinder.TryGetValue(ff,hf,cf)||of){if(sf.type=="text"&&sf.getAttribute(n.AttrName.CalystoIsGroup)){throw new Error("NotImplemented: deserialization to element with calysto-isgroup attribute");}else if(!r(sf,cf.GetValue())){throw new Error("Element with calysto-id="+hf+" is not valid for data binding");}}})}function y(lf,af,vf){let pf=$$calysto(lf||document.documentElement).Query("["+n.AttrName.CalystoId+"=*], //["+n.AttrName.CalystoId+"=*]").Query("input, textarea, select, ["+n.AttrName.CalystoGetter+"=*]").Distinct().ToArray(),wf=!!vf,yf=vf||{};for(let bf=0;bf<pf.length;bf++){let kf=pf[bf],df=kf.getAttribute(n.AttrName.CalystoId),ne=kf.getAttribute(n.AttrName.CalystoUid);ne||kf.setAttribute(n.AttrName.CalystoUid,ne=n.Utility.Generators.GeneratePassword(20));let te=u(kf),gf={CalystoId:df,CalystoUid:ne,Value:te&&te.HasValue?te.Value:undefined,Enabled:$$calysto(kf).WhereEnabled(true).Any(),Visible:$$calysto(kf).WhereVisible(true).Any(),Name:n.Utility.Html.ExtractAspNameOrId(kf.name),Id:n.Utility.Html.ExtractAspNameOrId(kf.id),Checked:kf.checked,HtmlName:kf.name,HtmlValue:kf.value,HtmlId:kf.id,HtmlTagName:kf.tagName,HtmlType:kf.type},ie=new n.BoxValue;if(!wf&&n.DataBinder.TryGetValue(yf,df,ie)){throw new Error("Error in CalystoSerialize2, property "+df+" already exists.");}af&&typeof gf.Value=="string"&&(gf.Value=(gf.Value||"").Trim()),n.DataBinder.SetValue(yf,df,gf)}return yf}function p(re,ue,fe){re&&$$calysto(ue||document.documentElement).Query("["+n.AttrName.CalystoId+"=*], //["+n.AttrName.CalystoId+"=*]").Distinct().ForEach(ee=>{var oe=ee.getAttribute(n.AttrName.CalystoId),se=new n.BoxValue;if(oe&&n.DataBinder.TryGetValue(re,oe,se)||fe){let he=se.GetValue(),ce=he?he.Value:undefined;if(r(ee,ce)){he&&$$calysto(ee).SetVisible(!!he.Visible).SetEnabled(!!he.Enabled).SetProperty("checked",!!he.Checked)}else throw new Error("Element with calysto-id="+oe+" is not valid for data binding");}})}function w(le){let ae=new n.Web.UI.Direct.CalystoMvcModelState;ae.Raw=e(le,true),ae.RootSelector=n.Utility.Dom.EnsureElementId(le);return ae}class b{constructor(){this.Enabled=true,this.Visible=true}}i.SerializeContainer=f,i.ResetForm=s,i.FormSerialize=h,i.FormDeserialize=c,i.MvcSerialize=e,i.MvcDeserialize=l,i.CalystoSerialize=a,i.CalystoDeserialize=v,i.CalystoSerialize2=y,i.CalystoDeserialize2=p,i.ToMvcModelState=w})(t=n.Forms||(n.Forms={}))}(Calysto||(Calysto={})),function(n){class t{constructor(i){this.selector=i,this.currPosition=0}Peek(r=0){return this.selector.charAt(this.currPosition+(r||0))}Pop(){return this.selector.charAt(this.currPosition++)}PopMatch(u,f=0){f=f||0;var e=(this.selector.substr(this.currPosition+f)||"").match(u);if(e&&e[0]){this.currPosition+=e[0].length+f;return e}return null}}n.SelectorReader=t}(Calysto||(Calysto={})),function(n){function h(nt,tt,it,rt){var ft,ut,st,et,ot;if(!it){return n.Utility.Dom.HasAttribute(nt,tt)};if(ft=n.Utility.Dom.GetAttribute(nt,tt)||"",ut=it,ut){if(ut=="="||ut=="=="){return ft==rt};if(ut=="=*"){return!!ft};if(ut=="~="){return(" "+ft+" ").indexOf(" "+rt+" ")>=0};if(ut=="*="){return ft.indexOf(rt)>=0};if(ut=="^="){return ft.indexOf(rt)==0};if(ut=="$="){st=ft.lastIndexOf(rt);return st+rt.length==ft.length}if(ut=="!="||ut=="<>"){return ft!=rt};if(et=n.Type.NumberConverter.ToNumberOrDefault(ft,NaN,"."),ot=n.Type.NumberConverter.ToNumberOrDefault(rt,NaN,"."),!n.Type.TypeInspector.IsNumber(et)||!n.Type.TypeInspector.IsNumber(ot)){return false};switch(ut){case"<":return et<ot;case">":return et>ot;case">=":return et>=ot;case"<=":return et<=ot}throw new Error("Unsupported calystoSelector ("+(tt+", "+it+", "+rt)+") in Calysto.DomQuery.BuildLambdaExpression #2");}else return!!ft}function c(ht,ct,lt,at){var vt=function(yt,pt,wt){return function(bt){return h(bt,yt,pt,wt)}}(ct,lt,at);return ht.Where(function(kt){return vt(kt)})}function l(dt,gt){return dt.Where(function(ni){return ni.id==gt||n.Utility.Html.ExtractAspNameOrId(ni.id)==gt})}function a(ti,ii){return ti.Where(function(ri){return n.Utility.Dom.HasClass(ri,ii)})}function v(ui,fi){return ui.Where(function(ei){return n.Utility.Dom.HasTagName(ei,fi)})}function y(oi,si,hi){var ci=parseInt(hi,10)||1;switch(si){case"visible":return oi.WhereVisible(true);case"invisible":case"hidden":return oi.WhereVisible(false);case"first":case"take":return oi.Take(ci);case"last":return oi.Reverse().Take(ci).Reverse();case"skip":return oi.Skip(ci);case"exact":return oi.Exact(ci).AsDomQuery();case"is":case"not":return oi.Where(li=>t.FromArray([li]).Query(hi).Any()==(si=="is"));case"reverse":return oi.Reverse();case"ancestor":return oi.AncestorNodes();case"descendant":return oi.DescendantNodes();case"child":return oi.ChildNodes();case"parent":return oi.ParentNodes();case"next-sibling":return oi.NextSiblings();case"previous-sibling":return oi.PreviousSiblings();default:throw new Error("Unsupported calystoSelector: "+si+"("+hi+")");}}function p(ai){for(var vi=[];ai.parentNode;){vi.push(ai.parentNode),ai=ai.parentNode};return vi}function f(yi,pi,wi){var bi=yi,ki,di,gi,nr;n.Utility.Dom.IsElementVisible(bi)&&(typeof pi=="number"&&n.Type.TypeInspector.IsNumber(pi)&&(bi.style.width=pi+"px",bi.offsetWidth!=pi&&(ki=n.Utility.Dom.GetComputedStyle(bi,"width").NumericValue,di=pi-(bi.offsetWidth-(ki||0)),bi.style.width=di+"px")),typeof wi=="number"&&n.Type.TypeInspector.IsNumber(wi)&&(bi.style.height=wi+"px",bi.offsetHeight!=wi&&(gi=n.Utility.Dom.GetComputedStyle(bi,"height").NumericValue,nr=wi-(bi.offsetHeight-(gi||0)),bi.style.height=nr+"px")))}function b(tr,ir){var rr=tr.tagName||"",ur,fr;if(tr.attributes&&tr.attributes.length>0){for(ur=0;ur<tr.attributes.length;ur++){fr=tr.attributes[ur],rr+=" "+fr.name+'="'+fr.value+'"'}};tr.nodeValue&&(rr&&rr.length>0&&(rr+=" "),rr+=tr.nodeValue);return ir?rr.toLowerCase():rr}function r(er,or,sr){return er.ForEach(function(hr){n.Utility.Dom[or](hr,sr)})}function o(cr,lr){return function(ar,vr){if(n.Event.IsHoverChanged(ar,vr,cr)){return lr.call(ar,ar,vr)}}}function k(yr,pr){var wr=0;return function(br,kr){var dr;kr=kr||window.event,wr<yr&&(wr++,dr=pr.call(br,br,kr));return dr}}function d(gr){return(nu,tu)=>{tu=tu||window.event;var iu=gr.call(nu,nu,tu);iu===false?n.Event.StopPropagation(tu,true):iu===true&&n.Event.StopPropagation(tu,false);return iu}}function i(ru,uu,fu){for(var lu,eu,au,ou=uu,su=n.Utility.Dom.ConvertToElementsArray(fu),hu=[],cu=0;cu<ou.length;cu++){for(lu=[],eu=0;su&&eu<su.length;eu++){au=n.Utility.Dom.CloneNodeIfHasParent(su[eu]),lu.push(au),hu.push(au)};n.Utility.Dom[ru](ou[cu],lu)}u(hu);return{ThisItems:ou,NewItems:hu}}function u(vu){t.FromArray(vu).Query("script, //script").ForEach(yu=>n.ScriptLoader.ReloadScriptNode(yu))}function g(pu){var wu,bu;window.DOMParser?(bu=new DOMParser,wu=bu.parseFromString(pu,"text/xml")):(pu.indexOf("<?")==0&&(pu=pu.substr(pu.indexOf("?>")+2)),wu=new window.ActiveXObject("Microsoft.XMLDOM"),wu.async=false,wu.loadXML(pu));return wu}var w={absoluteTop:NaN,absoluteLeft:NaN,position:"",top:NaN,right:NaN,bottom:NaN,left:NaN,width:NaN,height:NaN,minWidth:NaN,minHeight:NaN,maxWidth:NaN,maxHeight:NaN,clientLeft:NaN,clientTop:NaN,clientWidth:NaN,clientHeight:NaN,offsetLeft:NaN,offsetTop:NaN,offsetWidth:NaN,offsetHeight:NaN,scrollLeft:NaN,scrollTop:NaN,scrollWidth:NaN,scrollHeight:NaN,paddingTop:NaN,paddingRight:NaN,paddingBottom:NaN,paddingLeft:NaN,marginTop:NaN,marginRight:NaN,marginBottom:NaN,marginLeft:NaN,borderTop:NaN,borderRight:NaN,borderBottom:NaN,borderLeft:NaN},e=["transform","-ms-transform","-webkit-transform"];class s{constructor(ku,du){this.query=ku,this.intervalID=du}Abort(){clearInterval(this.intervalID);return this}AsDomQuery(){return this.query}}n.PoolingState=s;class t extends n.CalystoEnumerable{constructor(gu){super(gu),this.OnEventAttached=(new n.MulticastDelegate).AsFunc(this)}ForEach(nf){return super.ForEach(nf).AsDomQuery()}Skip(tf){return super.Skip(tf).AsDomQuery()}Take(rf){return super.Take(rf).AsDomQuery()}SkipWhile(uf){return super.SkipWhile(uf).AsDomQuery()}Reverse(){return super.Reverse().AsDomQuery()}Where(ff){return super.Where(ff).AsDomQuery()}Select(ef){return super.Select(ef).AsDomQuery()}Cast(){return this}SelectMany(of){return super.SelectMany(of).AsDomQuery()}Distinct(sf){return super.Distinct(sf).AsDomQuery()}selectFilteredSingle(hf,cf){let wf=hf,lf=hf,pf=cf.replace(new RegExp("['\"]","ig"),"").replace(new RegExp("(^[\\s]+)|([\\s]+$)","ig"),"").replace(new RegExp("([ ]*)([\\/\\<\\>\\!\\~\\^\\$\\*\\=]+)([ ]*)","ig"),"$2").replace(new RegExp("[ ]+")," "),vf,af,yf=new n.SelectorReader(pf);while(vf=yf.Pop()){if(vf=="#"&&(af=yf.PopMatch(new RegExp("^([\\w\\-_]+)")))){lf=l(lf,af[1])}else if(vf=="."&&(af=yf.PopMatch(new RegExp("^([\\w\\-_]+)")))){lf=a(lf,af[1])}else if(vf==" "){lf=lf.DescendantNodes()}else if(vf=="/"&&yf.Peek()=="/"&&yf.Peek(1)!="/"){yf.Pop(),lf=lf.DescendantNodes()}else if(vf=="*"){lf=lf.Select(bf=>bf)}else if(vf=="^"){lf=lf.AncestorNodes()}else if(vf=="<"){lf=lf.ParentNodes()}else if(vf==">"){lf=lf.ChildNodes()}else if(vf=="/"&&yf.Peek()!="/"){lf=lf.ChildNodes()}else if(vf==":"&&(af=yf.PopMatch(new RegExp("^([\\w\\-_]+)([\\(]([^\\)]*)[\\)])*")))){lf=y(lf,af[1],af[3])}else if(vf=="["&&(af=yf.PopMatch(new RegExp("^[ ]*([\\w\\-_]+)[ ]*([<>\\!\\=\\~\\^\\$\\*]*)[ ]*((([^\\[\\]])*(\\[\\d+\\])*)*)[ ]*\\]")))){lf=c(lf,af[1],af[2],af[3])}else if(af=yf.PopMatch(new RegExp("^([\\w\\-_]+)"),-1)){lf=v(lf,af[1])}else throw new Error("Unsupported calystoSelector ("+pf+")");}lf==wf&&(lf=t.FromArray([]));return lf}Query(kf){return this.QueryWorker(kf).Cast().AsDomQuery()}QueryWorker(df){var ue,te,re,gf,fe,oe;if(!df){return this};if(ue=this,typeof df=="string"&&df.indexOf("=>")>0||typeof df=="function"){let se=n.Utility.Expressions.CompileLambdaExpression(df);return ue.Where(se)}var ie=[],ne="",ee=0;for(gf=0;gf<df.length;gf++){te=df.charAt(gf),te==")"?(ee--,ne+=te):te=="("?(ee++,ne+=te):te==","&&ee==0?(ie.push(ne),ne=""):ne+=te};if(ne.length>0&&ie.push(ne),ie.length>1){for(re=null,gf=0;gf<ie.length;gf++){fe=ie[gf].replace(new RegExp("((^[ ,]+)|([ ,]+$))","ig"),""),fe!=null&&fe!=""&&(oe=this.selectFilteredSingle(ue,fe),re=re?re.Concat(oe):oe)};return re}return this.selectFilteredSingle(ue,df)}ParentNodes(he){return this.Where(ce=>!!ce.parentNode).Select(le=>le.parentNode).Query(he)}AncestorNodes(ae){return this.SelectMany(function(ve){return p(ve)}).Select(ye=>ye).Query(ae)}ChildNodes(pe){return this.Where(we=>we.childNodes&&we.childNodes.length>0).SelectMany(be=>be.childNodes).Query(pe)}getDescendants(ke){return ke&&ke.childNodes&&ke.childNodes.length>0&&ke.nodeType&&ke.getElementsByTagName?ke.getElementsByTagName("*"):null}DescendantNodes(de){return this.SelectMany(ge=>this.getDescendants(ge)).Query(de)}NextSiblings(no){return this.Where(function(to){return to&&to.parentNode&&to.parentNode.childNodes}).SelectMany(function(io){return t.FromArray(io.parentNode.childNodes).Select(ro=>ro).SkipWhile(function(uo){return uo!=io}).Skip(1).ToArray()}).Query(no)}PreviousSiblings(fo){return this.Where(function(eo){return eo&&eo.parentNode&&eo.parentNode.childNodes}).SelectMany(function(oo){return t.FromArray(oo.parentNode.childNodes).Select(so=>so).TakeWhile(function(ho){return ho!=oo}).ToArray()}).Reverse().Query(fo)}WhereTagName(co){if(!co){throw new Error("WhereTagName requires tagName parameter");}co=co.toLowerCase();return this.Where(function(lo){return lo.tagName&&lo.tagName.toLowerCase()==co})}WhereAttribute(ao,vo){if(!ao){throw new Error("WhereAttribute requires name parameter");}return this.Where(function(yo){return vo(n.Utility.Dom.GetAttribute(yo,ao))})}WhereHasAttribute(po,wo=true){return this.Where(function(bo){return n.Utility.Dom.HasAttribute(bo,po)==wo})}WhereStyle(ko,go){if(!ko){throw new Error("WhereAttribute requires name parameter");}return this.Where(function(ns){return go(n.Utility.Dom.GetComputedStyle(ns,ko).NumericValue)})}WhereId(ts){if(!ts){throw new Error("WhereId requires id parameter");}return this.WhereAttribute("id",function(is){return is==ts})}WhereHasClass(rs,us=true){if(!rs){throw new Error("WhereHasClass requires cssClass parameter");}return this.Where(function(fs){return n.Utility.Dom.HasClass(fs,rs)==us})}SelectStyle(es){if(!es){throw new Error("StyleValue requires name parameter");}return this.Select(os=>{var ss=n.Utility.Dom.GetComputedStyle(os,es);return n.Type.TypeInspector.IsNumber(ss.NumericValue)?ss.NumericValue:ss.StyleValue})}SelectStyleMap(hs){return this.Select(cs=>{let ls={};n.Collections.ForEachOwnProperties(hs,as=>{var ys=n.Utility.Dom.GetComputedStyle(cs,as),vs=n.Type.NumberConverter.ToNumberOrDefault(ys.NumericValue,NaN,".");n.Type.TypeInspector.IsNumber(vs)||(vs=ys.StyleValue),ls[as]=vs});return ls})}SelectDimensionsMap(){return this.SelectStyleMap(w)}ApplyStyleMap(ps){return this.ForEach(function(ws){for(var bs in ps){n.Utility.Dom.SetStyleValue(ws,bs,ps[bs])}})}ApplyStyle(ks,ds){if(!ks){return this};if(arguments.length==1){if(typeof ks=="string"){return this.ForEach(gs=>{gs&&gs.style&&(gs.style.cssText+=";"+ks)})};if(typeof ks=="object"){return this.ApplyStyleMap(ks)};throw new Error("Invalid argument in ApplyStyle: "+ks);}else return this.ForEach(function(nh){n.Utility.Dom.SetStyleValue(nh,ks,ds)})}SetOffsetSize(th,ih){return this.ForEach(function(rh){f(rh,th,ih)})}FitIntoParent(){return this.ForEach(function(uh){uh._calystoPrevPosition=uh.style.position}).ApplyStyle("position:absolute").ForEach(function(fh){var eh=n.Utility.Dom.GetComputedStyle(fh.parentNode,"width").NumericValue,oh=n.Utility.Dom.GetComputedStyle(fh.parentNode,"height").NumericValue;f(fh,eh,oh)}).ForEach(function(sh){sh.style.position=sh._calystoPrevPosition||"",delete sh._calystoPrevPosition})}SelectAttribute(hh){return this.Select(function(ch){return n.Utility.Dom.GetAttribute(ch,hh)})}SelectAttributeMap(lh){return this.Select(function(ah){var vh={};n.Collections.ForEachOwnProperties(lh,yh=>{vh[yh]=n.Utility.Dom.GetAttribute(ah,yh)});return vh})}SelectAttributesAll(){return this.Select(function(ph){var wh;let bh={},kh=(wh=ph)===null||wh===void 0?void 0:wh.attributes;if(!kh){return bh};for(let dh of kh){bh[dh.name]=dh.value};return bh})}SetAttribute(gh,nc,tc=true){if(!gh){throw new Error("AttributeValue requires name parameter");}return this.ForEach(ic=>{tc?n.Utility.Dom.SetAttribute(ic,gh,nc):n.Utility.Dom.RemoveAttribute(ic,gh)})}RemoveAttribute(rc){return this.SetAttribute(rc,null,false)}SetInnerHtml(uc){(arguments.length==0||uc==null||typeof uc=="undefined")&&(uc="");return this.ForEach(function(fc){let ec=uc+"";fc.innerHTML=ec,ec&&u([fc])})}SetValueOrInnerHtml(oc){return this.ForEach(function(sc){let hc=sc,cc=hc.tagName.toLowerCase();switch(cc){case"input":case"select":case"textarea":hc.value=oc;break;default:hc.innerHTML=oc,u([hc])}})}SetProperty(lc,ac){return this.ForEach(function(vc){vc[lc]=ac})}SetChecked(yc){return this.SetProperty("checked",yc)}AppendInnerHtml(pc){(arguments.length==0||pc==null||typeof pc=="undefined")&&(pc="");return this.ForEach(function(wc){wc.innerHTML+=pc+""})}SelectInnerHtml(){return this.Select(function(bc){return bc.innerHTML})}SelectInnerText(){return this.Select(function(kc){return n.Utility.Dom.GetInnerText(kc)})}WhereText(dc,gc){if(!dc){throw new Error("WhereText requires textToSearch parameter");}dc=gc?dc.toLowerCase():dc;return this.Where(function(nl){return nl&&b(nl,gc).indexOf(dc)>=0})}AddClass(tl,il=true){return il?r(this,"AddClass",tl):this.RemoveClass(tl)}RemoveClass(rl){return r(this,"RemoveClass",rl)}SetClass(ul){return r(this,"SetClass",ul)}ToggleClass(fl){return r(this,"ToggleClass",fl)}SelectClassNames(){return this.SelectMany(function(el){return el.className.match(new RegExp("[\\S]+","g"))})}WhereVisible(ol=true){ol=arguments.length==0||!!ol;return this.Where(function(sl){return n.Utility.Dom.IsElementVisible(sl)==ol})}WhereInViewPort(hl=true,cl=true){hl=arguments.length==0||!!hl;return this.Where(function(ll){return n.Utility.Dom.IsElementVisible(ll)==hl&&n.Utility.Dom.IsElementInViewport(ll,cl)==hl})}WhereEnabled(al=true){al=arguments.length==0||!!al;return this.Where(function(vl){return!n.Utility.Dom.HasAttribute(vl,"disabled")==al})}On(yl,pl,wl,bl){var ta,gl,dl;if(!pl){throw new Error("CallbackFunc can not be null");}if(n.Type.TypeInspector.IsArray(yl)){for(ta=this,gl=0;gl<yl.length;gl++){ta=this.On(yl[gl],pl,wl,bl)};return ta}dl=yl,dl.indexOf("on")==0&&(dl=dl.substr(2));var ia=pl,kl=dl.split("."),na=kl[0];na=="enterKey"?(kl.unshift("keydown"),ia=function(ra,ua){if(n.Event.IsEnterKey(ua)){return pl.call(ra,ra,ua)}}):na=="escKey"&&(kl.unshift("keydown"),ia=function(fa,ea){if(n.Event.IsEscKey(ea)){return pl.call(fa,fa,ea)}});return this.ForEach(oa=>{var sa,ha;if(oa){sa=d(ia),na=="hover"?(kl.unshift("mouseover"),sa=o(true,sa)):na=="hout"&&(kl.unshift("mouseout"),sa=o(false,sa)),bl&&bl>0&&(sa=k(bl,sa)),ha=function(la,aa){return function(va){aa.call(la,la,va)}}(oa,sa);let ca=n.Event.Attach(oa,kl.join("."),ha,wl);this.OnEventAttached.Invoke(ya=>ya(ca))}})}RemoveEvent(pa){return this.ForEach(function(wa){wa&&wa.$$calysto_EventsArr.Where(ba=>ba.eventFullName==pa).ForEach(ka=>ka.removeEvent())})}DispatchEvent(da){return this.ForEach(function(ga){n.Event.DispatchEvent(ga,da)})}OnHover(nv,tv){var iv=this;nv&&(iv=iv.On("hover",nv)),tv&&(iv=iv.On("hout",tv));return iv}OnChange(rv){return this.On("change",rv)}OnChangePooling(uv){let ov=n.Utility.Generators.GeneratePassword(10),fv="__value_"+ov,ev="__checked_"+ov,sv=this.ForEach(cv=>{cv[fv]=cv.value,cv[ev]=cv.checked}).ToList(),hv=setInterval(()=>{sv.ForEach(lv=>{(lv[fv]!=lv.value||lv[ev]!=lv.checked)&&(lv[fv]=lv.value,lv[ev]=lv.checked,uv(lv,{type:"change",target:lv,currentTarget:lv}))})},100);return new s(sv.AsDomQuery(),hv)}OnInput(av){return this.On("input",av)}OnClick(vv){return this.On("click",vv)}OnDblClick(yv){return this.On("dblclick",yv)}OnMouseUp(pv){return this.On("mouseup",pv)}OnMouseDown(wv){return this.On("mousedown",wv)}OnMouseOver(bv){return this.On("mouseover",bv)}OnMouseOut(kv){return this.On("mouseout",kv)}OnLeftMouseDown(dv){function ny(ty,iy){n.Event.IsLeftMouseButton(iy)&&dv.apply(gv,arguments)}let gv=this;return this.On("mousedown.leftmousedown",ny)}OnRightMouseDown(ry){function fy(ey,oy){n.Event.IsRightMouseButton(oy)&&ry.apply(uy,arguments)}let uy=this;return this.On("mousedown.rightmousedown",fy)}OnMouseMove(sy){return this.On("mousemove",sy)}OnFocus(hy){return this.On("focus",hy)}OnBlur(cy){return this.On("blur",cy)}OnKeyDown(ly){return this.On("keydown",ly)}OnKeyUp(ay){return this.On("keyup",ay)}OnKeyPress(vy){return this.On("keypress",vy)}OnEnter(yy){return this.On("enterKey",yy)}OnEscKey(py){return this.On("escKey",py)}CloneNodes(){return this.Where(wy=>!!wy.cloneNode).Select(by=>by.cloneNode(true))}RemoveFromDom(){return this.ForEach(function(ky){n.Utility.Dom.RemoveNodeFromDom(ky)})}ReplaceWith(){var dy,gy=i("InsertBefore",this.ToArray(),arguments);(dy=gy.ThisItems)===null||dy===void 0?void 0:dy.ForEach(np=>n.Utility.Dom.RemoveNodeFromDom(np));return gy.NewItems.AsEnumerable().AsDomQuery()}ReplaceChildren(){var tp=i("ReplaceChildrenWith",this.ToArray(),arguments);return this}RemoveChildren(){return this.ReplaceChildren()}AddChildren(){var ip=i("AddChildren",this.ToArray(),arguments);return this}InsertChildren(){var rp=i("InsertChildren",this.ToArray(),[].AddRange(arguments).Reverse());return this}InsertBefore(){var up=i("InsertBefore",this.ToArray(),arguments);return this}InsertAfter(){var fp=i("InsertAfter",this.ToArray(),[].AddRange(arguments).Reverse());return this}InsertAsChildrenTo(ep){var op=n.DomQuery.FromSelector(ep).ToArray(),sp=this.Reverse().ToArray(),hp=i("InsertChildren",op,sp);return hp.NewItems.AsEnumerable().AsDomQuery()}AddAsChildrenTo(cp){var lp=n.DomQuery.FromSelector(cp).ToArray(),ap=this.ToArray(),vp=i("AddChildren",lp,ap);return vp.NewItems.AsEnumerable().AsDomQuery()}InsertBeforeTo(yp){var pp=n.DomQuery.FromSelector(yp).ToArray(),wp=this.ToArray(),bp=i("InsertBefore",pp,wp);return bp.NewItems.AsEnumerable().AsDomQuery()}InsertAfterTo(kp){var dp=n.DomQuery.FromSelector(kp).ToArray(),gp=this.ToArray(),nw=i("InsertAfter",dp,gp);return nw.NewItems.AsEnumerable().AsDomQuery()}Sleep(tw,iw){var rw=this;setTimeout(function(){iw.call(rw,rw)},tw);return this}ToAnimator(uw){if(!uw){throw new Error("ToAnimator requires finalMap");}var fw=new n.Animator;this.ForEach(ew=>{for(var ow in uw){fw.AddElement(ew,ow,uw[ow])}});return fw}SetSelectable(sw=true){return sw?this.RemoveClass("calystoNoUserSelect"):this.AddClass("calystoNoUserSelect")}SetEnabled(hw=true){return this.ForEach(function(cw){n.Utility.Dom.SetEnabled(cw,hw)})}SetVisible(lw=true){return this.ForEach(aw=>{var vw;aw&&aw.style&&(lw?(aw.style.display=="none"&&(aw.style.display=""),vw=n.Utility.Dom.GetComputedStyle(aw,"display").StyleValue,vw=="none"&&(aw.style.display=aw.tagName.toLowerCase()=="div"?"block":"inherit"),aw.style.visibility=="hidden"&&(aw.style.visibility=""),vw=n.Utility.Dom.GetComputedStyle(aw,"visibility").StyleValue,(vw=="hidden"||vw=="collapse")&&(aw.style.visibility="inherit")):aw.style.display="none")})}SetReadOnly(yw=true){return yw?this.SetAttribute("readonly","readonly"):this.RemoveAttribute("readonly")}SetOpacity(pw){pw>1&&(pw=pw/100);return this.ApplyStyle("filter","alpha(opacity="+pw*100+")").ApplyStyle("opacity",pw)}SetClip(ww){return this.ForEach(function(bw){n.Utility.Dom.SetClip(bw,ww)})}SetTransition(kw="all",dw=0,gw="linear",nb=0){arguments.length<1&&(kw="all"),arguments.length<2&&(dw=400),arguments.length<3&&(gw="linear"),arguments.length<4&&(nb=0);var tb=kw=="none"?"":kw+" "+dw+"ms "+gw+" "+nb+"ms";this.ApplyStyle("transition",tb),this.ApplyStyle("-webkit-transition",tb);return this}SetTransform(ib){(arguments.length==0||ib=="none")&&(ib="");for(var rb=0;rb<e.length;rb++){this.ApplyStyle(e[rb],ib)};return this}ApplyTransform(ub){if(arguments.length==0||ub=="none"){return this.SetTransform("none")};var fb=ub.match(new RegExp("[\\w]+","ig"));return this.ForEach(eb=>{if(eb&&eb.style&&fb&&fb.length>0){var ob=ub,sb=eb.style.transform||eb.style.msTransform||eb.style.webkitTransform;sb&&(ob=sb.replace(new RegExp("("+fb.join("|")+")[\\s]*\\([^\\)]*\\)","ig"),"")+" "+ub),n.DomQuery.FromSelector(eb).SetTransform(ob)}})}SelectTransform(){return this.Select(function(hb){return n.Utility.Dom.SelectTransform(hb)})}SetLinearGradient(cb,lb){var yb,ab;if(arguments.length==0||cb=="none"){return this.ApplyStyle("background-color","").ApplyStyle("background-image","")};for(cb=parseFloat(cb),n.Features.GetBrowser().Kind==n.Features.BrowserKindEnum.Safari&&(cb=(cb-90)*-1),cb+="deg",yb=[cb],ab=1;ab<arguments.length;ab++){yb.push(arguments[ab])};var wb=yb.join(", "),pb=["-webkit-","-moz-","-ms-","-o-",""],vb=["background-color:"+(lb||"").split(" ")[0]];for(ab=0;ab<pb.length;ab++){vb.push("background-image:"+pb[ab]+"linear-gradient("+wb+")")};vb.push(""),console.log(vb.join(";")),this.ApplyStyle(vb.join(";"));return this}ToAnimatorScrollIntoView(bb=false){let kb=new n.Animator;this.ForEach(db=>{let nk=db,gb=n.Utility.Dom.GetScrollableAncestors(nk)[0];if(gb){let tk=n.Utility.Dom.GetElementScreenPosition(nk),ik=n.Utility.Dom.GetElementScreenPosition(gb),rk=tk.top-ik.top,uk=tk.left-ik.left;bb||(rk+=gb.clientHeight-nk.clientHeight,uk+=gb.clientHeight-nk.clientWidth),kb.AddElement(gb,"scrollTop",rk),kb.AddElement(gb,"scrollLeft",uk)}});return kb}static FromArray(fk){return new t(()=>n.CalystoEnumerator.From(fk))}static FromSelector(ek){var ok;let sk=arguments;if(sk.length>1){let hk;for(ok=0;ok<sk.length;ok++){let ck=n.DomQuery.FromSelector(sk[ok]);hk=hk?hk.addPredicateInfo("Concat",sk[ok]).Concat(ck):ck}return hk}if(!ek){return t.FromArray([])};if(typeof ek=="string"){switch(ek.charAt(0)){case" ":case"/":ek=ek.TrimStart([" ","/"])}}if(ek==window){return t.FromArray([ek])};if(ek==document){return t.FromArray([ek])};if(ek.nodeType>0&&ek.cloneNode){return t.FromArray([ek])};if(ek=="html"){return t.FromArray([document.documentElement])};if(ek=="body"){return t.FromArray([document.body])};if(ek.constructor==n.DomQuery){return ek};if(ek.GetEnumerator){return new n.DomQuery(()=>ek.GetEnumerator())};if(ek.childNodes){return t.FromArray([ek])};if(typeof ek=="string"&&ek.length>0){return t.FromArray([document]).DescendantNodes().Query(ek)};if(ek.push&&ek.pop){let lk=null;for(ok=0;ok<ek.length;ok++){let ak=n.DomQuery.FromSelector(ek[ok]);lk=lk?lk.Concat(ak).AsDomQuery():ak}return lk||t.FromArray([])}if(ek&&ek.length>0&&ek[0]&&ek[0].nodeType>0){let vk=null;for(ok=0;ok<ek.length;ok++){let yk=n.DomQuery.FromSelector(ek[ok]);vk=vk?vk.Concat(yk).AsDomQuery():yk}return vk||t.FromArray([])}if(ek){return t.FromArray([ek])};throw new Error("Unknown calystoSelector in GetDomNodesEnumerable");}static FromXml(pk){var wk=g(pk),bk=wk.documentElement;return t.FromArray([bk])}static FromHtml(kk){var dk=n.Utility.Dom.ConvertToElementsArray(kk);return t.FromArray(dk)}static CreateElement(gk){return t.FromArray([document.createElement(gk)])}}n.DomQuery=t}(Calysto||(Calysto={})),$$calysto=Calysto.DomQuery.FromSelector,function(n){var t;(function(i){function r(b,k,d,g){var nt=parseFloat(b);return isNaN(nt)||!isFinite(nt)?k:(typeof b=="string"&&b.indexOf("%")>0&&(nt=nt/100),nt<d)?d:nt>g?g:nt}function o(tt,it){for(tt=String(tt),it=it||2;tt.length<it;){tt="0"+tt};return tt}i.NamedColors={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};let e;(function(h){function c(l){var y,a,p,v;if(l&&(y=i.NamedColors[l])&&y.indexOf("#")==0){return h.ParseToRGB(y)};if(l.indexOf("rgb")==0){a=l.match(new RegExp("[\\d\\.]+","ig"));return new u(a[0],a[1],a[2],a[3])}if(l.indexOf("hsl")==0){a=l.match(new RegExp("[\\d\\.\\%]+","ig"));return new f(a[0],a[1],a[2],a[3]).ToRGB()}if(l.indexOf("#")==0){p=l.substr(1);let w=p.match(new RegExp("(.{"+p.length/3+"})","g"));for(v=0;v<w.length;v++){w[v]=parseInt(w[v].length==1?w[v]+w[v]:w[v],16)};return new u(w[0],w[1],w[2],w[3])}throw Error(l+" can not be parsed to RGB color");}h.ParseToRGB=c})(e=i.ColorConverter||(i.ColorConverter={}));class f{constructor(rt,ut,ft,et){this.h=(parseInt(rt)||0)%360,this.s=r(ut,1,0,1),this.l=r(ft,.5,0,1),this.a=r(et,1,0,1)}static Parse(ot){var st,ht;if(ot.indexOf("hsl")==0){st=ot.match(new RegExp("[\\d\\.\\%]+","ig"));return new f(st[0],st[1],st[2],st[3])}ht=e.ParseToRGB(ot);return ht.ToHSL()}Clone(){return new f(this.h,this.s,this.l,this.a)}Set(ct){ct(this);return this}ToHslString(){var at=this.a!=1&&(this.a>0||this.a===0),lt="hsl";at&&(lt+="a"),lt+="("+this.h+","+this.s*100+"%,"+this.l*100+"%",at&&(lt+=","+this.a),lt+=")";return lt}ToRGB(){var dt=this,ui=dt.h/360,gt=dt.s,vt=dt.l,ri=dt.a;if(gt==0){return new u(vt*255,vt*255,vt*255,ri)};var ni=ui*6,yt=Math.floor(ni),kt=vt*(1-gt),ti=vt*(1-gt*(ni-yt)),ii=vt*(1-gt*(1-(ni-yt))),pt,wt,bt;yt==0?(pt=vt,wt=ii,bt=kt):yt==1?(pt=ti,wt=vt,bt=kt):yt==2?(pt=kt,wt=vt,bt=ii):yt==3?(pt=kt,wt=ti,bt=vt):yt==4?(pt=ii,wt=kt,bt=vt):(pt=vt,wt=kt,bt=ti);return new u(pt*255,wt*255,bt*255,ri)}}i.HSL=f;class u{constructor(fi,ei,oi,si){this.r=Math.round(r(fi,255,0,255)),this.g=Math.round(r(ei,255,0,255)),this.b=Math.round(r(oi,255,0,255)),this.a=r(si,1,0,1)}static Parse(hi){if(hi.indexOf("rgb")){var ci=hi.match(new RegExp("[\\d\\.]+","ig"));return new u(ci[0],ci[1],ci[2],ci[3])}return e.ParseToRGB(hi)}Clone(){return new u(this.r,this.g,this.b,this.a)}Set(li){li(this);return this}ToRgbString(){var vi=this.a!=1&&(this.a>0||this.a===0),ai="rgb";vi&&(ai+="a"),ai+="("+this.r+","+this.g+","+this.b,vi&&(ai+=","+this.a),ai+=")";return ai}ToHexString(){return"#"+o(Number(Math.round(this.r||0)).toString(16),2)+o(Number(Math.round(this.g||0)).toString(16),2)+o(Number(Math.round(this.b||0)).toString(16),2)}ToHSL(){var bi=this,yi={h:NaN,s:NaN,l:NaN,a:NaN},ki=bi.r/255,di=bi.g/255,gi=bi.b/255;yi.a=bi.a;var rr=Math.min(ki,di,gi),pi=Math.max(ki,di,gi),wi=pi-rr;if(yi.l=pi,wi==0){yi.h=0,yi.s=0}else{yi.s=wi/pi;var nr=((pi-ki)/6+wi/2)/wi,tr=((pi-di)/6+wi/2)/wi,ir=((pi-gi)/6+wi/2)/wi;ki==pi?yi.h=ir-tr:di==pi?yi.h=1/3+nr-ir:gi==pi&&(yi.h=2/3+tr-nr),yi.h<0&&(yi.h+=1),yi.h>1&&(yi.h-=1)}yi.h=yi.h*360,yi.s=yi.s,yi.l=yi.l;return new f(yi.h,yi.s,yi.l,yi.a)}ToCMYK(){var fr=this,ur={k:NaN,c:NaN,m:NaN,y:NaN},er=fr.r/255,or=fr.g/255,sr=fr.b/255;ur.k=Math.min(1-er,1-or,1-sr),ur.c=(1-er-ur.k)/(1-ur.k),ur.m=(1-or-ur.k)/(1-ur.k),ur.y=(1-sr-ur.k)/(1-ur.k),ur.c=Math.round(ur.c*100),ur.m=Math.round(ur.m*100),ur.y=Math.round(ur.y*100),ur.k=Math.round(ur.k*100);return new s(ur.c,ur.m,ur.y,ur.k)}}i.RGB=u;class s{constructor(hr,cr,lr,ar){this.c=r(hr,100,0,100),this.m=r(cr,100,0,100),this.y=r(lr,100,0,100),this.k=r(ar,100,0,100)}ToRGB(){var pr=this,vr={},wr=pr.c/100,br=pr.m/100,kr=pr.y/100,yr=pr.k/100;vr.r=1-Math.min(1,wr*(1-yr)+yr),vr.g=1-Math.min(1,br*(1-yr)+yr),vr.b=1-Math.min(1,kr*(1-yr)+yr),vr.r=Math.round(vr.r*255),vr.g=Math.round(vr.g*255),vr.b=Math.round(vr.b*255);return new u(vr.r,vr.g,vr.b,vr.a)}}i.CMYK=s})(t=n.Colorspace||(n.Colorspace={}))}(Calysto||(Calysto={})),function(n){let i;(function(e){function s(vs,ys,ps,ws){ws<0&&(ws=0),ws>1&&(ws=1);var bs=null;if(typeof vs=="string"){bs=o[vs]}else if(typeof vs=="function"){throw new Error("Easing function not supported: "+vs);}if(!bs){throw new Error("Unknown easing function: "+vs);}return bs(ws,ws*100,ys,ps-ys,100)}const o={linear:function(h,c,l,a){return l+a*h},swing:function(v,y,p,w){return(-Math.cos(v*Math.PI)/2+.5)*w+p},easeInQuad:function(b,k,d,g,nt){return g*(k/=nt)*k+d},easeOutQuad:function(tt,it,rt,ut,ft){return-ut*(it/=ft)*(it-2)+rt},easeInOutQuad:function(et,ot,st,ht,ct){return(ot/=ct/2)<1?ht/2*ot*ot+st:-ht/2*(--ot*(ot-2)-1)+st},easeInCubic:function(lt,at,vt,yt,pt){return yt*(at/=pt)*at*at+vt},easeOutCubic:function(wt,bt,kt,dt,gt){return dt*((bt=bt/gt-1)*bt*bt+1)+kt},easeInOutCubic:function(ni,ti,ii,ri,ui){return(ti/=ui/2)<1?ri/2*ti*ti*ti+ii:ri/2*((ti-=2)*ti*ti+2)+ii},easeInQuart:function(fi,ei,oi,si,hi){return si*(ei/=hi)*ei*ei*ei+oi},easeOutQuart:function(ci,li,ai,vi,yi){return-vi*((li=li/yi-1)*li*li*li-1)+ai},easeInOutQuart:function(pi,wi,bi,ki,di){return(wi/=di/2)<1?ki/2*wi*wi*wi*wi+bi:-ki/2*((wi-=2)*wi*wi*wi-2)+bi},easeInQuint:function(gi,nr,tr,ir,rr){return ir*(nr/=rr)*nr*nr*nr*nr+tr},easeOutQuint:function(ur,fr,er,or,sr){return or*((fr=fr/sr-1)*fr*fr*fr*fr+1)+er},easeInOutQuint:function(hr,cr,lr,ar,vr){return(cr/=vr/2)<1?ar/2*cr*cr*cr*cr*cr+lr:ar/2*((cr-=2)*cr*cr*cr*cr+2)+lr},easeInSine:function(yr,pr,wr,br,kr){return-br*Math.cos(pr/kr*(Math.PI/2))+br+wr},easeOutSine:function(dr,gr,nu,tu,iu){return tu*Math.sin(gr/iu*(Math.PI/2))+nu},easeInOutSine:function(ru,uu,fu,eu,ou){return-eu/2*(Math.cos(Math.PI*uu/ou)-1)+fu},easeInExpo:function(su,hu,cu,lu,au){return hu==0?cu:lu*Math.pow(2,10*(hu/au-1))+cu},easeOutExpo:function(vu,yu,pu,wu,bu){return yu==bu?pu+wu:wu*(-Math.pow(2,-10*yu/bu)+1)+pu},easeInOutExpo:function(ku,du,gu,nf,tf){return du==0?gu:du==tf?gu+nf:(du/=tf/2)<1?nf/2*Math.pow(2,10*(du-1))+gu:nf/2*(-Math.pow(2,-10*--du)+2)+gu},easeInCirc:function(rf,uf,ff,ef,of){return-ef*(Math.sqrt(1-(uf/=of)*uf)-1)+ff},easeOutCirc:function(sf,hf,cf,lf,af){return lf*Math.sqrt(1-(hf=hf/af-1)*hf)+cf},easeInOutCirc:function(vf,yf,pf,wf,bf){return(yf/=bf/2)<1?-wf/2*(Math.sqrt(1-yf*yf)-1)+pf:wf/2*(Math.sqrt(1-(yf-=2)*yf)+1)+pf},easeInElastic:function(kf,df,gf,ne,te){var ue=1.70158,ie=0,re=ne;if(df==0){return gf};if((df/=te)==1){return gf+ne};ie||(ie=te*.3),re<Math.abs(ne)?(re=ne,ue=ie/4):ue=ie/(2*Math.PI)*Math.asin(ne/re);return-(re*Math.pow(2,10*(df-=1))*Math.sin((df*te-ue)*2*Math.PI/ie))+gf},easeOutElastic:function(fe,ee,oe,se,he){var ae=1.70158,ce=0,le=se;if(ee==0){return oe};if((ee/=he)==1){return oe+se};ce||(ce=he*.3),le<Math.abs(se)?(le=se,ae=ce/4):ae=ce/(2*Math.PI)*Math.asin(se/le);return le*Math.pow(2,-10*ee)*Math.sin((ee*he-ae)*2*Math.PI/ce)+se+oe},easeInOutElastic:function(ve,ye,pe,we,be){var ge=1.70158,ke=0,de=we;return ye==0?pe:(ye/=be/2)==2?pe+we:(ke||(ke=be*.3*1.5),de<Math.abs(we)?(de=we,ge=ke/4):ge=ke/(2*Math.PI)*Math.asin(we/de),ye<1)?-.5*de*Math.pow(2,10*(ye-=1))*Math.sin((ye*be-ge)*2*Math.PI/ke)+pe:de*Math.pow(2,-10*(ye-=1))*Math.sin((ye*be-ge)*2*Math.PI/ke)*.5+we+pe},easeInBack:function(no,to,io,ro,uo,fo){fo==undefined&&(fo=1.70158);return ro*(to/=uo)*to*((fo+1)*to-fo)+io},easeOutBack:function(eo,oo,so,ho,co,lo){lo==undefined&&(lo=1.70158);return ho*((oo=oo/co-1)*oo*((lo+1)*oo+lo)+1)+so},easeInOutBack:function(ao,vo,yo,po,wo,bo){return(bo==undefined&&(bo=1.70158),(vo/=wo/2)<1)?po/2*vo*vo*(((bo*=1.525)+1)*vo-bo)+yo:po/2*((vo-=2)*vo*(((bo*=1.525)+1)*vo+bo)+2)+yo},easeInBounce:function(ko,go,ns,ts,is){return ts-this.easeOutBounce(ko,is-go,0,ts,is)+ns},easeOutBounce:function(rs,us,fs,es,os){return(us/=os)<1/2.75?es*7.5625*us*us+fs:us<2/2.75?es*(7.5625*(us-=1.5/2.75)*us+.75)+fs:us<2.5/2.75?es*(7.5625*(us-=2.25/2.75)*us+.9375)+fs:es*(7.5625*(us-=2.625/2.75)*us+.984375)+fs},easeInOutBounce:function(ss,hs,cs,ls,as){return hs<as/2?this.easeInBounce(ss,hs*2,0,ls,as)*.5+cs:this.easeOutBounce(ss,hs*2-as,0,ls,as)*.5+ls*.5+cs}};e.InvokeEasing=s})(i||(i={}));let r;(function(ks){function rh(oh){return ds(()=>oh())}var ds=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;if(!ds){n.Core.IsDebugDefined&&console.log("requestAnimationFrame not supported");var gs,nh=[],th=()=>{var fh=nh,uh;for(nh=[],uh=0;uh<fh.length;uh++){fh[uh]()}},ih=()=>{gs||(gs=setTimeout(()=>{gs=null,th()},20))};ds=eh=>{nh.push(eh),ih()}}ks.RequestAnimationFrame=rh})(r||(r={}));class f{}let t;(function(sh){sh[sh.Unstarted=0]="Unstarted",sh[sh.Running=1]="Running",sh[sh.Completed=2]="Completed",sh[sh.Aborted=3]="Aborted"})(t||(t={}));class u{constructor(){this.durationMs=400,this.easing="linear",this.state=t.Unstarted,this.items=[]}static RequestAnimationFrame(hh){return r.RequestAnimationFrame(hh)}Items(){return this.items.ToArray()}ToList(){return new n.List(this.items.Select(ch=>ch.element).Where(lh=>!!lh)).ToList()}AsDomQuery(){return this.ToList().AsDomQuery()}AddElement(ah,vh,yh,ph){var wh=new f;wh.element=ah,wh.elStyleName=vh,wh.elFinalValue=yh,wh.onTick=ph,this.items.push(wh);return this}AddValue(bh,kh,dh){var gh=new f;gh.numStart=bh,gh.numFinal=kh,gh.onTick=dh,gh.isNumValue=true,this.items.push(gh);return this}Clear(){this.items.Clear();return this}Duration(nc=400){(nc||0)>0||(nc=1),this.durationMs=nc;return this}OnProgress(tc){this.onProgress=tc;return this}OnStart(ic){this.onStart=ic;return this}OnComplete(rc){this.onComplete=rc;return this}OnAbort(uc){this.onAbort=uc;return this}Easing(fc){this.easing=typeof fc=="string"?fc:"linear";return this}initializeFirstRun(ec){var cc,oc,lc,sc;if(ec.element&&n.Type.TypeInspector.IsNullOrUndefined(ec.elFinalValue)){throw new Error("Error in Animator, no elFinalValue");}else if(ec.element&&ec.elStyleName&&ec.elStyleName.Contains("color",true)){cc=n.Utility.Dom.GetComputedStyle(ec.element,ec.elStyleName).StyleValue,ec.rgbStart=n.Colorspace.ColorConverter.ParseToRGB(cc),oc=document.createElement("div"),oc.style.position="absolute",oc.style.width="1px",oc.style.height="1px",oc.style.zIndex="-1000",document.body.appendChild(oc),oc.style.backgroundColor=ec.elFinalValue,lc=n.Utility.Dom.GetComputedStyle(oc,"backgroundColor").StyleValue,oc.parentNode&&oc.parentNode.removeChild(oc),ec.rgbFinal=n.Colorspace.ColorConverter.ParseToRGB(lc),ec.rgbCurrent=ec.rgbStart.Clone()}else if(ec.element&&ec.elStyleName=="clip"){sc=n.Utility.Dom.GetClip(ec.element),ec.clipStart=sc,ec.clipCurrent=Object.assign({},sc),ec.clipFinal=n.Utility.Dom.CalculateClip(ec.element,ec.elFinalValue)}else if(ec.element&&ec.elStyleName=="transform"){var ac=(n.Utility.Dom.SelectTransform(ec.element)||"").split(")").Where(pc=>!!pc).Select(wc=>wc.Trim()+")").Select(bc=>({statement:bc,kind:((bc||"").match(new RegExp("[\\w]+"))||[])[0],args:((bc||"").match(new RegExp("([\\-]?[\\.\\d]+)","ig"))||[]).Select(kc=>parseFloat(kc))})),vc=ec.elFinalValue.split(")").Where(dc=>!!dc).Select(gc=>gc.Trim()+")").Select(nl=>({statement:nl,kind:((nl||"").match(new RegExp("[\\w]+"))||[])[0],args:((nl||"").match(new RegExp("([\\-]?[\\.\\d]+)","ig"))||[]).Select(tl=>parseFloat(tl))})),hc=vc.Select(il=>{var rl=ac.Where(fl=>fl.kind==il.kind).pop(),ul;for(rl||(rl={statement:il.statement,kind:il.kind,args:il.args.Select(()=>il.kind.indexOf("scale")==0?1:0)}),ul=false;rl.args.length<il.args.length;){ul=true,rl.args.push(rl.args.length>0?rl.args[rl.args.length-1]:il.kind.indexOf("scale")==0?1:0)};while(rl.args.length>il.args.length){il.args.push(il.args.length>0?il.args[il.args.length-1]:il.kind.indexOf("scale")==0?1:0)};return{startValuesArr:rl.args,finalValuesArr:il.args,stringFormat:ul?il.statement:rl.statement}}),yc=0;ec.transformStart=hc.AsEnumerable().SelectMany(el=>el.startValuesArr).ToArray(),ec.transformCurrent=ec.transformStart.ToArray(),ec.transformFinal=hc.AsEnumerable().SelectMany(ol=>ol.finalValuesArr).ToArray(),ec.transformFormat=hc.Select(sl=>sl.stringFormat).join(" ").replace(new RegExp("([\\-]?[\\.\\d]+)","ig"),function(){return"{"+yc+++"}"})}else if(ec.element){let hl=n.Utility.Dom.GetComputedStyle(ec.element,ec.elStyleName);ec.numStart=hl.NumericValue,ec.elUnits||(ec.elUnits=typeof ec.elFinalValue=="string"&&ec.elFinalValue.indexOf("%")>0?"%":hl.Units);let cl;if(ec.elUnits=="%"&&ec.elStyleName.indexOf("margin")==0){ec.elUnits=null;switch(n.Utility.Dom.ConvertCssNameToCamel(ec.elStyleName)){case"marginTop":case"marginBottom":cl=ec.element.offsetHeight;break;case"marginLeft":case"marginRight":cl=ec.element.offsetWidth}}if(n.Type.TypeInspector.IsNullOrUndefined(ec.elFinalValue)){throw new Error("Error in Animator, finalValue is not defined");}if(ec.numFinal=n.Utility.Dom.CalculateNumericValue(hl.NumericValue,ec.elFinalValue),ec.numCurrent=ec.numStart,!n.Type.TypeInspector.IsNumber(ec.numStart)||!n.Type.TypeInspector.IsNumber(ec.numFinal)){throw new Error("Calysto.Animator error, invalid start/stop value. Name: "+ec.elStyleName+", styleFinal: "+ec.elFinalValue+", numStart: "+ec.numStart+", numFinal: "+ec.numFinal);}}else ec.isNumValue&&(ec.numCurrent=ec.numStart)}GetCurrent(ll,al,vl){return u.InvokeEasing(this.easing,al,vl,ll/this.durationMs)}TimerTick(yl){var kl,bl,pl,dl,wl,gl;if(this.state==t.Running){if(kl=false,bl=0,yl){for(this.items=this.items.Where(na=>na.isNumValue||!!na.element&&!!na.elStyleName&&!n.Type.TypeInspector.IsNullOrUndefined(na.elFinalValue)),wl=0;wl<this.items.length;wl++){this.initializeFirstRun(this.items[wl])};this.animateStartTicks=Date.now()}else bl=Date.now()-(this.animateStartTicks||0),kl=(this.durationMs||0)<=(bl||0);for(wl=0;wl<this.items.length;wl++){if(pl=this.items[wl],pl.onTick){pl.onTick(this,pl.numCurrent)};if(pl.rgbStart){n.Collections.ForEach(["r","g","b","a"],ta=>{var ia=kl?pl.rgbFinal[ta]:this.GetCurrent(bl,pl.rgbStart[ta],pl.rgbFinal[ta]);pl.rgbCurrent[ta]=ta=="a"?ia:Math.floor(ia)}),n.Utility.Dom.SetStyleValue(pl.element,pl.elStyleName,pl.rgbCurrent.ToRgbString())}else if(pl.clipStart){n.Collections.ForEach(["top","right","bottom","left"],ra=>{pl.clipCurrent[ra]=kl?pl.clipFinal[ra]:Math.floor(this.GetCurrent(bl,pl.clipStart[ra],pl.clipFinal[ra]))}),n.Utility.Dom.SetClip(pl.element,pl.clipCurrent)}else if(pl.transformStart){for(dl=pl.transformFormat,wl=0;wl<pl.transformCurrent.length;wl++){pl.transformCurrent[wl]=kl?pl.transformFinal[wl]:this.GetCurrent(bl,pl.transformStart[wl],pl.transformFinal[wl]),dl=dl.replace("{"+wl+"}",pl.transformCurrent[wl]+"")};$$calysto(pl.element).ApplyTransform(dl)}else pl.numCurrent=kl?pl.numFinal:this.GetCurrent(bl,pl.numStart,pl.numFinal),pl.element&&((pl.elUnits=="px"||pl.elUnits=="%")&&(pl.numCurrent=Math.round(pl.numCurrent)),n.Utility.Dom.SetStyleValue(pl.element,pl.elStyleName,pl.numCurrent,pl.elUnits));if(pl.onTick){pl.onTick(this,pl.numCurrent)}}if(this.onProgress){gl=bl/this.durationMs*100,gl>100&&(gl=100);this.onProgress(this,gl)}if(kl){if(this.state=t.Completed,this.onComplete){this.onComplete(this)}}else n.Animator.RequestAnimationFrame(()=>this.TimerTick(false))}}IsRunning(){return this.state==t.Running}Start(ua=0){if(this.IsRunning()){throw new Error("animation is already running");}if(this._delayTimeoutId&&(clearTimeout(this._delayTimeoutId),this._delayTimeoutId=null),ua>0){this._delayTimeoutId=setTimeout(()=>this.Start(),ua);return this}if(this.state=t.Running,this.onStart){this.onStart(this)};this.TimerTick(true);return this}Abort(){if(this._delayTimeoutId&&(clearTimeout(this._delayTimeoutId),this._delayTimeoutId=null),this.state=t.Aborted,this.onAbort){this.onAbort(this)};return this}}u.InvokeEasing=i.InvokeEasing,n.Animator=u}(Calysto||(Calysto={})),function(n){var t;(function(i){function r(w="#98c7ef",b="#4b84b5",k=false){let g=[0,.125,.25,.375,.5,.625,.75,.875],d=k?g.reverse().AsEnumerable().GetEnumerator():g.AsEnumerable().GetEnumerator();return`	<svg class="lds-blocks" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">
		<rect x="17" y="17" width="20" height="20" fill="${b}">
			<animate attributeName="fill" values="${w};${b};${b}" keyTimes="0;0.125;1" dur="1s" repeatCount="indefinite" begin="${d.GetNext().GetValue()}s" calcMode="discrete"></animate>
		</rect>
		<rect x="40" y="17" width="20" height="20" fill="${b}">
			<animate attributeName="fill" values="${w};${b};${b}" keyTimes="0;0.125;1" dur="1s" repeatCount="indefinite" begin="${d.GetNext().GetValue()}s" calcMode="discrete"></animate>
		</rect>
		<rect x="63" y="17" width="20" height="20" fill="${b}">
			<animate attributeName="fill" values="${w};${b};${b}" keyTimes="0;0.125;1" dur="1s" repeatCount="indefinite" begin="${d.GetNext().GetValue()}s" calcMode="discrete"></animate>
		</rect>
		<rect x="63" y="40" width="20" height="20" fill="${b}">
			<animate attributeName="fill" values="${w};${b};${b}" keyTimes="0;0.125;1" dur="1s" repeatCount="indefinite" begin="${d.GetNext().GetValue()}s" calcMode="discrete"></animate>
		</rect>
		<rect x="63" y="63" width="20" height="20" fill="${b}">
			<animate attributeName="fill" values="${w};${b};${b}" keyTimes="0;0.125;1" dur="1s" repeatCount="indefinite" begin="${d.GetNext().GetValue()}s" calcMode="discrete"></animate>
		</rect>
		<rect x="40" y="63" width="20" height="20" fill="${b}">
			<animate attributeName="fill" values="${w};${b};${b}" keyTimes="0;0.125;1" dur="1s" repeatCount="indefinite" begin="${d.GetNext().GetValue()}s" calcMode="discrete"></animate>
		</rect>
		<rect x="17" y="63" width="20" height="20" fill="${b}">
			<animate attributeName="fill" values="${w};${b};${b}" keyTimes="0;0.125;1" dur="1s" repeatCount="indefinite" begin="${d.GetNext().GetValue()}s" calcMode="discrete"></animate>
		</rect>
		<rect x="17" y="40" width="20" height="20" fill="${b}">
			<animate attributeName="fill" values="${w};${b};${b}" keyTimes="0;0.125;1" dur="1s" repeatCount="indefinite" begin="${d.GetNext().GetValue()}s" calcMode="discrete"></animate>
		</rect>
	</svg>`}function u(nt="black",tt=false){let rt="0 0 0; 45 0 0; 90 0 0; 135 0 0; 180 0 0; 225 0 0 ; 270 0 0; 315 0 0; 360 0 0",ut=[5.375,6.438,8.063,10.063,10.75,12.531,14.344,16],it=ut.AsEnumerable().GetEnumerator();tt&&(rt=rt.split(";").reverse().join(";"),it=ut.reverse().AsEnumerable().GetEnumerator());return`<svg class="snake-main" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 128" x="384" y="0">
				<circle cx="16" cy="64" r="${it.GetNext().GetValue()}" fill="${nt}" />
				<circle cx="16" cy="64" r="${it.GetNext().GetValue()}" fill="${nt}" transform="rotate(45 64 64)" />
				<circle cx="16" cy="64" r="${it.GetNext().GetValue()}" fill="${nt}" transform="rotate(90 64 64)" />
				<circle cx="16" cy="64" r="${it.GetNext().GetValue()}" fill="${nt}" transform="rotate(135 64 64)" />
				<circle cx="16" cy="64" r="${it.GetNext().GetValue()}" fill="${nt}" transform="rotate(180 64 64)" />
				<circle cx="16" cy="64" r="${it.GetNext().GetValue()}" fill="${nt}" transform="rotate(225 64 64)" />
				<circle cx="16" cy="64" r="${it.GetNext().GetValue()}" fill="${nt}" transform="rotate(270 64 64)" />
				<circle cx="16" cy="64" r="${it.GetNext().GetValue()}" fill="${nt}" transform="rotate(315 64 64)" />
				<animateTransform attributeName="transform" type="rotate" calcMode="discrete" values="${rt}" keyTimes="0;0.125;0.25;0.375;0.5;0.625;0.75;0.875;1" dur="1s" begin="0s" repeatCount="indefinite"></animateTransform>
			</svg>`}function f(ft="black",et=false){let ht="0 0 0; 45 0 0; 90 0 0; 135 0 0; 180 0 0; 225 0 0 ; 270 0 0; 315 0 0; 360 0 0",ct=[.1,.2,.35,.5,.7,.8,.9],ot=ct.AsEnumerable().GetEnumerator();et&&(ht=ht.split(";").reverse().join(";"),ot=ct.reverse().AsEnumerable().GetEnumerator());let st=n.Colorspace.ColorConverter.ParseToRGB(ft);return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 128" x="448" y="0">
			<circle cx="16" cy="64" r="16" fill="${st.ToRgbString()}" />
			<circle cx="16" cy="64" r="16" fill="${st.Set(lt=>lt.a=ot.GetNext().GetValue()).ToRgbString()}" transform="rotate(45, 64, 64)" />
			<circle cx="16" cy="64" r="16" fill="${st.Set(at=>at.a=ot.GetNext().GetValue()).ToRgbString()}" transform="rotate(90,64,64)" />
			<circle cx="16" cy="64" r="16" fill="${st.Set(vt=>vt.a=ot.GetNext().GetValue()).ToRgbString()}" transform="rotate(135,64,64)" />
			<circle cx="16" cy="64" r="16" fill="${st.Set(yt=>yt.a=ot.GetNext().GetValue()).ToRgbString()}" transform="rotate(180,64,64)" />
			<circle cx="16" cy="64" r="16" fill="${st.Set(pt=>pt.a=ot.GetNext().GetValue()).ToRgbString()}" transform="rotate(225,64,64)" />
			<circle cx="16" cy="64" r="16" fill="${st.Set(wt=>wt.a=ot.GetNext().GetValue()).ToRgbString()}" transform="rotate(270,64,64)" />
			<circle cx="16" cy="64" r="16" fill="${st.Set(bt=>bt.a=ot.GetNext().GetValue()).ToRgbString()}" transform="rotate(315,64,64)" />
			<animateTransform attributeName="transform" type="rotate" calcMode="discrete" values="${ht}" keyTimes="0;0.125;0.25;0.375;0.5;0.625;0.75;0.875;1" dur="1s" begin="0s" repeatCount="indefinite"></animateTransform>
		</svg>`}function e(kt="black",dt="gainsboro",gt=false){let ni="0 64 64; 45 64 64; 90 64 64; 135 64 64; 180 64 64; 225 64 64; 270 64 64; 315 64 64; 360 64 64";gt&&(ni=ni.split(";").reverse().join(";"));return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 128" x="576" y="0">
			<path d="M38.52 33.37L21.36 16.2A63.6 63.6 0 0 1 59.5.16v24.3a39.5 39.5 0 0 0-20.98 8.92z" fill="${dt}" />
			<path d="M38.52 33.37L21.36 16.2A63.6 63.6 0 0 1 59.5.16v24.3a39.5 39.5 0 0 0-20.98 8.92z" fill="${dt}" transform="rotate(45 64 64)" />
			<path d="M38.52 33.37L21.36 16.2A63.6 63.6 0 0 1 59.5.16v24.3a39.5 39.5 0 0 0-20.98 8.92z" fill="${dt}" transform="rotate(90 64 64)" />
			<path d="M38.52 33.37L21.36 16.2A63.6 63.6 0 0 1 59.5.16v24.3a39.5 39.5 0 0 0-20.98 8.92z" fill="${dt}" transform="rotate(135 64 64)" />
			<path d="M38.52 33.37L21.36 16.2A63.6 63.6 0 0 1 59.5.16v24.3a39.5 39.5 0 0 0-20.98 8.92z" fill="${dt}" transform="rotate(180 64 64)" />
			<path d="M38.52 33.37L21.36 16.2A63.6 63.6 0 0 1 59.5.16v24.3a39.5 39.5 0 0 0-20.98 8.92z" fill="${dt}" transform="rotate(225 64 64)" />
			<path d="M38.52 33.37L21.36 16.2A63.6 63.6 0 0 1 59.5.16v24.3a39.5 39.5 0 0 0-20.98 8.92z" fill="${dt}" transform="rotate(270 64 64)" />
			<path d="M38.52 33.37L21.36 16.2A63.6 63.6 0 0 1 59.5.16v24.3a39.5 39.5 0 0 0-20.98 8.92z" fill="${dt}" transform="rotate(315 64 64)" />
			<path d="M38.52 33.37L21.36 16.2A63.6 63.6 0 0 1 59.5.16v24.3a39.5 39.5 0 0 0-20.98 8.92z" fill="${kt}">
				<animateTransform attributeName="transform" type="rotate" calcMode="discrete" values="${ni}" keyTimes="0;0.125;0.25;0.375;0.5;0.625;0.75;0.875;1" dur="1s" begin="0s" repeatCount="indefinite"></animateTransform>
			</path>
		</svg>`}function o(ti="black"){return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="10 10 108 108" x="704" y="0">
			<path fill="${ti}" d="M109.25 55.5h-36l12-12a29.54 29.54 0 0 0-49.53 12H18.75A46.04 46.04 0 0 1 96.9 31.84l12.35-12.34v36zm-90.5 17h36l-12 12a29.54 29.54 0 0 0 49.53-12h16.97A46.04 46.04 0 0 1 31.1 96.16L18.74 108.5v-36z">
			</path>
			<animateTransform attributeName="transform" type="rotate" calcMode="linear" values="0 0 0;360 0 0" keyTimes="0;1" dur="1s" begin="0s" repeatCount="indefinite"></animateTransform>
		</svg>`}function s(ii="black",ri=false){let ui=n.Colorspace.ColorConverter.ParseToRGB(ii),oi=[.1,.1,.1,.1,.2,.3,.4,.5,.6,.7,.8,.9],fi=oi.AsEnumerable().GetEnumerator(),ei="0 0 0;30 0 0;60 0 0;90 0 0;120 0 0;150 0 0;180 0 0;210 0 0;240 0 0;270 0 0;300 0 0;330 0 0;360 0 0";ri&&(ei=ei.split(";").reverse().join(";"),fi=oi.reverse().AsEnumerable().GetEnumerator());return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 128" x="640" y="0">
			<path d="M59.6 0h8v40h-8V0z" fill="${ui.ToRgbString()}" />
			<path d="M59.6 0h8v40h-8V0z" fill="${ui.Set(si=>si.a=fi.GetNext().GetValue()).ToRgbString()}" transform="rotate(30 64 64)" />
			<path d="M59.6 0h8v40h-8V0z" fill="${ui.Set(hi=>hi.a=fi.GetNext().GetValue()).ToRgbString()}" transform="rotate(60 64 64)" />
			<path d="M59.6 0h8v40h-8V0z" fill="${ui.Set(ci=>ci.a=fi.GetNext().GetValue()).ToRgbString()}" transform="rotate(90 64 64)" />
			<path d="M59.6 0h8v40h-8V0z" fill="${ui.Set(li=>li.a=fi.GetNext().GetValue()).ToRgbString()}" transform="rotate(120 64 64)" />
			<path d="M59.6 0h8v40h-8V0z" fill="${ui.Set(ai=>ai.a=fi.GetNext().GetValue()).ToRgbString()}" transform="rotate(150 64 64)" />
			<path d="M59.6 0h8v40h-8V0z" fill="${ui.Set(vi=>vi.a=fi.GetNext().GetValue()).ToRgbString()}" transform="rotate(180 64 64)" />
			<path d="M59.6 0h8v40h-8V0z" fill="${ui.Set(yi=>yi.a=fi.GetNext().GetValue()).ToRgbString()}" transform="rotate(210 64 64)" />
			<path d="M59.6 0h8v40h-8V0z" fill="${ui.Set(pi=>pi.a=fi.GetNext().GetValue()).ToRgbString()}" transform="rotate(240 64 64)" />
			<path d="M59.6 0h8v40h-8V0z" fill="${ui.Set(wi=>wi.a=fi.GetNext().GetValue()).ToRgbString()}" transform="rotate(270 64 64)" />
			<path d="M59.6 0h8v40h-8V0z" fill="${ui.Set(bi=>bi.a=fi.GetNext().GetValue()).ToRgbString()}" transform="rotate(300 64 64)" />
			<path d="M59.6 0h8v40h-8V0z" fill="${ui.Set(ki=>ki.a=fi.GetNext().GetValue()).ToRgbString()}" transform="rotate(330 64 64)" />
			<animateTransform attributeName="transform" type="rotate" calcMode="discrete" values="${ei}" keyTimes="0;0.08;0.16;0.25;0.33;0.42;0.5;0.58;0.67;0.75;0.83;0.92;1" dur="1s" begin="0s" repeatCount="indefinite"></animateTransform>
		</svg>`}function h(di="black",gi=false){return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" class="lds-dual-ring">
			<circle cx="50" cy="50" fill="none" stroke-linecap="round" r="40" stroke-width="15" stroke="${di}" stroke-dasharray="42.411500823462205 42.411500823462205" transform="rotate(60 50 50)">
				<animateTransform attributeName="transform" type="rotate" calcMode="linear" values="${gi?360:0} 50 50;${gi?0:360} 50 50" keyTimes="0;1" dur="1s" begin="0s" repeatCount="indefinite"></animateTransform>
			</circle>
		</svg>`}function c(nr="black"){return`<svg viewBox="0 -45 120 120" xmlns="http://www.w3.org/2000/svg" fill="${nr}">
    <circle cx="15" cy="15" r="15">
        <animate attributeName="r" from="15" to="15"
                 begin="0s" dur="0.8s"
                 values="15;9;15" calcMode="linear"
                 repeatCount="indefinite" />
        <animate attributeName="fill-opacity" from="1" to="1"
                 begin="0s" dur="0.8s"
                 values="1;.5;1" calcMode="linear"
                 repeatCount="indefinite" />
    </circle>
    <circle cx="60" cy="15" r="9" fill-opacity="0.3">
        <animate attributeName="r" from="9" to="9"
                 begin="0s" dur="0.8s"
                 values="9;15;9" calcMode="linear"
                 repeatCount="indefinite" />
        <animate attributeName="fill-opacity" from="0.5" to="0.5"
                 begin="0s" dur="0.8s"
                 values=".5;1;.5" calcMode="linear"
                 repeatCount="indefinite" />
    </circle>
    <circle cx="105" cy="15" r="15">
        <animate attributeName="r" from="15" to="15"
                 begin="0s" dur="0.8s"
                 values="15;9;15" calcMode="linear"
                 repeatCount="indefinite" />
        <animate attributeName="fill-opacity" from="1" to="1"
                 begin="0s" dur="0.8s"
                 values="1;.5;1" calcMode="linear"
                 repeatCount="indefinite" />
    </circle>
</svg>
`}function l(tr="black"){return`<svg viewBox="0 0 57 57" xmlns="http://www.w3.org/2000/svg" stroke="${tr}">
    <g fill="none" fill-rule="evenodd">
        <g transform="translate(1 1)" stroke-width="2">
            <circle cx="5" cy="50" r="5">
                <animate attributeName="cy"
                     begin="0s" dur="2.2s"
                     values="50;5;50;50"
                     calcMode="linear"
                     repeatCount="indefinite" />
                <animate attributeName="cx"
                     begin="0s" dur="2.2s"
                     values="5;27;49;5"
                     calcMode="linear"
                     repeatCount="indefinite" />
            </circle>
            <circle cx="27" cy="5" r="5">
                <animate attributeName="cy"
                     begin="0s" dur="2.2s"
                     from="5" to="5"
                     values="5;50;50;5"
                     calcMode="linear"
                     repeatCount="indefinite" />
                <animate attributeName="cx"
                     begin="0s" dur="2.2s"
                     from="27" to="27"
                     values="27;49;5;27"
                     calcMode="linear"
                     repeatCount="indefinite" />
            </circle>
            <circle cx="49" cy="50" r="5">
                <animate attributeName="cy"
                     begin="0s" dur="2.2s"
                     values="50;50;5;50"
                     calcMode="linear"
                     repeatCount="indefinite" />
                <animate attributeName="cx"
                     from="49" to="49"
                     begin="0s" dur="2.2s"
                     values="49;5;27;49"
                     calcMode="linear"
                     repeatCount="indefinite" />
            </circle>
        </g>
    </g>
</svg>`}function a(ir="black"){return`<svg viewBox="0 0 135 140" xmlns="http://www.w3.org/2000/svg" fill="${ir}">
    <rect y="10" width="15" height="120" rx="6">
        <animate attributeName="height"
             begin="0.5s" dur="1s"
             values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear"
             repeatCount="indefinite" />
        <animate attributeName="y"
             begin="0.5s" dur="1s"
             values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear"
             repeatCount="indefinite" />
    </rect>
    <rect x="30" y="10" width="15" height="120" rx="6">
        <animate attributeName="height"
             begin="0.25s" dur="1s"
             values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear"
             repeatCount="indefinite" />
        <animate attributeName="y"
             begin="0.25s" dur="1s"
             values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear"
             repeatCount="indefinite" />
    </rect>
    <rect x="60" width="15" height="140" rx="6">
        <animate attributeName="height"
             begin="0s" dur="1s"
             values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear"
             repeatCount="indefinite" />
        <animate attributeName="y"
             begin="0s" dur="1s"
             values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear"
             repeatCount="indefinite" />
    </rect>
    <rect x="90" y="10" width="15" height="120" rx="6">
        <animate attributeName="height"
             begin="0.25s" dur="1s"
             values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear"
             repeatCount="indefinite" />
        <animate attributeName="y"
             begin="0.25s" dur="1s"
             values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear"
             repeatCount="indefinite" />
    </rect>
    <rect x="120" y="10" width="15" height="120" rx="6">
        <animate attributeName="height"
             begin="0.5s" dur="1s"
             values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear"
             repeatCount="indefinite" />
        <animate attributeName="y"
             begin="0.5s" dur="1s"
             values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear"
             repeatCount="indefinite" />
    </rect>
</svg>
`}function v(rr="black",ur="gainsboro",fr=false){return`<svg viewBox="0 0 38 38" xmlns="http://www.w3.org/2000/svg" stroke="${rr}">
    <g fill="none" fill-rule="evenodd">
        <g transform="translate(1 1)" stroke-width="2">
            <circle stroke="${ur}" stroke-opacity="1" cx="18" cy="18" r="18"/>
            <path d="M36 18c0-9.94-8.06-18-18-18">
                <animateTransform
                    attributeName="transform"
                    type="rotate"
                    from="${fr?360:0} 18 18"
                    to="${fr?0:360} 18 18"
                    dur="1s"
                    repeatCount="indefinite"/>
            </path>
        </g>
    </g>
</svg>`}function y(er){return`<svg class="lds-message" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><g transform="translate(20 50)">
<circle cx="0" cy="0" r="7" fill="${er||"#e15b64"}" transform="scale(0.99275 0.99275)">
  <animateTransform attributeName="transform" type="scale" begin="-0.375s" calcMode="spline" keySplines="0.3 0 0.7 1;0.3 0 0.7 1" values="0;1;0" keyTimes="0;0.5;1" dur="1s" repeatCount="indefinite"></animateTransform>
</circle>
</g><g transform="translate(40 50)">
<circle cx="0" cy="0" r="7" fill="${er||"#f47e60"}" transform="scale(0.773605 0.773605)">
  <animateTransform attributeName="transform" type="scale" begin="-0.25s" calcMode="spline" keySplines="0.3 0 0.7 1;0.3 0 0.7 1" values="0;1;0" keyTimes="0;0.5;1" dur="1s" repeatCount="indefinite"></animateTransform>
</circle>
</g><g transform="translate(60 50)">
<circle cx="0" cy="0" r="7" fill="${er||"#f8b26a"}" transform="scale(0.42525 0.42525)">
  <animateTransform attributeName="transform" type="scale" begin="-0.125s" calcMode="spline" keySplines="0.3 0 0.7 1;0.3 0 0.7 1" values="0;1;0" keyTimes="0;0.5;1" dur="1s" repeatCount="indefinite"></animateTransform>
</circle>
</g><g transform="translate(80 50)">
<circle cx="0" cy="0" r="7" fill="${er||"#abbd81"}" transform="scale(0.113418 0.113418)">
  <animateTransform attributeName="transform" type="scale" begin="0s" calcMode="spline" keySplines="0.3 0 0.7 1;0.3 0 0.7 1" values="0;1;0" keyTimes="0;0.5;1" dur="1s" repeatCount="indefinite"></animateTransform>
</circle>
</g></svg>`}function p(or){return`<svg class="lds-microsoft" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><g transform="rotate(0)"><circle cx="81.73413361164941" cy="74.35045716034882" fill="${or||"#e15b64"}" r="5" transform="rotate(340.001 49.9999 50)">
  <animateTransform attributeName="transform" type="rotate" calcMode="spline" values="0 50 50;360 50 50" times="0;1" keySplines="0.5 0 0.5 1" repeatCount="indefinite" dur="1.5s" begin="0s"></animateTransform>
</circle><circle cx="74.35045716034882" cy="81.73413361164941" fill="${or||"#f47e60"}" r="5" transform="rotate(348.352 50.0001 50.0001)">
  <animateTransform attributeName="transform" type="rotate" calcMode="spline" values="0 50 50;360 50 50" times="0;1" keySplines="0.5 0 0.5 1" repeatCount="indefinite" dur="1.5s" begin="-0.0625s"></animateTransform>
</circle><circle cx="65.3073372946036" cy="86.95518130045147" fill="${or||"#f8b26a"}" r="5" transform="rotate(354.236 50 50)">
  <animateTransform attributeName="transform" type="rotate" calcMode="spline" values="0 50 50;360 50 50" times="0;1" keySplines="0.5 0 0.5 1" repeatCount="indefinite" dur="1.5s" begin="-0.125s"></animateTransform>
</circle><circle cx="55.22104768880207" cy="89.65779445495241" fill="${or||"#abbd81"}" r="5" transform="rotate(357.958 50.0002 50.0002)">
  <animateTransform attributeName="transform" type="rotate" calcMode="spline" values="0 50 50;360 50 50" times="0;1" keySplines="0.5 0 0.5 1" repeatCount="indefinite" dur="1.5s" begin="-0.1875s"></animateTransform>
</circle><circle cx="44.77895231119793" cy="89.65779445495241" fill="${or||"#849b87"}" r="5" transform="rotate(359.76 50.0064 50.0064)">
  <animateTransform attributeName="transform" type="rotate" calcMode="spline" values="0 50 50;360 50 50" times="0;1" keySplines="0.5 0 0.5 1" repeatCount="indefinite" dur="1.5s" begin="-0.25s"></animateTransform>
</circle><circle cx="34.692662705396415" cy="86.95518130045147" fill="${or||"#e15b64"}" r="5" transform="rotate(0.183552 50 50)">
  <animateTransform attributeName="transform" type="rotate" calcMode="spline" values="0 50 50;360 50 50" times="0;1" keySplines="0.5 0 0.5 1" repeatCount="indefinite" dur="1.5s" begin="-0.3125s"></animateTransform>
</circle><circle cx="25.649542839651176" cy="81.73413361164941" fill="${or||"#f47e60"}" r="5" transform="rotate(1.86457 50 50)">
  <animateTransform attributeName="transform" type="rotate" calcMode="spline" values="0 50 50;360 50 50" times="0;1" keySplines="0.5 0 0.5 1" repeatCount="indefinite" dur="1.5s" begin="-0.375s"></animateTransform>
</circle><circle cx="18.2658663883506" cy="74.35045716034884" fill="${or||"#f8b26a"}" r="5" transform="rotate(5.45126 50 50)">
  <animateTransform attributeName="transform" type="rotate" calcMode="spline" values="0 50 50;360 50 50" times="0;1" keySplines="0.5 0 0.5 1" repeatCount="indefinite" dur="1.5s" begin="-0.4375s"></animateTransform>
</circle><animateTransform attributeName="transform" type="rotate" calcMode="spline" values="0 50 50;0 50 50" times="0;1" keySplines="0.5 0 0.5 1" repeatCount="indefinite" dur="1.5s"></animateTransform></g></svg>`}i.Squares=r,i.Snake=u,i.BallsRing=f,i.MsRing=e,i.TwoArrows=o,i.Flower=s,i.ThreeArcs=h,i.ThreeDots=c,i.BallTriangle=l,i.Bars=a,i.Oval=v,i.Messenger=y,i.RotatingBalls=p})(t=n.Preloaders||(n.Preloaders={}))}(Calysto||(Calysto={})),function(n){function i(f,e){for(var s={},o=0;o<f.length;o++){s[f[o]]=e[o]};return s}function r(h){var c=[],l;if(c.length==0){for(l in h){c.push(l)}};return c}function u(a,v){for(var p=[],y=0;y<v.length;y++){p.push(a[v[y]])};return p}class t{constructor(){this.Columns=[],this.Rows=[]}ToObjectsArray(){for(var b=[],w=0;w<this.Rows.length;w++){b.push(i(this.Columns,this.Rows[w]))};return b}Clone(){var k=new n.DataTable;k.Columns=this.Columns.slice(),k.Rows=this.Rows.slice(),k.TotalCount=this.TotalCount,k.TableName=this.TableName;return k}fromObjectsArray(d){for(var nt,tt,g=0;g<d.length;g++){nt=d[g],g==0&&(this.Columns=r(nt)),tt=u(nt,this.Columns),this.Rows.push(tt)}}fromDataTable(it){this.Columns=it.Columns.slice(0),this.Rows=it.Rows.slice(0),this.TotalCount=it.TotalCount,this.TableName=it.TableName}static CreateFrom(rt){var ut=new t;if(rt){if(rt.Columns&&rt.Rows){ut.fromDataTable(rt)}else if(rt.push&&rt.pop){ut.fromObjectsArray(rt)}else throw new Error("Calysto.DataTable: Invalid data, can't create data table");}return ut}}n.DataTable=t}(Calysto||(Calysto={})),function(n){function t(r){return r?r.ToArray?r.ToArray():n.CalystoEnumerable.From(r).ToArray():[]}class i extends n.CalystoEnumerable{constructor(u){if(super(()=>n.CalystoEnumerator.From(this.array)),this.array=[],typeof u=="string"){throw new Error("List source can not be string");}for(let f of t(u)){this.array.push(f)}}get InnerArray(){return this.array}Add(e){this.array.push(e);return this}AddRange(o){this.array.AddRange(o);return this}Count(){return this.array.length}Any(){return this.array.length>0}Insert(s,h){this.array.splice(s,0,h);return this}ElementAt(c,l){return this.array.length>c?this.array[c]:l}Remove(a){return this.RemoveAt(this.IndexOf(a))}RemoveAt(v){return this.RemoveRange(v,1)}RemoveRange(y,p){(y>0||y==0)&&this.array.splice(y,p||1);return this}Reverse(){this.array.reverse();return this}IndexOf(w){return this.array.indexOf(w)}Contains(b){return this.IndexOf(b)>=0}Clear(){this.array.splice(0,this.array.length);return this}ToArray(){return this.array.slice(0)}ToList(){return new n.List(this.array.slice(0))}ToStringJoined(k){return this.array.join(k||"")}ForEach(d){typeof d=="string"&&(d=n.Utility.Expressions.CompileLambdaNoReturnCheck(d)),n.Collections.ForEach(this.array,d);return this}FirstOrDefault(g){return this.array.length>0?this.array[0]:g}First(){var nt;if(((nt=this.array)===null||nt===void 0?void 0:nt.length)>0){return this.array[0]};throw new Error("Error in First(), no items");}LastOrDefault(tt){return this.array.length>0?this.array[this.array.length-1]:tt}Last(){var it;if(((it=this.array)===null||it===void 0?void 0:it.length)>0){return this.array[this.array.length-1]};throw new Error("Error in Last(), no items");}}n.List=i}(Calysto||(Calysto={})),function(n){var t;(function(i){class u{constructor(){this.Pass=-1}}class r{CompressImpl(f,e){var h=new n.Regex("(.+?)\\1+?").SelectSegments(f).Select(function(y){return y.Value}).Distinct().ToList(),o=h.OrderByDescending(function(p){return p.length}).Skip(h.Take(2).Count()>1?1:0).ToList(),c=0,s=o.AsEnumerable().ToDictionary(function(w){return w},function(){return c++}).ToRawObject(true),l=o.AsEnumerable().Select(function(b){return"("+RegExp.Escape(b)+")"}).ToStringJoined("|"),a=new n.Regex(l).SelectSegments(f).Select(function(k){k.Success||s[k.Value]||(s[k.Value]=c++,o.Add(k.Value));return s[k.Value]}).ToArray(),v={Dic:o.ToArray(),Cont:a,Pass:e};return n.Json.Serialize(v)}Compress(d,g){var tt,nt,it;for(arguments.length<2&&(g=1),tt=0,nt=d;tt<=g;){if(it=this.CompressImpl(nt,tt),it.length>nt.length){return nt};nt=it,tt++}return nt}Decompress(rt){if(!rt.Contains('"Dic"')||!rt.Contains('"Cont"')||!rt.Contains('"Pass"')){return rt};var ut=n.Json.Deserialize(rt),et=0,ot=ut.Dic.AsEnumerable().ToDictionary(function(){return"n"+et++},function(st){return st}).ToRawObject(true),ft=ut.Cont.AsEnumerable().Select(function(ht){return ot["n"+ht]}).ToStringJoined();return ut.Pass>0?this.Decompress(ft):ft}}i.StringCompressor=r})(t=n.Utility||(n.Utility={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){class f{constructor(e){e+="!(&#@`#)#$%^*(_+~`";var o=e.ToCharArray().AsEnumerable().Cycle(1e3).Select((s,h)=>({ch:s.charCodeAt(0),fromByte:h})).Take(256).OrderBy(c=>c.ch).Select((l,a)=>({ch:l.ch,fromByte:l.fromByte,toByte:a})).ToList();this._dicEncryption=o.AsEnumerable().ToDictionary(v=>v.fromByte+"_",y=>y.toByte).ToRawObject(true),this._dicDecryption=o.AsEnumerable().ToDictionary(p=>p.toByte+"_",w=>w.fromByte).ToRawObject(true)}Encrypt(b){typeof b=="string"&&(b=n.Utility.Encoding.UTF8.GetBytes(b));return b.Select(k=>this._dicEncryption[k+"_"])}Decrypt(d){return d.Select(g=>this._dicDecryption[g+"_"])}DecryptToString(nt){return n.Utility.Encoding.UTF8.GetString(this.Decrypt(nt))}}u.SimpleEncryptor=f})(r=i.Cryptography||(i.Cryptography={}))})(t=n.Security||(n.Security={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){let f;(function(e){function o(nt){console.error(nt);return false}function h(tt){return typeof tt=="string"?tt:tt===undefined?"undefined":tt===null?"null":isNaN(tt)?"NaN":JSON.stringify(tt)}function c(st,ht,ct,lt){return n.Type.TypeInspector.AreValuesEqual(st,ht)?true:o(new s("Assert.AreEqual failed.").AddNameValue("Expected",st).AddNameValue("Actual",ht).AddCustom(ct,lt).ToStringFormated())}function l(at,vt,yt,pt){return n.Type.TypeInspector.AreValuesEqual(at,vt)?o(new s("Assert.AreNotEqual failed.").AddNameValue("NotExpected",at).AddNameValue("Actual",vt).AddCustom(yt,pt).ToStringFormated()):true}function a(wt,bt,kt,dt){return wt===bt?true:o(new s("Assert.AreSame failed.").AddNameValue("Expected",wt).AddNameValue("Actual",bt).AddCustom(kt,dt).ToStringFormated())}function v(gt,ni,ti,ii){return gt!==ni?true:o(new s("Assert.AreNotSame failed.").AddNameValue("Expected",gt).AddNameValue("Actual",ni).AddCustom(ti,ii).ToStringFormated())}function y(ri,ui){return o(new s(`Assert.Fail.`).AddCustom(ri,ui).ToStringFormated())}function p(fi,ei){return o(new s(`Assert.Inconclusive.`).AddCustom(fi,ei).ToStringFormated())}function w(oi,si,hi){return oi===false?o(new s(`Assert.IsFalse failed.`).AddCustom(si,hi).ToStringFormated()):true}function b(ci,li,ai){return ci===true?true:o(new s(`Assert.IsTrue failed.`).AddCustom(li,ai).ToStringFormated())}function k(vi,yi,pi){return n.Type.TypeInspector.IsNullOrUndefined(vi)?true:o(new s(`Assert.IsNull failed.`).AddNameValue("Actual",vi).AddCustom(yi,pi).ToStringFormated())}function d(wi,bi,ki){return n.Type.TypeInspector.IsNullOrUndefined(wi)?o(new s(`Assert.IsNotNull failed.`).AddNameValue("Actual",wi).AddCustom(bi,ki).ToStringFormated()):true}function g(di,gi,nr){try{di()}catch(tr){return true}return o(new s(`Assert.ThrowsException failed. Exception was not thrown.`).AddCustom(gi,nr).ToStringFormated())}class s{constructor(it){this._lines=[],this._lines.push(it)}AddNameValue(rt,ut){this._lines.Add(rt+":<"+h(ut)+">.");return this}AddCustom(ft,et){ft&&this._lines.Add(ft.FormatWith(et));return this}ToStringFormated(ot="\r\n"){return this._lines.join(ot)}}e.AreEqual=c,e.AreNotEqual=l,e.AreSame=a,e.AreNotSame=v,e.Fail=y,e.Inconclusive=p,e.IsFalse=w,e.IsTrue=b,e.IsNull=k,e.IsNotNull=d,e.ThrowsException=g})(f=u.Assert||(u.Assert={}))})(r=i.UnitTesting||(i.UnitTesting={}))})(t=n.TestTools||(n.TestTools={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){function e(s){f.push(s)}function o(){for(let c of f){c()};let h="UnitTests complete: "+f.length;console.log(h);return h}let f=[];u.AddTest=e,u.RunTests=o,n.Core.IsTddSpecific&&n.Page.OnInteractive(()=>u.RunTests())})(r=i.TestRunner||(i.TestRunner={}))})(t=n.TestTools||(n.TestTools={}))}(Calysto||(Calysto={})),function(n){function u(){i||(i=true,n.ScriptLoader.LoadCSS(n.Utility.Html.Minify(r)))}let r=`
.calystoConsole {
	position:fixed;
	top:0;
	left:0;
	width:400px;
	height:100px;
	overflow:auto;
	border:solid 1px black;
	background:#f3f37a;
	color:black;
	font-size:11px;
	z-index:1000000;
}

.calystoConsole * {
	font-size:inherit;
}
`,i=false;class t{constructor(){this.LineMaxLength=1e3}EnsureCreated(){if(n.Core.IsDebugDefined){if(this._consoleDiv){return};u();let f=document.createElement("div");f.innerHTML="<div class='calystoConsole'><\/div>",this._consoleDiv=f.childNodes[0],document.body.appendChild(this._consoleDiv)}}ApplyStyle(e){n.Core.IsDebugDefined&&(this.EnsureCreated(),$$calysto(this._consoleDiv).ApplyStyle(e))}ConverToString(o){return typeof o=="string"?o:o===undefined?"undefined":o===null?"null":o==NaN?"NaN":typeof o=="function"?o+"":JSON.stringify(o)}WriteLine(s){if(n.Core.IsDebugDefined){this.EnsureCreated();let h=this.ConverToString(s);h.length>this.LineMaxLength&&(h=h.substr(0,this.LineMaxLength)+"...[truncated]"),$$calysto(this._consoleDiv).AddChildren(n.DomQuery.CreateElement("div").AddChildren(h)),this._consoleDiv.scrollTop=this._consoleDiv.scrollHeight}}Clear(){this._consoleDiv&&(this._consoleDiv.innerHTML="")}Destroy(){this._consoleDiv&&($$calysto(this._consoleDiv).RemoveFromDom(),this._consoleDiv=null)}}t.Current=new t,n.Console=t}(Calysto||(Calysto={})),function(n){var t;(function(i){function r(h){h.SlidingDuration>0&&(h.Expiration=Math.round(Date.now()+1e3*h.SlidingDuration))}function u(c){return c.Expiration&&c.Expiration<Date.now()}function f(l,a,v,y,p){var b=y?Math.round(Date.now()+1e3*y):null;let w={Content:v,Expiration:b,SlidingDuration:p};r(w);let k=JSON.stringify(w);l.setItem(a,k)}function e(d,g){let nt=d.getItem(g);if(nt){let tt=JSON.parse(nt);if(u(tt)){d.removeItem(g)}else{r(tt);return tt.Content}}return null}function o(it,rt){it.removeItem(rt)}function s(ut){ut.clear()}i.Set=f,i.Get=e,i.Remove=o,i.Clear=s})(t=n.CacheProvider||(n.CacheProvider={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){function o(){return f&&!e}function c(y=true){y===false?e=true:f||(f=true,n.Page.OnEndResponse(()=>a()))}function l(p,w=0){setTimeout(()=>{let b=$$calysto(p).First();h(b)},w)}function a(){$$calysto("form").Where(k=>!k.$$CalystoInterceptor).ForEach(d=>{d.$$CalystoInterceptor=true;let g=d;g.submitBase=g.submit,g.submit=function(){let nt=this;setTimeout(()=>s(nt),1);return false}}).On("submit",tt=>{setTimeout(()=>s(tt),1);return false})}function s(it){var rt;if(!o()||((rt=n.DataAnnotations.FindValidationService(it))===null||rt===void 0?void 0:rt.Validate().Render().Interactive(true).HasErrors())){return false};h(it);return false}function h(ut){var st;if(!ut){throw new Error("Form is null.");}let ft=ut.getAttribute(n.Constants.CalystoDomAttributes.CalystoFormHandler),et=ut.getAttribute(n.Constants.CalystoDomAttributes.CalystoFormTarget);if(!et&&!ft){n.Core.IsDebugDefined&&console.log("Form has no target and no received handler.");return}let lt=n.Utility.Dom.EnsureElementId(et||ut),ct=[{Key:"__RootSelectorKey",Value:lt}],at=n.Forms.SerializeContainer(ut);for(let pt of at){((st=pt.Element)===null||st===void 0?void 0:st.disabled)&&ct.push({Key:pt.Name,Value:pt.Value})};n.Core.IsDebugDefined;let ht=ut.getAttribute(n.Constants.CalystoDomAttributes.CalystoFormMode),vt=parseInt(ut.getAttribute("calysto-timeout"))||9e4,yt=n.Mvc.UseCalystoSpinner(ut,false),ot=ut.getAttribute(n.Constants.CalystoDomAttributes.CalystoFormDestination);if(!ot){throw new Error("Invalid action url.");}else ot=n.Utility.Encoding.CalystoBase64.DecodeBase64StringToString(ot);n.Page.OnBeginRequest.Invoke();return new n.Net.WebClient(ot).AddRequestHeader(n.Constants.WsjsHeaderConstants.XCalystoAjaxFormKey,n.Constants.WsjsHeaderConstants.XCalystoAjaxFormValue).SetTimeout(vt).UploadHtmlForm(ut,ct).OnError((wt,bt)=>{n.Core.IsDebugDefined&&n.Dialog.CreateError(bt+"").Show()}).OnLoad(kt=>{let dt=kt.GetResponseText(),gt=kt.xhr.getResponseHeader("location");if(gt){location.assign(gt);return}if(yt.Remove(),kt.xhr.status<200||kt.xhr.status>=300){let ni=kt.xhr.status+" "+(kt.xhr.statusText||n.Net.HttpStatusCode[kt.xhr.status]||""),ti=dt||ni;n.Dialog.CreateError(ti,ni).Show()}else if(kt.xhr.getResponseHeader(n.Constants.WsjsHeaderConstants.XCalystoResponseContainerKey)==n.Constants.WsjsHeaderConstants.XCalystoResponseContainerValue){let ii=v();n.Net.WebService.AjaxResponseReceivedHandler(kt,ii)}else{if(ft){let ri=new n.BoxValue;if(ft.Contains("=>")){let ui=n.Utility.Expressions.CompileLambdaNoReturnCheck(ft);ui(dt)}else if(n.DataBinder.TryGetValue(window,ft,ri)){ri.GetValue()(dt)}else throw new Error("Received handler supported: "+ft);}if(et){ht=ht||"ReplaceChildren";for(let fi of et.split(",")){fi=fi.Trim();let ei=n.DomQuery.FromHtml(dt).Query(`${fi}, //${fi}`).Distinct().ChildNodes().ToArray();$$calysto(et)[ht]((ei===null||ei===void 0?void 0:ei.Any())?ei:dt)}}}n.Page.OnEndResponse.Invoke()}).Start()}function v(){return{fnErrorCallback:oi=>{n.Core.IsDebugDefined&&n.Dialog.CreateError(oi).Show()},fnResponseContainerCallback:si=>{n.Core.IsDebugDefined&&console.log("fnResponseContainerCallback",si)},fnReturnValueCallback:hi=>{n.Core.IsDebugDefined&&console.log("fnReturnValueCallback",hi)},fnResponseEndCallback:()=>{n.Core.IsDebugDefined&&console.log("fnResponseEndCallback")}}}let f=false,e=false;u.IsAjaxFormSubmitEnabled=o,u.UseAjaxFormSubmit=c,u.SubmitForm=l})(r=i.AjaxForm||(i.AjaxForm={}))})(t=n.Mvc||(n.Mvc={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){function u(w,b){return r.Start(w,b)}class r{constructor(){}static Start(f,e){let c=$$calysto(f).Query("//button, //a").WhereEnabled(true).SetEnabled(false),o=$$calysto(f).Query("//div.calysto-spinner").ToArray(),s=[];for(let a of o){let v=parseInt(a.getAttribute("calysto-spinner-delay"))||300,y=new n.Timer(()=>{a.className+=" calysto-visible"}).Start(v);s.push(y)}let h=new r,l=h.Remove=()=>{for(let p of s){p===null||p===void 0?void 0:p.Abort()};o.AsEnumerable().AsDomQuery().RemoveClass("calysto-visible"),c.SetEnabled(true)};e&&n.Page.OnEndResponse.MCD.AddOnce(l);return h}Remove(){}}i.UseCalystoSpinner=u})(t=n.Mvc||(n.Mvc={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){let r;(function(u){u[u.NoData=1]="NoData",u[u.Header=2]="Header",u[u.Footer=3]="Footer",u[u.Separator=4]="Separator",u[u.Item=5]="Item",u[u.AlternatingItem=6]="AlternatingItem"})(r=i.TemplateKind||(i.TemplateKind={}))})(t=n.Binding||(n.Binding={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){class f{constructor(){this.Bindings=[],this.ViewListeners=[],this.Repeaters=[],this.Templates=[],this.DataListeners=[],this.Sources=[]}}class e{constructor(s,h){this._uid=s,this._setup=h}GetCsvValues(c){if(c){if(typeof c=="string"){var l=c===null||c===void 0?void 0:c.Split(",").Select(a=>a.Trim()).Where(v=>!String.IsNullOrEmpty(v)).ToArray();if(l&&l.length>1){throw new Error("Single string value is expected or string[]. Provided CSV: "+c);}return l.Any()?l:null}if(n.Type.TypeInspector.IsArray(c)){return c};throw new Error("Invalid argument, requires string or string[]. Provided: "+c);}else return[]}Root(){if(this._setup.RootUid){throw new Error("Root is already defined.");}this._setup.RootUid=this._uid;return this}Bind(y,p,w,b,k){let d=this.GetCsvValues(y);if((d===null||d===void 0?void 0:d.length)!=1){throw new Error("Single element property path is required, but provided: "+y);}let g=this.GetCsvValues(p);if((g===null||g===void 0?void 0:g.length)!=1){throw new Error("Single data source property path is required, but provided: "+p);}this._setup.Bindings.push({Uid:this._uid,ElementPath:d[0],DataSourcePath:g[0],JsSetConvert:w,JsGetConvert:b,EventNames:this.GetCsvValues(k)});return this}ListenData(nt,tt){this._setup.DataListeners.push({Uid:this._uid,DataSourcePaths:this.GetCsvValues(nt),JsHandler:tt});return this}ListenView(it,rt){this._setup.ViewListeners.push({Uid:this._uid,EventNames:this.GetCsvValues(it),JsHandler:rt});return this}Source(ut){this._setup.Sources.push({Uid:this._uid,DataSourcePath:ut});return this}Repeater(ft){this._setup.Repeaters.push({Uid:this._uid,DataSourcePath:ft});return this}Template(et){this._setup.Templates.push({Uid:this._uid,TemplateKind:et});return this}}class o{constructor(){this._setup=new f}GetSetup(){return this._setup}GetRoot(){return this._setup.RootUid}Assign(ot,st){let ht=new e(ot,this._setup);st(ht);return this}}u.BindingFactory=o})(r=i.Setup||(i.Setup={}))})(t=n.Binding||(n.Binding={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){u.ComponentSetting="calysto-binding-component",u.Uid="calysto-binding-uid"})(r=i.Attributes||(i.Attributes={}))})(t=n.Binding||(n.Binding={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){function s(a){let v=o(a);return f[v]}function h(y){return e[y]}function o(p){return p.getAttribute(i.Attributes.Uid)}function c(w){let b=$$calysto(w).Query(`//div[${n.Binding.Attributes.ComponentSetting}=*]`).SelectInnerHtml().FirstOrDefault();return n.Json.Deserialize(b)}function l(k,d){let g=d||c(k);k.$$observable_RootSetting=g;let it=$$calysto(k).Query(`[${n.Binding.Attributes.Uid}], //[${n.Binding.Attributes.Uid}]`).Select(et=>({Uid:et.getAttribute(n.Binding.Attributes.Uid),Element:et})).ToArray();it.ForEach(ot=>{if(!ot.Uid){throw new Error(`Uid is undefined for ${ot.Element.tagName} element`);}if(e[ot.Uid]){throw new Error(`Multiple elements with the same uid: ${ot.Uid}`);}let st={RootUid:g.RootUid,Bindings:g.Bindings.Where(ht=>ht.Uid==ot.Uid).ToArray(),ViewListeners:g.ViewListeners.Where(ct=>ct.Uid==ot.Uid).ToArray(),DataListeners:g.DataListeners.Where(lt=>lt.Uid==ot.Uid).ToArray(),Sources:g.Sources.Where(at=>at.Uid==ot.Uid).ToArray(),Repeaters:g.Repeaters.Where(vt=>vt.Uid==ot.Uid).ToArray(),Templates:g.Templates.Where(yt=>yt.Uid==ot.Uid).ToArray()};if(!st.RootUid&&!st.Bindings.Any()&&!st.ViewListeners.Any()&&!st.DataListeners.Any()&&!st.Sources.Any()&&!st.Repeaters.Any()&&!st.Templates.Any()){throw new Error(`No settings found for element with uid: ${ot.Uid}`);}e[ot.Uid]={Element:ot.Element,Settings:st}});let rt=it.AsEnumerable().ToRawObject(pt=>pt.Uid,wt=>wt.Element),tt=g.Templates.AsEnumerable().Select(bt=>{let kt;try{kt=rt[bt.Uid].parentElement}catch(dt){throw new Error(dt+", Uid: "+bt.Uid);}return{Template:bt,Element:rt[bt.Uid],RepeaterElement:kt,RepeaterUid:kt.getAttribute(n.Binding.Attributes.Uid)}}).ToArray(),ut=tt.Where(gt=>!gt.RepeaterUid).ToArray();if(ut.Any()){throw new Error("Template has no parent element.");}let ft=tt.Where(ni=>$$calysto(ni.RepeaterElement).WhereVisible().Any()).ToArray();if(ft.Any()){throw new Error("Repeater must have style='display:none'");}let nt=(ti,ii)=>tt.AsEnumerable().Where(ri=>ri.RepeaterUid==ti&&ri.Template.TemplateKind==ii).Select(ui=>ui.Element).FirstOrDefault();g.Repeaters.ForEach(fi=>{f[fi.Uid]||(f[fi.Uid]={header:nt(fi.Uid,i.TemplateKind.Header),item:nt(fi.Uid,i.TemplateKind.Item),alternating:nt(fi.Uid,i.TemplateKind.AlternatingItem),separator:nt(fi.Uid,i.TemplateKind.Separator),footer:nt(fi.Uid,i.TemplateKind.Footer),nodata:nt(fi.Uid,i.TemplateKind.NoData)})}),$$calysto(tt.Select(ei=>ei.Element).ToArray()).RemoveFromDom()}let f={};u.GetRepeaterSetting=s;let e={};n.Core.IsDebugDefined&&(window.$$globalRepeatersDic=f,window.$$globalElementsDic=e),u.GetBindingElement=h,u.GetElementUid=o,u.InitializeBindings=l})(r=i.BindingCache||(i.BindingCache={}))})(t=n.Binding||(n.Binding={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){class r{constructor(u){this.dsListeners=new i.BindingDictionaryTree,this.dataSource={},u&&this.SetDataSource(u),window.dsListeners=this.dsListeners}SetDataSource(f){this.dataSource=f||{};return this}GetDataSource(){return this.dataSource}SetValue(e,o,s){if(s){n.DataBinder.SetValue(this.dataSource,e,o)}else{var h=n.DataBinder.GetValue(this.dataSource,e);n.Type.TypeInspector.AreValuesEqual(h,o)||(n.DataBinder.SetValue(this.dataSource,e,o),this.NotifyPropertyChanged(e))}return this}GetValue(c){return n.DataBinder.GetValue(this.dataSource,c)}SetValueSilent(l,a){return this.SetValue(l,a,true)}SetValueLoud(v,y){this.SetValue(v,y,true),this.NotifyPropertyChanged(v);return this}NotifyPropertyChanged(p){if(!p||p.length==0){throw new Error("NotifyPropertyChanged(...) requires an argument");}let w=this.dsListeners.GetListenersAndDescendants(p);for(let b of w){b.CallbackFunc(b.FullPath)};return this}}i.BindingDataSource=r})(t=n.Binding||(n.Binding={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){class r{constructor(e,o,s,h){this.Owner=e,this.Element=o,this.FullPath=s,this.CallbackFunc=h}RemoveListener(){this.Owner.$$$_listeners.Remove(this),this.Owner.$$$_ownerTree.InvalidateCache()}}i.DataSourceListenerItem=r;class u{constructor(c,l){this.$$$_ownerTree=c,this.$$$_fullPath=l,this.$$$_listeners=[]}AddListener(a){this.$$$_listeners.push(a)}}class f{constructor(){this.itemsCache={}}GetTreeNode(v){if(n.Core.IsDebugDefined,this.rootNode||(this.rootNode=new u(this,"@")),!v){throw new Error("GetTreeNode(path) requires an argument");}if(v=="@"||v=="@."){return this.rootNode};var y=n.DataBinder.GetValue(this.rootNode,v);if(!y){let w=this.rootNode,p=[];v.split(".").ForEach(b=>{p.push(b);let k=p.join(".");y=n.DataBinder.GetValue(w,k),y||(y=new u(this,k),n.DataBinder.SetValue(this.rootNode,k,y))})}return y}AddListener(d,g,nt){if(!d||d.length==0){throw new Error("AddListener(...) requires an argument");}let tt=this.GetTreeNode(d),it=new r(tt,g,tt.$$$_fullPath,nt);tt.AddListener(it),this.InvalidateCache();return it}GetListeners(rt,ut){var ft=rt&&rt.$$$_listeners?rt.$$$_listeners.slice(0):[];rt&&ut&&n.Collections.ForEachOwnProperties(rt,et=>{if(et.indexOf("$$$_")!=0){var ot=this.GetListeners(rt[et],ut);ot&&ft.AddRange(ot)}});return ft}GetListenersAndDescendants(st){if(!st||st.length==0){throw new Error("GetDescendantListeners(...) requires an argument");}var ht=this.GetFromCache(st);if(ht){n.Core.IsDebugDefined;return ht}ht=this.GetListeners(this.GetTreeNode(st),true),this.AddToCache(st,ht);return ht}InvalidateCache(){n.Core.IsDebugDefined,this.itemsCache={}}AddToCache(ct,lt){n.Core.IsDebugDefined,this.itemsCache[ct+""]=lt}GetFromCache(at){return this.itemsCache[at+""]}}i.BindingDictionaryTree=f})(t=n.Binding||(n.Binding={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){class r{constructor(u){this.Element=u,this._pathCache={}}static GetInstance(f){return f.$$observable_PathResolver||(f.$$observable_PathResolver=new r(f))}FindDataBinder(){if(this._binder){return this._binder};let e=this.Element;while(e){if(e.$$observable_Binder){return this._binder=e.$$observable_Binder};e=e.parentNode}return this._binder}GetDataBinder(){let o=this.FindDataBinder();if(o){return o};throw new Error("Data binder not found");}ResolveAbsolutePath(s){let c=s.split(".");c[0]=="DataItem"&&c.shift();let h=this.Element;while(h){if(h.$$observable_DataPath){let l=h.$$observable_DataPath.split(".");c.unshift(...l)}if(c[0]=="@"){return c};if(h.$$observable_Binder){break}else h=h.parentNode}throw new Error("Data path can not be resolved for: "+s);}CreateAbsoluteDataPath(a){let v=this._pathCache[a];if(v){return v};if(a&&a.charAt(0)=="@"){this._pathCache[a]=a;return a}let y=this.ResolveAbsolutePath(a),p=y.join(".");return this._pathCache[a]=p}}i.BindingElementPathResolver=r})(t=n.Binding||(n.Binding={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){class r extends i.BindingDataSource{constructor(){super(),this._cachedDataSourceTypes={},this._recursions=0}WriteLog(u,f){n.Core.IsDebugDefined&&(u.$$observable_Log||(u.$$observable_Log=[]),u.$$observable_Log.push(f))}SetElementValue(e,o,s){if(this.WriteLog(e,`SetElementValue(${o}, ${s})`),o=="options"&&e.tagName.toLowerCase()=="select"){e.innerHTML="";var h=s;for(let c of h.ToArray()){let l=document.createElement("option");l.innerHTML=c.Text,l.value=n.Type.TypeConverter.ToStringFormated(c.Value,e.getAttribute(n.AttrName.CalystoFormat)),e.appendChild(l),l.selected=!!c.Selected}}else o=="enabled"||o=="disabled"?!s&&o=="enabled"||s&&o=="disabled"?(e.setAttribute("disabled","disabled"),e.disabled=true):(e.removeAttribute("disabled"),e.disabled=false):o=="visible"?e.style.display=s?"":"none":o=="invisible"?e.style.display=s?"none":"":o=="innerHTML"||o=="value"?(n.Type.TypeInspector.IsNullOrUndefined(s)?s="":typeof s!="string"&&(s=n.Type.TypeConverter.ToStringFormated(s)),e[o]=s):n.DataBinder.SetValue(e,o,s)}RemoveElementAndListeners(a){n.Event.Detach(a),n.Utility.Dom.RemoveNodeFromDom(a),a.$$observable_DataSourceListeners&&a.$$observable_DataSourceListeners.ForEach(v=>v.RemoveListener())}CloneNodeSafe(y){let p=y.cloneNode(true);p.style.display="none";return p}BindDataToRepeater(w,b,k){w.$$observable_DataPath=b,this.WriteLog(w,`BindDataToRepeater(${b}, ${k})`);let d=i.BindingCache.GetRepeaterSetting(w);k&&k.ToArray&&(k=k.ToArray());var tt=k&&k.length?k.length:0;w.style.minHeight=w.offsetHeight+"px",$$calysto(w).DescendantNodes().ToArray().ForEach(it=>this.RemoveElementAndListeners(it)),w.innerHTML="";let g=[w];if(tt>0){let ut;d.header&&(w.appendChild(ut=this.CloneNodeSafe(d.header)),ut.$$observable_DataPath=b,g.push(ut));for(let ft=0;ft<k.length;ft++){let et=k[ft];d.separator&&ft>0&&(w.appendChild(ut=this.CloneNodeSafe(d.separator)),ut.$$observable_DataPath=b+"."+ft,ut.$$observable_ItemIndex=ft,g.push(ut)),d.alternating&&ft%2==1?(w.appendChild(ut=this.CloneNodeSafe(d.alternating)),ut.$$observable_DataPath=b+"."+ft,ut.$$observable_ItemIndex=ft,g.push(ut)):d.item&&(w.appendChild(ut=this.CloneNodeSafe(d.item)),ut.$$observable_DataPath=b+"."+ft,ut.$$observable_ItemIndex=ft,g.push(ut))}d.footer&&(w.appendChild(ut=this.CloneNodeSafe(d.footer)),ut.$$observable_DataPath=b,g.push(ut))}else if(d.nodata){let rt;w.appendChild(rt=this.CloneNodeSafe(d.nodata)),rt.$$observable_DataPath=b,g.push(rt)}let nt=$$calysto(w).Query(`//[${i.Attributes.Uid}]`).ToArray();for(let ot of nt){this.WriteLog(ot,`Inside repeater, init listeners`),this.CreateViewListeners(ot),this.CreateDataListeners(ot)};for(let st of nt){if(st!=w&&st.$$observable_DataSourceListeners&&st.$$observable_DataSourceListeners.Any()){for(let ht of st.$$observable_DataSourceListeners){ht.CallbackFunc(ht.FullPath)}}};g.ForEach(ct=>ct.style.display=""),w.style.minHeight=""}GetUpperPath(lt){let at=lt.split(".").ToArray();at.RemoveAt(at.length-1);return at.join(".")}ResolveHandlerFunction(vt,yt){if(typeof vt=="function"){return{Func:vt}};if(vt.Contains("=>")){return{Func:n.Utility.Expressions.CompileLambdaExpression(vt)}};let kt=yt.CreateAbsoluteDataPath(vt),pt=kt.split("."),bt,wt;while((bt=pt.join("."))&&!n.Type.TypeInspector.IsFunction(wt=this.GetValue(bt))){wt=null,pt.length>1?pt.splice(pt.length-2,1):pt.length>0&&pt.splice(0,1)};if(!wt){let gt=n.DataBinder.GetValue(window,vt);if(gt){if(n.Type.TypeInspector.IsFunction(gt)){return{Func:gt}};throw new Error("Handler path is not function: "+vt);}}if(!wt){throw new Error("Function is expected at "+kt+", but found: "+wt);}let dt=this.GetValue(this.GetUpperPath(bt));return{Func:wt,HandlerContext:dt}}CreateHtmlEventContext(ni,ti,ii,ri,ui){return{Binder:this,Element:ti,DataSource:this.GetDataSource(),DataPath:ui,HandlerContext:ni,ListeningEventsNames:ii,Event:ri}}CreateViewListeners(fi){if(!fi.$$observable_hasHtmlListenersAttached){fi.$$observable_hasHtmlListenersAttached=true,fi.$$observable_Uid||(fi.$$observable_Uid=i.BindingCache.GetElementUid(fi));let oi=i.BindingElementPathResolver.GetInstance(fi),si=fi.$$observable_ElementSetting=i.BindingCache.GetBindingElement(fi.$$observable_Uid).Settings;this.WriteLog(fi,`inside CreateHtmlListeners`),si.ViewListeners&&si.ViewListeners.ForEach(ci=>{this.WriteLog(fi,"Create HtmlListeners: "+ci.EventNames+", jsHandler: "+ci.JsHandler);let li=this.ResolveHandlerFunction(ci.JsHandler,oi),ai=oi.CreateAbsoluteDataPath("DataItem");$$calysto(fi).On(ci.EventNames,(vi,yi)=>li.Func(this.CreateHtmlEventContext(li.HandlerContext,fi,ci.EventNames,yi,ai)))});let ei=fi.tagName.toLowerCase(),hi=ei=="input"||ei=="select"||ei=="textarea";si.Bindings&&hi&&si.Bindings.ForEach(pi=>{let wi=oi.CreateAbsoluteDataPath(pi.DataSourcePath),bi=pi.EventNames;bi&&bi.length!=0||(bi=fi.type=="checkbox"||fi.type=="radio"?["change"]:["change"]),this.WriteLog(fi,"Create Binding DomListeners: "+bi);let ki;pi.JsGetConvert&&(ki=this.ResolveHandlerFunction(pi.JsGetConvert,oi)),$$calysto(fi).On(bi,(di,gi)=>{let nr=undefined,tr=false;if(ei=="select"&&pi.ElementPath=="options"){let ir=this.GetValue(wi);[].AddRange(di.options).ForEach((rr,ur)=>{n.DataBinder.SetValue(ir,ur+".Selected",!!rr.selected)}),this.NotifyPropertyChanged(wi);return}if(ei=="input"&&pi.ElementPath=="checked"){if(fi.name&&(fi.type=="radio"||fi.type=="checkbox")){let fr=this.GetUpperPath(wi),er=this.GetValue(fr);if(n.Type.TypeInspector.IsArray(er)||(fr=this.GetUpperPath(fr),er=this.GetValue(fr)),n.Type.TypeInspector.IsArray(er)){fi.type=="radio"?er.ForEach(or=>or[pi.DataSourcePath]=false):fi.type=="checkbox",this.SetValueSilent(wi,fi.checked),this.NotifyPropertyChanged(fr);return}}nr=fi[pi.ElementPath],tr=true}else if(pi.ElementPath=="enabled"){nr=!fi.disabled,tr=true}else if(pi.ElementPath=="disabled"){nr=!!fi.disabled,tr=true}else if(pi.ElementPath=="visible"){nr=$$calysto(fi).WhereVisible(true).Any(),tr=true}else if(pi.ElementPath=="invisible"){nr=!$$calysto(fi).WhereVisible(true).Any(),tr=true}else if(pi.ElementPath=="value"){nr=fi[pi.ElementPath],tr=true}else throw new Error("Not supported: "+pi.ElementPath);if(tr){if(pi.JsGetConvert){nr=ki.Func(this.CreateHtmlEventContext(ki.HandlerContext,fi,bi||[],gi,wi),nr)}else{let sr=this._cachedDataSourceTypes[wi];if(!sr){let hr=this.GetValue(wi);n.Type.TypeInspector.IsNullOrUndefined(hr)||(sr=n.Type.TypeDescriptor.FromValue(hr),this._cachedDataSourceTypes[wi]=sr)}sr&&(nr=n.Type.TypeConverter.ChangeType(nr,sr))}this.SetValue(wi,nr)}})})}}CreateDataSourceContext(cr,lr,ar,vr,yr){return{Binder:this,Element:lr,DataSource:this.GetDataSource(),DataPath:vr,HandlerContext:cr,ListeningDataPaths:ar,Values:yr}}GetDataSourceValue(pr,wr){if(wr.EndsWith("ItemIndex")){for(var br=pr;br&&br!=document;){if(br.$$observable_ItemIndex==0||br.$$observable_ItemIndex>0){return br.$$observable_ItemIndex};br=br.parentNode}throw new Error("ItemIndex not found");}return super.GetValue(wr)}CreateDataListeners(kr){if(!kr.$$observable_hasDataListenersAttached){kr.$$observable_hasDataListenersAttached=true,kr.$$observable_Uid||(kr.$$observable_Uid=i.BindingCache.GetElementUid(kr)),kr.$$observable_DataSourceListeners||(kr.$$observable_DataSourceListeners=[]);let nu=kr.$$observable_DataSourceListeners,dr=kr.$$observable_ElementSetting=i.BindingCache.GetBindingElement(kr.$$observable_Uid).Settings;this.WriteLog(kr,`inside CreateDataSourceListeners`);let gr=i.BindingElementPathResolver.GetInstance(kr);dr.Sources&&dr.Sources.ForEach(tu=>{kr.$$observable_DataPath=tu.DataSourcePath}),dr.DataListeners&&dr.DataListeners.ForEach(iu=>{let ru=iu.DataSourcePaths.Select(uu=>gr.CreateAbsoluteDataPath(uu));ru.ForEach(fu=>{this.WriteLog(kr,"Create DataListener: "+fu);let eu=this.ResolveHandlerFunction(iu.JsHandler,gr);nu.Add(this.dsListeners.AddListener(fu,kr,ou=>{if(!n.Utility.Dom.IsElementInDom(kr)){this.RemoveElementAndListeners(kr);return}let su=ru.Select(hu=>this.GetDataSourceValue(kr,hu));return eu.Func(this.CreateDataSourceContext(eu.HandlerContext,kr,ru,ou,su),...su)}))})}),dr.Bindings&&dr.Bindings.ForEach(cu=>{let lu=gr.CreateAbsoluteDataPath(cu.DataSourcePath);this.WriteLog(kr,"Create Binding DataSourceListener: "+lu);let au;cu.JsSetConvert&&(au=this.ResolveHandlerFunction(cu.JsSetConvert,gr)),nu.Add(this.dsListeners.AddListener(lu,kr,vu=>{if(!n.Utility.Dom.IsElementInDom(kr)){this.RemoveElementAndListeners(kr);return}let yu=this.GetDataSourceValue(kr,lu);cu.JsSetConvert&&(yu=au.Func(this.CreateDataSourceContext(au.HandlerContext,kr,[lu],vu,[yu]),yu)),this.SetElementValue(kr,cu.ElementPath,yu)}))}),dr.Repeaters&&dr.Repeaters.ForEach(pu=>{let wu=gr.CreateAbsoluteDataPath(pu.DataSourcePath);this.WriteLog(kr,"Create Repeater DataSourceListener: "+wu),nu.Add(this.dsListeners.AddListener(wu,kr,()=>{if(!n.Utility.Dom.IsElementInDom(kr)){this.RemoveElementAndListeners(kr);return}let bu=this.GetDataSourceValue(kr,wu);this.BindDataToRepeater(kr,wu,bu)}))})}}EnsureRootElement(){var du,ku,nf,gu;if(!this._rootElement){if(!this._rootSelector){throw new Error("Root selector not defined.");}if(ku=$$calysto(this._rootSelector).Take(2).ToList(),ku.Count()>1){throw new Error("DataBind selector selects "+ku.Count()+" elements");}if(this._rootElement=ku.FirstOrDefault(),!this._rootElement){throw new Error("DataBind root element not found: "+this._rootElement);}this._rootElement.$$observable_Binder=this,this._rootElement.$$observable_DataPath="@",i.BindingCache.InitializeBindings(this._rootElement,(du=this._factory)===null||du===void 0?void 0:du.GetSetup()),nf=$$calysto(this._rootElement).Query("*, //*").Query(`[${n.Binding.Attributes.Uid}=*]`).Cast().ToArray();for(gu of nf){this.CreateDataListeners(gu),this.CreateViewListeners(gu)}}}NotifyPropertyChanged(tf){if(!tf||tf.length==0){throw new Error("NotifyPropertyChanged(...) requires an argument");}if(this._recursions++,Math.abs(this._recursions)>100){throw Error("NotifyPropertyChanged recursion overflow");}this.EnsureRootElement(),super.NotifyPropertyChanged(tf),this._recursions--;return this}SetRootElement(rf){this._rootSelector=rf;return this}SetFactory(uf){this._factory=uf;let ff=uf.GetRoot();ff&&(this._rootSelector=`[${i.Attributes.Uid}=${uf.GetRoot()}]`);return this}DataBind(){this.NotifyPropertyChanged("@");return this}}i.BindingObservable=r})(t=n.Binding||(n.Binding={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){class r{constructor(u){this._path=u}ToAppRelativeUrlPath(){var f;return(f=this._appRelative)!==null&&f!==void 0?f:this._appRelative=r.CreateAppRelativePath(this._path)}ToVirtualUrlPath(){var e;return(e=this._virtualPath)!==null&&e!==void 0?e:this._virtualPath=r.CombineToVirtualPath([r.GetBasePath(),this.ToAppRelativeUrlPath()])}static CreateAppRelativePath(o){let s=o,h;if((h=o.lastIndexOf("/~/"))>=0&&(s=o.Substring(h+1)),s.StartsWith("~/")){return s};let c=r.GetBasePath();o.StartsWith(c,true)&&(s=o.Substring(c.length));return s.StartsWith("~/")?s:s.StartsWith("/")?"~"+s:"~/"+s}static CombineToVirtualPath(l){let a=l.join("/").ReplaceAll("~/","/").ReplaceAll("\\","/").TrimEnd(["/"]);(String.IsNullOrEmpty(a)||a=="~")&&(a+="/");return a.replace(new RegExp("[/]{2,}","g"),"/")}static GetBasePath(){let v=n.Core.Constants.UrlPathBase||"";return v=="/"?"":v.EndsWith("/")?v.TrimEnd(["/"]):v}}i.CalystoVirtualPathHelper=r})(t=n.Web||(n.Web={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){function f(p,w){let b=[],k=$$calysto(p).SelectAttributesAll().First();for(let d in k){switch(d){case"data-val-required":b.push(new e(k[d]));break;case"data-val-email":b.push(new o(k[d]));break;case"data-val-length":b.push(new s(k[d],parseInt(p.getAttribute("data-val-length-min")),parseInt(p.getAttribute("data-val-length-max"))));break;case"data-val-regex":b.push(new h(k[d],p.getAttribute("data-val-regex-pattern")));break;case"data-val-range":b.push(new c(k[d],parseFloat(p.getAttribute("data-val-range-min")),parseFloat(p.getAttribute("data-val-range-max"))));break;case"data-val-minlength":b.push(new l(k[d],parseFloat(p.getAttribute("data-val-minlength-min"))));break;case"data-val-maxlength":b.push(new a(k[d],parseFloat(p.getAttribute("data-val-maxlength-max"))));break;case"data-val-fileextensions":b.push(new v(k[d],p.getAttribute("data-val-fileextensions-extensions")));break;case"data-val-equalto":b.push(new y(k[d],p.getAttribute("data-val-equalto-other"),w))}}return b}u.GetValidators=f;class e{constructor(g){this.ErrorText=g}IsValid(nt){return!n.Type.TypeInspector.IsNullOrUndefined(nt)&&!String.IsNullOrWhiteSpace(nt+"")}}class o{constructor(tt){this.ErrorText=tt}IsValid(it){if(n.Type.TypeInspector.IsNullOrUndefined(it)){return true};let rt=it+"";return new RegExp("[^@]+[@][^@]+").test(rt)}}class s{constructor(ut,ft,et){this.ErrorText=ut,this.MinimumLength=ft,this.MaximumLength=et}IsValid(ot){if(n.Type.TypeInspector.IsNullOrUndefined(ot)){return true};let st=ot+"";return st.length>=(this.MinimumLength||0)&&st.length<=(this.MaximumLength||Number.MAX_VALUE)}}class h{constructor(ht,ct){this.ErrorText=ht,this.RegexPattern=ct}IsValid(lt){if(n.Type.TypeInspector.IsNullOrUndefined(lt)){return true};let at=lt+"";return String.IsNullOrEmpty(at)?true:new RegExp(this.RegexPattern).test(at)}}class c{constructor(vt,yt,pt){this.ErrorText=vt,this.Minimum=yt,this.Maximum=pt}IsValid(wt){if(n.Type.TypeInspector.IsNullOrUndefined(wt)){return true};let bt=parseFloat(wt+"");return n.Type.TypeInspector.IsNumber(bt)?bt>=(this.Minimum||Number.MIN_VALUE)&&bt<=(this.Maximum||Number.MAX_VALUE):false}}class l{constructor(kt,dt){this.ErrorText=kt,this.Length=dt}IsValid(gt){if(n.Type.TypeInspector.IsNullOrUndefined(gt)){return true};let ni=gt+"";return ni.length>=(this.Length||0)}}class a{constructor(ti,ii){this.ErrorText=ti,this.Length=ii}IsValid(ri){if(n.Type.TypeInspector.IsNullOrUndefined(ri)){return true};let ui=ri+"";return ui.length<=(this.Length||Number.MAX_VALUE)}}class v{constructor(fi,ei){this.ErrorText=fi,this.Extensions=ei}IsValid(oi){if(n.Type.TypeInspector.IsNullOrUndefined(oi)){return true};let hi=oi+"",si=hi.match(new RegExp("[\\w]+$"));if(si&&si[0]){let ci=si[0];return(","+this.Extensions+",").Contains(","+ci+",")}return false}}class y{constructor(li,ai,vi){this.ErrorText=li,this.OtherProperty=ai,this.Context=vi}IsValid(yi){var pi;let wi=this.OtherProperty.ReplaceAll("*","");for(let bi in this.Context.inputs){if(bi==wi||wi.charAt(0)=="."&&bi.EndsWith(wi)){let ki=(pi=this.Context.inputs[bi])===null||pi===void 0?void 0:pi.value;return n.Type.TypeInspector.AreValuesEqual(yi,ki)}}return false}}})(r=i.Validators||(i.Validators={}))})(t=n.DataAnnotations||(n.DataAnnotations={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){function s(p){p.$$validationContainer||(p.$$validationContainer=p.tagName.toLowerCase()=="form"?p:$$calysto(p).AncestorNodes("form").First());return p.$$validationContainer}function h(w){let b=s(w);return r(b)}function r(k){let d=$$calysto(k).First(),g=c(d);return new o(g)}function c(nt){let it=nt.$$validationGuid||(nt.$$validationGuid=n.Utility.Generators.GenerateLabel(20)),tt=u[it]||(u[it]={});tt.form=nt,tt.errors=tt.errors||[],tt.inputsArr=$$calysto(nt).Query("//[data-val=true][name]").ToArray(),tt.inputs=$$calysto(tt.inputsArr).ToRawObject(rt=>rt.name),tt.spans=$$calysto("[data-valmsg-for]").ToRawObject(ut=>ut.getAttribute("data-valmsg-for"),ft=>ft),tt.summary=$$calysto("[data-valmsg-summary]").ToArray();return tt}function l(et){$$calysto(et.inputsArr).Where(ot=>!ot.$$validationInitialized).ForEach(st=>st.$$validationInitialized=true).ForEach(ht=>ht.$$validationContext=et).OnInput(ct=>{et.isInteractive&&(n.Core.IsDebugDefined,f(et,ct),e(et))})}function f(lt,at){n.Core.IsDebugDefined,lt.errors.RemoveBy(pt=>pt.FormsNamePath==at.name);let vt=at.value===""?null:at.value,yt=at.$$validationValidators||(at.$$validationValidators=i.Validators.GetValidators(at,lt).Reverse());for(let wt of yt){wt.IsValid(vt)||lt.errors.Add({FormsNamePath:at.name,ErrorText:wt.ErrorText})};n.Core.IsDebugDefined}function e(bt){let kt=new n.Web.UI.Direct.CalystoMvcModelState;kt.RootSelector=bt.form;for(let dt of bt.errors){kt.Errors.push(new n.KeyValue(dt.FormsNamePath,dt.ErrorText))};kt.Render()}class o{constructor(a){this.Context=a}Validate(){this.Context.errors.Clear();for(let v in this.Context.inputs){f(this.Context,this.Context.inputs[v])};return this}Render(){e(this.Context);return this}HasErrors(){return this.Context.errors.Any()}Interactive(y){this.Context.isInteractive=!!y,y&&l(this.Context);return this}}i.FindValidationService=h,i.UseValidationService=r;let u={}})(t=n.DataAnnotations||(n.DataAnnotations={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){function o(){if(!e){e=true;let a=new n.Web.CalystoVirtualPathHelper(`~/Engine/Src/Core/WebControls/Table/Table.css?v=${n.Core.Constants.ModuleVersion}`).ToVirtualUrlPath();n.ScriptLoader.LoadCSSFile(a)}}function s(y){o(),$$calysto(y).AddClass("calystoSortableTable").Where(p=>!p.$$tableIsSortable).ForEach(w=>{w.$$tableIsSortable=true,h(w)})}function h(b){let k=$$calysto(b).Query("table tr:take(1)").Query(">td, >th").ForEach((d,g)=>d.$$columnIndex=g).ToArray();k.AsEnumerable().AsDomQuery().OnHover(nt=>{nt.style.cursor="pointer",nt.style.textDecoration="underline"},tt=>{tt.style.cursor="",tt.style.textDecoration=""}).OnClick(it=>{l(it,b,k)})}function c(rt){switch(rt){case f.Asc:return"sortasc";case f.Desc:return"sortdesc";default:return""}}function l(ut,ft,et){(ut.$$sortDirection||f.None)==f.None&&(ft.$$unsortedRows?ft.$$unsortedRows.ForEach(lt=>{var at;if((at=lt.parentNode)!==null&&at!==void 0){return at.appendChild(lt)}}):ft.$$unsortedRows=$$calysto(ft).Query("table tr:skip(1)").ToArray()),ut.$$sortDirection=((ut.$$sortDirection||f.None)+1)%3,et.Where(vt=>vt!=ut).ForEach(yt=>yt.$$sortDirection=f.None),$$calysto(et).RemoveClass("sortasc").RemoveClass("sortdesc").Where(pt=>pt==ut).ForEach(wt=>wt.className+=" "+c(wt.$$sortDirection));var ot=$$calysto(ft).Query("table tr:skip(1)").Select(bt=>{var gt=$$calysto(bt).ChildNodes("td").Where((ii,ri)=>ri==ut.$$columnIndex).Select(ui=>n.Utility.Dom.GetInnerText(ui)).FirstOrDefault(),kt=(gt||"").ReplaceAll(",",".").ReplaceAll(" ","").ReplaceAll(" ",""),dt=parseFloat(kt),ti=gt.toLowerCase(),ni=kt==""||kt==" "||kt==dt+""||kt.indexOf(dt+"")==0;return{tr:bt,str:ti,num:isNaN(dt)||ni&&isNaN(dt)?Number.MIN_VALUE:dt,isNum:ni}}).ToList().AsDomQuery(),ht=ot.All(fi=>fi.isNum);let st,ct=ut.$$sortDirection==f.Desc;st=(ut.$$sortDirection||0)==f.None?ft.$$unsortedRows:ot.OrderBy(ei=>ht?ei.num:ei.str,ct).Select(oi=>oi.tr).ToArray(),st.ForEach(si=>{var hi;if((hi=si.parentNode)!==null&&hi!==void 0){return hi.appendChild(si)}})}let e=false;let f;(function(v){v[v.None=0]="None",v[v.Desc=1]="Desc",v[v.Asc=2]="Asc"})(f||(f={})),u.MakeSortable=s})(r=i.CalystoTable||(i.CalystoTable={}))})(t=n.WebControls||(n.WebControls={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){var f;(function(e){function s(l){switch(l){case"Message":return"black";case"Error":return"red";case"Warning":return"orange";case"Success":return"green";case"Info":return"blue";default:return"black"}}let o;(function(c){c[c.Message=0]="Message",c[c.Error=1]="Error",c[c.Warning=2]="Warning",c[c.Success=3]="Success",c[c.Info=4]="Info"})(o=e.Kind||(e.Kind={}));class h{constructor(){this._messages=[]}AddMessage(a,v){this._messages.Add(new n.KeyValue(a,v));return this}GetMessagesTags(){let y=this,p=function*(){for(var w of y._messages){let b=s(w.Key);yield`<div class="calysto-html-builder-message-${b}" style="color:${b}">${n.Utility.Html.HtmlEncode(w.Value)}</div>`}};return new n.CalystoEnumerable(()=>n.CalystoEnumerator.From(p))}GetHtmlElements(){return this.GetMessagesTags()}HasElements(){return this.GetHtmlElements().Any()}ToHtml(){return this.GetHtmlElements().ToStringJoined()}}e.CalystoHtmlBuilder=h})(f=u.Direct||(u.Direct={}))})(r=i.UI||(i.UI={}))})(t=n.Web||(n.Web={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){var r;(function(u){var f;(function(e){class o{constructor(s,h,c,l){this.Errors=[],this.Values=[],this.Raw=s||{},h&&(this.RootSelector=h),c&&(this.Errors=c),l&&(this.Values=l)}AddError(a,v){this.Errors.push(new n.KeyValue(n.Utility.Expressions.ParsePath(a),v))}SetValue(y,p){let w=n.Utility.Expressions.ParsePath(y),b=this.Values.Where(k=>k.Key==w).pop();b?b.Value=p:this.Values.push(new n.KeyValue(w,p+"")),n.DataBinder.SetValue(this.Raw,w,p)}Query(d){let g=n.Utility.Expressions.ParsePath(d);return $$calysto("[name="+g+"]")}UseDirectQuery(nt,tt){let it;it=this.RootSelector?$$calysto(this.RootSelector).Query("*, //*").Query(nt):$$calysto(nt),tt(it);return this}ClearErrors(){this.UseDirectQuery("input[name], textarea[name], select[name]",rt=>rt.RemoveClass("input-validation-error")).UseDirectQuery("span[data-valmsg-for]",ut=>ut.SetInnerHtml(null).RemoveClass("field-validation-error").AddClass("field-validation-valid")).UseDirectQuery("div[data-valmsg-summary]",ft=>ft.SetInnerHtml(null).RemoveClass("validation-summary-errors").AddClass("validation-summary-valid"))}RenderErrors(){if(this.Errors.AsEnumerable().GroupBy(et=>et.Key).ToList().ForEach(ot=>{this.UseDirectQuery(`[name=${ot.Key}]`,st=>st.AddClass("input-validation-error")),this.UseDirectQuery(`[data-valmsg-for=${ot.Key}]`,ht=>ht.AddClass("field-validation-error").AddChildren(ot.Select(ct=>`<span>${n.Utility.Html.HtmlEncodeSimple(ct.Value)}</span>`).ToStringJoined("<br/>")))}),this.Errors.Any()){let lt=this.Errors.Select(at=>`<li>${n.Utility.Html.HtmlEncodeSimple(at.Value)}</li>`).ToStringJoined();this.UseDirectQuery("div[data-valmsg-summary]",vt=>vt.AddChildren(`<ul>${lt}</ul>`).RemoveClass("validation-summary-valid").AddClass("validation-summary-errors"))}}RenderValues(){for(let yt of this.Values){this.UseDirectQuery(`[name=${yt.Key}]`,pt=>pt.SetValueOrInnerHtml(yt.Value))}}Render(){this.ClearErrors(),this.RenderErrors(),this.RenderValues()}}e.CalystoMvcModelState=o})(f=u.Direct||(u.Direct={}))})(r=i.UI||(i.UI={}))})(t=n.Web||(n.Web={}))}(Calysto||(Calysto={})),function(n){var t;(function(i){function f(){if(!r){r=true;let o=new n.Web.CalystoVirtualPathHelper(`~/Engine/Src/Core/WebControls/Scroller/Scroller.css?v=${n.Core.Constants.ModuleVersion}`).ToVirtualUrlPath();n.ScriptLoader.LoadCSSFile(o)}}let r=false;var e=`<div class="calystoScrollerCtrl calystoScrollerY">
			<div class="calystoScrollerMarker"></div>
		</div>
		<div class="calystoScrollerCtrl calystoScrollerX">
			<div class="calystoScrollerMarker"></div>
		</div>`;class u{constructor(s){this.MinOpacity=10,this.MaxOpacity=100,this.firstInitDone=false,this.contentElWidth=-1,this.contentElHeight=-1,this.mainElWidth=-1,this.mainElHeight=-1,f(),this.mainEl=s}get CurrentTop(){return this._currentTop}set CurrentTop(h){this.SetScrollPosition(h,null)}get CurrentLeft(){return this._currentLeft}set CurrentLeft(c){this.SetScrollPosition(null,c)}ScrollersAdjustContent(l,a){let v=-1*(l/this.maxMarkerTop)*(this.contentEl.scrollHeight-this.mainEl.clientHeight),y=-1*(a/this.maxMarkerLeft)*(this.contentEl.scrollWidth-this.mainEl.clientWidth);return this.SetScrollPosition(v,y)}SetScrollPosition(p,w){var b,k;typeof p=="number"&&(this.minContentTop=this.mainEl.clientHeight-this.contentEl.scrollHeight,p>0&&(p=0),p<this.minContentTop&&(p=this.minContentTop),p=Math.round(p),this._currentTop=p,this.contentEl.style.marginTop=p+"px",b=-1*this.contentEl.offsetTop/this.contentEl.scrollHeight*this.vSliderEl.offsetHeight,this.vMarkerEl.style.top=Math.round(b)+"px"),typeof w=="number"&&(this.minContentLeft=this.mainEl.clientWidth-this.contentEl.scrollWidth,w>0&&(w=0),w<this.minContentLeft&&(w=this.minContentLeft),w=Math.round(w),this._currentLeft=w,this.contentEl.style.marginLeft=w+"px",k=-1*this.contentEl.offsetLeft/this.contentEl.scrollWidth*this.hSliderEl.offsetWidth,this.hMarkerEl.style.left=Math.round(k)+"px");return{endH:w==0||w==this.minContentLeft,endV:p==0||p==this.minContentTop}}WheelAdjustSliderX(d,g){var nt,tt;this.showHorizontal&&(g=g||{},nt=0,"deltaX"in g?nt=g.deltaX:"wheelDeltaX"in g&&(nt=-g.wheelDeltaX),g.deltaMode==1&&(nt*=30),tt=this.contentEl.offsetLeft-nt,this.SetScrollPosition(null,tt))}WheelAdjustSliderY(it,rt){var ut,ft,et;(this.showVertical||(rt===null||rt===void 0?void 0:rt.shiftKey))&&(rt=rt||{},ut=0,"deltaY"in rt?ut=rt.deltaY:"wheelDeltaY"in rt&&(ut=-rt.wheelDeltaY),rt.deltaMode==1&&(ut*=30),rt.shiftKey?(ft=this.contentEl.offsetLeft-ut,this.SetScrollPosition(null,ft)):(et=this.contentEl.offsetTop-ut,this.SetScrollPosition(et,null)))}WheelAdjustSliders(ot,st){this.WheelAdjustSliderX(ot,st),this.WheelAdjustSliderY(ot,st)}CreateAnimator(ht,ct,lt){this.accelerationAbort=false;var at=0,vt=(new n.Animator).AddValue(0,ct/3,(yt,pt)=>{if(this.accelerationAbort){yt.Abort()}else{var wt={};wt[lt?"deltaY":"deltaX"]=at-pt,lt?this.WheelAdjustSliderY(ht,wt):this.WheelAdjustSliderX(ht,wt),at=pt}}).Easing("easeOutQuart").Duration(1e3).Start()}CalculateVelocity(bt,kt){var ti=(new Date).getTime(),ni=new n.List(kt).Reverse().Take(10).ToList(),dt=ni.FirstOrDefault(),gt=ni.LastOrDefault();return dt&&gt&&dt.ev&&gt.ev&&dt.time&&gt.time?{deltaX:gt.ev.pageX-dt.ev.pageX,deltaY:gt.ev.pageY-dt.ev.pageX,velocityX:(gt.ev.pageX-dt.ev.pageX)/(gt.time-dt.time)*1e3||0,velocityY:(gt.ev.pageY-dt.ev.pageY)/(gt.time-dt.time)*1e3||0,items:kt===null||kt===void 0?void 0:kt.length}:undefined}HandleAcceleration(ii,ri){var ui=this.CalculateVelocity(ii,ri);ui&&(this.showVertical&&ui.velocityY&&Math.abs(ui.deltaY||0)>10&&this.CreateAnimator(ii,ui.velocityY,true),this.showHorizontal&&ui.velocityX&&Math.abs(ui.deltaX||0)>10&&this.CreateAnimator(ii,ui.velocityX,false))}InitElements(){var fi,ei,oi,si;this.firstInitDone||(this.firstInitDone=true,this.contentEl=$$calysto(this.mainEl).ApplyStyle("overflow:hidden;position:relative;").ChildNodes().Where(function(li){return li.nodeType==1}).First(),$$calysto(this.mainEl).AddChildren(e));let hi=this.contentEl.scrollWidth;this.contentEl.style.width=hi+"px",this.hSliderEl=$$calysto(this.mainEl).Query("//.calystoScrollerX").SetOpacity(0).ApplyStyle("display","block").First(),this.hMarkerEl=$$calysto(this.hSliderEl).Query("//.calystoScrollerMarker").First(),this.hAR=this.mainEl.clientWidth/hi,this.showHorizontal=this.hAR<1;let ci=this.contentEl.scrollHeight;this.contentEl.style.height=ci+"px",this.vSliderEl=$$calysto(this.mainEl).Query("//.calystoScrollerY").SetOpacity(0).ApplyStyle("display","block").First(),this.vMarkerEl=$$calysto(this.vSliderEl).Query("//.calystoScrollerMarker").First(),this.vAR=this.mainEl.clientHeight/ci,this.showVertical=this.vAR<1,$$calysto(this.vSliderEl).SetOpacity(this.MinOpacity).ApplyStyle("display",this.showVertical?"block":"none"),$$calysto(this.hSliderEl).SetOpacity(this.MinOpacity).ApplyStyle("display",this.showHorizontal?"block":"none"),this.hMarkerEl.style.width=Math.round(this.hSliderEl.offsetWidth*this.hAR)+"px",this.maxMarkerLeft=((ei=(fi=this.hMarkerEl)===null||fi===void 0?void 0:fi.parentNode)===null||ei===void 0?void 0:ei.clientWidth)-this.hMarkerEl.offsetWidth,this.vMarkerEl.style.height=Math.round(this.vSliderEl.offsetHeight*this.vAR)+"px",this.maxMarkerTop=((si=(oi=this.vMarkerEl)===null||oi===void 0?void 0:oi.parentNode)===null||si===void 0?void 0:si.clientHeight)-this.vMarkerEl.offsetHeight}CopyEvent(ai){return ai?{pageX:ai.pageX,pageY:ai.pageY,clientX:ai.clientX,clientY:ai.clientX}:null}InitializeEvents(){$$calysto([this.hMarkerEl,this.vMarkerEl]).On(["mousedown","touchstart"],bi=>{this.markerDragging=bi});let vi,yi="None",pi=()=>{yi!="Showing"&&(yi="Showing",vi===null||vi===void 0?void 0:vi.Abort(),vi=$$calysto([this.hSliderEl,this.vSliderEl]).ToAnimator({opacity:this.MaxOpacity}).Start())},wi=()=>{yi!="Hiding"&&(yi="Hiding",vi===null||vi===void 0?void 0:vi.Abort(),vi=$$calysto([this.hSliderEl,this.vSliderEl]).ToAnimator({opacity:this.MinOpacity}).Start())};$$calysto(this.mainEl).ForEach(ki=>{$$calysto([this.hSliderEl,this.vSliderEl]).SetOpacity(this.MinOpacity),this.WheelAdjustSliders(ki,null)}).On(["hover","mouseover","mousemove","wheel"],()=>{pi()}).On(["hout"],()=>{wi()}).On(["scroll","mousewheel","wheel","DOMMouseScroll"],(di,gi)=>{let nr=false;if(this.showVertical&&(gi.type=="wheel"||gi.type=="mousewheel")?nr=true:this.showHorizontal&&(gi===null||gi===void 0?void 0:gi.shiftKey)?nr=true:this.showHorizontal&&(Math.abs(gi===null||gi===void 0?void 0:gi.deltaX)>0||Math.abs(gi===null||gi===void 0?void 0:gi.wheelDeltaX)>0)&&(nr=true),nr){this.WheelAdjustSliders(di,gi);return false}return true}).On(["mousedown","touchstart"],(tr,ir)=>{ir.type=="touchstart"&&(ir=ir.touches[0]),this.moveStatistics=[],this.accelerationAbort=true,this.startCondition={event:this.CopyEvent(ir),contentLeft:this.contentEl.offsetLeft,contentTop:this.contentEl.offsetTop,vMarkerTop:this.vMarkerEl.offsetTop,hMarkerLeft:this.hMarkerEl.offsetLeft}}),$$calysto(document).On(["mouseup","touchend"],()=>{this.moveStatistics&&!this.markerDragging&&this.HandleAcceleration(this.mainEl,this.moveStatistics),this.moveStatistics=null,this.markerDragging=null,this.startCondition=null}),$$calysto([document,this.mainEl]).On(["mousemove","touchmove"],(rr,ur)=>{var er,or;if(!this.startCondition){return true};if(ur.type=="touchmove"&&(ur=ur.touches[0]),pi(),this.moveStatistics.push({time:(new Date).getTime(),ev:this.CopyEvent(ur)}),this.markerDragging==this.hMarkerEl){er=Math.round(this.startCondition.hMarkerLeft-(this.startCondition.event.pageX-ur.pageX)),this.ScrollersAdjustContent(null,er);return false}if(this.markerDragging==this.vMarkerEl){or=Math.round(this.startCondition.vMarkerTop-(this.startCondition.event.pageY-ur.pageY)),this.ScrollersAdjustContent(or,null);return false}if(!this.markerDragging){var sr=this.startCondition.event.pageY-ur.pageY,hr=this.startCondition.event.pageX-ur.pageX,or=Math.round(this.startCondition.contentTop-sr),er=Math.round(this.startCondition.contentLeft-hr),fr=this.SetScrollPosition(or,er);return Math.abs(hr)>10&&(fr===null||fr===void 0?void 0:fr.endH)?true:Math.abs(sr)>10&&(fr===null||fr===void 0?void 0:fr.endV)?true:false}return true})}Start(){this.InitElements(),this.InitializeEvents();var cr=setInterval(()=>{this.contentEl&&this.mainEl&&this.contentEl.scrollHeight>0&&this.contentEl.scrollWidth>0&&(this.contentEl.scrollWidth!=this.contentElWidth||this.contentEl.scrollHeight!=this.contentElHeight||this.mainEl.clientWidth!=this.mainElWidth||this.mainEl.clientHeight!=this.mainElHeight)&&(this.contentElWidth=this.contentEl.scrollWidth,this.contentElHeight=this.contentEl.scrollHeight,this.mainElWidth=this.mainEl.clientWidth,this.mainElHeight=this.mainEl.clientHeight,this.InitElements())},2e3)}static Create(lr){$$calysto(lr||".calystoScroller").Where(function(ar){return!ar.__calystoScroller}).ForEach(function(vr){vr.__calystoScroller=true}).ForEach(function(yr){let pr=new u(yr);pr.Start(),yr.__calystoScroller=pr})}}i.CalystoScroller=u})(t=n.WebControls||(n.WebControls={}))}(Calysto||(Calysto={})),Calysto.TestTools.TestRunner.AddTest(()=>{var n=[{Ime:"ante",Godine:[1,2,3,4]},{Ime:"ante2",Godine:[13,2,3,4]},{Ime:"ante",Godine:[5,43,4]}].AsEnumerable().SelectMany(i=>i.Godine).ToArray(),t=["fsdagasd","fdder","ff","tt","oc","one","one","one","two","two","nemza","temza","aa","bb","cc"].AsEnumerable().OrderBy(r=>r.length,true).ThenBy(u=>u,true).ThenBy(f=>f.length,true).Skip(1).Take(4).ToStringJoined("; ");console.log("CalystoEnumerable test successful")}),Calysto.TestTools.TestRunner.AddTest(()=>{var n=new Calysto.Dictionary,i,t,r;n.Add("dva","fasdf"),n.Add(1,3),n.Add(5,342352362344237623453734),n.Add(51,344237623453734),n.Add(true,344237623453734),n.Add(false,344237623453734),i=[n.Count(),n.GetValue(5),n.ContainsKey(51),n.ContainsKey("51"),n.GetKeys().join(","),n.GetValues().join(",")].join(";");Calysto.TestTools.UnitTesting.Assert.AreEqual("6;3.423523623442376e+23;true;false;dva,1,5,51,true,false;fasdf,3,3.423523623442376e+23,344237623453734,344237623453734,344237623453734",i),t=new Calysto.Dictionary,t.Add("name","first").Add("last","lastname"),r=[t.Count(),t.GetValues().join(","),t.GetKeys().join(",")].join(";"),Calysto.TestTools.UnitTesting.Assert.AreEqual("2;first,lastname;name,last",r),console.log("Dictionary test successful")}),Calysto.TestTools.TestRunner.AddTest(()=>{var n=[Calysto.Enum.GetNames(Calysto.Type.KnownType).join(","),Calysto.Enum.GetValues(Calysto.Type.KnownType).join(","),Calysto.Enum.GetValue(Calysto.Type.KnownType,"Boolean"),Calysto.Enum.GetValue(Calysto.Type.KnownType,"Number"),Calysto.Enum.GetName(Calysto.Type.KnownType,3),Calysto.Enum.GetName(Calysto.DayOfWeek,2),Calysto.Enum.GetValue(Calysto.DayOfWeek,"Monday"),Calysto.Enum.HasName(Calysto.DayOfWeek,"Monday"),Calysto.Enum.HasName(Calysto.DayOfWeek,"somename"),Calysto.Enum.HasName(Calysto.DayOfWeek,""),Calysto.Enum.HasValue(Calysto.DayOfWeek,3),Calysto.Enum.HasValue(Calysto.DayOfWeek,33),Calysto.Enum.HasValue(Calysto.DayOfWeek,NaN)].join(";");if(n!="String,Boolean,Decimal,Number,Integer,Array,Function,DateTime,Date,Any;1,2,3,4,5,6,7,8,9,10;2;4;Decimal;Tuesday;1;true;false;false;true;false;false"){throw new Error("Error in Calysto.Enum tests, result: "+n);}console.log("Enum tests successful")}),Calysto.TestTools.TestRunner.AddTest(()=>{function n(t,i){var r=Calysto.Globalization.CultureInfo.CurrentCulture;Calysto.Globalization.CultureInfo.CurrentCulture=t||Calysto.Globalization.CultureInfo.USCulture,i(),Calysto.Globalization.CultureInfo.CurrentCulture=r}n(Calysto.Globalization.CultureInfo.USCulture,function(){var w=Calysto.Features.GetBrowser().KindName=="MSIE"&&Calysto.Features.GetBrowser().Version<=8,l,h,a,c,u,s,e,v,o,f,y,p;if(!w){u=new Calysto.List,Calysto.Collections.ForEachProperties(Calysto.Type.KnownType,function(g,nt){u.Add(g+":"+nt)}),l=u.ToStringJoined("; ");for(Calysto.TestTools.UnitTesting.Assert.AreEqual("1:String; 2:Boolean; 3:Decimal; 4:Number; 5:Integer; 6:Array; 7:Function; 8:DateTime; 9:Date; 10:Any; String:1; Boolean:2; Decimal:3; Number:4; Integer:5; Array:6; Function:7; DateTime:8; Date:9; Any:10",l),h=["s1","",null,"true",true,false,undefined,2.34,541e3,64,[3,4,2],document.documentElement.childNodes,function(){return 3},Calysto.DateTime.Now(),new Date,{custom:"fsdfsad"}],u=new Calysto.List,s=0;s<h.length;s++){try{u.Add(Calysto.Type.TypeDescriptor.FromValue(h[s]).NullableTypeName)}catch(d){u.Add("unresolved")}}for(a=u.ToStringJoined("; "),Calysto.TestTools.UnitTesting.Assert.AreEqual("String; String; Any?; String; Boolean; Boolean; Any?; Decimal; Decimal; Decimal; Array; Array; Function; DateTime; Date; unresolved",a),c=["s1","",null,"true",true,false,undefined,{value:2.34,calystoFormat:"N3"},{value:5.41345,calystoFormat:"n2"},{value:541e3,calystoFormat:"N4"},{value:541e3,calystoFormat:"C4"},{value:541e3,calystoFormat:"C4",culture:Calysto.Globalization.CultureInfo.HRCulture},64,[3,4,2],{value:Calysto.DateTime.ParseDateTime("18.5.2016. 22:44:26","dd.MM.yyyy. HH:mm:ss"),culture:Calysto.Globalization.CultureInfo.USCulture},{value:Calysto.DateTime.ParseDateTime("18.5.2016. 22:44:26","dd.MM.yyyy. HH:mm:ss"),culture:Calysto.Globalization.CultureInfo.HRCulture},{value:Calysto.DateTime.ParseDateTime("18.5.2016. 22:44:26","dd.MM.yyyy. HH:mm:ss"),calystoFormat:"dd.MM.yyyy. HH:mm:ss.ff"},{value:new Calysto.DateTime("2016-05-19 02:44:00"),calystoFormat:"MM/dd/yyyy HH:mm"},{custom:"fsdfsad"},(new Calysto.TimeSpan).AddDays(2).AddHours(28).AddMinutes(14).AddSeconds(156).AddMilliseconds(1463).AddTicks(234534)],u=new Calysto.List,s=0;s<c.length;s++){try{e=c[s],n(e&&e.culture?e.culture:null,function(){e&&(e.calystoFormat||e.culture)?u.Add(Calysto.Type.TypeConverter.ToStringFormated(e.value,e.calystoFormat)):u.Add(Calysto.Type.TypeConverter.ToStringFormated(e))})}catch(d){u.Add("unresolved")}}v=u.ToStringJoined("; ");Calysto.TestTools.UnitTesting.Assert.AreEqual("s1; ; ; true; true; false; ; 2.340; 5.41; 541,000.0000; $541,000.0000; 541.000,0000 kn; 64; [3,4,2]; 5/18/2016 10:44:26 PM; 18.5.2016. 22:44:26; 18.05.2016. 22:44:26.00; 05/19/2016 02:44; unresolved; 76:20:31.997",v);class b extends Calysto.BoxValue{constructor(){super(...arguments),this.Items=[]}SetValue(tt){this.Items.push(tt)}}o={},Calysto.DataBinder.SetValue(o,"prop1.prop2.prop3.prop4.prop5",234),Calysto.DataBinder.SetValue(o,"prop1.prop2.prop3.Value5",111),f=new b,y=[Calysto.Type.TypeConverter.ChangeType("True","Boolean"),Calysto.Type.TypeConverter.ChangeType("true","Boolean"),Calysto.Type.TypeConverter.ChangeType("false","Boolean"),Calysto.Type.TypeConverter.ChangeType("False","Boolean"),Calysto.Type.TypeConverter.ChangeType("0","Boolean"),Calysto.Type.TypeConverter.ChangeType("1","Boolean"),Calysto.Type.TypeConverter.ChangeType(0,"Boolean"),Calysto.Type.TypeConverter.ChangeType(1,"Boolean"),Calysto.Type.TypeConverter.ChangeType(undefined,"Boolean?"),Calysto.Type.TypeConverter.ChangeType(undefined,"Integer",true),Calysto.Type.TypeConverter.ChangeType("","Decimal",true),Calysto.Type.TypeConverter.ChangeType("","Boolean",true),Calysto.Type.TypeConverter.ChangeType("","String",true),Calysto.Type.TypeConverter.ChangeType(null,"String",true),Calysto.Type.TypeConverter.ChangeType(undefined,"String?"),Calysto.Type.TypeConverter.ChangeType("-2.53","Decimal"),Calysto.Type.TypeConverter.ChangeType("-12.553","Number"),Calysto.Type.TypeConverter.ChangeType("-42.1234","Integer"),Calysto.Type.TypeConverter.ChangeType(-432.23432,"Decimal"),Calysto.Type.TypeConverter.ChangeType(-4435.53241,"Integer"),Calysto.Type.TypeConverter.ChangeType("[34,53,4325]","Array"),Calysto.DateTime.ParseDateTime("18.05.2016. 22:44:26.42","dd.MM.yyyy"),Calysto.DateTime.ParseDateTime("18.05.2016. 22:44:26.42","dd.MM.yyyy"),Calysto.DateTime.ParseDateTime("18.05.2016. 22:44:26.42","dd.MM.yyyy. HH:mm:ss.ff"),"valueTypeTest",Calysto.Type.TypeInspector.IsValueType(null),Calysto.Type.TypeInspector.IsValueType(""),Calysto.Type.TypeInspector.IsValueType(function(){}),Calysto.Type.TypeInspector.IsValueType({}),Calysto.Type.TypeInspector.IsValueType(2),Calysto.Type.TypeInspector.IsValueType(true),"containPropertyTest",Calysto.Type.TypeInspector.ContainsProperty({dva:43},"dva"),Calysto.Type.TypeInspector.ContainsProperty({dvatri:43},"dva"),"dataBinderTryGetValueTest",Calysto.DataBinder.TryGetValue({dva:2,trie:3},"dva2",f),Calysto.DataBinder.TryGetValue({dva:2,trie:{dva:2,trie:{dva:2,trie:3}}},"trie.trie.dva",f),Calysto.DataBinder.TryGetValue({dva:2,trie:3},"dva",f),Calysto.DataBinder.TryGetValue({},"dva",f),"temp1isnext",o,"trygetvalue11",Calysto.DataBinder.TryGetValue(o,"prop1.prop2.prop3.prop4.prop5",f),Calysto.DataBinder.TryGetValue(o,"prop1.prop2.prop3.Value5",f),Calysto.DataBinder.TryGetValue(o,"prop1.prop2",f),Calysto.DataBinder.TryGetValue(o,"prop1.prop2.",f),Calysto.DataBinder.TryGetValue(o,"prop1.prop4",f),"refOutArrStart",f.Items];p=Calysto.Json.Serialize(y),Calysto.TestTools.UnitTesting.Assert.AreEqual('[true,true,false,false,false,true,false,true,null,null,null,null,"",null,null,-2.53,-12.553,-42,-432.23432,-4435,["34","53","4325"],{"__calystotype":"Calysto_Date","Date":"2016-05-18T00:00:00.000"},{"__calystotype":"Calysto_Date","Date":"2016-05-18T00:00:00.000"},{"__calystotype":"Calysto_Date","Date":"2016-05-18T22:44:26.420"},"valueTypeTest",false,true,false,false,true,true,"containPropertyTest",true,false,"dataBinderTryGetValueTest",false,true,true,false,"temp1isnext",{"prop1":{"prop2":{"prop3":{"prop4":{"prop5":234},"Value5":111}}}},"trygetvalue11",true,true,true,true,false,"refOutArrStart",[2,2,234,111,{"prop3":{"prop4":{"prop5":234},"Value5":111}},{"prop3":{"prop4":{"prop5":234},"Value5":111}}]]',p),console.log("DataBinder.SetValue test successful"),console.log("DataBinder.TryGetValue test successful"),console.log("DateTime.Parse test successful"),console.log("Type.ChangeType test successful"),console.log("Type test successful")}})}),Calysto.TestTools.TestRunner.AddTest(()=>{var s="this is my text and chars žćčđšĐŠŽĆČ?",i=Calysto.Utility.Encoding.RfcBase64.EncodeToBase64String(s),r,u,n,h,a,f,e,o;if(i!="dGhpcyBpcyBteSB0ZXh0IGFuZCBjaGFycyDFvsSHxI3EkcWhxJDFoMW9xIbEjD8="){throw new Error("Calysto.Utility.Encoding.RfcBase64.EncodeToBase64String() self test error. Result: "+i);}if(r=Calysto.Utility.Encoding.RfcBase64.DecodeBase64StringToString(i),r!=s){throw new Error("Calysto.Utility.Encoding.RfcBase64.DecodeBase64StringToString() self test error. Result: "+r);}if(u="http://sitežlkjđšžćč.com/?čščćžđaša fds žhsdf",n=Calysto.Utility.Html.UrlEncode(u),n!="http%3A%2F%2Fsite%C3%85%C2%BElkj%C3%84%C2%91%C3%85%C2%A1%C3%85%C2%BE%C3%84%C2%87%C3%84%C2%8D.com%2F%3F%C3%84%C2%8D%C3%85%C2%A1%C3%84%C2%8D%C3%84%C2%87%C3%85%C2%BE%C3%84%C2%91a%C3%85%C2%A1a%20fds%20%C3%85%C2%BEhsdf"){throw new Error("Calysto.Utility.Html.UrlEncode() self test error. Result: "+n);}if(h=Calysto.Utility.Html.UrlDecode(n),h!=u){throw new Error("Calysto.Utility.Html.UrlDecode() self test error. Result: "+n);}var t="this is my žćčđšŽĆČĐŠ string",c=Calysto.Utility.Encoding.UTF8.GetBytes(t),l=Calysto.Utility.Encoding.UTF8.GetString(c);if(l!=t){throw new Error("Calysto.Utility.Encoding.UTF8.GetString() self test error. Result: "+l+", expected: "+t);}if(a=(new Calysto.Utility.Encoding.CalystoBaseConverter).EncodeToBaseString(c,6),f=(new Calysto.Utility.Encoding.CalystoBaseConverter).DecodeBaseStringToString(a,6),f!=t){throw new Error("Calysto.Utility.Encoding.CalystoBaseConverter.DecodeBaseStringToString() self test error. Result: "+f+", expected: "+t);}if(e=[Calysto.Utility.Path.GetQueryString("\\fasdfs\\hhdfg\\yerrre.cs?fsfs=twerew"),Calysto.Utility.Path.GetDirectoryName("\\fasdfs\\hhdfg\\yerrre.cs?fsfs=twerew"),Calysto.Utility.Path.GetFilePath("\\fasdfs\\hhdfg\\yerrre.cs?fsfs=twerew"),Calysto.Utility.Path.GetFileName("\\fasdfs\\hhdfg\\yerrre.cs?fsfs=twerew"),Calysto.Utility.Path.GetExtension("\\fasdfs\\hhdfg\\yerrre.cs?fsfs=twerew")].join(", "),o="?fsfs=twerew, \\fasdfs\\hhdfg, \\fasdfs\\hhdfg\\yerrre.cs, yerrre.cs, .cs",e!=o){throw new Error("Calysto.Utility.Path selftest error. Result: "+e+", expected: "+o);}if(Calysto.Utility.CalystoTools.ByteArrayToLong(Calysto.Utility.CalystoTools.LongToByteArray(20042362354623561))!=20042362354623561){throw new Error("Selftest ByteArrayToLong failed");}console.log("Utility test successful")}),Calysto.TestTools.TestRunner.AddTest(()=>{var t=["hretygsadfewh/ghsd/.?gsadf".EndsWith("adf"),"hretygsadfewh/ghsd/.?gsadf".EndsWith("aDf",true),"hretygsadfewh/ghsd/.?gsadf".EndsWith("aDf"),"hretygshreadfewh/ghsd/.?gsadf".StartsWith("hre"),"hretygshreadfewh/ghsd/.?gsadf".StartsWith("hRe",true),"hretygshreadfewh/ghsd/.?gsadf".StartsWith("hRe"),"hretygsadfewh/ghsd/.?gsadf".Contains("gh"),"hretygsadfewh/ghsd/.?gsadf".Contains("G"),"hretygsadfewh/ghsd/.?gsadf".Contains("GH",true),"hretygsadfewh/ghsd/.?gsadf".GetHashCode(),"hretygsadfewh/ghsd/.?gsadf".Remove(4),"hretygsadfewh/ghsd/.?gsadf".Remove(324),"hretygsadfewh/ghsd/.?gsadf".Repeat(3),"hretygsadfewh/ghsd/.?gsadf".Repeat(0)].join("_"),n;if(t!="true_true_false_true_true_false_true_false_true_-914965447_hret_hretygsadfewh/ghsd/.?gsadf_hretygsadfewh/ghsd/.?gsadfhretygsadfewh/ghsd/.?gsadfhretygsadfewh/ghsd/.?gsadf_"){throw new Error("Error in String test1, result: "+t);}if(n=["testfunction(){reutrn false; {name1} was not {cars.1} {years.birth} {cars.2} hretygsadfewh/ghsd/.?gsadf}".FormatWith({name1:"John Bravo",years:{birth:22,school:8},cars:["ford","bmw","audi"]}),"hretygsadfewh/ghsd/.?gsadf".ReplaceAll("h","1"),"hretygsadfewh/ghsd/.?gsadf".TakeFirst(5),"hretygsadfewh/ghsd/.?gsadf".TakeFirst(5,"..."),"hretyy".TakeFirst(5,"..."),"hrety".TakeFirst(5,"..."),"hretyy".TakeFirst(4,"..."),"hretygsadfewh/ghsd/.?gsadf".TakeLast(5),"hretygsadfewh/ghsd/.?gsadf".TakeLast(5,"..."),"hretyg".TakeLast(7,"..."),"hretyg".TakeLast(6,"..."),"hretyg".TakeLast(5,"..."),"this is my word number one".TakeLast(15,"..."),"this is my word number one".TakeLast(15,"...",true),"this is my word number one".TakeFirst(15,"...",true),"this is my word number one".TakeFirst(14,"...",true),"this is my word number one".TakeFirst(16,"...",true),String.IsNullOrEmpty(),String.IsNullOrEmpty(""),String.IsNullOrEmpty("d"),String.IsNullOrEmpty("gsdf"),String.IsNullOrWhiteSpace(),String.IsNullOrWhiteSpace("false"),String.IsNullOrWhiteSpace(""),String.IsNullOrWhiteSpace(" "),String.IsNullOrWhiteSpace(" e"),String.IsNullOrWhiteSpace(" \r\n\t"),String.IsNullOrWhiteSpace("\t"),String.IsNullOrWhiteSpace("\t\n")].join("_"),n!="testfunction(){reutrn false; John Bravo was not bmw 22 audi hretygsadfewh/ghsd/.?gsadf}_1retygsadfew1/g1sd/.?gsadf_hrety_hr..._hr..._hr..._h..._gsadf_...df_hretyg_...tyg_...yg_...d number one_...number one_this is my..._this is my..._this is my..._true_true_false_false_true_false_true_true_false_true_true_true"){throw new Error("Error in String test2, result: "+n);}console.log("String test successful")}),Calysto.TestTools.TestRunner.AddTest(()=>{function n(t,i){var r=Calysto.Globalization.CultureInfo.CurrentCulture;Calysto.Globalization.CultureInfo.CurrentCulture=t||Calysto.Globalization.CultureInfo.USCulture,i(),Calysto.Globalization.CultureInfo.CurrentCulture=r}n(Calysto.Globalization.CultureInfo.USCulture,function(){let e=[(-36324263299.49234).ToStringFormated("n6"),(-36324263299.49234).ToStringFormated("n8"),(-36324263299.49234).ToStringFormated("n7"),(-3.6324263299492343).ToStringFormated("n15"),(-3.6324263299492343).ToStringFormated("n12"),(-3.6324263299492343).ToStringFormated("n13"),(-3.6324263299492343).ToStringFormated("n10"),(-3.6324263299492343).ToStringFormated("n9"),(-3.6324263299492343).ToStringFormated("n3"),(-3.6324263299492343).ToStringFormated("n2"),(-3.6324263299492343).ToStringFormated("n1"),(-3.6324263299492343).ToStringFormated("n0"),(-3.6324263299492343).ToStringFormated("n6"),(-3.6324263299492343).ToStringFormated("n5"),3.6324263299492343.ToStringFormated("n5"),3.6324263299492343.ToStringFormated("n6"),3.6324263299492343.ToStringFormated("n3"),3.6324263299492343.ToStringFormated("n1"),3.6324263299492343.ToStringFormated("n0"),3.6324263299492343.ToStringFormated("n")],u=e.join(";"),f="-36,324,263,299.492350;-36,324,263,299.49234000;-36,324,263,299.4923400;-3.632426329949234;-3.632426329949;-3.6324263299492;-3.6324263299;-3.632426330;-3.632;-3.63;-3.6;-4;-3.632426;-3.63243;3.63243;3.632426;3.632;3.6;4;3.63";if(u!=f){throw new Error("Error in Number test1, result: "+u+", expected: "+f);}console.log("Number test successful")})}),Calysto.TestTools.TestRunner.AddTest(()=>{var n=new Calysto.QueryString("http://toolnix.com/widgetcontent?marker=1&balloon=0&width=400&height=200&mid=2004&sig=fsdaf"),t=n.GetUrl();if("http://toolnix.com/widgetcontent?marker=1&balloon=0&width=400&height=200&mid=2004&sig=fsdaf"!=t){throw new Error("Calysto.QueryString #1 selftest error. Result: "+t+", expected: http://toolnix.com/widgetcontent?marker=1&balloon=0&width=400&height=200&mid=2004&sig=fsdaf");}if(n=new Calysto.QueryString("http://toolnix.com/widgetcontent"),t=n.GetUrl(),"http://toolnix.com/widgetcontent"!=t){throw new Error("Calysto.QueryString #2 selftest error. Result: "+t+", expected: http://toolnix.com/widgetcontent");}if(n=new Calysto.QueryString("http://toolnix.com/widgetcontent?marker=1&balloon=0&width=400&height=200&mid=2004&#fasdf#fasdf"),n.SetValue("mmm",1043),n.RemoveValue("balloon"),t=n.GetUrl(),"http://toolnix.com/widgetcontent?marker=1&width=400&height=200&mid=2004&mmm=1043#fasdf#fasdf"!=t){throw new Error("Calysto.QueryString #3 selftest error. Result: "+t+", expected: http://toolnix.com/widgetcontent?marker=1&width=400&height=200&mid=2004&mmm=1043");}if(n=new Calysto.QueryString("http://toolnix.com/widgetcontent?marker=1&balloon=0&width=400&height=200&mid=2004&#fasdf#fasdf"),n.SetValue("mmm",1043),n.RemoveValue("balloon"),t=n.GetUrl(),"http://toolnix.com/widgetcontent?marker=1&width=400&height=200&mid=2004&mmm=1043#fasdf#fasdf"!=t){throw new Error("Calysto.QueryString #4 selftest error. Result: "+t+", expected: http://toolnix.com/widgetcontent?marker=1&width=400&height=200&mid=2004&mmm=1043#fasdf#fasdf");}if(n=new Calysto.QueryString("http://toolnix.com/widgetcontent?marker=1&balloon=0&width=400&height=200&mid=2004&"),n.SetValue("height",42353),t=n.GetUrl(),"http://toolnix.com/widgetcontent?marker=1&balloon=0&width=400&height=42353&mid=2004"!=t){throw new Error("Calysto.QueryString #5 selftest error. Result: "+t+", expected: http://toolnix.com/widgetcontent?marker=1&balloon=0&width=400&height=42353&mid=2004");}console.log("QueryString test successful")}),Calysto.TestTools.TestRunner.AddTest(()=>{var n="fasdg423675wefdfhuioyfasdyqpoeriu7234rfdsdhlkj6rfa234fdashasdf",e=new Calysto.Regex("fa").Matches(n).AsEnumerable().Select(function(o){return o.Value+", "+o.Success+", "+o.Index}).ToStringJoined(";"),t,i,r,u,f;if(e!="fa, true, 0;fa, true, 21;fa, true, 48"){throw new Error("Calysto.Regex selftest #1 failed, res: "+e);}if(t=new Calysto.Regex("fa").SelectMatches(n).Select(function(s){return s.Value+", "+s.Success+", "+s.Index}).ToStringJoined(";"),t!="fa, true, 0;fa, true, 21;fa, true, 48"){throw new Error("Calysto.Regex selftest #2 failed, res: "+t);}if(i=new Calysto.Regex("fa").SelectSegments(n).Select(function(h){return h.Value+", "+h.Success+", "+h.Index}).ToStringJoined(";"),i!="fa, true, 0;sdg423675wefdfhuioy, false, 2;fa, true, 21;sdyqpoeriu7234rfdsdhlkj6r, false, 23;fa, true, 48;234fdashasdf, false, 50"){throw new Error("Calysto.Regex selftest #3 failed, res: "+i);}if(r=new Calysto.Regex("fa").SelectSegments(n).Select(function(c){return c.Value}).ToStringJoined(";"),r!="fa;sdg423675wefdfhuioy;fa;sdyqpoeriu7234rfdsdhlkj6r;fa;234fdashasdf"){throw new Error("Calysto.Regex selftest #4 failed, res: "+r);}if(u=new Calysto.Regex("fa").SelectSegments(n).Select(function(l){return l.Value}).ToStringJoined(""),u!="fasdg423675wefdfhuioyfasdyqpoeriu7234rfdsdhlkj6rfa234fdashasdf"){throw new Error("Calysto.Regex selftest #5 failed, res: "+u);}if(f="pos-bottom-center, pos-bottom-center2".ReplaceAll("pos-","replacedText"),f!="replacedTextbottom-center, replacedTextbottom-center2"){throw new Error("Calysto.Regex selftest #6 failed, res: "+f);}console.log("Regex test successful")}),Calysto.TestTools.TestRunner.AddTest(()=>{var l=Calysto.Features.GetBrowser().KindName=="MSIE"&&Calysto.Features.GetBrowser().Version<=8,t,i,o,s;if(!l){var a=Calysto.Json.Deserialize('{"msg":"hasdfs","files":[{"DataUrl":"","BlobIndex":0,"FileName":"img_1.gif","MimeType":"image/gif","Size":56591,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":1,"FileName":"img_2.gif","MimeType":"image/gif","Size":70622,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":2,"FileName":"img_3.gif","MimeType":"image/gif","Size":68342,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":3,"FileName":"img_4.gif","MimeType":"image/gif","Size":95296,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":4,"FileName":"img_5.gif","MimeType":"image/gif","Size":87117,"__calystotype":"Calysto222222_Blob"}]}'),n=new Calysto.Json.JsonNode(a),v=Calysto.Json.Serialize(n.Descendants(true).Skip(1).Take(2).ToArray()),y=`[{"Property":"msg","Level":1,"Type":1,"Value":"hasdfs","Parent":{"Property":"@","Level":0,"Type":2,"Value":{"msg":"hasdfs","files":[{"DataUrl":"","BlobIndex":0,"FileName":"img_1.gif","MimeType":"image/gif","Size":56591,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":1,"FileName":"img_2.gif","MimeType":"image/gif","Size":70622,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":2,"FileName":"img_3.gif","MimeType":"image/gif","Size":68342,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":3,"FileName":"img_4.gif","MimeType":"image/gif","Size":95296,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":4,"FileName":"img_5.gif","MimeType":"image/gif","Size":87117,"__calystotype":"Calysto222222_Blob"}]}}},{"Property":"files","Level":1,"Type":3,"Value":[{"DataUrl":"","BlobIndex":0,"FileName":"img_1.gif","MimeType":"image/gif","Size":56591,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":1,"FileName":"img_2.gif","MimeType":"image/gif","Size":70622,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":2,"FileName":"img_3.gif","MimeType":"image/gif","Size":68342,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":3,"FileName":"img_4.gif","MimeType":"image/gif","Size":95296,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":4,"FileName":"img_5.gif","MimeType":"image/gif","Size":87117,"__calystotype":"Calysto222222_Blob"}],"Parent":{"Property":"@","Level":0,"Type":2,"Value":{"msg":"hasdfs","files":[{"DataUrl":"","BlobIndex":0,"FileName":"img_1.gif","MimeType":"image/gif","Size":56591,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":1,"FileName":"img_2.gif","MimeType":"image/gif","Size":70622,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":2,"FileName":"img_3.gif","MimeType":"image/gif","Size":68342,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":3,"FileName":"img_4.gif","MimeType":"image/gif","Size":95296,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":4,"FileName":"img_5.gif","MimeType":"image/gif","Size":87117,"__calystotype":"Calysto222222_Blob"}]}}}]`;Calysto.TestTools.UnitTesting.Assert.AreEqual(y,v,"#ref res55exp"),t=Calysto.Json.Serialize(n.Children(true).Take(2).ToArray()),i=`[{"Property":"@","Level":0,"Type":2,"Value":{"msg":"hasdfs","files":[{"DataUrl":"","BlobIndex":0,"FileName":"img_1.gif","MimeType":"image/gif","Size":56591,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":1,"FileName":"img_2.gif","MimeType":"image/gif","Size":70622,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":2,"FileName":"img_3.gif","MimeType":"image/gif","Size":68342,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":3,"FileName":"img_4.gif","MimeType":"image/gif","Size":95296,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":4,"FileName":"img_5.gif","MimeType":"image/gif","Size":87117,"__calystotype":"Calysto222222_Blob"}]}},{"Property":"msg","Level":1,"Type":1,"Value":"hasdfs","Parent":{"Property":"@","Level":0,"Type":2,"Value":{"msg":"hasdfs","files":[{"DataUrl":"","BlobIndex":0,"FileName":"img_1.gif","MimeType":"image/gif","Size":56591,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":1,"FileName":"img_2.gif","MimeType":"image/gif","Size":70622,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":2,"FileName":"img_3.gif","MimeType":"image/gif","Size":68342,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":3,"FileName":"img_4.gif","MimeType":"image/gif","Size":95296,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":4,"FileName":"img_5.gif","MimeType":"image/gif","Size":87117,"__calystotype":"Calysto222222_Blob"}]}}}]`,Calysto.TestTools.UnitTesting.Assert.AreEqual(i,t,"#ref res56exp");var r=n.Descendants(true).Where(it=>it.Index>0||it.Index==0).Select(rt=>rt).Where(ut=>!!ut),nt=r.ToArray(),p=n.Descendants(true).Where(ft=>ft.Index>0||ft.Index==0).Skip(2).Take(1).ToArray(),tt=n.Descendants(true).ToArray(),u=[p],w=Calysto.Json.Serialize(u),f=Calysto.Json.Serialize(u,100),b=`[[{"Index":2,"Property":"2","Level":2,"Type":2,"Value":{"DataUrl":"","BlobIndex":2,"FileName":"img_3.gif","MimeType":"image/gif","Size":68342,"__calystotype":"Calysto222222_Blob"},"Parent":{"Property":"files","Level":1,"Type":3,"Value":[{"DataUrl":"","BlobIndex":0,"FileName":"img_1.gif","MimeType":"image/gif","Size":56591,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":1,"FileName":"img_2.gif","MimeType":"image/gif","Size":70622,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":2,"FileName":"img_3.gif","MimeType":"image/gif","Size":68342,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":3,"FileName":"img_4.gif","MimeType":"image/gif","Size":95296,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":4,"FileName":"img_5.gif","MimeType":"image/gif","Size":87117,"__calystotype":"Calysto222222_Blob"}],"Parent":{"Property":"@","Level":0,"Type":2,"Value":{"msg":"hasdfs","files":[{"DataUrl":"","BlobIndex":0,"FileName":"img_1.gif","MimeType":"image/gif","Size":56591,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":1,"FileName":"img_2.gif","MimeType":"image/gif","Size":70622,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":2,"FileName":"img_3.gif","MimeType":"image/gif","Size":68342,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":3,"FileName":"img_4.gif","MimeType":"image/gif","Size":95296,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":4,"FileName":"img_5.gif","MimeType":"image/gif","Size":87117,"__calystotype":"Calysto222222_Blob"}]}}}}]]`;Calysto.TestTools.UnitTesting.Assert.AreEqual(b,f,"#ref res11exp");var e=r.Last(),k=e.Ancestors(true).ToArray(),d=k.length;Calysto.TestTools.UnitTesting.Assert.AreEqual(3,d,"#ref cnt11"),o=e.Ancestors(false).ToArray(),s=o.length,Calysto.TestTools.UnitTesting.Assert.AreEqual(2,s,"#ref cnt13"),Calysto.TestTools.UnitTesting.Assert.AreEqual(w,f,"#ref res11");var h={a:new Calysto.DateTime("2016-07-02T11:08:25.244Z"),b:window.tqwefdhdasrtyqwer,c:null,d:parseInt(window.tqweyshasdfsg)},c=Calysto.Json.Serialize(h),g=Calysto.Json.Serialize(h,100);Calysto.TestTools.UnitTesting.Assert.AreEqual(`{"a":{"__calystotype":"Calysto_Date","Date":"2016-07-02T11:08:25.244"},"b":null,"c":null,"d":null}`,c,"#ref json1"),Calysto.TestTools.UnitTesting.Assert.AreEqual(c,g),console.log("JsonNode1 test successful")}}),Calysto.TestTools.TestRunner.AddTest(()=>{let i={Ime:"janko",Prezime:"bobetko",Sub1:{Name:"sub1",Sub2:{Name:"sub2",One:"jedan",Size:25}},Age:150,List1:[{a:10},{a:20},{a:30}],List2:[1,2,3,4,5]},n=new Calysto.Json.JsonNode(i);Calysto.TestTools.UnitTesting.Assert.AreEqual(`{"Property":"@","Level":0,"Type":2,"Value":{"Ime":"janko","Prezime":"bobetko","Sub1":{"Name":"sub1","Sub2":{"Name":"sub2","One":"jedan","Size":25}},"Age":150,"List1":[{"a":10},{"a":20},{"a":30}],"List2":[1,2,3,4,5]}}`,JSON.stringify(n),"#reference tree1");let r=n.Children(true).ToArray();Calysto.TestTools.UnitTesting.Assert.AreEqual(`[{"Property":"@","Level":0,"Type":2,"Value":{"Ime":"janko","Prezime":"bobetko","Sub1":{"Name":"sub1","Sub2":{"Name":"sub2","One":"jedan","Size":25}},"Age":150,"List1":[{"a":10},{"a":20},{"a":30}],"List2":[1,2,3,4,5]}},{"Property":"Ime","Level":1,"Type":1,"Value":"janko","Parent":{"Property":"@","Level":0,"Type":2,"Value":{"Ime":"janko","Prezime":"bobetko","Sub1":{"Name":"sub1","Sub2":{"Name":"sub2","One":"jedan","Size":25}},"Age":150,"List1":[{"a":10},{"a":20},{"a":30}],"List2":[1,2,3,4,5]}}},{"Property":"Prezime","Level":1,"Type":1,"Value":"bobetko","Parent":{"Property":"@","Level":0,"Type":2,"Value":{"Ime":"janko","Prezime":"bobetko","Sub1":{"Name":"sub1","Sub2":{"Name":"sub2","One":"jedan","Size":25}},"Age":150,"List1":[{"a":10},{"a":20},{"a":30}],"List2":[1,2,3,4,5]}}},{"Property":"Sub1","Level":1,"Type":2,"Value":{"Name":"sub1","Sub2":{"Name":"sub2","One":"jedan","Size":25}},"Parent":{"Property":"@","Level":0,"Type":2,"Value":{"Ime":"janko","Prezime":"bobetko","Sub1":{"Name":"sub1","Sub2":{"Name":"sub2","One":"jedan","Size":25}},"Age":150,"List1":[{"a":10},{"a":20},{"a":30}],"List2":[1,2,3,4,5]}}},{"Property":"Age","Level":1,"Type":1,"Value":150,"Parent":{"Property":"@","Level":0,"Type":2,"Value":{"Ime":"janko","Prezime":"bobetko","Sub1":{"Name":"sub1","Sub2":{"Name":"sub2","One":"jedan","Size":25}},"Age":150,"List1":[{"a":10},{"a":20},{"a":30}],"List2":[1,2,3,4,5]}}},{"Property":"List1","Level":1,"Type":3,"Value":[{"a":10},{"a":20},{"a":30}],"Parent":{"Property":"@","Level":0,"Type":2,"Value":{"Ime":"janko","Prezime":"bobetko","Sub1":{"Name":"sub1","Sub2":{"Name":"sub2","One":"jedan","Size":25}},"Age":150,"List1":[{"a":10},{"a":20},{"a":30}],"List2":[1,2,3,4,5]}}},{"Property":"List2","Level":1,"Type":3,"Value":[1,2,3,4,5],"Parent":{"Property":"@","Level":0,"Type":2,"Value":{"Ime":"janko","Prezime":"bobetko","Sub1":{"Name":"sub1","Sub2":{"Name":"sub2","One":"jedan","Size":25}},"Age":150,"List1":[{"a":10},{"a":20},{"a":30}],"List2":[1,2,3,4,5]}}}]`,JSON.stringify(r),"#reference d3");let u=n.Descendants(true).Where(y=>y.Level>=2).ToArray();Calysto.TestTools.UnitTesting.Assert.AreEqual(16,u.length,"#reference d2");let f=n.Descendants(false).ToArray();Calysto.TestTools.UnitTesting.Assert.AreEqual(22,f.length,"#reference d5");let e=n.Descendants().Where(p=>p.Property=="Sub1").Select(w=>w.Value).ToArray();Calysto.TestTools.UnitTesting.Assert.AreEqual(1,e.length,"#reference d1");let t=n.Descendants(true).Where(b=>b.Level>=2).First();Calysto.TestTools.UnitTesting.Assert.AreEqual("Name",t.Property,"#reference d2a");let o=t.SelectChain("Nest.Tamo.@.Sub1.Sub2.Size.Next.Home").ToArray(),s=o.Select(k=>({Property:k.Property,Level:k.Level,Value:k.Value+""})).ToArray();Calysto.TestTools.UnitTesting.Assert.AreEqual(`[]`,JSON.stringify(s),"#reference chain22");let h=n.SelectChain("List1.2.a.c").ToArray();Calysto.TestTools.UnitTesting.Assert.AreEqual(`[{"Property":"List1","Level":1,"Type":3,"Value":[{"a":10},{"a":20},{"a":30}],"Parent":{"Property":"@","Level":0,"Type":2,"Value":{"Ime":"janko","Prezime":"bobetko","Sub1":{"Name":"sub1","Sub2":{"Name":"sub2","One":"jedan","Size":25}},"Age":150,"List1":[{"a":10},{"a":20},{"a":30}],"List2":[1,2,3,4,5]}}},{"Index":2,"Property":"2","Level":2,"Type":2,"Value":{"a":30},"Parent":{"Property":"List1","Level":1,"Type":3,"Value":[{"a":10},{"a":20},{"a":30}],"Parent":{"Property":"@","Level":0,"Type":2,"Value":{"Ime":"janko","Prezime":"bobetko","Sub1":{"Name":"sub1","Sub2":{"Name":"sub2","One":"jedan","Size":25}},"Age":150,"List1":[{"a":10},{"a":20},{"a":30}],"List2":[1,2,3,4,5]}}}},{"Property":"a","Level":3,"Type":1,"Value":30,"Parent":{"Index":2,"Property":"2","Level":2,"Type":2,"Value":{"a":30},"Parent":{"Property":"List1","Level":1,"Type":3,"Value":[{"a":10},{"a":20},{"a":30}],"Parent":{"Property":"@","Level":0,"Type":2,"Value":{"Ime":"janko","Prezime":"bobetko","Sub1":{"Name":"sub1","Sub2":{"Name":"sub2","One":"jedan","Size":25}},"Age":150,"List1":[{"a":10},{"a":20},{"a":30}],"List2":[1,2,3,4,5]}}}}}]`,JSON.stringify(h),"#reference chain2");let c=t.Ancestors(true).ToArray();Calysto.TestTools.UnitTesting.Assert.AreEqual(`[{"Property":"Name","Level":2,"Type":1,"Value":"sub1","Parent":{"Property":"Sub1","Level":1,"Type":2,"Value":{"Name":"sub1","Sub2":{"Name":"sub2","One":"jedan","Size":25}},"Parent":{"Property":"@","Level":0,"Type":2,"Value":{"Ime":"janko","Prezime":"bobetko","Sub1":{"Name":"sub1","Sub2":{"Name":"sub2","One":"jedan","Size":25}},"Age":150,"List1":[{"a":10},{"a":20},{"a":30}],"List2":[1,2,3,4,5]}}}},{"Property":"Sub1","Level":1,"Type":2,"Value":{"Name":"sub1","Sub2":{"Name":"sub2","One":"jedan","Size":25}},"Parent":{"Property":"@","Level":0,"Type":2,"Value":{"Ime":"janko","Prezime":"bobetko","Sub1":{"Name":"sub1","Sub2":{"Name":"sub2","One":"jedan","Size":25}},"Age":150,"List1":[{"a":10},{"a":20},{"a":30}],"List2":[1,2,3,4,5]}}},{"Property":"@","Level":0,"Type":2,"Value":{"Ime":"janko","Prezime":"bobetko","Sub1":{"Name":"sub1","Sub2":{"Name":"sub2","One":"jedan","Size":25}},"Age":150,"List1":[{"a":10},{"a":20},{"a":30}],"List2":[1,2,3,4,5]}}]`,JSON.stringify(c),"#reference anc1");let l=t.Ancestors(true).Reverse().Select(d=>d.Property).ToStringJoined(".");Calysto.TestTools.UnitTesting.Assert.AreEqual(`@.Sub1.Name`,l,"#reference anc2");let a=new Calysto.Json.JsonNode(i.List1);var v=a.Descendants(true).ToArray();Calysto.TestTools.UnitTesting.Assert.AreEqual(`[{"Property":"@","Level":0,"Type":3,"Value":[{"a":10},{"a":20},{"a":30}]},{"Index":0,"Property":"0","Level":1,"Type":2,"Value":{"a":10},"Parent":{"Property":"@","Level":0,"Type":3,"Value":[{"a":10},{"a":20},{"a":30}]}},{"Property":"a","Level":2,"Type":1,"Value":10,"Parent":{"Index":0,"Property":"0","Level":1,"Type":2,"Value":{"a":10},"Parent":{"Property":"@","Level":0,"Type":3,"Value":[{"a":10},{"a":20},{"a":30}]}}},{"Index":1,"Property":"1","Level":1,"Type":2,"Value":{"a":20},"Parent":{"Property":"@","Level":0,"Type":3,"Value":[{"a":10},{"a":20},{"a":30}]}},{"Property":"a","Level":2,"Type":1,"Value":20,"Parent":{"Index":1,"Property":"1","Level":1,"Type":2,"Value":{"a":20},"Parent":{"Property":"@","Level":0,"Type":3,"Value":[{"a":10},{"a":20},{"a":30}]}}},{"Index":2,"Property":"2","Level":1,"Type":2,"Value":{"a":30},"Parent":{"Property":"@","Level":0,"Type":3,"Value":[{"a":10},{"a":20},{"a":30}]}},{"Property":"a","Level":2,"Type":1,"Value":30,"Parent":{"Index":2,"Property":"2","Level":1,"Type":2,"Value":{"a":30},"Parent":{"Property":"@","Level":0,"Type":3,"Value":[{"a":10},{"a":20},{"a":30}]}}}]`,JSON.stringify(v),"#reference m1"),console.log("JsonNode2 test successful")}),Calysto.TestTools.TestRunner.AddTest(()=>{}),Calysto.TestTools.TestRunner.AddTest(()=>{function n(t,i){var r=Calysto.Globalization.CultureInfo.CurrentCulture;Calysto.Globalization.CultureInfo.CurrentCulture=t||Calysto.Globalization.CultureInfo.USCulture,i(),Calysto.Globalization.CultureInfo.CurrentCulture=r}n(Calysto.Globalization.CultureInfo.USCulture,function(){var rt=Calysto.Features.GetBrowser().KindName=="MSIE"&&Calysto.Features.GetBrowser().Version<=8,e,o,s,h,c,l,a,v,y,p,w,b,u,k,d,g,nt,tt,it;if(!rt){var f=Calysto.Utility.Dom.ConvertToElementsArray('<div id="divForm1" style="background:whitesmoke;padding:10px;margin-top:10px;border:solid 5px red;;">\t\t<input type="text" calysto-id="Game.Name" name="GameName" value="the name of the game" />\t\t<input type="text" calysto-id="Store.Name" name="StoreName" value="store name" />\t\t<input type="text" calysto-id="Realization.IncomeSum1" calysto-getter="()=>Calysto.Type.NumberConverter.ToDecimal(this.value, -5)" name="ctl00$clientNavigation1$IncomeSum1">\t\t<input type="text" calysto-id="Realization.IncomeSum2" calysto-setter="(a1)=>this.value=a1.ToStringFormated(\'n2\')" name="ctl00$clientNavigation1$IncomeSum2">\t\t<input type="text" calysto-id="Realization.IncomeSum3" name="ctl00$clientNavigation1$IncomeSum3" calysto-format="N3">\t\t<input type="text" calysto-id="Realization.IncomeSum4" calysto-setter="(a1)=>this.value=a1.ToStringFormated(\'n2\')" calysto-getter="()=>Calysto.Type.NumberConverter.ToDecimal(this.value, -1)" name="ctl00$clientNavigation1$IncomeSum4">\t\t<div class="right" calysto-id="Realization.IncomeSum5" calysto-setter="(a1)=>this.innerHTML=a1.ToStringFormated(\'n2\')"><\/div>\t\t<select calysto-id="Realization.Color" name="TheColor">\t\t\t<option value="red">Red color<\/option>\t\t\t<option value="blue">Blue color<\/option>\t\t\t<option selected="selected">No color<\/option>\t\t<\/select>\t\t<select calysto-id="Realization.Height" name="TheHeight" multiple="multiple">\t\t\t<option value="1">One inch<\/option>\t\t\t<option value="2" selected="selected">Two inch<\/option>\t\t\t<option value="3" selected="selected">Three inch<\/option>\t\t\t<option value="4">Four inch<\/option>\t\t\t<option selected="selected" value="">No height<\/option>\t\t<\/select>\t\t<input type="radio" calysto-id="Income.Salary" name="ctl00$clientNavigation1$Salary1" value="1000" />\t\t<input type="radio" calysto-id="Income.Salary" name="ctl00$clientNavigation1$Salary1" value="2000" />\t\t<input type="radio" calysto-id="Income.Salary" name="ctl00$clientNavigation1$Salary1" value="3000" />\t\t<input type="radio" calysto-id="Income.Salary" name="ctl00$clientNavigation1$Salary1" value="4000" checked="checked" calysto-type="Decimal" />\t\t<input type="radio" calysto-id="Income.Salary" name="ctl00$clientNavigation1$Salary1" value="5000" />\t\t<input type="checkbox" calysto-id="Addition.Bonus1" name="ctl00$clientNavigation1$Addition1" value="5000" />\t\t<input type="checkbox" calysto-id="Addition.Bonus2" name="ctl00$clientNavigation1$Addition2" value="6000" checked="checked" />\t\t<input type="checkbox" calysto-id="Addition.Bonus3" name="ctl00$clientNavigation1$Addition3" value="7000" checked="checked" />\t\t<input type="checkbox" calysto-id="Addition.Bonus4" name="ctl00$clientNavigation1$Addition4" value="8000" /><\/div>'),u=$$calysto(f).CloneNodes().First(),ut=Calysto.Json.Serialize(Calysto.Forms.CalystoSerialize(u));Calysto.TestTools.UnitTesting.Assert.AreEqual('{"Game":{"Name":"the name of the game"},"Store":{"Name":"store name"},"Realization":{"IncomeSum1":-5,"IncomeSum2":"","IncomeSum3":"","IncomeSum4":-1,"Color":"No color","Height":["2","3",""]},"Income":{"Salary":4000},"Addition":{"Bonus2":"6000","Bonus3":"7000"}}',ut),e=Calysto.Json.Serialize(Calysto.Forms.MvcSerialize(u)),o='{"GameName":"the name of the game","StoreName":"store name","ctl00$clientNavigation1$Addition2":"6000","ctl00$clientNavigation1$Addition3":"7000","TheColor":"No color","TheHeight":["2","3",""]}',Calysto.TestTools.UnitTesting.Assert.AreEqual(o,e),s=Calysto.Json.Serialize(Calysto.Forms.FormSerialize(u)),h='{"GameName":"the name of the game","StoreName":"store name","ctl00$clientNavigation1$Addition2":"6000","ctl00$clientNavigation1$Addition3":"7000","TheColor":"No color","TheHeight":["2","3",""]}',Calysto.TestTools.UnitTesting.Assert.AreEqual(h,s),c='{"Game":{"Name":"game1"},"Store":{"Name":"store1"},"Realization":{"IncomeSum1":2,"IncomeSum2":-34.556,"IncomeSum3":"-23.63423","IncomeSum4":4,"Color":"blue","Height":["1","2","4"]},"Income":{"Salary":"2000"},"Addition":{"Bonus3":"7000","Bonus4":"8000"}}',u=$$calysto(f).CloneNodes().First(),Calysto.Forms.CalystoDeserialize(Calysto.Json.Deserialize(c),u),l=Calysto.Json.Serialize(Calysto.Forms.CalystoSerialize(u)),a='{"Game":{"Name":"game1"},"Store":{"Name":"store1"},"Realization":{"IncomeSum1":2,"IncomeSum2":-34.56,"IncomeSum3":"-23.63423","IncomeSum4":4,"Color":"blue","Height":["1","2","4"]},"Income":{"Salary":"2000"},"Addition":{"Bonus2":"6000","Bonus3":"7000","Bonus4":"8000"}}',Calysto.TestTools.UnitTesting.Assert.AreEqual(a,l),v=Calysto.Json.Serialize(Calysto.Forms.MvcSerialize(u)),y='{"GameName":"game1","StoreName":"store1","ctl00$clientNavigation1$IncomeSum3":"-23.63423","ctl00$clientNavigation1$Salary1":"2000","ctl00$clientNavigation1$Addition2":"6000","ctl00$clientNavigation1$Addition3":"7000","ctl00$clientNavigation1$Addition4":"8000","TheColor":"blue","TheHeight":["1","2","4"]}',Calysto.TestTools.UnitTesting.Assert.AreEqual(y,v),p=Calysto.Json.Serialize(Calysto.Forms.FormSerialize(u)),w='{"GameName":"game1","StoreName":"store1","ctl00$clientNavigation1$IncomeSum3":"-23.63423","ctl00$clientNavigation1$Salary1":"2000","ctl00$clientNavigation1$Addition2":"6000","ctl00$clientNavigation1$Addition3":"7000","ctl00$clientNavigation1$Addition4":"8000","TheColor":"blue","TheHeight":["1","2","4"]}',Calysto.TestTools.UnitTesting.Assert.AreEqual(w,p),b='{"Game":{"Name":"game1"},"Store":{"Name":"store1"},"Realization":{"IncomeSum1":2,"IncomeSum2":-34.556,"IncomeSum3":-23.63463,"IncomeSum4":4,"Color":"blue","Height":[1,2,4]},"Income":{"Salary":20.0034},"Addition":{"Bonus3":70.00643,"Bonus4":-8.000435}}',u=$$calysto(f).CloneNodes().First(),Calysto.Forms.CalystoDeserialize(Calysto.Json.Deserialize(b),u),k=Calysto.Json.Serialize(Calysto.Forms.CalystoSerialize(u)),d='{"Game":{"Name":"game1"},"Store":{"Name":"store1"},"Realization":{"IncomeSum1":2,"IncomeSum2":-34.56,"IncomeSum3":-23.635,"IncomeSum4":4,"Color":"blue","Height":["1","2","4"]},"Addition":{"Bonus2":"6000"}}',Calysto.TestTools.UnitTesting.Assert.AreEqual(d,k),g=Calysto.Json.Serialize(Calysto.Forms.MvcSerialize(u)),nt='{"GameName":"game1","StoreName":"store1","ctl00$clientNavigation1$Addition2":"6000","TheColor":"blue","TheHeight":["1","2","4"]}',Calysto.TestTools.UnitTesting.Assert.AreEqual(nt,g),tt=Calysto.Json.Serialize(Calysto.Forms.FormSerialize(u)),it='{"GameName":"game1","StoreName":"store1","ctl00$clientNavigation1$Addition2":"6000","TheColor":"blue","TheHeight":["1","2","4"]}',Calysto.TestTools.UnitTesting.Assert.AreEqual(it,tt),console.log("Forms test succesful")}})}),Calysto.TestTools.TestRunner.AddTest(()=>{var i=new Calysto.List(["one","aa","nemza","two","temza","bb","cc"]).GroupBy("o=>o.length").SelectMany(function(r){return r.ToArray()}).Select("o=>o.length + ': ' + o").ToStringJoined(", "),n,t;if(i!="3: one, 3: two, 2: aa, 2: bb, 2: cc, 5: nemza, 5: temza"){throw new Error("Self test failed in Calysto.List GroupBy test 1! Result: "+i);}if(n=new Calysto.List(["one","two","nemza","temza","aa","bb","cc"]).OrderBy("o => o.length",true).ThenBy("o=>o",true).GroupBy("o=>o.length").Select("o=> o.Key + ', items: ' + o.ToArray().join('|')").ToStringJoined(", "),n!="5, items: temza|nemza, 3, items: two|one, 2, items: cc|bb|aa"){throw new Error("Self test failed in Calysto.List test 1! Result: "+n);}if(t=new Calysto.List([1,2,3,4,5]).Where("o=>o > 2").Select("(o, n) => new {item: o, index: n}").OrderBy("o=>o.index",true).Select("(o, n) => 'index: ' + n + ', value: ' + o.item").ToStringJoined("; "),t!="index: 0, value: 5; index: 1, value: 4; index: 2, value: 3"){throw new Error("Self test failed in Calysto.List test 2! Result: "+t);}}),Calysto.TestTools.TestRunner.AddTest(()=>{var t=[{DataUrl:function(){},BlobIndex:1,FileName:"img_2.gif",MimeType:"image/gif",Size:70622,__calystotype:"Calysto22_Blob"},{DataUrl:function(){},BlobIndex:2,FileName:"img_2.gif",MimeType:"image/gif",Size:50622,__calystotype:"Calysto11_Blob"},{DataUrl:function(){return 3},BlobIndex:3,FileName:"img_3.gif",MimeType:"image/gif",Size:50622,__calystotype:"Calysto33_Blob"},{DataUrl:"",BlobIndex:4,FileName:"img_3.gif",MimeType:"image/gif",Size:70622,__calystotype:"Calysto222222_Blob"},{DataUrl:"",BlobIndex:5,FileName:"img_2.gif",MimeType:"image/gif",Size:70622,__calystotype:"Calysto222222_Blob"}],o=t.AsEnumerable().Cycle(20).ToArray(),s=t.AsEnumerable().Distinct(h=>h.DataUrl).ToArray(),r=t.AsEnumerable().Cycle(100).Distinct(function(c){return c.DataUrl}).ToArray(),i,n,u,f,e;if(r.length!=4){throw new Error("Self test failed in Distinct test 01, result: "+r.length);}if(i=t.AsEnumerable().Cycle(100).Distinct(function(l){return l}).ToArray(),i.length!=5){throw new Error("Self test failed in Distinct test 02, result: "+i.length);}if(n=[2,3,4,5,6,null,-1,-6].AsEnumerable().Min(),n!=-6){throw new Error("Self test failed in Min test 01, result: "+n);}if(u=[2,3,4,5,null,-1,-6].AsEnumerable().Max(),u!=5){throw new Error("Self test failed in Max test 01, result: "+n);}if(f=[2,3,4,5,6,null,null,null,null,null,null,-1,-6].AsEnumerable().Average(),f!=1.8571428571428572){throw new Error("Self test failed in Average test 01, result: "+n);}if(e=[2,3,4,5,6,null,null,null,null,null,null,-1,-6].AsEnumerable().Sum(),e!=13){throw new Error("Self test failed in Sum test 01, result: "+n);}}),Calysto.TestTools.TestRunner.AddTest(()=>{var t='{"msg":"hasdfs","files":[{"DataUrl":"","BlobIndex":0,"FileName":"img_1.gif","MimeType":"image/gif","Size":56591,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":1,"FileName":"img_2.gif","MimeType":"image/gif","Size":70622,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":2,"FileName":"img_3.gif","MimeType":"image/gif","Size":68342,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":3,"FileName":"img_4.gif","MimeType":"image/gif","Size":95296,"__calystotype":"Calysto222222_Blob"},{"DataUrl":"","BlobIndex":4,"FileName":"img_5.gif","MimeType":"image/gif","Size":87117,"__calystotype":"Calysto222222_Blob"}]}',i,n;if(window.JSON){if(n=JSON.stringify(Calysto.Json.Deserialize(t)),n!=t){throw new Error("Self test failed in Calysto.JSON test 01! Result: "+n);}if(i=JSON.parse(t),n=Calysto.Json.Serialize(i),n!=t){throw new Error("Self test failed in Calysto.JSON test 02! Result: "+n);}}}),Calysto.TestTools.TestRunner.AddTest(()=>{var t=[{name:"one",age:22,sub:{dva:22,tri:33,coll:[{nn:22},{nn:33},{nn:44}]}}].AsEnumerable().Select(r=>r).Select("o => o.sub").Where("o => !!o").Where("o => !!o").SelectMany("o => o.coll").Where("o => o.nn > 1").Intersect([{kk:22},{kk:23},{kk:44}],"(o1, o2) => o1.nn == o2.kk").Where("o => !!o.nn").ForEach('(o, n) => o.addedProperty = "ter-" + n'),i=t.ToArray(),n=Calysto.Json.Serialize(i);if(n!='[{"nn":22,"addedProperty":"ter-0"},{"nn":44,"addedProperty":"ter-1"}]'){throw new Error("Self test failed in Calysto.List test 03! Result: "+n);}}),Calysto.TestTools.TestRunner.AddTest(()=>{var ni=[{name:"one",age:22,sub:{dva:22,tri:33,coll:[{nn:22},{nn:33},{nn:44}]}}].AsEnumerable().Select(li=>li.sub).Where(ai=>!!ai).Where(vi=>!!vi).SelectMany(yi=>yi.coll).Where(pi=>pi.nn>1).Intersect([{kk:22},{kk:23},{kk:44}],(wi,bi)=>wi.nn==bi.kk).Where(ki=>!!ki.nn).ForEach((di,gi)=>di.addedProperty="ter-"+gi),d=ni.ToArray(),i=Calysto.Json.Serialize(d),g,e,o,s,h,c,l,ct,a,v,f,t,yt,ei,p,w,b,k,r,dt,n;if(i!='[{"nn":22,"addedProperty":"ter-0"},{"nn":44,"addedProperty":"ter-1"}]'){throw new Error("Self test failed in Calysto.List test 03! Result: "+i);}if(g=d.AsEnumerable().ToDictionary(nr=>nr.nn,tr=>tr).ToRawObject(),i=Calysto.Json.Serialize(g),i!='{"22":{"nn":22,"addedProperty":"ter-0"},"44":{"nn":44,"addedProperty":"ter-1"}}'){throw new Error("Self test failed in Calysto.List test 04! Result: "+i);}if(e=[[1,2,3,4],null,[8,7,5]].AsEnumerable().SelectMany(ir=>ir).ToArray().join(";"),e!="1;2;3;4;8;7;5"){throw new Error("Self test failed in SelectMay when collection is null, result: "+e);}if(o=[1].AsEnumerable().Skip(1).Concat([3,4,5]).Concat([5,6]).ToArray(),o.length!=5){throw new Error("Self test failed in Calysto.List test Concat 1! Result: "+o.length);}if(s=["one","aa","nemza","two","temza","bb","cc"].AsEnumerable().GroupBy(rr=>rr.length).SelectMany(function(ur){return ur.ToArray()}).Select(fr=>fr.length+": "+fr).ToStringJoined(", "),s!="3: one, 3: two, 2: aa, 2: bb, 2: cc, 5: nemza, 5: temza"){throw new Error("Self test failed in Calysto.List GroupBy test 1! Result: "+s);}if(h=["one","two","nemza","temza","aa","bb","cc"].AsEnumerable().OrderBy(er=>er.length,true).ThenBy(or=>or,true).GroupBy(sr=>sr.length).Select(hr=>hr.Key+", items: "+hr.ToArray().join("|")).ToStringJoined(", "),h!="5, items: temza|nemza, 3, items: two|one, 2, items: cc|bb|aa"){throw new Error("Self test failed in Calysto.List test 1! Result: "+h);}if(c=[1,2,3,4,5].AsEnumerable().Where(cr=>cr>2).Select((lr,ar)=>({item:lr,index:ar})).OrderBy(vr=>vr.index,true).Select((yr,pr)=>"index: "+pr+", value: "+yr.item).ToStringJoined("; "),c!="index: 0, value: 5; index: 1, value: 4; index: 2, value: 3"){throw new Error("Self test failed in Calysto.List test 2b! Result: "+c);}var ti=[{Ordinal:11,ParentCategoryID:5,Name:"111"},{Ordinal:11,ParentCategoryID:5,Name:"222"},{Ordinal:11,ParentCategoryID:5,Name:"333"},{Ordinal:11,ParentCategoryID:5,Name:""},{Ordinal:11,ParentCategoryID:5,Name:undefined},{Ordinal:11,ParentCategoryID:5,Name:undefined},{Ordinal:24,ParentCategoryID:22,Name:"SomeName"},{Ordinal:24,ParentCategoryID:22,Name:"555"},{Ordinal:24,ParentCategoryID:55,Name:"666"},{Ordinal:88,ParentCategoryID:33,Name:"Mark"},{Ordinal:88,ParentCategoryID:55,Name:undefined},{Ordinal:11,ParentCategoryID:22,Name:undefined},{Ordinal:11,ParentCategoryID:33,Name:undefined},{Ordinal:11,ParentCategoryID:55,Name:"Anthon"},{Ordinal:24,ParentCategoryID:22,Name:undefined},{Ordinal:24,ParentCategoryID:33,Name:undefined},{Ordinal:24,ParentCategoryID:55,Name:"Clara"},{Ordinal:11,ParentCategoryID:55,Name:"Runna"},{Ordinal:11,ParentCategoryID:55,Name:"Inta"},{Ordinal:11,ParentCategoryID:55,Name:"333"},{Ordinal:11,ParentCategoryID:55,Name:"333"},{Ordinal:88,ParentCategoryID:22,Name:undefined},{Ordinal:88,ParentCategoryID:33,Name:undefined},{Ordinal:88,ParentCategoryID:55,Name:undefined}],nt=ti.AsEnumerable().OrderBy(wr=>wr.Ordinal,false).ThenBy(br=>br.ParentCategoryID,true).ThenBy(kr=>kr.Name,false).Skip(2).OrderBy(()=>1).ThenBy(dr=>dr.ParentCategoryID,true).ThenBy(gr=>gr.Ordinal),tt=nt.Select(nu=>nu.Ordinal+", "+nu.ParentCategoryID+", "+nu.Name).ToStringJoined("|");if(tt!="11, 55, Anthon|11, 55, Inta|11, 55, Runna|24, 55, 666|24, 55, Clara|88, 55, undefined|88, 55, undefined|11, 33, undefined|24, 33, undefined|88, 33, undefined|88, 33, Mark|11, 22, undefined|24, 22, undefined|24, 22, 555|24, 22, SomeName|88, 22, undefined|11, 5, undefined|11, 5, undefined|11, 5, |11, 5, 111|11, 5, 222|11, 5, 333"){throw new Error("Self test failed in Calysto.List test 3. Result: "+tt);}if(l=nt.Count(),l!=22){throw new Error("Self test failed in Calysto.List test 5. Result: "+l);}var i=["auto","autoo","aut","buton","1","2"].AsEnumerable().OrderBy(tu=>tu).ToArray().join(", "),it=["auto","autoo","aut","buton","1","2","3"].AsEnumerable().OrderBy(iu=>iu).ToArray().join(", "),rt=["auao","autoo","aut","buton","1","2","3"].AsEnumerable().OrderBy(ru=>ru).ToArray().join(", "),ut=[undefined,1,NaN,null,"auto","autoo","aut","buton","1","2",3,NaN,undefined].AsEnumerable().OrderBy(uu=>uu).ToArray().join(", ");if(i!="1, 2, aut, auto, autoo, buton"){throw new Error("Self test failed in OrderBy test 1, result: "+i);}if(it!="1, 2, 3, aut, auto, autoo, buton"){throw new Error("Self test failed in OrderBy test 2, result: "+it);}if(rt!="1, 2, 3, auao, aut, autoo, buton"){throw new Error("Self test failed in OrderBy test 3, result: "+rt);}if(ut!=", , , NaN, NaN, 1, 3, 1, 2, aut, auto, autoo, buton"){throw new Error("Self test failed in OrderBy test 4, result: "+ut);}var u="987654321".ToCharArray().AsEnumerable().Cycle(600).Select((fu,eu)=>({ch:fu.charCodeAt(0),fromByte:eu%4})).Take(100).OrderByDescending(function(ou){return ou.ch}).Select(function(su,hu){return{ch:su.ch,fromByte:su.fromByte,toByte:hu}}).ToList(),ft=u.Select(function(cu){return cu.ch+"_"+cu.fromByte+"_"+cu.toByte}).ToArray(),et=u.OrderBy(lu=>lu.ch).ThenBy(au=>au.fromByte).Select(function(vu){return vu.ch+"_"+vu.fromByte+"_"+vu.toByte}).ToArray(),ot=u.OrderBy(yu=>yu.ch).ThenByDescending(pu=>pu.fromByte).ThenByDescending(wu=>wu.toByte).Select(function(bu){return bu.ch+"_"+bu.fromByte+"_"+bu.toByte}).ToArray(),st=u.OrderBy(ku=>ku.ch).ThenBy(du=>du.fromByte).ThenByDescending(gu=>gu.toByte).Select(function(nf){return nf.ch+"_"+nf.fromByte+"_"+nf.toByte}).ToArray(),ht=u.OrderByDescending(tf=>tf.ch).ThenByDescending(rf=>rf.fromByte).ThenBy(uf=>uf.toByte).Select(function(ff){return ff.ch+"_"+ff.fromByte+"_"+ff.toByte}).ToArray();if(ft.join(", ")!="57_0_0, 57_1_1, 57_2_2, 57_3_3, 57_0_4, 57_1_5, 57_2_6, 57_3_7, 57_0_8, 57_1_9, 57_2_10, 57_3_11, 56_1_12, 56_2_13, 56_3_14, 56_0_15, 56_1_16, 56_2_17, 56_3_18, 56_0_19, 56_1_20, 56_2_21, 56_3_22, 55_2_23, 55_3_24, 55_0_25, 55_1_26, 55_2_27, 55_3_28, 55_0_29, 55_1_30, 55_2_31, 55_3_32, 55_0_33, 54_3_34, 54_0_35, 54_1_36, 54_2_37, 54_3_38, 54_0_39, 54_1_40, 54_2_41, 54_3_42, 54_0_43, 54_1_44, 53_0_45, 53_1_46, 53_2_47, 53_3_48, 53_0_49, 53_1_50, 53_2_51, 53_3_52, 53_0_53, 53_1_54, 53_2_55, 52_1_56, 52_2_57, 52_3_58, 52_0_59, 52_1_60, 52_2_61, 52_3_62, 52_0_63, 52_1_64, 52_2_65, 52_3_66, 51_2_67, 51_3_68, 51_0_69, 51_1_70, 51_2_71, 51_3_72, 51_0_73, 51_1_74, 51_2_75, 51_3_76, 51_0_77, 50_3_78, 50_0_79, 50_1_80, 50_2_81, 50_3_82, 50_0_83, 50_1_84, 50_2_85, 50_3_86, 50_0_87, 50_1_88, 49_0_89, 49_1_90, 49_2_91, 49_3_92, 49_0_93, 49_1_94, 49_2_95, 49_3_96, 49_0_97, 49_1_98, 49_2_99"){throw new Error("Self test failed in Calysto.OrderBy test 4. res1: "+ft.join(", "));}if(et.join(", ")!="49_0_89, 49_0_93, 49_0_97, 49_1_90, 49_1_94, 49_1_98, 49_2_91, 49_2_95, 49_2_99, 49_3_92, 49_3_96, 50_0_79, 50_0_83, 50_0_87, 50_1_80, 50_1_84, 50_1_88, 50_2_81, 50_2_85, 50_3_78, 50_3_82, 50_3_86, 51_0_69, 51_0_73, 51_0_77, 51_1_70, 51_1_74, 51_2_67, 51_2_71, 51_2_75, 51_3_68, 51_3_72, 51_3_76, 52_0_59, 52_0_63, 52_1_56, 52_1_60, 52_1_64, 52_2_57, 52_2_61, 52_2_65, 52_3_58, 52_3_62, 52_3_66, 53_0_45, 53_0_49, 53_0_53, 53_1_46, 53_1_50, 53_1_54, 53_2_47, 53_2_51, 53_2_55, 53_3_48, 53_3_52, 54_0_35, 54_0_39, 54_0_43, 54_1_36, 54_1_40, 54_1_44, 54_2_37, 54_2_41, 54_3_34, 54_3_38, 54_3_42, 55_0_25, 55_0_29, 55_0_33, 55_1_26, 55_1_30, 55_2_23, 55_2_27, 55_2_31, 55_3_24, 55_3_28, 55_3_32, 56_0_15, 56_0_19, 56_1_12, 56_1_16, 56_1_20, 56_2_13, 56_2_17, 56_2_21, 56_3_14, 56_3_18, 56_3_22, 57_0_0, 57_0_4, 57_0_8, 57_1_1, 57_1_5, 57_1_9, 57_2_2, 57_2_6, 57_2_10, 57_3_3, 57_3_7, 57_3_11"){throw new Error("Self test failed in Calysto.OrderBy test 4. res2: "+et.join(", "));}if(ot.join(", ")!="49_3_96, 49_3_92, 49_2_99, 49_2_95, 49_2_91, 49_1_98, 49_1_94, 49_1_90, 49_0_97, 49_0_93, 49_0_89, 50_3_86, 50_3_82, 50_3_78, 50_2_85, 50_2_81, 50_1_88, 50_1_84, 50_1_80, 50_0_87, 50_0_83, 50_0_79, 51_3_76, 51_3_72, 51_3_68, 51_2_75, 51_2_71, 51_2_67, 51_1_74, 51_1_70, 51_0_77, 51_0_73, 51_0_69, 52_3_66, 52_3_62, 52_3_58, 52_2_65, 52_2_61, 52_2_57, 52_1_64, 52_1_60, 52_1_56, 52_0_63, 52_0_59, 53_3_52, 53_3_48, 53_2_55, 53_2_51, 53_2_47, 53_1_54, 53_1_50, 53_1_46, 53_0_53, 53_0_49, 53_0_45, 54_3_42, 54_3_38, 54_3_34, 54_2_41, 54_2_37, 54_1_44, 54_1_40, 54_1_36, 54_0_43, 54_0_39, 54_0_35, 55_3_32, 55_3_28, 55_3_24, 55_2_31, 55_2_27, 55_2_23, 55_1_30, 55_1_26, 55_0_33, 55_0_29, 55_0_25, 56_3_22, 56_3_18, 56_3_14, 56_2_21, 56_2_17, 56_2_13, 56_1_20, 56_1_16, 56_1_12, 56_0_19, 56_0_15, 57_3_11, 57_3_7, 57_3_3, 57_2_10, 57_2_6, 57_2_2, 57_1_9, 57_1_5, 57_1_1, 57_0_8, 57_0_4, 57_0_0"){throw new Error("Self test failed in Calysto.OrderBy test 4. res3: "+ot.join(", "));}if(st.join(", ")!="49_0_97, 49_0_93, 49_0_89, 49_1_98, 49_1_94, 49_1_90, 49_2_99, 49_2_95, 49_2_91, 49_3_96, 49_3_92, 50_0_87, 50_0_83, 50_0_79, 50_1_88, 50_1_84, 50_1_80, 50_2_85, 50_2_81, 50_3_86, 50_3_82, 50_3_78, 51_0_77, 51_0_73, 51_0_69, 51_1_74, 51_1_70, 51_2_75, 51_2_71, 51_2_67, 51_3_76, 51_3_72, 51_3_68, 52_0_63, 52_0_59, 52_1_64, 52_1_60, 52_1_56, 52_2_65, 52_2_61, 52_2_57, 52_3_66, 52_3_62, 52_3_58, 53_0_53, 53_0_49, 53_0_45, 53_1_54, 53_1_50, 53_1_46, 53_2_55, 53_2_51, 53_2_47, 53_3_52, 53_3_48, 54_0_43, 54_0_39, 54_0_35, 54_1_44, 54_1_40, 54_1_36, 54_2_41, 54_2_37, 54_3_42, 54_3_38, 54_3_34, 55_0_33, 55_0_29, 55_0_25, 55_1_30, 55_1_26, 55_2_31, 55_2_27, 55_2_23, 55_3_32, 55_3_28, 55_3_24, 56_0_19, 56_0_15, 56_1_20, 56_1_16, 56_1_12, 56_2_21, 56_2_17, 56_2_13, 56_3_22, 56_3_18, 56_3_14, 57_0_8, 57_0_4, 57_0_0, 57_1_9, 57_1_5, 57_1_1, 57_2_10, 57_2_6, 57_2_2, 57_3_11, 57_3_7, 57_3_3"){throw new Error("Self test failed in Calysto.OrderBy test 4. res4: "+st.join(", "));}if(ht.join(", ")!="57_3_3, 57_3_7, 57_3_11, 57_2_2, 57_2_6, 57_2_10, 57_1_1, 57_1_5, 57_1_9, 57_0_0, 57_0_4, 57_0_8, 56_3_14, 56_3_18, 56_3_22, 56_2_13, 56_2_17, 56_2_21, 56_1_12, 56_1_16, 56_1_20, 56_0_15, 56_0_19, 55_3_24, 55_3_28, 55_3_32, 55_2_23, 55_2_27, 55_2_31, 55_1_26, 55_1_30, 55_0_25, 55_0_29, 55_0_33, 54_3_34, 54_3_38, 54_3_42, 54_2_37, 54_2_41, 54_1_36, 54_1_40, 54_1_44, 54_0_35, 54_0_39, 54_0_43, 53_3_48, 53_3_52, 53_2_47, 53_2_51, 53_2_55, 53_1_46, 53_1_50, 53_1_54, 53_0_45, 53_0_49, 53_0_53, 52_3_58, 52_3_62, 52_3_66, 52_2_57, 52_2_61, 52_2_65, 52_1_56, 52_1_60, 52_1_64, 52_0_59, 52_0_63, 51_3_68, 51_3_72, 51_3_76, 51_2_67, 51_2_71, 51_2_75, 51_1_70, 51_1_74, 51_0_69, 51_0_73, 51_0_77, 50_3_78, 50_3_82, 50_3_86, 50_2_81, 50_2_85, 50_1_80, 50_1_84, 50_1_88, 50_0_79, 50_0_83, 50_0_87, 49_3_92, 49_3_96, 49_2_91, 49_2_95, 49_2_99, 49_1_90, 49_1_94, 49_1_98, 49_0_89, 49_0_93, 49_0_97"){throw new Error("Self test failed in Calysto.OrderBy test 4. res5: "+ht.join(", "));}ct=new Calysto.List(["word1 word2 word3","this is next","menu item three"]).Cycle(10).Select((ef,of)=>({Key:of,Value:ef})).SkipWhile(sf=>sf.Key<2).TakeWhile(hf=>hf.Key<26).Select(cf=>cf.Key+"_"+cf.Value).ToStringJoined(),Calysto.TestTools.UnitTesting.Assert.AreEqual("2_menu item three3_word1 word2 word34_this is next5_menu item three6_word1 word2 word37_this is next8_menu item three9_word1 word2 word3",ct);var n=Calysto.DomQuery.FromHtml('<div class="search_v2" style="margin-right: 5px;" >\t\t<form id="form_search" name="search_main" onsubmit="return check_search_box_keyword()" action="/index.php" method="get">\t\t\t<input name="ctl" type="hidden" value=" ddfe nedgd search2iio" style="display: none" calysto-num="45"/>\t\t\t<label calysto-num="55" for="f_keywords">Upiši pojam...<\/label>\t\t\t<input name="f_keywords" id="f_keywords" type="text" style="width: 263px" onfocus="javascript:reset_search_style()" />\t\t\t<input calysto-num="25" class="mini_button" type="submit" value="Tražiiio" />\t\t\t<img alt="Beta" style="float: left; margin-top: -3px; padding-left: 5px;" />\t\t<\/form>\t<\/div>\t<div class="clear1" ><\/div>\t<div class="clear" ><\/div>'),ii=[n.Query("div:is(>>input[name='ctl'])").Count(),n.Query("div:not(>>input[name=ctl])").Count(),n.Query("//input[type=hidden]").Count(),n.Query("//input[type]").Count(),n.Query("//[type]").Count(),n.Query("//[value^=Tra]").Count(),n.Query("//[value$=io]").Count(),n.Query("//[value~=ddfe]").Count(),n.Query("//[calysto-num]").Count(),n.Query("//[calysto-num==25]").Count(),n.Query("//[calysto-num > 25]").Count(),n.Query("//[calysto-num <= 45]").Count(),n.Query("div:not(>input[name])").Count()],lt=ii.join(", ");if(lt!="1, 2, 1, 3, 3, 1, 2, 1, 3, 1, 2, 2, 3"){throw new Error("error in Calysto.DomQuery attribute test, result: "+lt);}if(a=n.Select(lf=>lf.tagName).Where(af=>!!af).ToStringJoined(", ").toLowerCase(),a!="div, div, div"){throw new Error("error in Calysto.DomQuery test1, result: "+a);}if(v=n.DescendantNodes().Query("form>label, a, IMG, input.mini_button").Select(vf=>vf.tagName+vf.id+vf.name+vf.className).ToStringJoined(", ").toLowerCase(),v!="labelundefined, img, inputmini_button"){throw new Error("self test failed in Calysto.DomQuery test2a, result: "+v);}var at='<div><span id="col333" style="background-color:aliceblue">fdsa<\/span> <span><\/span>   <div id="dd1" style="overflow:hidden; border:solid 1px red; width:900px; height:65px; position:absolute; margin-top:0;; top:200px; left:200px; background:red; "> prvi<\/div>\t<div>drugi<\/div>\t<div hrEF="hadsfmojurlfasd">treci<p><a class="mmkk" href="http://www.dd.com/somemylink1">moj link<\/a><\/p><\/div>\t<div hrEF="hadsfmojurlfasd">treci<p><a class="mmkk" href="http://www.dd.com/somemylink2">moj link<\/a><\/p><\/div>\t<div hrEF="hadsfmojurlfasd">treci<p><a class="mmkk" href="http://www.dd.com/somemylink31">moj link<\/a><a class="mmkk" href="http://www.dd.com/somemylink32">moj link<\/a><a class="mmkk" href="http://www.dd.com/somemylink33">moj link<\/a><\/p><\/div>\t<div>cetvrti<\/div>\t<div id="hh">peti<\/div><\/div>',hi=Calysto.DomQuery.FromHtml(at),y=Calysto.DomQuery.FromSelector(document.documentElement).InsertChildren(at).ChildNodes().Take(1),vt=y.DescendantNodes().Query("div>>a:reverse:take(4):skip(1):reverse").SelectAttribute("hrEF").ToStringJoined(", ");if(vt!="http://www.dd.com/somemylink2, http://www.dd.com/somemylink31, http://www.dd.com/somemylink32"){throw new Error("Self test failed in Calysto.DomQuery test3. Result: "+vt);}if(f=$$calysto("#col333").SelectStyle("background-color").FirstOrDefault(),f!="rgb(240, 248, 255)"&&f!="aliceblue"){throw new Error("Self test failed in Calysto.DomQuery test5. Result: "+f+", expected: rgb(240, 248, 255)");}t=y.DescendantNodes().Query("#dd1"),yt=t.SelectStyle("height").FirstOrDefault(),t.ApplyStyleMap({width:"950px",opacity:"-=60",height:"+=500"});var ri=t.SelectStyle("height").FirstOrDefault(),ui=t.SelectStyle("width").FirstOrDefault(),fi=t.SelectStyle("opacity").FirstOrDefault(),pt=$$calysto([yt,ri,ui,fi]).ToStringJoined(", ");if(pt!="65, 565, 950, 40"){throw new Error("Self test failed in Calysto.DomQuery test4. Result: "+pt);}if(t.ToAnimator({height:"+=460",opacity:"-=10"}).Easing("easeInOutExpo").OnComplete(yf=>{var pf=yf.AsDomQuery(),bf=pf.SelectStyle("opacity").FirstOrDefault(),kf=pf.SelectStyle("height").FirstOrDefault(),wf=$$calysto([bf]).ToStringJoined(", ");if(wf!="30"){throw new Error("Self test failed in Animator element style test. Result: "+wf);}else console.log("Animator element style test successful")}).Start(),ei=(new Calysto.Animator).AddValue(100,500).OnComplete(df=>{var gf=df.Items().Select(ne=>ne.numCurrent).pop();if(gf==500){console.log("Animator numeric value test successful")}else throw new Error("Self test failed in Animator numeric value test. Result: "+gf);}).Start(),p=t.PreviousSiblings().Where(te=>te.nodeType!=3).Count(),p!=2){throw new Error("Self test failed in Calysto.DomQuery test6. Result: "+p);}if(w=t.NextSiblings().Where(ie=>ie.nodeType!=3).Count(),w!=6){throw new Error("Self test failed in Calysto.DomQuery test7. Result: "+w);}if(y.RemoveFromDom(),b="my text is this".TakeFirst(9,"..."),k="my text is this".TakeLast(9,"..."),b!="my tex..."){throw new Error("Self test failed in String.TakeLast, result: "+b);}if(k!="...s this"){throw new Error("Self test failed in String.TakeFirst, result: "+k);}r=Calysto.DomQuery.CreateElement("div").ApplyStyle("border:solid 1px blue; padding:5px;position:absolute;").AddAsChildrenTo(document.documentElement).AddChildren("<div style='position:absolute;border:solid 10px red;'>this is my div11<\/div>"),r.ChildNodes().ApplyStyle("border:solid 1px green; padding:5px;").InsertBefore(Calysto.DomQuery.CreateElement("div").ApplyStyle("border:15px solid red;").ForEach(re=>re.innerHTML="div 2"),Calysto.DomQuery.CreateElement("div").ApplyStyle("border:15px solid red;").ForEach(ue=>ue.innerHTML="div 3"),Calysto.DomQuery.CreateElement("div").ApplyStyle("border:25px solid red;").ForEach(fe=>fe.innerHTML="div 4"),"<div>prvi div<\/div><div class='hhret435' style='border:solid 18px blue;width:200px;padding:5px;'>drugi div<\/div><div>third div11<\/div>","this is some text node",Calysto.DomQuery.CreateElement("div").ApplyStyle("border:5px solid red;width:auto;").ForEach(ee=>ee.innerHTML="div 5"));var wt=r.DescendantNodes("div").ToArray(),bt=r.DescendantNodes().WhereStyle("border-top-width",oe=>oe==18).ToArray(),kt=r.DescendantNodes().WhereStyle("width",se=>se==236).ToArray(),oi=r.DescendantNodes().SelectStyle("box-sizing").Where(function(he){return he=="border-box"}).Any();if(r.RemoveFromDom(),wt.length!=8){throw new Error("Self test dd00 failed in Calysto.DomQuery, result: "+wt.length);}if(bt.length!=1){throw new Error("Self test dd11 failed in Calysto.DomQuery, result: "+bt.length);}if(dt=Calysto.Features.GetBrowser().KindName=="MSIE"&&Calysto.Features.GetBrowser().Version<=8,kt.length!=1&&!dt&&!oi){throw new Error("Self test dd12 failed in Calysto.DomQuery, result: "+kt.length);}n=Calysto.DomQuery.CreateElement("div"),n.ApplyStyle("border:solid 1px blue; padding:5px;").AddChildren("<div style='position:absolute;border:solid 10px red;'>this is my div<\/div>").ChildNodes().ApplyStyle("border:solid 1px green; padding:5px;").InsertBefore(Calysto.DomQuery.CreateElement("div").ApplyStyle("border:5px solid red;").ForEach(ce=>ce.innerHTML="div 2"),Calysto.DomQuery.CreateElement("div").ApplyStyle("border:5px solid red;").ForEach(le=>le.innerHTML="div 3"),Calysto.DomQuery.CreateElement("div").ApplyStyle("border:5px solid red;").ForEach(ae=>ae.innerHTML="div 4"),"<div>first div<\/div><div>second div<\/div><div>third div<\/div>","some text node 4325",Calysto.DomQuery.CreateElement("div").ApplyStyle("border:5px solid red;").ForEach(ve=>ve.innerHTML="div 5")).ParentNodes().DescendantNodes().ApplyStyle("margin:5px;").Where(ye=>ye.childNodes&&ye.childNodes.length==1);var ci=n.Select(function(pe){return pe.innerHTML.replace(/<[^>]+>/g,"")}).FirstOrDefault(),si=n.DescendantNodes().Where(we=>we.nodeType==1).Select(be=>be.nodeValue||be.innerHTML).ToList(),gt=si.ToStringJoined(", ");if(gt!="div 2, div 3, div 4, first div, second div, third div, div 5, this is my div"){throw new Error("SelfTest failed in test #html1, result: "+gt);}console.log("DomQuery test successful")}),Calysto.TestTools.TestRunner.AddTest(()=>{var n='{"OriginalFilename":"20.mp4","GuidFilename":"f553f4ac-0fda-486a-d501-f23afe25fb33.mp4","CreationDate":{"__calystotype":"Calysto_Date","Date":"2016-02-08 12:43:45.512"},"Size":405758,"Duration":5.534,"Description":"ywert","Items":[{"Url":"http://cms.24sata.hr/api/video-upload/get-media-id/","PostData":{"filename":"20.mp4","description":"ywert"},"ResponseXml":null,"Command":1,"FileID":null,"Extension":".mp4","Message":"The remote server returned an error: (403) Forbidden.","Path":null}],"FtpUploaders":[]}{"OriginalFilename":"120.mp4","GuidFilename":"f553f4ac-0fda-486a-d501-f23afe25fb33.mp4","CreationDate":{"__calystotype":"Calysto_Date","Date":"2016-02-08 12:43:45.512"},"Size":405758,"Duration":5.534,"Description":"ywert","Items":[{"Url":"http://cms.24sata.hr/api/video-upload/get-media-id/","PostData":{"filename":"20.mp4","description":"ywert"},"ResponseXml":null,"Command":1,"FileID":null,"Extension":".mp4","Message":"The remote server returned an error: (403) Forbidden.","Path":null}],"FtpUploaders":[]}{"OriginalFilename":"20.mp4","GuidFilename":"f553f4ac-0fda-486a-d501-f23afe25fb33.mp4","CreationDate":{"__calystotype":"Calysto_Date","Date":"2016-02-08 12:43:45.512"},"Size":405758,"Duration":5.534,"Description":"ywert","Items":[{"Url":"http://cms.24sata.hr/api/video-upload/get-media-id/","PostData":{"filename":"20.mp4","description":"ywert"},"ResponseXml":null,"Command":1,"FileID":null,"Extension":".mp4","Message":"The remote server returned an error: (403) Forbidden.","Path":null}],"FtpUploaders":[]}{"OriginalFilename":"120.mp4","GuidFilename":"f553f4ac-0fda-486a-d501-f23afe25fb33.mp4","CreationDate":{"__calystotype":"Calysto_Date","Date":"2016-02-08 12:43:45.512"},"Size":405758,"Duration":5.534,"Description":"ywert","Items":[{"Url":"http://cms.24sata.hr/api/video-upload/get-media-id/","PostData":{"filename":"20.mp4","description":"ywert"},"ResponseXml":null,"Command":1,"FileID":null,"Extension":".mp4","Message":"The remote server returned an error: (403) Forbidden.","Path":null}],"FtpUploaders":[]}{"OriginalFilename":"20.mp4","GuidFilename":"f553f4ac-0fda-486a-d501-f23afe25fb33.mp4","CreationDate":{"__calystotype":"Calysto_Date","Date":"2016-02-08 12:43:45.512"},"Size":405758,"Duration":5.534,"Description":"ywert","Items":[{"Url":"http://cms.24sata.hr/api/video-upload/get-media-id/","PostData":{"filename":"20.mp4","description":"ywert"},"ResponseXml":null,"Command":1,"FileID":null,"Extension":".mp4","Message":"The remote server returned an error: (403) Forbidden.","Path":null}],"FtpUploaders":[]}{"OriginalFilename":"120.mp4","GuidFilename":"f553f4ac-0fda-486a-d501-f23afe25fb33.mp4","CreationDate":{"__calystotype":"Calysto_Date","Date":"2016-02-08 12:43:45.512"},"Size":405758,"Duration":5.534,"Description":"ywert","Items":[{"Url":"http://cms.24sata.hr/api/video-upload/get-media-id/","PostData":{"filename":"20.mp4","description":"ywert"},"ResponseXml":null,"Command":1,"FileID":null,"Extension":".mp4","Message":"The remote server returned an error: (403) Forbidden.","Path":null}],"FtpUploaders":[]}{"OriginalFilename":"20.mp4","GuidFilename":"f553f4ac-0fda-486a-d501-f23afe25fb33.mp4","CreationDate":{"__calystotype":"Calysto_Date","Date":"2016-02-08 12:43:45.512"},"Size":405758,"Duration":5.534,"Description":"ywert","Items":[{"Url":"http://cms.24sata.hr/api/video-upload/get-media-id/","PostData":{"filename":"20.mp4","description":"ywert"},"ResponseXml":null,"Command":1,"FileID":null,"Extension":".mp4","Message":"The remote server returned an error: (403) Forbidden.","Path":null}],"FtpUploaders":[]}',r=new Calysto.Utility.StringCompressor,t=r.Compress(n),i;if(t==n){throw new Error("StringCompressor selftest error, compressed result: "+t);}if(i=r.Decompress(t),i!=n){throw new Error("StringCompressor selftest error, decompressed result: "+i);}console.log("StringCompressor test succesful")}),Calysto.TestTools.TestRunner.AddTest(()=>{var i=new Calysto.Security.Cryptography.SimpleEncryptor("lozinka"),n=Calysto.Utility.Encoding.RfcBase64.EncodeToBase64String(i.Encrypt("this is my text čćžđš")),t;if(n!="LNnDGAHDGAFAkAEs5E8sAZMtkxl1IZNRdX4="){throw new Error("SimpleEncryptor.Encrypt() error, result: "+n);}if(t=i.DecryptToString(Calysto.Utility.Encoding.RfcBase64.DecodeBase64StringToArray(n)),t!="this is my text čćžđš"){throw new Error("SimpleEncryptor.Decrypt() error, result: "+t);}console.log("SimpleEncryptor test succesful")}),Calysto.TestTools.TestRunner.AddTest(()=>{var n=[Calysto.Validate.IsEmail("myname@mfsd"),Calysto.Validate.IsEmail("myname@mfsd.com"),Calysto.Validate.IsEmail("myname.me@mfsd"),Calysto.Validate.IsEmail("myname.me@mfsd.com"),"---",Calysto.Validate.CanConvertToNumber("gasdfg"),Calysto.Validate.CanConvertToNumber("gasdf432523"),Calysto.Validate.CanConvertToNumber("234.532"),Calysto.Validate.CanConvertToNumber("23,4532.63"),"---",Calysto.Validate.CanConvertToDecimal("234.532"),Calysto.Validate.ContainsNumber("f423gsda6234"),"---",Calysto.Validate.CanConvertToInteger("-432.652354"),Calysto.Validate.IsIPv4Address("4234"),Calysto.Validate.IsIPv4Address("234"),Calysto.Validate.IsIPv4Address("234.23.4.5"),Calysto.Validate.IsIPv4Address("234.23.4")];if(n.join(";")!="false;true;false;true;---;false;false;true;true;---;true;true;---;false;false;false;true;false"){throw new Error("Validate error, result: "+n.join(";"));}console.log("Validate test successful")}),Calysto.TestTools.TestRunner.AddTest(()=>{function n(t,i){let r=Object.getOwnPropertyNames(t).Select(u=>u+":::"+t[u]).ToStringJoined(";;;");if(r!=i){throw new Error("Uri error, expected: "+i+", result: "+r);}}n(new Calysto.Uri("https://85.114.41.97/"),"Scheme:::https;;;Username:::;;;Password:::;;;Host:::85.114.41.97;;;Port:::;;;Path:::/;;;Query:::;;;Hash:::"),n(new Calysto.Uri("http://domena.com:43/nesto/dva/dru.aspx?qu=3&gr=3#dd=rel"),"Scheme:::http;;;Username:::;;;Password:::;;;Host:::domena.com;;;Port:::43;;;Path:::/nesto/dva/dru.aspx;;;Query:::?qu=3&gr=3;;;Hash:::#dd=rel"),n(new Calysto.Uri("http://domaena.com:233/../dva.aspx?a=10&b=22#dva"),"Scheme:::http;;;Username:::;;;Password:::;;;Host:::domaena.com;;;Port:::233;;;Path:::/../dva.aspx;;;Query:::?a=10&b=22;;;Hash:::#dva"),n(new Calysto.Uri("http://domain.com/?m=10"),"Scheme:::http;;;Username:::;;;Password:::;;;Host:::domain.com;;;Port:::;;;Path:::/;;;Query:::?m=10;;;Hash:::"),n(new Calysto.Uri("http://username:password@www.nesto.com:1233/mypath/bill.aspx?a=10&b=20#c=3&c=4"),"Scheme:::http;;;Username:::username;;;Password:::password;;;Host:::www.nesto.com;;;Port:::1233;;;Path:::/mypath/bill.aspx;;;Query:::?a=10&b=20;;;Hash:::#c=3&c=4"),n(new Calysto.Uri("/"),"Scheme:::;;;Username:::;;;Password:::;;;Host:::;;;Port:::;;;Path:::/;;;Query:::;;;Hash:::"),n(new Calysto.Uri("/some/path.aspx"),"Scheme:::;;;Username:::;;;Password:::;;;Host:::;;;Port:::;;;Path:::/some/path.aspx;;;Query:::;;;Hash:::"),n(new Calysto.Uri("?q=13&b=32"),"Scheme:::;;;Username:::;;;Password:::;;;Host:::;;;Port:::;;;Path:::;;;Query:::?q=13&b=32;;;Hash:::"),console.log("Uri test successful")}),Calysto.TestTools.TestRunner.AddTest(()=>{let t=[],n=(new Calysto.MulticastDelegate).OnAdd(r=>{t.push("in_OnAdd"),r("ante",10,false)}).AsFunc({Prop1:true,Prop2:false});n((u,f,e)=>{t.push("Invocation"),t.push({name:u,age:f,isWhite:e})}),n.Invoke(o=>o("jura",22,true)),n.Invoke(s=>s("karmen",55,false)),n.Invoke(h=>h("junior",11,true)),n.Invoke();let i=Calysto.Json.Serialize(t);if(i!=`["in_OnAdd","Invocation",{"name":"ante","age":10,"isWhite":false},"Invocation",{"name":"jura","age":22,"isWhite":true},"Invocation",{"name":"karmen","age":55,"isWhite":false},"Invocation",{"name":"junior","age":11,"isWhite":true},"Invocation",{"name":null,"age":null,"isWhite":null}]`){throw new Error("Error in Calysto.MulticastDelegate, result1: "+i);}console.log("MulticastDelegate test successful")}),Calysto.TestTools.TestRunner.AddTest(()=>{let t=Calysto.Globalization.CultureInfo.CurrentCulture;Calysto.Globalization.CultureInfo.CurrentCulture=Calysto.Globalization.CultureInfo.USCulture;let n=Calysto.Resources.CalystoLang.ResourceProvider;Calysto.TestTools.UnitTesting.Assert.AreEqual("Invocation forbidden",n.GetString("MethodInvocationFobidden")),Calysto.TestTools.UnitTesting.Assert.AreEqual("Invocation forbidden",n.GetString("MethodInvocationFobidden",["en-US"])),Calysto.TestTools.UnitTesting.Assert.AreEqual("Nemate dozvolu za ovu akciju",n.GetString("MethodInvocationFobidden",["hr-HR"])),Calysto.TestTools.UnitTesting.Assert.ThrowsException(()=>n.GetString("MethodInvocationFobidden",["nonexisting property"])),Calysto.TestTools.UnitTesting.Assert.AreEqual("Please wait, page is reloading...",n.GetString("PageIsReloadingPleaseWait")),Calysto.TestTools.UnitTesting.Assert.AreEqual("Please wait, page is reloading...",n.GetString("PageIsReloadingPleaseWait",["en-US"])),Calysto.TestTools.UnitTesting.Assert.AreEqual("Molimo pričekajte, stranica se osvježava...",n.GetString("PageIsReloadingPleaseWait",["hr-HR"])),Calysto.TestTools.UnitTesting.Assert.ThrowsException(()=>n.GetString("PageIsReloadingPleaseWait",["nonexisting property"])),Calysto.Globalization.CultureInfo.CurrentCulture=t}),function(n){var t;(function(i){n.TestTools.TestRunner.AddTest(()=>__awaiter(this,void 0,void 0,function*(){function r(u,f){return __awaiter(this,void 0,void 0,function*(){function s(){return __awaiter(this,void 0,void 0,function*(){return new f(c=>{e.push("#1"),setTimeout(()=>c("success1"),o)}).then(l=>{e.push("#2"),e.push(l);return l}).then(a=>{e.push("#3"),e.push(a);return new f(v=>{setTimeout(()=>{e.push("#4"),v("success2222")},o)})}).then(y=>{e.push("#5"),e.push(y);return new f(p=>{setTimeout(()=>{e.push("#6"),p("success1111")},o)})}).catch(w=>{e.push("#7"),e.push(w);return"dva"}).finally(()=>{e.push("#8");return"amd"})})}function h(){return __awaiter(this,void 0,void 0,function*(){let b=yield s();e.push(b)})}let o=200,e=[];e.push("s0"),h(),e.push("s1"),setTimeout(()=>{let k=e.ToStringJoined(", ");n.TestTools.UnitTesting.Assert.AreEqual("s0, #1, s1, s2, s3, #2, success1, #3, success1, #4, #5, success2222, #6, #8, success1111",k),console.log(u+" test successful")},o*3.5),e.push("s2"),setTimeout(()=>{let d=e.ToStringJoined(", ");n.TestTools.UnitTesting.Assert.AreEqual("s0, #1, s1, s2, s3, #2, success1, #3, success1, #4, #5, success2222",d)},o*2.5),e.push("s3"),setTimeout(()=>{let g=e.ToStringJoined(", ");n.TestTools.UnitTesting.Assert.AreEqual("s0, #1, s1, s2, s3",g)},o*.5);return new f(nt=>{setTimeout(()=>nt(),o*4)})})}yield r("CPromise",i.CPromise);yield r("Promise",window.Promise)}))})(t=n.Tasks||(n.Tasks={}))}(Calysto||(Calysto={}))